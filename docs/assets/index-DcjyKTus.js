function t5(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in t)){const s=Object.getOwnPropertyDescriptor(r,o);s&&Object.defineProperty(t,o,s.get?s:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();var pi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function wte(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var o=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return t[r]}})}),n}var n5={exports:{}},lw={},r5={exports:{}},dt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zg=Symbol.for("react.element"),Ste=Symbol.for("react.portal"),kte=Symbol.for("react.fragment"),$te=Symbol.for("react.strict_mode"),Cte=Symbol.for("react.profiler"),Tte=Symbol.for("react.provider"),_te=Symbol.for("react.context"),Ite=Symbol.for("react.forward_ref"),Nte=Symbol.for("react.suspense"),Ete=Symbol.for("react.memo"),Ate=Symbol.for("react.lazy"),KF=Symbol.iterator;function Ote(t){return t===null||typeof t!="object"?null:(t=KF&&t[KF]||t["@@iterator"],typeof t=="function"?t:null)}var o5={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},s5=Object.assign,i5={};function xp(t,e,n){this.props=t,this.context=e,this.refs=i5,this.updater=n||o5}xp.prototype.isReactComponent={};xp.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};xp.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function a5(){}a5.prototype=xp.prototype;function EN(t,e,n){this.props=t,this.context=e,this.refs=i5,this.updater=n||o5}var AN=EN.prototype=new a5;AN.constructor=EN;s5(AN,xp.prototype);AN.isPureReactComponent=!0;var XF=Array.isArray,l5=Object.prototype.hasOwnProperty,ON={current:null},u5={key:!0,ref:!0,__self:!0,__source:!0};function c5(t,e,n){var r,o={},s=null,i=null;if(e!=null)for(r in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(s=""+e.key),e)l5.call(e,r)&&!u5.hasOwnProperty(r)&&(o[r]=e[r]);var a=arguments.length-2;if(a===1)o.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];o.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)o[r]===void 0&&(o[r]=a[r]);return{$$typeof:Zg,type:t,key:s,ref:i,props:o,_owner:ON.current}}function Pte(t,e){return{$$typeof:Zg,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function PN(t){return typeof t=="object"&&t!==null&&t.$$typeof===Zg}function Rte(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var YF=/\/+/g;function Q$(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Rte(""+t.key):e.toString(36)}function lb(t,e,n,r,o){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case Zg:case Ste:i=!0}}if(i)return i=t,o=o(i),t=r===""?"."+Q$(i,0):r,XF(o)?(n="",t!=null&&(n=t.replace(YF,"$&/")+"/"),lb(o,e,n,"",function(u){return u})):o!=null&&(PN(o)&&(o=Pte(o,n+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(YF,"$&/")+"/")+t)),e.push(o)),1;if(i=0,r=r===""?".":r+":",XF(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Q$(s,a);i+=lb(s,e,n,l,o)}else if(l=Ote(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Q$(s,a++),i+=lb(s,e,n,l,o);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function rv(t,e,n){if(t==null)return t;var r=[],o=0;return lb(t,r,"","",function(s){return e.call(n,s,o++)}),r}function Dte(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ho={current:null},ub={transition:null},Fte={ReactCurrentDispatcher:ho,ReactCurrentBatchConfig:ub,ReactCurrentOwner:ON};function d5(){throw Error("act(...) is not supported in production builds of React.")}dt.Children={map:rv,forEach:function(t,e,n){rv(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return rv(t,function(){e++}),e},toArray:function(t){return rv(t,function(e){return e})||[]},only:function(t){if(!PN(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};dt.Component=xp;dt.Fragment=kte;dt.Profiler=Cte;dt.PureComponent=EN;dt.StrictMode=$te;dt.Suspense=Nte;dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fte;dt.act=d5;dt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=s5({},t.props),o=t.key,s=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,i=ON.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)l5.call(e,l)&&!u5.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Zg,type:t.type,key:o,ref:s,props:r,_owner:i}};dt.createContext=function(t){return t={$$typeof:_te,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Tte,_context:t},t.Consumer=t};dt.createElement=c5;dt.createFactory=function(t){var e=c5.bind(null,t);return e.type=t,e};dt.createRef=function(){return{current:null}};dt.forwardRef=function(t){return{$$typeof:Ite,render:t}};dt.isValidElement=PN;dt.lazy=function(t){return{$$typeof:Ate,_payload:{_status:-1,_result:t},_init:Dte}};dt.memo=function(t,e){return{$$typeof:Ete,type:t,compare:e===void 0?null:e}};dt.startTransition=function(t){var e=ub.transition;ub.transition={};try{t()}finally{ub.transition=e}};dt.unstable_act=d5;dt.useCallback=function(t,e){return ho.current.useCallback(t,e)};dt.useContext=function(t){return ho.current.useContext(t)};dt.useDebugValue=function(){};dt.useDeferredValue=function(t){return ho.current.useDeferredValue(t)};dt.useEffect=function(t,e){return ho.current.useEffect(t,e)};dt.useId=function(){return ho.current.useId()};dt.useImperativeHandle=function(t,e,n){return ho.current.useImperativeHandle(t,e,n)};dt.useInsertionEffect=function(t,e){return ho.current.useInsertionEffect(t,e)};dt.useLayoutEffect=function(t,e){return ho.current.useLayoutEffect(t,e)};dt.useMemo=function(t,e){return ho.current.useMemo(t,e)};dt.useReducer=function(t,e,n){return ho.current.useReducer(t,e,n)};dt.useRef=function(t){return ho.current.useRef(t)};dt.useState=function(t){return ho.current.useState(t)};dt.useSyncExternalStore=function(t,e,n){return ho.current.useSyncExternalStore(t,e,n)};dt.useTransition=function(){return ho.current.useTransition()};dt.version="18.3.1";r5.exports=dt;var N=r5.exports;const K=Dt(N),ZF=t5({__proto__:null,default:K},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mte=N,Lte=Symbol.for("react.element"),zte=Symbol.for("react.fragment"),Bte=Object.prototype.hasOwnProperty,jte=Mte.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Vte={key:!0,ref:!0,__self:!0,__source:!0};function f5(t,e,n){var r,o={},s=null,i=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(i=e.ref);for(r in e)Bte.call(e,r)&&!Vte.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)o[r]===void 0&&(o[r]=e[r]);return{$$typeof:Lte,type:t,key:s,ref:i,props:o,_owner:jte.current}}lw.Fragment=zte;lw.jsx=f5;lw.jsxs=f5;n5.exports=lw;var M=n5.exports,p5={exports:{}},us={},h5={exports:{}},m5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,j){var G=F.length;F.push(j);e:for(;0<G;){var Y=G-1>>>1,X=F[Y];if(0<o(X,j))F[Y]=j,F[G]=X,G=Y;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var j=F[0],G=F.pop();if(G!==j){F[0]=G;e:for(var Y=0,X=F.length,ee=X>>>1;Y<ee;){var ie=2*(Y+1)-1,se=F[ie],de=ie+1,me=F[de];if(0>o(se,G))de<X&&0>o(me,se)?(F[Y]=me,F[de]=G,Y=de):(F[Y]=se,F[ie]=G,Y=ie);else if(de<X&&0>o(me,G))F[Y]=me,F[de]=G,Y=de;else break e}}return j}function o(F,j){var G=F.sortIndex-j.sortIndex;return G!==0?G:F.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,a=i.now();t.unstable_now=function(){return i.now()-a}}var l=[],u=[],c=1,d=null,f=3,p=!1,h=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(F){for(var j=n(u);j!==null;){if(j.callback===null)r(u);else if(j.startTime<=F)r(u),j.sortIndex=j.expirationTime,e(l,j);else break;j=n(u)}}function x(F){if(m=!1,b(F),!h)if(n(l)!==null)h=!0,B(w);else{var j=n(u);j!==null&&D(x,j.startTime-F)}}function w(F,j){h=!1,m&&(m=!1,y($),$=-1),p=!0;var G=f;try{for(b(j),d=n(l);d!==null&&(!(d.expirationTime>j)||F&&!E());){var Y=d.callback;if(typeof Y=="function"){d.callback=null,f=d.priorityLevel;var X=Y(d.expirationTime<=j);j=t.unstable_now(),typeof X=="function"?d.callback=X:d===n(l)&&r(l),b(j)}else r(l);d=n(l)}if(d!==null)var ee=!0;else{var ie=n(u);ie!==null&&D(x,ie.startTime-j),ee=!1}return ee}finally{d=null,f=G,p=!1}}var S=!1,k=null,$=-1,C=5,I=-1;function E(){return!(t.unstable_now()-I<C)}function O(){if(k!==null){var F=t.unstable_now();I=F;var j=!0;try{j=k(!0,F)}finally{j?R():(S=!1,k=null)}}else S=!1}var R;if(typeof v=="function")R=function(){v(O)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,L=z.port2;z.port1.onmessage=O,R=function(){L.postMessage(null)}}else R=function(){g(O,0)};function B(F){k=F,S||(S=!0,R())}function D(F,j){$=g(function(){F(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){h||p||(h=!0,B(w))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(f){case 1:case 2:case 3:var j=3;break;default:j=f}var G=f;f=j;try{return F()}finally{f=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,j){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var G=f;f=F;try{return j()}finally{f=G}},t.unstable_scheduleCallback=function(F,j,G){var Y=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?Y+G:Y):G=Y,F){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=G+X,F={id:c++,callback:j,priorityLevel:F,startTime:G,expirationTime:X,sortIndex:-1},G>Y?(F.sortIndex=G,e(u,F),n(l)===null&&F===n(u)&&(m?(y($),$=-1):m=!0,D(x,G-Y))):(F.sortIndex=X,e(l,F),h||p||(h=!0,B(w))),F},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(F){var j=f;return function(){var G=f;f=j;try{return F.apply(this,arguments)}finally{f=G}}}})(m5);h5.exports=m5;var Wte=h5.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ute=N,os=Wte;function he(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var g5=new Set,km={};function Kc(t,e){xf(t,e),xf(t+"Capture",e)}function xf(t,e){for(km[t]=e,t=0;t<e.length;t++)g5.add(e[t])}var Ha=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jT=Object.prototype.hasOwnProperty,Gte=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,QF={},JF={};function Hte(t){return jT.call(JF,t)?!0:jT.call(QF,t)?!1:Gte.test(t)?JF[t]=!0:(QF[t]=!0,!1)}function qte(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Kte(t,e,n,r){if(e===null||typeof e>"u"||qte(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function mo(t,e,n,r,o,s,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=i}var Pr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Pr[t]=new mo(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Pr[e]=new mo(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Pr[t]=new mo(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Pr[t]=new mo(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Pr[t]=new mo(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Pr[t]=new mo(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Pr[t]=new mo(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Pr[t]=new mo(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Pr[t]=new mo(t,5,!1,t.toLowerCase(),null,!1,!1)});var RN=/[\-:]([a-z])/g;function DN(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(RN,DN);Pr[e]=new mo(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(RN,DN);Pr[e]=new mo(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(RN,DN);Pr[e]=new mo(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Pr[t]=new mo(t,1,!1,t.toLowerCase(),null,!1,!1)});Pr.xlinkHref=new mo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Pr[t]=new mo(t,1,!1,t.toLowerCase(),null,!0,!0)});function FN(t,e,n,r){var o=Pr.hasOwnProperty(e)?Pr[e]:null;(o!==null?o.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Kte(e,n,o,r)&&(n=null),r||o===null?Hte(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,r=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var al=Ute.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ov=Symbol.for("react.element"),Nd=Symbol.for("react.portal"),Ed=Symbol.for("react.fragment"),MN=Symbol.for("react.strict_mode"),VT=Symbol.for("react.profiler"),y5=Symbol.for("react.provider"),v5=Symbol.for("react.context"),LN=Symbol.for("react.forward_ref"),WT=Symbol.for("react.suspense"),UT=Symbol.for("react.suspense_list"),zN=Symbol.for("react.memo"),kl=Symbol.for("react.lazy"),b5=Symbol.for("react.offscreen"),eM=Symbol.iterator;function uh(t){return t===null||typeof t!="object"?null:(t=eM&&t[eM]||t["@@iterator"],typeof t=="function"?t:null)}var Sn=Object.assign,J$;function Rh(t){if(J$===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);J$=e&&e[1]||""}return`
`+J$+t}var eC=!1;function tC(t,e){if(!t||eC)return"";eC=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var o=u.stack.split(`
`),s=r.stack.split(`
`),i=o.length-1,a=s.length-1;1<=i&&0<=a&&o[i]!==s[a];)a--;for(;1<=i&&0<=a;i--,a--)if(o[i]!==s[a]){if(i!==1||a!==1)do if(i--,a--,0>a||o[i]!==s[a]){var l=`
`+o[i].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=i&&0<=a);break}}}finally{eC=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Rh(t):""}function Xte(t){switch(t.tag){case 5:return Rh(t.type);case 16:return Rh("Lazy");case 13:return Rh("Suspense");case 19:return Rh("SuspenseList");case 0:case 2:case 15:return t=tC(t.type,!1),t;case 11:return t=tC(t.type.render,!1),t;case 1:return t=tC(t.type,!0),t;default:return""}}function GT(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ed:return"Fragment";case Nd:return"Portal";case VT:return"Profiler";case MN:return"StrictMode";case WT:return"Suspense";case UT:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case v5:return(t.displayName||"Context")+".Consumer";case y5:return(t._context.displayName||"Context")+".Provider";case LN:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case zN:return e=t.displayName||null,e!==null?e:GT(t.type)||"Memo";case kl:e=t._payload,t=t._init;try{return GT(t(e))}catch{}}return null}function Yte(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return GT(e);case 8:return e===MN?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Zl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function x5(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Zte(t){var e=x5(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(i){r=""+i,s.call(this,i)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function sv(t){t._valueTracker||(t._valueTracker=Zte(t))}function w5(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=x5(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Fb(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function HT(t,e){var n=e.checked;return Sn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function tM(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Zl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function S5(t,e){e=e.checked,e!=null&&FN(t,"checked",e,!1)}function qT(t,e){S5(t,e);var n=Zl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?KT(t,e.type,n):e.hasOwnProperty("defaultValue")&&KT(t,e.type,Zl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function nM(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function KT(t,e,n){(e!=="number"||Fb(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Dh=Array.isArray;function Qd(t,e,n,r){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Zl(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,r&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function XT(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(he(91));return Sn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function rM(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(he(92));if(Dh(n)){if(1<n.length)throw Error(he(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Zl(n)}}function k5(t,e){var n=Zl(e.value),r=Zl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function oM(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function $5(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function YT(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?$5(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var iv,C5=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(iv=iv||document.createElement("div"),iv.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=iv.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function $m(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Zh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qte=["Webkit","ms","Moz","O"];Object.keys(Zh).forEach(function(t){Qte.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Zh[e]=Zh[t]})});function T5(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Zh.hasOwnProperty(t)&&Zh[t]?(""+e).trim():e+"px"}function _5(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=T5(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,o):t[n]=o}}var Jte=Sn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ZT(t,e){if(e){if(Jte[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(he(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(he(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(he(61))}if(e.style!=null&&typeof e.style!="object")throw Error(he(62))}}function QT(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var JT=null;function BN(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var e_=null,Jd=null,ef=null;function sM(t){if(t=ey(t)){if(typeof e_!="function")throw Error(he(280));var e=t.stateNode;e&&(e=pw(e),e_(t.stateNode,t.type,e))}}function I5(t){Jd?ef?ef.push(t):ef=[t]:Jd=t}function N5(){if(Jd){var t=Jd,e=ef;if(ef=Jd=null,sM(t),e)for(t=0;t<e.length;t++)sM(e[t])}}function E5(t,e){return t(e)}function A5(){}var nC=!1;function O5(t,e,n){if(nC)return t(e,n);nC=!0;try{return E5(t,e,n)}finally{nC=!1,(Jd!==null||ef!==null)&&(A5(),N5())}}function Cm(t,e){var n=t.stateNode;if(n===null)return null;var r=pw(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(he(231,e,typeof n));return n}var t_=!1;if(Ha)try{var ch={};Object.defineProperty(ch,"passive",{get:function(){t_=!0}}),window.addEventListener("test",ch,ch),window.removeEventListener("test",ch,ch)}catch{t_=!1}function ene(t,e,n,r,o,s,i,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Qh=!1,Mb=null,Lb=!1,n_=null,tne={onError:function(t){Qh=!0,Mb=t}};function nne(t,e,n,r,o,s,i,a,l){Qh=!1,Mb=null,ene.apply(tne,arguments)}function rne(t,e,n,r,o,s,i,a,l){if(nne.apply(this,arguments),Qh){if(Qh){var u=Mb;Qh=!1,Mb=null}else throw Error(he(198));Lb||(Lb=!0,n_=u)}}function Xc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function P5(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function iM(t){if(Xc(t)!==t)throw Error(he(188))}function one(t){var e=t.alternate;if(!e){if(e=Xc(t),e===null)throw Error(he(188));return e!==t?null:t}for(var n=t,r=e;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return iM(o),t;if(s===r)return iM(o),e;s=s.sibling}throw Error(he(188))}if(n.return!==r.return)n=o,r=s;else{for(var i=!1,a=o.child;a;){if(a===n){i=!0,n=o,r=s;break}if(a===r){i=!0,r=o,n=s;break}a=a.sibling}if(!i){for(a=s.child;a;){if(a===n){i=!0,n=s,r=o;break}if(a===r){i=!0,r=s,n=o;break}a=a.sibling}if(!i)throw Error(he(189))}}if(n.alternate!==r)throw Error(he(190))}if(n.tag!==3)throw Error(he(188));return n.stateNode.current===n?t:e}function R5(t){return t=one(t),t!==null?D5(t):null}function D5(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=D5(t);if(e!==null)return e;t=t.sibling}return null}var F5=os.unstable_scheduleCallback,aM=os.unstable_cancelCallback,sne=os.unstable_shouldYield,ine=os.unstable_requestPaint,Rn=os.unstable_now,ane=os.unstable_getCurrentPriorityLevel,jN=os.unstable_ImmediatePriority,M5=os.unstable_UserBlockingPriority,zb=os.unstable_NormalPriority,lne=os.unstable_LowPriority,L5=os.unstable_IdlePriority,uw=null,Yi=null;function une(t){if(Yi&&typeof Yi.onCommitFiberRoot=="function")try{Yi.onCommitFiberRoot(uw,t,void 0,(t.current.flags&128)===128)}catch{}}var mi=Math.clz32?Math.clz32:fne,cne=Math.log,dne=Math.LN2;function fne(t){return t>>>=0,t===0?32:31-(cne(t)/dne|0)|0}var av=64,lv=4194304;function Fh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Bb(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,o=t.suspendedLanes,s=t.pingedLanes,i=n&268435455;if(i!==0){var a=i&~o;a!==0?r=Fh(a):(s&=i,s!==0&&(r=Fh(s)))}else i=n&~o,i!==0?r=Fh(i):s!==0&&(r=Fh(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&o)&&(o=r&-r,s=e&-e,o>=s||o===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-mi(e),o=1<<n,r|=t[n],e&=~o;return r}function pne(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hne(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,o=t.expirationTimes,s=t.pendingLanes;0<s;){var i=31-mi(s),a=1<<i,l=o[i];l===-1?(!(a&n)||a&r)&&(o[i]=pne(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function r_(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function z5(){var t=av;return av<<=1,!(av&4194240)&&(av=64),t}function rC(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Qg(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-mi(e),t[e]=n}function mne(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-mi(n),s=1<<o;e[o]=0,r[o]=-1,t[o]=-1,n&=~s}}function VN(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-mi(n),o=1<<r;o&e|t[r]&e&&(t[r]|=e),n&=~o}}var Pt=0;function B5(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var j5,WN,V5,W5,U5,o_=!1,uv=[],Ml=null,Ll=null,zl=null,Tm=new Map,_m=new Map,_l=[],gne="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lM(t,e){switch(t){case"focusin":case"focusout":Ml=null;break;case"dragenter":case"dragleave":Ll=null;break;case"mouseover":case"mouseout":zl=null;break;case"pointerover":case"pointerout":Tm.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_m.delete(e.pointerId)}}function dh(t,e,n,r,o,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[o]},e!==null&&(e=ey(e),e!==null&&WN(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function yne(t,e,n,r,o){switch(e){case"focusin":return Ml=dh(Ml,t,e,n,r,o),!0;case"dragenter":return Ll=dh(Ll,t,e,n,r,o),!0;case"mouseover":return zl=dh(zl,t,e,n,r,o),!0;case"pointerover":var s=o.pointerId;return Tm.set(s,dh(Tm.get(s)||null,t,e,n,r,o)),!0;case"gotpointercapture":return s=o.pointerId,_m.set(s,dh(_m.get(s)||null,t,e,n,r,o)),!0}return!1}function G5(t){var e=tc(t.target);if(e!==null){var n=Xc(e);if(n!==null){if(e=n.tag,e===13){if(e=P5(n),e!==null){t.blockedOn=e,U5(t.priority,function(){V5(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function cb(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=s_(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);JT=r,n.target.dispatchEvent(r),JT=null}else return e=ey(n),e!==null&&WN(e),t.blockedOn=n,!1;e.shift()}return!0}function uM(t,e,n){cb(t)&&n.delete(e)}function vne(){o_=!1,Ml!==null&&cb(Ml)&&(Ml=null),Ll!==null&&cb(Ll)&&(Ll=null),zl!==null&&cb(zl)&&(zl=null),Tm.forEach(uM),_m.forEach(uM)}function fh(t,e){t.blockedOn===e&&(t.blockedOn=null,o_||(o_=!0,os.unstable_scheduleCallback(os.unstable_NormalPriority,vne)))}function Im(t){function e(o){return fh(o,t)}if(0<uv.length){fh(uv[0],t);for(var n=1;n<uv.length;n++){var r=uv[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ml!==null&&fh(Ml,t),Ll!==null&&fh(Ll,t),zl!==null&&fh(zl,t),Tm.forEach(e),_m.forEach(e),n=0;n<_l.length;n++)r=_l[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<_l.length&&(n=_l[0],n.blockedOn===null);)G5(n),n.blockedOn===null&&_l.shift()}var tf=al.ReactCurrentBatchConfig,jb=!0;function bne(t,e,n,r){var o=Pt,s=tf.transition;tf.transition=null;try{Pt=1,UN(t,e,n,r)}finally{Pt=o,tf.transition=s}}function xne(t,e,n,r){var o=Pt,s=tf.transition;tf.transition=null;try{Pt=4,UN(t,e,n,r)}finally{Pt=o,tf.transition=s}}function UN(t,e,n,r){if(jb){var o=s_(t,e,n,r);if(o===null)pC(t,e,r,Vb,n),lM(t,r);else if(yne(o,t,e,n,r))r.stopPropagation();else if(lM(t,r),e&4&&-1<gne.indexOf(t)){for(;o!==null;){var s=ey(o);if(s!==null&&j5(s),s=s_(t,e,n,r),s===null&&pC(t,e,r,Vb,n),s===o)break;o=s}o!==null&&r.stopPropagation()}else pC(t,e,r,null,n)}}var Vb=null;function s_(t,e,n,r){if(Vb=null,t=BN(r),t=tc(t),t!==null)if(e=Xc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=P5(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Vb=t,null}function H5(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ane()){case jN:return 1;case M5:return 4;case zb:case lne:return 16;case L5:return 536870912;default:return 16}default:return 16}}var El=null,GN=null,db=null;function q5(){if(db)return db;var t,e=GN,n=e.length,r,o="value"in El?El.value:El.textContent,s=o.length;for(t=0;t<n&&e[t]===o[t];t++);var i=n-t;for(r=1;r<=i&&e[n-r]===o[s-r];r++);return db=o.slice(t,1<r?1-r:void 0)}function fb(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function cv(){return!0}function cM(){return!1}function cs(t){function e(n,r,o,s,i){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?cv:cM,this.isPropagationStopped=cM,this}return Sn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=cv)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=cv)},persist:function(){},isPersistent:cv}),e}var wp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},HN=cs(wp),Jg=Sn({},wp,{view:0,detail:0}),wne=cs(Jg),oC,sC,ph,cw=Sn({},Jg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qN,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ph&&(ph&&t.type==="mousemove"?(oC=t.screenX-ph.screenX,sC=t.screenY-ph.screenY):sC=oC=0,ph=t),oC)},movementY:function(t){return"movementY"in t?t.movementY:sC}}),dM=cs(cw),Sne=Sn({},cw,{dataTransfer:0}),kne=cs(Sne),$ne=Sn({},Jg,{relatedTarget:0}),iC=cs($ne),Cne=Sn({},wp,{animationName:0,elapsedTime:0,pseudoElement:0}),Tne=cs(Cne),_ne=Sn({},wp,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ine=cs(_ne),Nne=Sn({},wp,{data:0}),fM=cs(Nne),Ene={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ane={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},One={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pne(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=One[t])?!!e[t]:!1}function qN(){return Pne}var Rne=Sn({},Jg,{key:function(t){if(t.key){var e=Ene[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=fb(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ane[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qN,charCode:function(t){return t.type==="keypress"?fb(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fb(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Dne=cs(Rne),Fne=Sn({},cw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pM=cs(Fne),Mne=Sn({},Jg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qN}),Lne=cs(Mne),zne=Sn({},wp,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bne=cs(zne),jne=Sn({},cw,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Vne=cs(jne),Wne=[9,13,27,32],KN=Ha&&"CompositionEvent"in window,Jh=null;Ha&&"documentMode"in document&&(Jh=document.documentMode);var Une=Ha&&"TextEvent"in window&&!Jh,K5=Ha&&(!KN||Jh&&8<Jh&&11>=Jh),hM=" ",mM=!1;function X5(t,e){switch(t){case"keyup":return Wne.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Y5(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ad=!1;function Gne(t,e){switch(t){case"compositionend":return Y5(e);case"keypress":return e.which!==32?null:(mM=!0,hM);case"textInput":return t=e.data,t===hM&&mM?null:t;default:return null}}function Hne(t,e){if(Ad)return t==="compositionend"||!KN&&X5(t,e)?(t=q5(),db=GN=El=null,Ad=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return K5&&e.locale!=="ko"?null:e.data;default:return null}}var qne={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gM(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!qne[t.type]:e==="textarea"}function Z5(t,e,n,r){I5(r),e=Wb(e,"onChange"),0<e.length&&(n=new HN("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var em=null,Nm=null;function Kne(t){lU(t,0)}function dw(t){var e=Rd(t);if(w5(e))return t}function Xne(t,e){if(t==="change")return e}var Q5=!1;if(Ha){var aC;if(Ha){var lC="oninput"in document;if(!lC){var yM=document.createElement("div");yM.setAttribute("oninput","return;"),lC=typeof yM.oninput=="function"}aC=lC}else aC=!1;Q5=aC&&(!document.documentMode||9<document.documentMode)}function vM(){em&&(em.detachEvent("onpropertychange",J5),Nm=em=null)}function J5(t){if(t.propertyName==="value"&&dw(Nm)){var e=[];Z5(e,Nm,t,BN(t)),O5(Kne,e)}}function Yne(t,e,n){t==="focusin"?(vM(),em=e,Nm=n,em.attachEvent("onpropertychange",J5)):t==="focusout"&&vM()}function Zne(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return dw(Nm)}function Qne(t,e){if(t==="click")return dw(e)}function Jne(t,e){if(t==="input"||t==="change")return dw(e)}function ere(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wi=typeof Object.is=="function"?Object.is:ere;function Em(t,e){if(wi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!jT.call(e,o)||!wi(t[o],e[o]))return!1}return!0}function bM(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function xM(t,e){var n=bM(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=bM(n)}}function eU(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?eU(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function tU(){for(var t=window,e=Fb();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Fb(t.document)}return e}function XN(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function tre(t){var e=tU(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&eU(n.ownerDocument.documentElement,n)){if(r!==null&&XN(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,s=Math.min(r.start,o);r=r.end===void 0?s:Math.min(r.end,o),!t.extend&&s>r&&(o=r,r=s,s=o),o=xM(n,s);var i=xM(n,r);o&&i&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var nre=Ha&&"documentMode"in document&&11>=document.documentMode,Od=null,i_=null,tm=null,a_=!1;function wM(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;a_||Od==null||Od!==Fb(r)||(r=Od,"selectionStart"in r&&XN(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),tm&&Em(tm,r)||(tm=r,r=Wb(i_,"onSelect"),0<r.length&&(e=new HN("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Od)))}function dv(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Pd={animationend:dv("Animation","AnimationEnd"),animationiteration:dv("Animation","AnimationIteration"),animationstart:dv("Animation","AnimationStart"),transitionend:dv("Transition","TransitionEnd")},uC={},nU={};Ha&&(nU=document.createElement("div").style,"AnimationEvent"in window||(delete Pd.animationend.animation,delete Pd.animationiteration.animation,delete Pd.animationstart.animation),"TransitionEvent"in window||delete Pd.transitionend.transition);function fw(t){if(uC[t])return uC[t];if(!Pd[t])return t;var e=Pd[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in nU)return uC[t]=e[n];return t}var rU=fw("animationend"),oU=fw("animationiteration"),sU=fw("animationstart"),iU=fw("transitionend"),aU=new Map,SM="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hu(t,e){aU.set(t,e),Kc(e,[t])}for(var cC=0;cC<SM.length;cC++){var dC=SM[cC],rre=dC.toLowerCase(),ore=dC[0].toUpperCase()+dC.slice(1);hu(rre,"on"+ore)}hu(rU,"onAnimationEnd");hu(oU,"onAnimationIteration");hu(sU,"onAnimationStart");hu("dblclick","onDoubleClick");hu("focusin","onFocus");hu("focusout","onBlur");hu(iU,"onTransitionEnd");xf("onMouseEnter",["mouseout","mouseover"]);xf("onMouseLeave",["mouseout","mouseover"]);xf("onPointerEnter",["pointerout","pointerover"]);xf("onPointerLeave",["pointerout","pointerover"]);Kc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Kc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Kc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Kc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Kc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Kc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sre=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mh));function kM(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,rne(r,e,void 0,t),t.currentTarget=null}function lU(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],o=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var i=r.length-1;0<=i;i--){var a=r[i],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&o.isPropagationStopped())break e;kM(o,a,u),s=l}else for(i=0;i<r.length;i++){if(a=r[i],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&o.isPropagationStopped())break e;kM(o,a,u),s=l}}}if(Lb)throw t=n_,Lb=!1,n_=null,t}function rn(t,e){var n=e[f_];n===void 0&&(n=e[f_]=new Set);var r=t+"__bubble";n.has(r)||(uU(e,t,2,!1),n.add(r))}function fC(t,e,n){var r=0;e&&(r|=4),uU(n,t,r,e)}var fv="_reactListening"+Math.random().toString(36).slice(2);function Am(t){if(!t[fv]){t[fv]=!0,g5.forEach(function(n){n!=="selectionchange"&&(sre.has(n)||fC(n,!1,t),fC(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[fv]||(e[fv]=!0,fC("selectionchange",!1,e))}}function uU(t,e,n,r){switch(H5(e)){case 1:var o=bne;break;case 4:o=xne;break;default:o=UN}n=o.bind(null,e,n,t),o=void 0,!t_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),r?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function pC(t,e,n,r,o){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var a=r.stateNode.containerInfo;if(a===o||a.nodeType===8&&a.parentNode===o)break;if(i===4)for(i=r.return;i!==null;){var l=i.tag;if((l===3||l===4)&&(l=i.stateNode.containerInfo,l===o||l.nodeType===8&&l.parentNode===o))return;i=i.return}for(;a!==null;){if(i=tc(a),i===null)return;if(l=i.tag,l===5||l===6){r=s=i;continue e}a=a.parentNode}}r=r.return}O5(function(){var u=s,c=BN(n),d=[];e:{var f=aU.get(t);if(f!==void 0){var p=HN,h=t;switch(t){case"keypress":if(fb(n)===0)break e;case"keydown":case"keyup":p=Dne;break;case"focusin":h="focus",p=iC;break;case"focusout":h="blur",p=iC;break;case"beforeblur":case"afterblur":p=iC;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=dM;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=kne;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Lne;break;case rU:case oU:case sU:p=Tne;break;case iU:p=Bne;break;case"scroll":p=wne;break;case"wheel":p=Vne;break;case"copy":case"cut":case"paste":p=Ine;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=pM}var m=(e&4)!==0,g=!m&&t==="scroll",y=m?f!==null?f+"Capture":null:f;m=[];for(var v=u,b;v!==null;){b=v;var x=b.stateNode;if(b.tag===5&&x!==null&&(b=x,y!==null&&(x=Cm(v,y),x!=null&&m.push(Om(v,x,b)))),g)break;v=v.return}0<m.length&&(f=new p(f,h,null,n,c),d.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==JT&&(h=n.relatedTarget||n.fromElement)&&(tc(h)||h[qa]))break e;if((p||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,p?(h=n.relatedTarget||n.toElement,p=u,h=h?tc(h):null,h!==null&&(g=Xc(h),h!==g||h.tag!==5&&h.tag!==6)&&(h=null)):(p=null,h=u),p!==h)){if(m=dM,x="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(m=pM,x="onPointerLeave",y="onPointerEnter",v="pointer"),g=p==null?f:Rd(p),b=h==null?f:Rd(h),f=new m(x,v+"leave",p,n,c),f.target=g,f.relatedTarget=b,x=null,tc(c)===u&&(m=new m(y,v+"enter",h,n,c),m.target=b,m.relatedTarget=g,x=m),g=x,p&&h)t:{for(m=p,y=h,v=0,b=m;b;b=md(b))v++;for(b=0,x=y;x;x=md(x))b++;for(;0<v-b;)m=md(m),v--;for(;0<b-v;)y=md(y),b--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=md(m),y=md(y)}m=null}else m=null;p!==null&&$M(d,f,p,m,!1),h!==null&&g!==null&&$M(d,g,h,m,!0)}}e:{if(f=u?Rd(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var w=Xne;else if(gM(f))if(Q5)w=Jne;else{w=Zne;var S=Yne}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(w=Qne);if(w&&(w=w(t,u))){Z5(d,w,n,c);break e}S&&S(t,f,u),t==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&KT(f,"number",f.value)}switch(S=u?Rd(u):window,t){case"focusin":(gM(S)||S.contentEditable==="true")&&(Od=S,i_=u,tm=null);break;case"focusout":tm=i_=Od=null;break;case"mousedown":a_=!0;break;case"contextmenu":case"mouseup":case"dragend":a_=!1,wM(d,n,c);break;case"selectionchange":if(nre)break;case"keydown":case"keyup":wM(d,n,c)}var k;if(KN)e:{switch(t){case"compositionstart":var $="onCompositionStart";break e;case"compositionend":$="onCompositionEnd";break e;case"compositionupdate":$="onCompositionUpdate";break e}$=void 0}else Ad?X5(t,n)&&($="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&($="onCompositionStart");$&&(K5&&n.locale!=="ko"&&(Ad||$!=="onCompositionStart"?$==="onCompositionEnd"&&Ad&&(k=q5()):(El=c,GN="value"in El?El.value:El.textContent,Ad=!0)),S=Wb(u,$),0<S.length&&($=new fM($,t,null,n,c),d.push({event:$,listeners:S}),k?$.data=k:(k=Y5(n),k!==null&&($.data=k)))),(k=Une?Gne(t,n):Hne(t,n))&&(u=Wb(u,"onBeforeInput"),0<u.length&&(c=new fM("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=k))}lU(d,e)})}function Om(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Wb(t,e){for(var n=e+"Capture",r=[];t!==null;){var o=t,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=Cm(t,n),s!=null&&r.unshift(Om(t,s,o)),s=Cm(t,e),s!=null&&r.push(Om(t,s,o))),t=t.return}return r}function md(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $M(t,e,n,r,o){for(var s=e._reactName,i=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,o?(l=Cm(n,s),l!=null&&i.unshift(Om(n,l,a))):o||(l=Cm(n,s),l!=null&&i.push(Om(n,l,a)))),n=n.return}i.length!==0&&t.push({event:e,listeners:i})}var ire=/\r\n?/g,are=/\u0000|\uFFFD/g;function CM(t){return(typeof t=="string"?t:""+t).replace(ire,`
`).replace(are,"")}function pv(t,e,n){if(e=CM(e),CM(t)!==e&&n)throw Error(he(425))}function Ub(){}var l_=null,u_=null;function c_(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var d_=typeof setTimeout=="function"?setTimeout:void 0,lre=typeof clearTimeout=="function"?clearTimeout:void 0,TM=typeof Promise=="function"?Promise:void 0,ure=typeof queueMicrotask=="function"?queueMicrotask:typeof TM<"u"?function(t){return TM.resolve(null).then(t).catch(cre)}:d_;function cre(t){setTimeout(function(){throw t})}function hC(t,e){var n=e,r=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){t.removeChild(o),Im(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);Im(e)}function Bl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function _M(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Sp=Math.random().toString(36).slice(2),Wi="__reactFiber$"+Sp,Pm="__reactProps$"+Sp,qa="__reactContainer$"+Sp,f_="__reactEvents$"+Sp,dre="__reactListeners$"+Sp,fre="__reactHandles$"+Sp;function tc(t){var e=t[Wi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[qa]||n[Wi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=_M(t);t!==null;){if(n=t[Wi])return n;t=_M(t)}return e}t=n,n=t.parentNode}return null}function ey(t){return t=t[Wi]||t[qa],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Rd(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(he(33))}function pw(t){return t[Pm]||null}var p_=[],Dd=-1;function mu(t){return{current:t}}function an(t){0>Dd||(t.current=p_[Dd],p_[Dd]=null,Dd--)}function Qt(t,e){Dd++,p_[Dd]=t.current,t.current=e}var Ql={},Qr=mu(Ql),No=mu(!1),Sc=Ql;function wf(t,e){var n=t.type.contextTypes;if(!n)return Ql;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Eo(t){return t=t.childContextTypes,t!=null}function Gb(){an(No),an(Qr)}function IM(t,e,n){if(Qr.current!==Ql)throw Error(he(168));Qt(Qr,e),Qt(No,n)}function cU(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in e))throw Error(he(108,Yte(t)||"Unknown",o));return Sn({},n,r)}function Hb(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ql,Sc=Qr.current,Qt(Qr,t),Qt(No,No.current),!0}function NM(t,e,n){var r=t.stateNode;if(!r)throw Error(he(169));n?(t=cU(t,e,Sc),r.__reactInternalMemoizedMergedChildContext=t,an(No),an(Qr),Qt(Qr,t)):an(No),Qt(No,n)}var Sa=null,hw=!1,mC=!1;function dU(t){Sa===null?Sa=[t]:Sa.push(t)}function pre(t){hw=!0,dU(t)}function gu(){if(!mC&&Sa!==null){mC=!0;var t=0,e=Pt;try{var n=Sa;for(Pt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Sa=null,hw=!1}catch(o){throw Sa!==null&&(Sa=Sa.slice(t+1)),F5(jN,gu),o}finally{Pt=e,mC=!1}}return null}var Fd=[],Md=0,qb=null,Kb=0,Cs=[],Ts=0,kc=null,_a=1,Ia="";function Vu(t,e){Fd[Md++]=Kb,Fd[Md++]=qb,qb=t,Kb=e}function fU(t,e,n){Cs[Ts++]=_a,Cs[Ts++]=Ia,Cs[Ts++]=kc,kc=t;var r=_a;t=Ia;var o=32-mi(r)-1;r&=~(1<<o),n+=1;var s=32-mi(e)+o;if(30<s){var i=o-o%5;s=(r&(1<<i)-1).toString(32),r>>=i,o-=i,_a=1<<32-mi(e)+o|n<<o|r,Ia=s+t}else _a=1<<s|n<<o|r,Ia=t}function YN(t){t.return!==null&&(Vu(t,1),fU(t,1,0))}function ZN(t){for(;t===qb;)qb=Fd[--Md],Fd[Md]=null,Kb=Fd[--Md],Fd[Md]=null;for(;t===kc;)kc=Cs[--Ts],Cs[Ts]=null,Ia=Cs[--Ts],Cs[Ts]=null,_a=Cs[--Ts],Cs[Ts]=null}var ts=null,Jo=null,dn=!1,li=null;function pU(t,e){var n=Is(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function EM(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ts=t,Jo=Bl(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ts=t,Jo=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=kc!==null?{id:_a,overflow:Ia}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Is(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ts=t,Jo=null,!0):!1;default:return!1}}function h_(t){return(t.mode&1)!==0&&(t.flags&128)===0}function m_(t){if(dn){var e=Jo;if(e){var n=e;if(!EM(t,e)){if(h_(t))throw Error(he(418));e=Bl(n.nextSibling);var r=ts;e&&EM(t,e)?pU(r,n):(t.flags=t.flags&-4097|2,dn=!1,ts=t)}}else{if(h_(t))throw Error(he(418));t.flags=t.flags&-4097|2,dn=!1,ts=t}}}function AM(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ts=t}function hv(t){if(t!==ts)return!1;if(!dn)return AM(t),dn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!c_(t.type,t.memoizedProps)),e&&(e=Jo)){if(h_(t))throw hU(),Error(he(418));for(;e;)pU(t,e),e=Bl(e.nextSibling)}if(AM(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(he(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Jo=Bl(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Jo=null}}else Jo=ts?Bl(t.stateNode.nextSibling):null;return!0}function hU(){for(var t=Jo;t;)t=Bl(t.nextSibling)}function Sf(){Jo=ts=null,dn=!1}function QN(t){li===null?li=[t]:li.push(t)}var hre=al.ReactCurrentBatchConfig;function hh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(he(309));var r=n.stateNode}if(!r)throw Error(he(147,t));var o=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(i){var a=o.refs;i===null?delete a[s]:a[s]=i},e._stringRef=s,e)}if(typeof t!="string")throw Error(he(284));if(!n._owner)throw Error(he(290,t))}return t}function mv(t,e){throw t=Object.prototype.toString.call(e),Error(he(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function OM(t){var e=t._init;return e(t._payload)}function mU(t){function e(y,v){if(t){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function n(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function o(y,v){return y=Ul(y,v),y.index=0,y.sibling=null,y}function s(y,v,b){return y.index=b,t?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=2,v):b):(y.flags|=2,v)):(y.flags|=1048576,v)}function i(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,v,b,x){return v===null||v.tag!==6?(v=SC(b,y.mode,x),v.return=y,v):(v=o(v,b),v.return=y,v)}function l(y,v,b,x){var w=b.type;return w===Ed?c(y,v,b.props.children,x,b.key):v!==null&&(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===kl&&OM(w)===v.type)?(x=o(v,b.props),x.ref=hh(y,v,b),x.return=y,x):(x=bb(b.type,b.key,b.props,null,y.mode,x),x.ref=hh(y,v,b),x.return=y,x)}function u(y,v,b,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=kC(b,y.mode,x),v.return=y,v):(v=o(v,b.children||[]),v.return=y,v)}function c(y,v,b,x,w){return v===null||v.tag!==7?(v=hc(b,y.mode,x,w),v.return=y,v):(v=o(v,b),v.return=y,v)}function d(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=SC(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ov:return b=bb(v.type,v.key,v.props,null,y.mode,b),b.ref=hh(y,null,v),b.return=y,b;case Nd:return v=kC(v,y.mode,b),v.return=y,v;case kl:var x=v._init;return d(y,x(v._payload),b)}if(Dh(v)||uh(v))return v=hc(v,y.mode,b,null),v.return=y,v;mv(y,v)}return null}function f(y,v,b,x){var w=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return w!==null?null:a(y,v,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ov:return b.key===w?l(y,v,b,x):null;case Nd:return b.key===w?u(y,v,b,x):null;case kl:return w=b._init,f(y,v,w(b._payload),x)}if(Dh(b)||uh(b))return w!==null?null:c(y,v,b,x,null);mv(y,b)}return null}function p(y,v,b,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(b)||null,a(v,y,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ov:return y=y.get(x.key===null?b:x.key)||null,l(v,y,x,w);case Nd:return y=y.get(x.key===null?b:x.key)||null,u(v,y,x,w);case kl:var S=x._init;return p(y,v,b,S(x._payload),w)}if(Dh(x)||uh(x))return y=y.get(b)||null,c(v,y,x,w,null);mv(v,x)}return null}function h(y,v,b,x){for(var w=null,S=null,k=v,$=v=0,C=null;k!==null&&$<b.length;$++){k.index>$?(C=k,k=null):C=k.sibling;var I=f(y,k,b[$],x);if(I===null){k===null&&(k=C);break}t&&k&&I.alternate===null&&e(y,k),v=s(I,v,$),S===null?w=I:S.sibling=I,S=I,k=C}if($===b.length)return n(y,k),dn&&Vu(y,$),w;if(k===null){for(;$<b.length;$++)k=d(y,b[$],x),k!==null&&(v=s(k,v,$),S===null?w=k:S.sibling=k,S=k);return dn&&Vu(y,$),w}for(k=r(y,k);$<b.length;$++)C=p(k,y,$,b[$],x),C!==null&&(t&&C.alternate!==null&&k.delete(C.key===null?$:C.key),v=s(C,v,$),S===null?w=C:S.sibling=C,S=C);return t&&k.forEach(function(E){return e(y,E)}),dn&&Vu(y,$),w}function m(y,v,b,x){var w=uh(b);if(typeof w!="function")throw Error(he(150));if(b=w.call(b),b==null)throw Error(he(151));for(var S=w=null,k=v,$=v=0,C=null,I=b.next();k!==null&&!I.done;$++,I=b.next()){k.index>$?(C=k,k=null):C=k.sibling;var E=f(y,k,I.value,x);if(E===null){k===null&&(k=C);break}t&&k&&E.alternate===null&&e(y,k),v=s(E,v,$),S===null?w=E:S.sibling=E,S=E,k=C}if(I.done)return n(y,k),dn&&Vu(y,$),w;if(k===null){for(;!I.done;$++,I=b.next())I=d(y,I.value,x),I!==null&&(v=s(I,v,$),S===null?w=I:S.sibling=I,S=I);return dn&&Vu(y,$),w}for(k=r(y,k);!I.done;$++,I=b.next())I=p(k,y,$,I.value,x),I!==null&&(t&&I.alternate!==null&&k.delete(I.key===null?$:I.key),v=s(I,v,$),S===null?w=I:S.sibling=I,S=I);return t&&k.forEach(function(O){return e(y,O)}),dn&&Vu(y,$),w}function g(y,v,b,x){if(typeof b=="object"&&b!==null&&b.type===Ed&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case ov:e:{for(var w=b.key,S=v;S!==null;){if(S.key===w){if(w=b.type,w===Ed){if(S.tag===7){n(y,S.sibling),v=o(S,b.props.children),v.return=y,y=v;break e}}else if(S.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===kl&&OM(w)===S.type){n(y,S.sibling),v=o(S,b.props),v.ref=hh(y,S,b),v.return=y,y=v;break e}n(y,S);break}else e(y,S);S=S.sibling}b.type===Ed?(v=hc(b.props.children,y.mode,x,b.key),v.return=y,y=v):(x=bb(b.type,b.key,b.props,null,y.mode,x),x.ref=hh(y,v,b),x.return=y,y=x)}return i(y);case Nd:e:{for(S=b.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(y,v.sibling),v=o(v,b.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else e(y,v);v=v.sibling}v=kC(b,y.mode,x),v.return=y,y=v}return i(y);case kl:return S=b._init,g(y,v,S(b._payload),x)}if(Dh(b))return h(y,v,b,x);if(uh(b))return m(y,v,b,x);mv(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(y,v.sibling),v=o(v,b),v.return=y,y=v):(n(y,v),v=SC(b,y.mode,x),v.return=y,y=v),i(y)):n(y,v)}return g}var kf=mU(!0),gU=mU(!1),Xb=mu(null),Yb=null,Ld=null,JN=null;function eE(){JN=Ld=Yb=null}function tE(t){var e=Xb.current;an(Xb),t._currentValue=e}function g_(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function nf(t,e){Yb=t,JN=Ld=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Co=!0),t.firstContext=null)}function Vs(t){var e=t._currentValue;if(JN!==t)if(t={context:t,memoizedValue:e,next:null},Ld===null){if(Yb===null)throw Error(he(308));Ld=t,Yb.dependencies={lanes:0,firstContext:t}}else Ld=Ld.next=t;return e}var nc=null;function nE(t){nc===null?nc=[t]:nc.push(t)}function yU(t,e,n,r){var o=e.interleaved;return o===null?(n.next=n,nE(e)):(n.next=o.next,o.next=n),e.interleaved=n,Ka(t,r)}function Ka(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var $l=!1;function rE(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vU(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Da(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function jl(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,xt&2){var o=r.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),r.pending=e,Ka(t,n)}return o=r.interleaved,o===null?(e.next=e,nE(r)):(e.next=o.next,o.next=e),r.interleaved=e,Ka(t,n)}function pb(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,VN(t,n)}}function PM(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=i:s=s.next=i,n=n.next}while(n!==null);s===null?o=s=e:s=s.next=e}else o=s=e;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Zb(t,e,n,r){var o=t.updateQueue;$l=!1;var s=o.firstBaseUpdate,i=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var l=a,u=l.next;l.next=null,i===null?s=u:i.next=u,i=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==i&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=o.baseState;i=0,c=u=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var h=t,m=a;switch(f=e,p=n,m.tag){case 1:if(h=m.payload,typeof h=="function"){d=h.call(p,d,f);break e}d=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=m.payload,f=typeof h=="function"?h.call(p,d,f):h,f==null)break e;d=Sn({},d,f);break e;case 2:$l=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=o.effects,f===null?o.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=p,l=d):c=c.next=p,i|=f;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;f=a,a=f.next,f.next=null,o.lastBaseUpdate=f,o.shared.pending=null}}while(!0);if(c===null&&(l=d),o.baseState=l,o.firstBaseUpdate=u,o.lastBaseUpdate=c,e=o.shared.interleaved,e!==null){o=e;do i|=o.lane,o=o.next;while(o!==e)}else s===null&&(o.shared.lanes=0);Cc|=i,t.lanes=i,t.memoizedState=d}}function RM(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(he(191,o));o.call(r)}}}var ty={},Zi=mu(ty),Rm=mu(ty),Dm=mu(ty);function rc(t){if(t===ty)throw Error(he(174));return t}function oE(t,e){switch(Qt(Dm,e),Qt(Rm,t),Qt(Zi,ty),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:YT(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=YT(e,t)}an(Zi),Qt(Zi,e)}function $f(){an(Zi),an(Rm),an(Dm)}function bU(t){rc(Dm.current);var e=rc(Zi.current),n=YT(e,t.type);e!==n&&(Qt(Rm,t),Qt(Zi,n))}function sE(t){Rm.current===t&&(an(Zi),an(Rm))}var yn=mu(0);function Qb(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var gC=[];function iE(){for(var t=0;t<gC.length;t++)gC[t]._workInProgressVersionPrimary=null;gC.length=0}var hb=al.ReactCurrentDispatcher,yC=al.ReactCurrentBatchConfig,$c=0,wn=null,Jn=null,fr=null,Jb=!1,nm=!1,Fm=0,mre=0;function Mr(){throw Error(he(321))}function aE(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!wi(t[n],e[n]))return!1;return!0}function lE(t,e,n,r,o,s){if($c=s,wn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,hb.current=t===null||t.memoizedState===null?bre:xre,t=n(r,o),nm){s=0;do{if(nm=!1,Fm=0,25<=s)throw Error(he(301));s+=1,fr=Jn=null,e.updateQueue=null,hb.current=wre,t=n(r,o)}while(nm)}if(hb.current=ex,e=Jn!==null&&Jn.next!==null,$c=0,fr=Jn=wn=null,Jb=!1,e)throw Error(he(300));return t}function uE(){var t=Fm!==0;return Fm=0,t}function Ri(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fr===null?wn.memoizedState=fr=t:fr=fr.next=t,fr}function Ws(){if(Jn===null){var t=wn.alternate;t=t!==null?t.memoizedState:null}else t=Jn.next;var e=fr===null?wn.memoizedState:fr.next;if(e!==null)fr=e,Jn=t;else{if(t===null)throw Error(he(310));Jn=t,t={memoizedState:Jn.memoizedState,baseState:Jn.baseState,baseQueue:Jn.baseQueue,queue:Jn.queue,next:null},fr===null?wn.memoizedState=fr=t:fr=fr.next=t}return fr}function Mm(t,e){return typeof e=="function"?e(t):e}function vC(t){var e=Ws(),n=e.queue;if(n===null)throw Error(he(311));n.lastRenderedReducer=t;var r=Jn,o=r.baseQueue,s=n.pending;if(s!==null){if(o!==null){var i=o.next;o.next=s.next,s.next=i}r.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,r=r.baseState;var a=i=null,l=null,u=s;do{var c=u.lane;if(($c&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,i=r):l=l.next=d,wn.lanes|=c,Cc|=c}u=u.next}while(u!==null&&u!==s);l===null?i=r:l.next=a,wi(r,e.memoizedState)||(Co=!0),e.memoizedState=r,e.baseState=i,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){o=t;do s=o.lane,wn.lanes|=s,Cc|=s,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function bC(t){var e=Ws(),n=e.queue;if(n===null)throw Error(he(311));n.lastRenderedReducer=t;var r=n.dispatch,o=n.pending,s=e.memoizedState;if(o!==null){n.pending=null;var i=o=o.next;do s=t(s,i.action),i=i.next;while(i!==o);wi(s,e.memoizedState)||(Co=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function xU(){}function wU(t,e){var n=wn,r=Ws(),o=e(),s=!wi(r.memoizedState,o);if(s&&(r.memoizedState=o,Co=!0),r=r.queue,cE($U.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||fr!==null&&fr.memoizedState.tag&1){if(n.flags|=2048,Lm(9,kU.bind(null,n,r,o,e),void 0,null),gr===null)throw Error(he(349));$c&30||SU(n,e,o)}return o}function SU(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=wn.updateQueue,e===null?(e={lastEffect:null,stores:null},wn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function kU(t,e,n,r){e.value=n,e.getSnapshot=r,CU(e)&&TU(t)}function $U(t,e,n){return n(function(){CU(e)&&TU(t)})}function CU(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!wi(t,n)}catch{return!0}}function TU(t){var e=Ka(t,1);e!==null&&gi(e,t,1,-1)}function DM(t){var e=Ri();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mm,lastRenderedState:t},e.queue=t,t=t.dispatch=vre.bind(null,wn,t),[e.memoizedState,t]}function Lm(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=wn.updateQueue,e===null?(e={lastEffect:null,stores:null},wn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function _U(){return Ws().memoizedState}function mb(t,e,n,r){var o=Ri();wn.flags|=t,o.memoizedState=Lm(1|e,n,void 0,r===void 0?null:r)}function mw(t,e,n,r){var o=Ws();r=r===void 0?null:r;var s=void 0;if(Jn!==null){var i=Jn.memoizedState;if(s=i.destroy,r!==null&&aE(r,i.deps)){o.memoizedState=Lm(e,n,s,r);return}}wn.flags|=t,o.memoizedState=Lm(1|e,n,s,r)}function FM(t,e){return mb(8390656,8,t,e)}function cE(t,e){return mw(2048,8,t,e)}function IU(t,e){return mw(4,2,t,e)}function NU(t,e){return mw(4,4,t,e)}function EU(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function AU(t,e,n){return n=n!=null?n.concat([t]):null,mw(4,4,EU.bind(null,e,t),n)}function dE(){}function OU(t,e){var n=Ws();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&aE(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function PU(t,e){var n=Ws();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&aE(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function RU(t,e,n){return $c&21?(wi(n,e)||(n=z5(),wn.lanes|=n,Cc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Co=!0),t.memoizedState=n)}function gre(t,e){var n=Pt;Pt=n!==0&&4>n?n:4,t(!0);var r=yC.transition;yC.transition={};try{t(!1),e()}finally{Pt=n,yC.transition=r}}function DU(){return Ws().memoizedState}function yre(t,e,n){var r=Wl(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},FU(t))MU(e,n);else if(n=yU(t,e,n,r),n!==null){var o=lo();gi(n,t,r,o),LU(n,e,r)}}function vre(t,e,n){var r=Wl(t),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(FU(t))MU(e,o);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var i=e.lastRenderedState,a=s(i,n);if(o.hasEagerState=!0,o.eagerState=a,wi(a,i)){var l=e.interleaved;l===null?(o.next=o,nE(e)):(o.next=l.next,l.next=o),e.interleaved=o;return}}catch{}finally{}n=yU(t,e,o,r),n!==null&&(o=lo(),gi(n,t,r,o),LU(n,e,r))}}function FU(t){var e=t.alternate;return t===wn||e!==null&&e===wn}function MU(t,e){nm=Jb=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function LU(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,VN(t,n)}}var ex={readContext:Vs,useCallback:Mr,useContext:Mr,useEffect:Mr,useImperativeHandle:Mr,useInsertionEffect:Mr,useLayoutEffect:Mr,useMemo:Mr,useReducer:Mr,useRef:Mr,useState:Mr,useDebugValue:Mr,useDeferredValue:Mr,useTransition:Mr,useMutableSource:Mr,useSyncExternalStore:Mr,useId:Mr,unstable_isNewReconciler:!1},bre={readContext:Vs,useCallback:function(t,e){return Ri().memoizedState=[t,e===void 0?null:e],t},useContext:Vs,useEffect:FM,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,mb(4194308,4,EU.bind(null,e,t),n)},useLayoutEffect:function(t,e){return mb(4194308,4,t,e)},useInsertionEffect:function(t,e){return mb(4,2,t,e)},useMemo:function(t,e){var n=Ri();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ri();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=yre.bind(null,wn,t),[r.memoizedState,t]},useRef:function(t){var e=Ri();return t={current:t},e.memoizedState=t},useState:DM,useDebugValue:dE,useDeferredValue:function(t){return Ri().memoizedState=t},useTransition:function(){var t=DM(!1),e=t[0];return t=gre.bind(null,t[1]),Ri().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=wn,o=Ri();if(dn){if(n===void 0)throw Error(he(407));n=n()}else{if(n=e(),gr===null)throw Error(he(349));$c&30||SU(r,e,n)}o.memoizedState=n;var s={value:n,getSnapshot:e};return o.queue=s,FM($U.bind(null,r,s,t),[t]),r.flags|=2048,Lm(9,kU.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Ri(),e=gr.identifierPrefix;if(dn){var n=Ia,r=_a;n=(r&~(1<<32-mi(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Fm++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=mre++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},xre={readContext:Vs,useCallback:OU,useContext:Vs,useEffect:cE,useImperativeHandle:AU,useInsertionEffect:IU,useLayoutEffect:NU,useMemo:PU,useReducer:vC,useRef:_U,useState:function(){return vC(Mm)},useDebugValue:dE,useDeferredValue:function(t){var e=Ws();return RU(e,Jn.memoizedState,t)},useTransition:function(){var t=vC(Mm)[0],e=Ws().memoizedState;return[t,e]},useMutableSource:xU,useSyncExternalStore:wU,useId:DU,unstable_isNewReconciler:!1},wre={readContext:Vs,useCallback:OU,useContext:Vs,useEffect:cE,useImperativeHandle:AU,useInsertionEffect:IU,useLayoutEffect:NU,useMemo:PU,useReducer:bC,useRef:_U,useState:function(){return bC(Mm)},useDebugValue:dE,useDeferredValue:function(t){var e=Ws();return Jn===null?e.memoizedState=t:RU(e,Jn.memoizedState,t)},useTransition:function(){var t=bC(Mm)[0],e=Ws().memoizedState;return[t,e]},useMutableSource:xU,useSyncExternalStore:wU,useId:DU,unstable_isNewReconciler:!1};function si(t,e){if(t&&t.defaultProps){e=Sn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function y_(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Sn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var gw={isMounted:function(t){return(t=t._reactInternals)?Xc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=lo(),o=Wl(t),s=Da(r,o);s.payload=e,n!=null&&(s.callback=n),e=jl(t,s,o),e!==null&&(gi(e,t,o,r),pb(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=lo(),o=Wl(t),s=Da(r,o);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=jl(t,s,o),e!==null&&(gi(e,t,o,r),pb(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=lo(),r=Wl(t),o=Da(n,r);o.tag=2,e!=null&&(o.callback=e),e=jl(t,o,r),e!==null&&(gi(e,t,r,n),pb(e,t,r))}};function MM(t,e,n,r,o,s,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,i):e.prototype&&e.prototype.isPureReactComponent?!Em(n,r)||!Em(o,s):!0}function zU(t,e,n){var r=!1,o=Ql,s=e.contextType;return typeof s=="object"&&s!==null?s=Vs(s):(o=Eo(e)?Sc:Qr.current,r=e.contextTypes,s=(r=r!=null)?wf(t,o):Ql),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=gw,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=s),e}function LM(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&gw.enqueueReplaceState(e,e.state,null)}function v_(t,e,n,r){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs={},rE(t);var s=e.contextType;typeof s=="object"&&s!==null?o.context=Vs(s):(s=Eo(e)?Sc:Qr.current,o.context=wf(t,s)),o.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(y_(t,e,s,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&gw.enqueueReplaceState(o,o.state,null),Zb(t,n,o,r),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function Cf(t,e){try{var n="",r=e;do n+=Xte(r),r=r.return;while(r);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:o,digest:null}}function xC(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function b_(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Sre=typeof WeakMap=="function"?WeakMap:Map;function BU(t,e,n){n=Da(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){nx||(nx=!0,N_=r),b_(t,e)},n}function jU(t,e,n){n=Da(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var o=e.value;n.payload=function(){return r(o)},n.callback=function(){b_(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){b_(t,e),typeof r!="function"&&(Vl===null?Vl=new Set([this]):Vl.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),n}function zM(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Sre;var o=new Set;r.set(e,o)}else o=r.get(e),o===void 0&&(o=new Set,r.set(e,o));o.has(n)||(o.add(n),t=Fre.bind(null,t,e,n),e.then(t,t))}function BM(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function jM(t,e,n,r,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Da(-1,1),e.tag=2,jl(n,e,1))),n.lanes|=1),t)}var kre=al.ReactCurrentOwner,Co=!1;function ro(t,e,n,r){e.child=t===null?gU(e,null,n,r):kf(e,t.child,n,r)}function VM(t,e,n,r,o){n=n.render;var s=e.ref;return nf(e,o),r=lE(t,e,n,r,s,o),n=uE(),t!==null&&!Co?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Xa(t,e,o)):(dn&&n&&YN(e),e.flags|=1,ro(t,e,r,o),e.child)}function WM(t,e,n,r,o){if(t===null){var s=n.type;return typeof s=="function"&&!bE(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,VU(t,e,s,r,o)):(t=bb(n.type,null,r,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&o)){var i=s.memoizedProps;if(n=n.compare,n=n!==null?n:Em,n(i,r)&&t.ref===e.ref)return Xa(t,e,o)}return e.flags|=1,t=Ul(s,r),t.ref=e.ref,t.return=e,e.child=t}function VU(t,e,n,r,o){if(t!==null){var s=t.memoizedProps;if(Em(s,r)&&t.ref===e.ref)if(Co=!1,e.pendingProps=r=s,(t.lanes&o)!==0)t.flags&131072&&(Co=!0);else return e.lanes=t.lanes,Xa(t,e,o)}return x_(t,e,n,r,o)}function WU(t,e,n){var r=e.pendingProps,o=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qt(Bd,Xo),Xo|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Qt(Bd,Xo),Xo|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Qt(Bd,Xo),Xo|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Qt(Bd,Xo),Xo|=r;return ro(t,e,o,n),e.child}function UU(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function x_(t,e,n,r,o){var s=Eo(n)?Sc:Qr.current;return s=wf(e,s),nf(e,o),n=lE(t,e,n,r,s,o),r=uE(),t!==null&&!Co?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Xa(t,e,o)):(dn&&r&&YN(e),e.flags|=1,ro(t,e,n,o),e.child)}function UM(t,e,n,r,o){if(Eo(n)){var s=!0;Hb(e)}else s=!1;if(nf(e,o),e.stateNode===null)gb(t,e),zU(e,n,r),v_(e,n,r,o),r=!0;else if(t===null){var i=e.stateNode,a=e.memoizedProps;i.props=a;var l=i.context,u=n.contextType;typeof u=="object"&&u!==null?u=Vs(u):(u=Eo(n)?Sc:Qr.current,u=wf(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof i.getSnapshotBeforeUpdate=="function";d||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==r||l!==u)&&LM(e,i,r,u),$l=!1;var f=e.memoizedState;i.state=f,Zb(e,r,i,o),l=e.memoizedState,a!==r||f!==l||No.current||$l?(typeof c=="function"&&(y_(e,n,c,r),l=e.memoizedState),(a=$l||MM(e,n,a,r,f,l,u))?(d||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),i.props=r,i.state=l,i.context=u,r=a):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{i=e.stateNode,vU(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:si(e.type,a),i.props=u,d=e.pendingProps,f=i.context,l=n.contextType,typeof l=="object"&&l!==null?l=Vs(l):(l=Eo(n)?Sc:Qr.current,l=wf(e,l));var p=n.getDerivedStateFromProps;(c=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==d||f!==l)&&LM(e,i,r,l),$l=!1,f=e.memoizedState,i.state=f,Zb(e,r,i,o);var h=e.memoizedState;a!==d||f!==h||No.current||$l?(typeof p=="function"&&(y_(e,n,p,r),h=e.memoizedState),(u=$l||MM(e,n,u,r,f,h,l)||!1)?(c||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,h,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,h,l)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=h),i.props=r,i.state=h,i.context=l,r=u):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return w_(t,e,n,r,s,o)}function w_(t,e,n,r,o,s){UU(t,e);var i=(e.flags&128)!==0;if(!r&&!i)return o&&NM(e,n,!1),Xa(t,e,s);r=e.stateNode,kre.current=e;var a=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&i?(e.child=kf(e,t.child,null,s),e.child=kf(e,null,a,s)):ro(t,e,a,s),e.memoizedState=r.state,o&&NM(e,n,!0),e.child}function GU(t){var e=t.stateNode;e.pendingContext?IM(t,e.pendingContext,e.pendingContext!==e.context):e.context&&IM(t,e.context,!1),oE(t,e.containerInfo)}function GM(t,e,n,r,o){return Sf(),QN(o),e.flags|=256,ro(t,e,n,r),e.child}var S_={dehydrated:null,treeContext:null,retryLane:0};function k_(t){return{baseLanes:t,cachePool:null,transitions:null}}function HU(t,e,n){var r=e.pendingProps,o=yn.current,s=!1,i=(e.flags&128)!==0,a;if((a=i)||(a=t!==null&&t.memoizedState===null?!1:(o&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),Qt(yn,o&1),t===null)return m_(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=r.children,t=r.fallback,s?(r=e.mode,s=e.child,i={mode:"hidden",children:i},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=bw(i,r,0,null),t=hc(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=k_(n),e.memoizedState=S_,t):fE(e,i));if(o=t.memoizedState,o!==null&&(a=o.dehydrated,a!==null))return $re(t,e,i,r,a,o,n);if(s){s=r.fallback,i=e.mode,o=t.child,a=o.sibling;var l={mode:"hidden",children:r.children};return!(i&1)&&e.child!==o?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ul(o,l),r.subtreeFlags=o.subtreeFlags&14680064),a!==null?s=Ul(a,s):(s=hc(s,i,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,i=t.child.memoizedState,i=i===null?k_(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=t.childLanes&~n,e.memoizedState=S_,r}return s=t.child,t=s.sibling,r=Ul(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function fE(t,e){return e=bw({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function gv(t,e,n,r){return r!==null&&QN(r),kf(e,t.child,null,n),t=fE(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $re(t,e,n,r,o,s,i){if(n)return e.flags&256?(e.flags&=-257,r=xC(Error(he(422))),gv(t,e,i,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,o=e.mode,r=bw({mode:"visible",children:r.children},o,0,null),s=hc(s,o,i,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&kf(e,t.child,null,i),e.child.memoizedState=k_(i),e.memoizedState=S_,s);if(!(e.mode&1))return gv(t,e,i,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(he(419)),r=xC(s,r,void 0),gv(t,e,i,r)}if(a=(i&t.childLanes)!==0,Co||a){if(r=gr,r!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|i)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,Ka(t,o),gi(r,t,o,-1))}return vE(),r=xC(Error(he(421))),gv(t,e,i,r)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=Mre.bind(null,t),o._reactRetry=e,null):(t=s.treeContext,Jo=Bl(o.nextSibling),ts=e,dn=!0,li=null,t!==null&&(Cs[Ts++]=_a,Cs[Ts++]=Ia,Cs[Ts++]=kc,_a=t.id,Ia=t.overflow,kc=e),e=fE(e,r.children),e.flags|=4096,e)}function HM(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),g_(t.return,e,n)}function wC(t,e,n,r,o){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o)}function qU(t,e,n){var r=e.pendingProps,o=r.revealOrder,s=r.tail;if(ro(t,e,r.children,n),r=yn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&HM(t,n,e);else if(t.tag===19)HM(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Qt(yn,r),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&Qb(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),wC(e,!1,o,n,s);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&Qb(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}wC(e,!0,n,null,s);break;case"together":wC(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function gb(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xa(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Cc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(he(153));if(e.child!==null){for(t=e.child,n=Ul(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ul(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Cre(t,e,n){switch(e.tag){case 3:GU(e),Sf();break;case 5:bU(e);break;case 1:Eo(e.type)&&Hb(e);break;case 4:oE(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,o=e.memoizedProps.value;Qt(Xb,r._currentValue),r._currentValue=o;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Qt(yn,yn.current&1),e.flags|=128,null):n&e.child.childLanes?HU(t,e,n):(Qt(yn,yn.current&1),t=Xa(t,e,n),t!==null?t.sibling:null);Qt(yn,yn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return qU(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Qt(yn,yn.current),r)break;return null;case 22:case 23:return e.lanes=0,WU(t,e,n)}return Xa(t,e,n)}var KU,$_,XU,YU;KU=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$_=function(){};XU=function(t,e,n,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,rc(Zi.current);var s=null;switch(n){case"input":o=HT(t,o),r=HT(t,r),s=[];break;case"select":o=Sn({},o,{value:void 0}),r=Sn({},r,{value:void 0}),s=[];break;case"textarea":o=XT(t,o),r=XT(t,r),s=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ub)}ZT(n,r);var i;n=null;for(u in o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&o[u]!=null)if(u==="style"){var a=o[u];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(km.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=o!=null?o[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(i in a)!a.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&a[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(km.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&rn("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};YU=function(t,e,n,r){n!==r&&(e.flags|=4)};function mh(t,e){if(!dn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Lr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Tre(t,e,n){var r=e.pendingProps;switch(ZN(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lr(e),null;case 1:return Eo(e.type)&&Gb(),Lr(e),null;case 3:return r=e.stateNode,$f(),an(No),an(Qr),iE(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(hv(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,li!==null&&(O_(li),li=null))),$_(t,e),Lr(e),null;case 5:sE(e);var o=rc(Dm.current);if(n=e.type,t!==null&&e.stateNode!=null)XU(t,e,n,r,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(he(166));return Lr(e),null}if(t=rc(Zi.current),hv(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Wi]=e,r[Pm]=s,t=(e.mode&1)!==0,n){case"dialog":rn("cancel",r),rn("close",r);break;case"iframe":case"object":case"embed":rn("load",r);break;case"video":case"audio":for(o=0;o<Mh.length;o++)rn(Mh[o],r);break;case"source":rn("error",r);break;case"img":case"image":case"link":rn("error",r),rn("load",r);break;case"details":rn("toggle",r);break;case"input":tM(r,s),rn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},rn("invalid",r);break;case"textarea":rM(r,s),rn("invalid",r)}ZT(n,s),o=null;for(var i in s)if(s.hasOwnProperty(i)){var a=s[i];i==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&pv(r.textContent,a,t),o=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&pv(r.textContent,a,t),o=["children",""+a]):km.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&rn("scroll",r)}switch(n){case"input":sv(r),nM(r,s,!0);break;case"textarea":sv(r),oM(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ub)}r=o,e.updateQueue=r,r!==null&&(e.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$5(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=i.createElement(n,{is:r.is}):(t=i.createElement(n),n==="select"&&(i=t,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):t=i.createElementNS(t,n),t[Wi]=e,t[Pm]=r,KU(t,e,!1,!1),e.stateNode=t;e:{switch(i=QT(n,r),n){case"dialog":rn("cancel",t),rn("close",t),o=r;break;case"iframe":case"object":case"embed":rn("load",t),o=r;break;case"video":case"audio":for(o=0;o<Mh.length;o++)rn(Mh[o],t);o=r;break;case"source":rn("error",t),o=r;break;case"img":case"image":case"link":rn("error",t),rn("load",t),o=r;break;case"details":rn("toggle",t),o=r;break;case"input":tM(t,r),o=HT(t,r),rn("invalid",t);break;case"option":o=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=Sn({},r,{value:void 0}),rn("invalid",t);break;case"textarea":rM(t,r),o=XT(t,r),rn("invalid",t);break;default:o=r}ZT(n,o),a=o;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?_5(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&C5(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&$m(t,l):typeof l=="number"&&$m(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(km.hasOwnProperty(s)?l!=null&&s==="onScroll"&&rn("scroll",t):l!=null&&FN(t,s,l,i))}switch(n){case"input":sv(t),nM(t,r,!1);break;case"textarea":sv(t),oM(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Zl(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Qd(t,!!r.multiple,s,!1):r.defaultValue!=null&&Qd(t,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=Ub)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Lr(e),null;case 6:if(t&&e.stateNode!=null)YU(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(he(166));if(n=rc(Dm.current),rc(Zi.current),hv(e)){if(r=e.stateNode,n=e.memoizedProps,r[Wi]=e,(s=r.nodeValue!==n)&&(t=ts,t!==null))switch(t.tag){case 3:pv(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&pv(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Wi]=e,e.stateNode=r}return Lr(e),null;case 13:if(an(yn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(dn&&Jo!==null&&e.mode&1&&!(e.flags&128))hU(),Sf(),e.flags|=98560,s=!1;else if(s=hv(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(he(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(he(317));s[Wi]=e}else Sf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Lr(e),s=!1}else li!==null&&(O_(li),li=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||yn.current&1?tr===0&&(tr=3):vE())),e.updateQueue!==null&&(e.flags|=4),Lr(e),null);case 4:return $f(),$_(t,e),t===null&&Am(e.stateNode.containerInfo),Lr(e),null;case 10:return tE(e.type._context),Lr(e),null;case 17:return Eo(e.type)&&Gb(),Lr(e),null;case 19:if(an(yn),s=e.memoizedState,s===null)return Lr(e),null;if(r=(e.flags&128)!==0,i=s.rendering,i===null)if(r)mh(s,!1);else{if(tr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=Qb(t),i!==null){for(e.flags|=128,mh(s,!1),r=i.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,t=i.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Qt(yn,yn.current&1|2),e.child}t=t.sibling}s.tail!==null&&Rn()>Tf&&(e.flags|=128,r=!0,mh(s,!1),e.lanes=4194304)}else{if(!r)if(t=Qb(i),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),mh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!dn)return Lr(e),null}else 2*Rn()-s.renderingStartTime>Tf&&n!==1073741824&&(e.flags|=128,r=!0,mh(s,!1),e.lanes=4194304);s.isBackwards?(i.sibling=e.child,e.child=i):(n=s.last,n!==null?n.sibling=i:e.child=i,s.last=i)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Rn(),e.sibling=null,n=yn.current,Qt(yn,r?n&1|2:n&1),e):(Lr(e),null);case 22:case 23:return yE(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Xo&1073741824&&(Lr(e),e.subtreeFlags&6&&(e.flags|=8192)):Lr(e),null;case 24:return null;case 25:return null}throw Error(he(156,e.tag))}function _re(t,e){switch(ZN(e),e.tag){case 1:return Eo(e.type)&&Gb(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return $f(),an(No),an(Qr),iE(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return sE(e),null;case 13:if(an(yn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(he(340));Sf()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return an(yn),null;case 4:return $f(),null;case 10:return tE(e.type._context),null;case 22:case 23:return yE(),null;case 24:return null;default:return null}}var yv=!1,Wr=!1,Ire=typeof WeakSet=="function"?WeakSet:Set,Ce=null;function zd(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Cn(t,e,r)}else n.current=null}function C_(t,e,n){try{n()}catch(r){Cn(t,e,r)}}var qM=!1;function Nre(t,e){if(l_=jb,t=tU(),XN(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var i=0,a=-1,l=-1,u=0,c=0,d=t,f=null;t:for(;;){for(var p;d!==n||o!==0&&d.nodeType!==3||(a=i+o),d!==s||r!==0&&d.nodeType!==3||(l=i+r),d.nodeType===3&&(i+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++u===o&&(a=i),f===s&&++c===r&&(l=i),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(u_={focusedElem:t,selectionRange:n},jb=!1,Ce=e;Ce!==null;)if(e=Ce,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ce=t;else for(;Ce!==null;){e=Ce;try{var h=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var m=h.memoizedProps,g=h.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:si(e.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(he(163))}}catch(x){Cn(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,Ce=t;break}Ce=e.return}return h=qM,qM=!1,h}function rm(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var s=o.destroy;o.destroy=void 0,s!==void 0&&C_(e,n,s)}o=o.next}while(o!==r)}}function yw(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function T_(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ZU(t){var e=t.alternate;e!==null&&(t.alternate=null,ZU(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Wi],delete e[Pm],delete e[f_],delete e[dre],delete e[fre])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function QU(t){return t.tag===5||t.tag===3||t.tag===4}function KM(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||QU(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function __(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ub));else if(r!==4&&(t=t.child,t!==null))for(__(t,e,n),t=t.sibling;t!==null;)__(t,e,n),t=t.sibling}function I_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(I_(t,e,n),t=t.sibling;t!==null;)I_(t,e,n),t=t.sibling}var Tr=null,ii=!1;function wl(t,e,n){for(n=n.child;n!==null;)JU(t,e,n),n=n.sibling}function JU(t,e,n){if(Yi&&typeof Yi.onCommitFiberUnmount=="function")try{Yi.onCommitFiberUnmount(uw,n)}catch{}switch(n.tag){case 5:Wr||zd(n,e);case 6:var r=Tr,o=ii;Tr=null,wl(t,e,n),Tr=r,ii=o,Tr!==null&&(ii?(t=Tr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Tr.removeChild(n.stateNode));break;case 18:Tr!==null&&(ii?(t=Tr,n=n.stateNode,t.nodeType===8?hC(t.parentNode,n):t.nodeType===1&&hC(t,n),Im(t)):hC(Tr,n.stateNode));break;case 4:r=Tr,o=ii,Tr=n.stateNode.containerInfo,ii=!0,wl(t,e,n),Tr=r,ii=o;break;case 0:case 11:case 14:case 15:if(!Wr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var s=o,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&C_(n,e,i),o=o.next}while(o!==r)}wl(t,e,n);break;case 1:if(!Wr&&(zd(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Cn(n,e,a)}wl(t,e,n);break;case 21:wl(t,e,n);break;case 22:n.mode&1?(Wr=(r=Wr)||n.memoizedState!==null,wl(t,e,n),Wr=r):wl(t,e,n);break;default:wl(t,e,n)}}function XM(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Ire),e.forEach(function(r){var o=Lre.bind(null,t,r);n.has(r)||(n.add(r),r.then(o,o))})}}function ti(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var s=t,i=e,a=i;e:for(;a!==null;){switch(a.tag){case 5:Tr=a.stateNode,ii=!1;break e;case 3:Tr=a.stateNode.containerInfo,ii=!0;break e;case 4:Tr=a.stateNode.containerInfo,ii=!0;break e}a=a.return}if(Tr===null)throw Error(he(160));JU(s,i,o),Tr=null,ii=!1;var l=o.alternate;l!==null&&(l.return=null),o.return=null}catch(u){Cn(o,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)e6(e,t),e=e.sibling}function e6(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ti(e,t),Oi(t),r&4){try{rm(3,t,t.return),yw(3,t)}catch(m){Cn(t,t.return,m)}try{rm(5,t,t.return)}catch(m){Cn(t,t.return,m)}}break;case 1:ti(e,t),Oi(t),r&512&&n!==null&&zd(n,n.return);break;case 5:if(ti(e,t),Oi(t),r&512&&n!==null&&zd(n,n.return),t.flags&32){var o=t.stateNode;try{$m(o,"")}catch(m){Cn(t,t.return,m)}}if(r&4&&(o=t.stateNode,o!=null)){var s=t.memoizedProps,i=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&S5(o,s),QT(a,i);var u=QT(a,s);for(i=0;i<l.length;i+=2){var c=l[i],d=l[i+1];c==="style"?_5(o,d):c==="dangerouslySetInnerHTML"?C5(o,d):c==="children"?$m(o,d):FN(o,c,d,u)}switch(a){case"input":qT(o,s);break;case"textarea":k5(o,s);break;case"select":var f=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Qd(o,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?Qd(o,!!s.multiple,s.defaultValue,!0):Qd(o,!!s.multiple,s.multiple?[]:"",!1))}o[Pm]=s}catch(m){Cn(t,t.return,m)}}break;case 6:if(ti(e,t),Oi(t),r&4){if(t.stateNode===null)throw Error(he(162));o=t.stateNode,s=t.memoizedProps;try{o.nodeValue=s}catch(m){Cn(t,t.return,m)}}break;case 3:if(ti(e,t),Oi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Im(e.containerInfo)}catch(m){Cn(t,t.return,m)}break;case 4:ti(e,t),Oi(t);break;case 13:ti(e,t),Oi(t),o=t.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(mE=Rn())),r&4&&XM(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Wr=(u=Wr)||c,ti(e,t),Wr=u):ti(e,t),Oi(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(Ce=t,c=t.child;c!==null;){for(d=Ce=c;Ce!==null;){switch(f=Ce,p=f.child,f.tag){case 0:case 11:case 14:case 15:rm(4,f,f.return);break;case 1:zd(f,f.return);var h=f.stateNode;if(typeof h.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,h.props=e.memoizedProps,h.state=e.memoizedState,h.componentWillUnmount()}catch(m){Cn(r,n,m)}}break;case 5:zd(f,f.return);break;case 22:if(f.memoizedState!==null){ZM(d);continue}}p!==null?(p.return=f,Ce=p):ZM(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{o=d.stateNode,u?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,i=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=T5("display",i))}catch(m){Cn(t,t.return,m)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){Cn(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ti(e,t),Oi(t),r&4&&XM(t);break;case 21:break;default:ti(e,t),Oi(t)}}function Oi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(QU(n)){var r=n;break e}n=n.return}throw Error(he(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&($m(o,""),r.flags&=-33);var s=KM(t);I_(t,s,o);break;case 3:case 4:var i=r.stateNode.containerInfo,a=KM(t);__(t,a,i);break;default:throw Error(he(161))}}catch(l){Cn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Ere(t,e,n){Ce=t,t6(t)}function t6(t,e,n){for(var r=(t.mode&1)!==0;Ce!==null;){var o=Ce,s=o.child;if(o.tag===22&&r){var i=o.memoizedState!==null||yv;if(!i){var a=o.alternate,l=a!==null&&a.memoizedState!==null||Wr;a=yv;var u=Wr;if(yv=i,(Wr=l)&&!u)for(Ce=o;Ce!==null;)i=Ce,l=i.child,i.tag===22&&i.memoizedState!==null?QM(o):l!==null?(l.return=i,Ce=l):QM(o);for(;s!==null;)Ce=s,t6(s),s=s.sibling;Ce=o,yv=a,Wr=u}YM(t)}else o.subtreeFlags&8772&&s!==null?(s.return=o,Ce=s):YM(t)}}function YM(t){for(;Ce!==null;){var e=Ce;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Wr||yw(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Wr)if(n===null)r.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:si(e.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&RM(e,s,r);break;case 3:var i=e.updateQueue;if(i!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}RM(e,i,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Im(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(he(163))}Wr||e.flags&512&&T_(e)}catch(f){Cn(e,e.return,f)}}if(e===t){Ce=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ce=n;break}Ce=e.return}}function ZM(t){for(;Ce!==null;){var e=Ce;if(e===t){Ce=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ce=n;break}Ce=e.return}}function QM(t){for(;Ce!==null;){var e=Ce;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{yw(4,e)}catch(l){Cn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var o=e.return;try{r.componentDidMount()}catch(l){Cn(e,o,l)}}var s=e.return;try{T_(e)}catch(l){Cn(e,s,l)}break;case 5:var i=e.return;try{T_(e)}catch(l){Cn(e,i,l)}}}catch(l){Cn(e,e.return,l)}if(e===t){Ce=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ce=a;break}Ce=e.return}}var Are=Math.ceil,tx=al.ReactCurrentDispatcher,pE=al.ReactCurrentOwner,Fs=al.ReactCurrentBatchConfig,xt=0,gr=null,zn=null,Ar=0,Xo=0,Bd=mu(0),tr=0,zm=null,Cc=0,vw=0,hE=0,om=null,ko=null,mE=0,Tf=1/0,wa=null,nx=!1,N_=null,Vl=null,vv=!1,Al=null,rx=0,sm=0,E_=null,yb=-1,vb=0;function lo(){return xt&6?Rn():yb!==-1?yb:yb=Rn()}function Wl(t){return t.mode&1?xt&2&&Ar!==0?Ar&-Ar:hre.transition!==null?(vb===0&&(vb=z5()),vb):(t=Pt,t!==0||(t=window.event,t=t===void 0?16:H5(t.type)),t):1}function gi(t,e,n,r){if(50<sm)throw sm=0,E_=null,Error(he(185));Qg(t,n,r),(!(xt&2)||t!==gr)&&(t===gr&&(!(xt&2)&&(vw|=n),tr===4&&Il(t,Ar)),Ao(t,r),n===1&&xt===0&&!(e.mode&1)&&(Tf=Rn()+500,hw&&gu()))}function Ao(t,e){var n=t.callbackNode;hne(t,e);var r=Bb(t,t===gr?Ar:0);if(r===0)n!==null&&aM(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&aM(n),e===1)t.tag===0?pre(JM.bind(null,t)):dU(JM.bind(null,t)),ure(function(){!(xt&6)&&gu()}),n=null;else{switch(B5(r)){case 1:n=jN;break;case 4:n=M5;break;case 16:n=zb;break;case 536870912:n=L5;break;default:n=zb}n=u6(n,n6.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function n6(t,e){if(yb=-1,vb=0,xt&6)throw Error(he(327));var n=t.callbackNode;if(rf()&&t.callbackNode!==n)return null;var r=Bb(t,t===gr?Ar:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ox(t,r);else{e=r;var o=xt;xt|=2;var s=o6();(gr!==t||Ar!==e)&&(wa=null,Tf=Rn()+500,pc(t,e));do try{Rre();break}catch(a){r6(t,a)}while(!0);eE(),tx.current=s,xt=o,zn!==null?e=0:(gr=null,Ar=0,e=tr)}if(e!==0){if(e===2&&(o=r_(t),o!==0&&(r=o,e=A_(t,o))),e===1)throw n=zm,pc(t,0),Il(t,r),Ao(t,Rn()),n;if(e===6)Il(t,r);else{if(o=t.current.alternate,!(r&30)&&!Ore(o)&&(e=ox(t,r),e===2&&(s=r_(t),s!==0&&(r=s,e=A_(t,s))),e===1))throw n=zm,pc(t,0),Il(t,r),Ao(t,Rn()),n;switch(t.finishedWork=o,t.finishedLanes=r,e){case 0:case 1:throw Error(he(345));case 2:Wu(t,ko,wa);break;case 3:if(Il(t,r),(r&130023424)===r&&(e=mE+500-Rn(),10<e)){if(Bb(t,0)!==0)break;if(o=t.suspendedLanes,(o&r)!==r){lo(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=d_(Wu.bind(null,t,ko,wa),e);break}Wu(t,ko,wa);break;case 4:if(Il(t,r),(r&4194240)===r)break;for(e=t.eventTimes,o=-1;0<r;){var i=31-mi(r);s=1<<i,i=e[i],i>o&&(o=i),r&=~s}if(r=o,r=Rn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Are(r/1960))-r,10<r){t.timeoutHandle=d_(Wu.bind(null,t,ko,wa),r);break}Wu(t,ko,wa);break;case 5:Wu(t,ko,wa);break;default:throw Error(he(329))}}}return Ao(t,Rn()),t.callbackNode===n?n6.bind(null,t):null}function A_(t,e){var n=om;return t.current.memoizedState.isDehydrated&&(pc(t,e).flags|=256),t=ox(t,e),t!==2&&(e=ko,ko=n,e!==null&&O_(e)),t}function O_(t){ko===null?ko=t:ko.push.apply(ko,t)}function Ore(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],s=o.getSnapshot;o=o.value;try{if(!wi(s(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Il(t,e){for(e&=~hE,e&=~vw,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-mi(e),r=1<<n;t[n]=-1,e&=~r}}function JM(t){if(xt&6)throw Error(he(327));rf();var e=Bb(t,0);if(!(e&1))return Ao(t,Rn()),null;var n=ox(t,e);if(t.tag!==0&&n===2){var r=r_(t);r!==0&&(e=r,n=A_(t,r))}if(n===1)throw n=zm,pc(t,0),Il(t,e),Ao(t,Rn()),n;if(n===6)throw Error(he(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Wu(t,ko,wa),Ao(t,Rn()),null}function gE(t,e){var n=xt;xt|=1;try{return t(e)}finally{xt=n,xt===0&&(Tf=Rn()+500,hw&&gu())}}function Tc(t){Al!==null&&Al.tag===0&&!(xt&6)&&rf();var e=xt;xt|=1;var n=Fs.transition,r=Pt;try{if(Fs.transition=null,Pt=1,t)return t()}finally{Pt=r,Fs.transition=n,xt=e,!(xt&6)&&gu()}}function yE(){Xo=Bd.current,an(Bd)}function pc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,lre(n)),zn!==null)for(n=zn.return;n!==null;){var r=n;switch(ZN(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Gb();break;case 3:$f(),an(No),an(Qr),iE();break;case 5:sE(r);break;case 4:$f();break;case 13:an(yn);break;case 19:an(yn);break;case 10:tE(r.type._context);break;case 22:case 23:yE()}n=n.return}if(gr=t,zn=t=Ul(t.current,null),Ar=Xo=e,tr=0,zm=null,hE=vw=Cc=0,ko=om=null,nc!==null){for(e=0;e<nc.length;e++)if(n=nc[e],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,s=n.pending;if(s!==null){var i=s.next;s.next=o,r.next=i}n.pending=r}nc=null}return t}function r6(t,e){do{var n=zn;try{if(eE(),hb.current=ex,Jb){for(var r=wn.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Jb=!1}if($c=0,fr=Jn=wn=null,nm=!1,Fm=0,pE.current=null,n===null||n.return===null){tr=1,zm=e,zn=null;break}e:{var s=t,i=n.return,a=n,l=e;if(e=Ar,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=BM(i);if(p!==null){p.flags&=-257,jM(p,i,a,s,e),p.mode&1&&zM(s,u,e),e=p,l=u;var h=e.updateQueue;if(h===null){var m=new Set;m.add(l),e.updateQueue=m}else h.add(l);break e}else{if(!(e&1)){zM(s,u,e),vE();break e}l=Error(he(426))}}else if(dn&&a.mode&1){var g=BM(i);if(g!==null){!(g.flags&65536)&&(g.flags|=256),jM(g,i,a,s,e),QN(Cf(l,a));break e}}s=l=Cf(l,a),tr!==4&&(tr=2),om===null?om=[s]:om.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=BU(s,l,e);PM(s,y);break e;case 1:a=l;var v=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Vl===null||!Vl.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=jU(s,a,e);PM(s,x);break e}}s=s.return}while(s!==null)}i6(n)}catch(w){e=w,zn===n&&n!==null&&(zn=n=n.return);continue}break}while(!0)}function o6(){var t=tx.current;return tx.current=ex,t===null?ex:t}function vE(){(tr===0||tr===3||tr===2)&&(tr=4),gr===null||!(Cc&268435455)&&!(vw&268435455)||Il(gr,Ar)}function ox(t,e){var n=xt;xt|=2;var r=o6();(gr!==t||Ar!==e)&&(wa=null,pc(t,e));do try{Pre();break}catch(o){r6(t,o)}while(!0);if(eE(),xt=n,tx.current=r,zn!==null)throw Error(he(261));return gr=null,Ar=0,tr}function Pre(){for(;zn!==null;)s6(zn)}function Rre(){for(;zn!==null&&!sne();)s6(zn)}function s6(t){var e=l6(t.alternate,t,Xo);t.memoizedProps=t.pendingProps,e===null?i6(t):zn=e,pE.current=null}function i6(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=_re(n,e),n!==null){n.flags&=32767,zn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{tr=6,zn=null;return}}else if(n=Tre(n,e,Xo),n!==null){zn=n;return}if(e=e.sibling,e!==null){zn=e;return}zn=e=t}while(e!==null);tr===0&&(tr=5)}function Wu(t,e,n){var r=Pt,o=Fs.transition;try{Fs.transition=null,Pt=1,Dre(t,e,n,r)}finally{Fs.transition=o,Pt=r}return null}function Dre(t,e,n,r){do rf();while(Al!==null);if(xt&6)throw Error(he(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(he(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(mne(t,s),t===gr&&(zn=gr=null,Ar=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||vv||(vv=!0,u6(zb,function(){return rf(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Fs.transition,Fs.transition=null;var i=Pt;Pt=1;var a=xt;xt|=4,pE.current=null,Nre(t,n),e6(n,t),tre(u_),jb=!!l_,u_=l_=null,t.current=n,Ere(n),ine(),xt=a,Pt=i,Fs.transition=s}else t.current=n;if(vv&&(vv=!1,Al=t,rx=o),s=t.pendingLanes,s===0&&(Vl=null),une(n.stateNode),Ao(t,Rn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(nx)throw nx=!1,t=N_,N_=null,t;return rx&1&&t.tag!==0&&rf(),s=t.pendingLanes,s&1?t===E_?sm++:(sm=0,E_=t):sm=0,gu(),null}function rf(){if(Al!==null){var t=B5(rx),e=Fs.transition,n=Pt;try{if(Fs.transition=null,Pt=16>t?16:t,Al===null)var r=!1;else{if(t=Al,Al=null,rx=0,xt&6)throw Error(he(331));var o=xt;for(xt|=4,Ce=t.current;Ce!==null;){var s=Ce,i=s.child;if(Ce.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Ce=u;Ce!==null;){var c=Ce;switch(c.tag){case 0:case 11:case 15:rm(8,c,s)}var d=c.child;if(d!==null)d.return=c,Ce=d;else for(;Ce!==null;){c=Ce;var f=c.sibling,p=c.return;if(ZU(c),c===u){Ce=null;break}if(f!==null){f.return=p,Ce=f;break}Ce=p}}}var h=s.alternate;if(h!==null){var m=h.child;if(m!==null){h.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}Ce=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,Ce=i;else e:for(;Ce!==null;){if(s=Ce,s.flags&2048)switch(s.tag){case 0:case 11:case 15:rm(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Ce=y;break e}Ce=s.return}}var v=t.current;for(Ce=v;Ce!==null;){i=Ce;var b=i.child;if(i.subtreeFlags&2064&&b!==null)b.return=i,Ce=b;else e:for(i=v;Ce!==null;){if(a=Ce,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:yw(9,a)}}catch(w){Cn(a,a.return,w)}if(a===i){Ce=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,Ce=x;break e}Ce=a.return}}if(xt=o,gu(),Yi&&typeof Yi.onPostCommitFiberRoot=="function")try{Yi.onPostCommitFiberRoot(uw,t)}catch{}r=!0}return r}finally{Pt=n,Fs.transition=e}}return!1}function eL(t,e,n){e=Cf(n,e),e=BU(t,e,1),t=jl(t,e,1),e=lo(),t!==null&&(Qg(t,1,e),Ao(t,e))}function Cn(t,e,n){if(t.tag===3)eL(t,t,n);else for(;e!==null;){if(e.tag===3){eL(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Vl===null||!Vl.has(r))){t=Cf(n,t),t=jU(e,t,1),e=jl(e,t,1),t=lo(),e!==null&&(Qg(e,1,t),Ao(e,t));break}}e=e.return}}function Fre(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=lo(),t.pingedLanes|=t.suspendedLanes&n,gr===t&&(Ar&n)===n&&(tr===4||tr===3&&(Ar&130023424)===Ar&&500>Rn()-mE?pc(t,0):hE|=n),Ao(t,e)}function a6(t,e){e===0&&(t.mode&1?(e=lv,lv<<=1,!(lv&130023424)&&(lv=4194304)):e=1);var n=lo();t=Ka(t,e),t!==null&&(Qg(t,e,n),Ao(t,n))}function Mre(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),a6(t,n)}function Lre(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(he(314))}r!==null&&r.delete(e),a6(t,n)}var l6;l6=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||No.current)Co=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Co=!1,Cre(t,e,n);Co=!!(t.flags&131072)}else Co=!1,dn&&e.flags&1048576&&fU(e,Kb,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;gb(t,e),t=e.pendingProps;var o=wf(e,Qr.current);nf(e,n),o=lE(null,e,r,t,o,n);var s=uE();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Eo(r)?(s=!0,Hb(e)):s=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,rE(e),o.updater=gw,e.stateNode=o,o._reactInternals=e,v_(e,r,t,n),e=w_(null,e,r,!0,s,n)):(e.tag=0,dn&&s&&YN(e),ro(null,e,o,n),e=e.child),e;case 16:r=e.elementType;e:{switch(gb(t,e),t=e.pendingProps,o=r._init,r=o(r._payload),e.type=r,o=e.tag=Bre(r),t=si(r,t),o){case 0:e=x_(null,e,r,t,n);break e;case 1:e=UM(null,e,r,t,n);break e;case 11:e=VM(null,e,r,t,n);break e;case 14:e=WM(null,e,r,si(r.type,t),n);break e}throw Error(he(306,r,""))}return e;case 0:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:si(r,o),x_(t,e,r,o,n);case 1:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:si(r,o),UM(t,e,r,o,n);case 3:e:{if(GU(e),t===null)throw Error(he(387));r=e.pendingProps,s=e.memoizedState,o=s.element,vU(t,e),Zb(e,r,null,n);var i=e.memoizedState;if(r=i.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){o=Cf(Error(he(423)),e),e=GM(t,e,r,n,o);break e}else if(r!==o){o=Cf(Error(he(424)),e),e=GM(t,e,r,n,o);break e}else for(Jo=Bl(e.stateNode.containerInfo.firstChild),ts=e,dn=!0,li=null,n=gU(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Sf(),r===o){e=Xa(t,e,n);break e}ro(t,e,r,n)}e=e.child}return e;case 5:return bU(e),t===null&&m_(e),r=e.type,o=e.pendingProps,s=t!==null?t.memoizedProps:null,i=o.children,c_(r,o)?i=null:s!==null&&c_(r,s)&&(e.flags|=32),UU(t,e),ro(t,e,i,n),e.child;case 6:return t===null&&m_(e),null;case 13:return HU(t,e,n);case 4:return oE(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=kf(e,null,r,n):ro(t,e,r,n),e.child;case 11:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:si(r,o),VM(t,e,r,o,n);case 7:return ro(t,e,e.pendingProps,n),e.child;case 8:return ro(t,e,e.pendingProps.children,n),e.child;case 12:return ro(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,o=e.pendingProps,s=e.memoizedProps,i=o.value,Qt(Xb,r._currentValue),r._currentValue=i,s!==null)if(wi(s.value,i)){if(s.children===o.children&&!No.current){e=Xa(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){i=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Da(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),g_(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)i=s.type===e.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(he(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),g_(i,n,e),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===e){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}ro(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,r=e.pendingProps.children,nf(e,n),o=Vs(o),r=r(o),e.flags|=1,ro(t,e,r,n),e.child;case 14:return r=e.type,o=si(r,e.pendingProps),o=si(r.type,o),WM(t,e,r,o,n);case 15:return VU(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:si(r,o),gb(t,e),e.tag=1,Eo(r)?(t=!0,Hb(e)):t=!1,nf(e,n),zU(e,r,o),v_(e,r,o,n),w_(null,e,r,!0,t,n);case 19:return qU(t,e,n);case 22:return WU(t,e,n)}throw Error(he(156,e.tag))};function u6(t,e){return F5(t,e)}function zre(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Is(t,e,n,r){return new zre(t,e,n,r)}function bE(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Bre(t){if(typeof t=="function")return bE(t)?1:0;if(t!=null){if(t=t.$$typeof,t===LN)return 11;if(t===zN)return 14}return 2}function Ul(t,e){var n=t.alternate;return n===null?(n=Is(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function bb(t,e,n,r,o,s){var i=2;if(r=t,typeof t=="function")bE(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case Ed:return hc(n.children,o,s,e);case MN:i=8,o|=8;break;case VT:return t=Is(12,n,e,o|2),t.elementType=VT,t.lanes=s,t;case WT:return t=Is(13,n,e,o),t.elementType=WT,t.lanes=s,t;case UT:return t=Is(19,n,e,o),t.elementType=UT,t.lanes=s,t;case b5:return bw(n,o,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case y5:i=10;break e;case v5:i=9;break e;case LN:i=11;break e;case zN:i=14;break e;case kl:i=16,r=null;break e}throw Error(he(130,t==null?t:typeof t,""))}return e=Is(i,n,e,o),e.elementType=t,e.type=r,e.lanes=s,e}function hc(t,e,n,r){return t=Is(7,t,r,e),t.lanes=n,t}function bw(t,e,n,r){return t=Is(22,t,r,e),t.elementType=b5,t.lanes=n,t.stateNode={isHidden:!1},t}function SC(t,e,n){return t=Is(6,t,null,e),t.lanes=n,t}function kC(t,e,n){return e=Is(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function jre(t,e,n,r,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rC(0),this.expirationTimes=rC(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rC(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function xE(t,e,n,r,o,s,i,a,l){return t=new jre(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Is(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},rE(s),t}function Vre(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Nd,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function c6(t){if(!t)return Ql;t=t._reactInternals;e:{if(Xc(t)!==t||t.tag!==1)throw Error(he(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Eo(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(he(171))}if(t.tag===1){var n=t.type;if(Eo(n))return cU(t,n,e)}return e}function d6(t,e,n,r,o,s,i,a,l){return t=xE(n,r,!0,t,o,s,i,a,l),t.context=c6(null),n=t.current,r=lo(),o=Wl(n),s=Da(r,o),s.callback=e??null,jl(n,s,o),t.current.lanes=o,Qg(t,o,r),Ao(t,r),t}function xw(t,e,n,r){var o=e.current,s=lo(),i=Wl(o);return n=c6(n),e.context===null?e.context=n:e.pendingContext=n,e=Da(s,i),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=jl(o,e,i),t!==null&&(gi(t,o,i,s),pb(t,o,i)),i}function sx(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function tL(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function wE(t,e){tL(t,e),(t=t.alternate)&&tL(t,e)}function Wre(){return null}var f6=typeof reportError=="function"?reportError:function(t){console.error(t)};function SE(t){this._internalRoot=t}ww.prototype.render=SE.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(he(409));xw(t,e,null,null)};ww.prototype.unmount=SE.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Tc(function(){xw(null,t,null,null)}),e[qa]=null}};function ww(t){this._internalRoot=t}ww.prototype.unstable_scheduleHydration=function(t){if(t){var e=W5();t={blockedOn:null,target:t,priority:e};for(var n=0;n<_l.length&&e!==0&&e<_l[n].priority;n++);_l.splice(n,0,t),n===0&&G5(t)}};function kE(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Sw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function nL(){}function Ure(t,e,n,r,o){if(o){if(typeof r=="function"){var s=r;r=function(){var u=sx(i);s.call(u)}}var i=d6(e,r,t,0,null,!1,!1,"",nL);return t._reactRootContainer=i,t[qa]=i.current,Am(t.nodeType===8?t.parentNode:t),Tc(),i}for(;o=t.lastChild;)t.removeChild(o);if(typeof r=="function"){var a=r;r=function(){var u=sx(l);a.call(u)}}var l=xE(t,0,!1,null,null,!1,!1,"",nL);return t._reactRootContainer=l,t[qa]=l.current,Am(t.nodeType===8?t.parentNode:t),Tc(function(){xw(e,l,n,r)}),l}function kw(t,e,n,r,o){var s=n._reactRootContainer;if(s){var i=s;if(typeof o=="function"){var a=o;o=function(){var l=sx(i);a.call(l)}}xw(e,i,t,o)}else i=Ure(n,e,t,o,r);return sx(i)}j5=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Fh(e.pendingLanes);n!==0&&(VN(e,n|1),Ao(e,Rn()),!(xt&6)&&(Tf=Rn()+500,gu()))}break;case 13:Tc(function(){var r=Ka(t,1);if(r!==null){var o=lo();gi(r,t,1,o)}}),wE(t,1)}};WN=function(t){if(t.tag===13){var e=Ka(t,134217728);if(e!==null){var n=lo();gi(e,t,134217728,n)}wE(t,134217728)}};V5=function(t){if(t.tag===13){var e=Wl(t),n=Ka(t,e);if(n!==null){var r=lo();gi(n,t,e,r)}wE(t,e)}};W5=function(){return Pt};U5=function(t,e){var n=Pt;try{return Pt=t,e()}finally{Pt=n}};e_=function(t,e,n){switch(e){case"input":if(qT(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var o=pw(r);if(!o)throw Error(he(90));w5(r),qT(r,o)}}}break;case"textarea":k5(t,n);break;case"select":e=n.value,e!=null&&Qd(t,!!n.multiple,e,!1)}};E5=gE;A5=Tc;var Gre={usingClientEntryPoint:!1,Events:[ey,Rd,pw,I5,N5,gE]},gh={findFiberByHostInstance:tc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Hre={bundleType:gh.bundleType,version:gh.version,rendererPackageName:gh.rendererPackageName,rendererConfig:gh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:al.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=R5(t),t===null?null:t.stateNode},findFiberByHostInstance:gh.findFiberByHostInstance||Wre,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bv.isDisabled&&bv.supportsFiber)try{uw=bv.inject(Hre),Yi=bv}catch{}}us.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gre;us.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kE(e))throw Error(he(200));return Vre(t,e,null,n)};us.createRoot=function(t,e){if(!kE(t))throw Error(he(299));var n=!1,r="",o=f6;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=xE(t,1,!1,null,null,n,!1,r,o),t[qa]=e.current,Am(t.nodeType===8?t.parentNode:t),new SE(e)};us.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(he(188)):(t=Object.keys(t).join(","),Error(he(268,t)));return t=R5(e),t=t===null?null:t.stateNode,t};us.flushSync=function(t){return Tc(t)};us.hydrate=function(t,e,n){if(!Sw(e))throw Error(he(200));return kw(null,t,e,!0,n)};us.hydrateRoot=function(t,e,n){if(!kE(t))throw Error(he(405));var r=n!=null&&n.hydratedSources||null,o=!1,s="",i=f6;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),e=d6(e,null,t,1,n??null,o,!1,s,i),t[qa]=e.current,Am(t),r)for(t=0;t<r.length;t++)n=r[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new ww(e)};us.render=function(t,e,n){if(!Sw(e))throw Error(he(200));return kw(null,t,e,!1,n)};us.unmountComponentAtNode=function(t){if(!Sw(t))throw Error(he(40));return t._reactRootContainer?(Tc(function(){kw(null,null,t,!1,function(){t._reactRootContainer=null,t[qa]=null})}),!0):!1};us.unstable_batchedUpdates=gE;us.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Sw(n))throw Error(he(200));if(t==null||t._reactInternals===void 0)throw Error(he(38));return kw(t,e,n,!1,r)};us.version="18.3.1-next-f1338f8080-20240426";function p6(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(p6)}catch(t){console.error(t)}}p6(),p5.exports=us;var $E=p5.exports,h6,rL=$E;h6=rL.createRoot,rL.hydrateRoot;function qre(t){return t.default||t}function yi(t){return typeof t=="number"}function Kre(t){return!isNaN(parseFloat(String(t)))&&isFinite(Number(t))&&/^-?\d*\.?\d+$/.test(String(t))}function ll(t){return Object.prototype.toString.call(t)==="[object String]"}function Ms(t){return typeof t>"u"}function Xre(t){return t===null}function vt(t){return t!==null&&(typeof t=="object"||typeof t=="function")&&!qe(t)}function qe(t){return Array.isArray(t)}function CE(t){return vt(t)&&!Object.keys(t).length}function _c(t){return typeof t=="function"}function ul({name:t,defaultValue:e,errorMessage:n="useContext: `context` is undefined. Seems you forgot to wrap component within the Provider",strict:r=!0}={}){const o=N.createContext(e);o.displayName=t;const s=()=>{const i=N.useContext(o);if(!i&&r){const a=new Error(n);throw a.name="ContextError",Error.captureStackTrace(a,s),a}return i};return[o.Provider,s,o]}var vi=globalThis.document?N.useLayoutEffect:N.useEffect;function Yre(t){return N.useEffect(()=>()=>t(),[])}function kp(t){return N.Children.toArray(t).filter(e=>N.isValidElement(e))}function m6(t){return N.isValidElement(t)||ll(t)||yi(t)}function xb(t,e){var n,r;if(t.type===e||t.__ui__&&e.__ui__&&t.__ui__===e.__ui__)return!0;const o=t.type._payload;return!!((n=o==null?void 0:o.value)!=null&&n.__ui__&&e.__ui__&&((r=o==null?void 0:o.value)==null?void 0:r.__ui__)===e.__ui__)}function $C(t,...e){return t.find(r=>e.some(o=>xb(r,o)))}function Zre(t,...e){return t.find(r=>e.some(o=>xb(r,o)))?t.sort((r,o)=>e.some(s=>xb(r,s))?-1:e.some(s=>xb(o,s))?1:0):[void 0,...t]}function Ye(...t){return t.filter(Boolean).join(" ")}function g6(t){return vt(t)&&"current"in t}function $d(t,e){if(t!=null){if(typeof t=="function"){t(e);return}try{t.current=e}catch{throw new Error(`Cannot assign value '${e}' to ref '${t}'`)}}}function uo(...t){return function(e){return t.forEach(n=>{$d(n,e)})}}function Fa(t,e=[]){const n=N.useRef(t);return N.useEffect(()=>{n.current=t}),N.useCallback((...r)=>{var o;return(o=n.current)==null?void 0:o.call(n,...r)},e)}function Qi(t,e){const n=N.useRef(!1),r=N.useRef(!1);N.useEffect(()=>{if(n.current&&r.current)return t();r.current=!0},e),N.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[])}var Qre=0;function Jre(t){return`${t}-${++Qre}-${new Date().getTime()}`}function eoe(t,e=""){return t.replace(/\s+/g,e)}function toe(t){switch(t){case"top":return"bottom";case"bottom":return"top";case"left":return"right";case"right":return"left";case"start":return"end";case"end":return"start";case"x":return"y";case"y":return"x";case"enter":return"exit";case"exit":return"enter";case"vertical":return"horizontal";case"horizontal":return"vertical";case"up":return"down";case"down":return"up";case"block":return"inline";case"inline":return"block";default:return t}}function noe(t){return t.toLowerCase().replace(/[_-](.)/g,(e,n)=>n.toUpperCase())}function oL(t){return noe(t).replace(/^(.)/,(e,n)=>n.toUpperCase())}function roe(t){return t.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase().replace(/^-/,"")}function $w(t,...e){return e.join(` ${t} `).replace(/calc/g,"")}function sL(...t){return`calc(${$w("+",...t)})`}function iL(...t){return`calc(${$w("-",...t)})`}function P_(...t){return`calc(${$w("*",...t)})`}function aL(...t){return`calc(${$w("/",...t)})`}function lL(t){return isNaN(parseFloat(t.toString()))?P_(t,-1):String(t).startsWith("-")?String(t).slice(1):`-${t}`}var Ui=Object.assign(t=>({add:(...e)=>Ui(sL(t,...e)),divide:(...e)=>Ui(aL(t,...e)),multiply:(...e)=>Ui(P_(t,...e)),negate:()=>Ui(lL(t)),subtract:(...e)=>Ui(iL(t,...e)),toString:()=>t.toString()}),{add:sL,divide:aL,multiply:P_,negate:lL,subtract:iL});function y6(t,e){if(!e.length)return t;const[n,...r]=e;if(r.length===0&&n&&n in t){const{[n]:o,...s}=t;return s}return n&&t[n]&&vt(t[n])?{...t,[n]:y6(t[n],r)}:t}function ny(t,e){return e.reduce((n,r)=>{const o=ll(r)?r.split("."):[];return y6(n,o)},t)}function ix(t,e,n="__fallback"){return e.reduce((r,o)=>{const s=ll(o)?o.split("."):[];if(!s.length)return r;const i=Be(t,o,n);return i===n||(r=pn(r,s.reduceRight((a,l)=>({[l]:l===s.at(-1)?i:a}),{}))),r},{})}function v6(t,e){const n={},r={};for(const[o,s]of Object.entries(t))e.includes(o)?n[o]=s:r[o]=s;return[n,r]}function b6(t,e){const n={};return Object.entries(t).forEach(([r,o])=>{e(r,o,t)&&(n[r]=o)}),n}function Cw(t){return b6(t,(e,n)=>n!=null)}function pn(t,e,n=!1){let r=Object.assign({},t);if(vt(e))if(vt(t))for(const[o,s]of Object.entries(e)){const i=t[o];n&&qe(s)&&qe(i)?r[o]=i.concat(...s):!_c(s)&&vt(s)&&t.hasOwnProperty(o)?r[o]=pn(i,s,n):Object.assign(r,{[o]:s})}else r=e;return r}function ax(t,{maxDepth:e,omitKeys:n,separator:r,shouldProcess:o}={}){return e??(e=1/0),n??(n=[]),r??(r="."),!vt(t)&&!qe(t)||!e?t:Object.entries(t).reduce((s,[i,a])=>(vt(a)&&!Object.keys(a).some(l=>n.includes(l))&&(!o||o(a))?Object.entries(ax(a,{maxDepth:e-1,omitKeys:n,separator:r,shouldProcess:o})).forEach(([l,u])=>{s[`${i}${r}${l}`]=u}):s[i]=a,s),{})}function ooe(t){return t.reduce((e,[n,r])=>(e[n]=r,e),{})}function soe(t){return Object.keys(t)}function xv(t,e){return qe(t)?t.map(e):vt(t)?Object.entries(t).reduce((n,[r,o])=>(n[r]=e(o),n),{}):e(t)}function ioe(t,e,n,r){const o=ll(e)?e.split(/\[(.*?)\]|\./).filter(Boolean):[e];for(r=0;r<o.length&&t;r+=1){const s=o[r];t=s?t[s]:void 0}return t===void 0?n:t}function aoe(t){const e=new WeakMap;function n(r,o,s,i){if(Ms(r))return t(r,o,s);e.has(r)||e.set(r,new Map);const a=e.get(r);if(a.has(o))return a.get(o);const l=t(r,o,s,i);return a.set(o,l),l}return n}var Be=aoe(ioe);function loe(t,...e){const n={...t};for(const r of e)if(r!=null)for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&(o in n&&delete n[o],n[o]=r[o]);return n}function oc(t,e,n){return Math.min(Math.max(t,n),e)}class uoe extends Error{constructor(e){super(`Failed to parse color: "${e}"`)}}var Lh=uoe;function Bm(t){if(typeof t!="string")throw new Lh(t);if(t.trim().toLowerCase()==="transparent")return[0,0,0,0];let e=t.trim();e=yoe.test(t)?foe(t):t;const n=poe.exec(e);if(n){const i=Array.from(n).slice(1);return[...i.slice(0,3).map(a=>parseInt(jm(a,2),16)),parseInt(jm(i[3]||"f",2),16)/255]}const r=hoe.exec(e);if(r){const i=Array.from(r).slice(1);return[...i.slice(0,3).map(a=>parseInt(a,16)),parseInt(i[3]||"ff",16)/255]}const o=moe.exec(e);if(o){const i=Array.from(o).slice(1);return[...i.slice(0,3).map(a=>parseInt(a,10)),parseFloat(i[3]||"1")]}const s=goe.exec(e);if(s){const[i,a,l,u]=Array.from(s).slice(1).map(parseFloat);if(oc(0,100,a)!==a)throw new Lh(t);if(oc(0,100,l)!==l)throw new Lh(t);return[...voe(i,a,l),Number.isNaN(u)?1:u]}throw new Lh(t)}function coe(t){let e=5381,n=t.length;for(;n;)e=e*33^t.charCodeAt(--n);return(e>>>0)%2341}const uL=t=>parseInt(t.replace(/_/g,""),36),doe="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((t,e)=>{const n=uL(e.substring(0,3)),r=uL(e.substring(3)).toString(16);let o="";for(let s=0;s<6-r.length;s++)o+="0";return t[n]=`${o}${r}`,t},{});function foe(t){const e=t.toLowerCase().trim(),n=doe[coe(e)];if(!n)throw new Lh(t);return`#${n}`}const jm=(t,e)=>Array.from(Array(e)).map(()=>t).join(""),poe=new RegExp(`^#${jm("([a-f0-9])",3)}([a-f0-9])?$`,"i"),hoe=new RegExp(`^#${jm("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),moe=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${jm(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),goe=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,yoe=/^[a-z]+$/i,cL=t=>Math.round(t*255),voe=(t,e,n)=>{let r=n/100;if(e===0)return[r,r,r].map(cL);const o=(t%360+360)%360/60,s=(1-Math.abs(2*r-1))*(e/100),i=s*(1-Math.abs(o%2-1));let a=0,l=0,u=0;o>=0&&o<1?(a=s,l=i):o>=1&&o<2?(a=i,l=s):o>=2&&o<3?(l=s,u=i):o>=3&&o<4?(l=i,u=s):o>=4&&o<5?(a=i,u=s):o>=5&&o<6&&(a=s,u=i);const c=r-s/2,d=a+c,f=l+c,p=u+c;return[d,f,p].map(cL)};function x6(t,e,n,r){return`rgba(${oc(0,255,t).toFixed()}, ${oc(0,255,e).toFixed()}, ${oc(0,255,n).toFixed()}, ${parseFloat(oc(0,1,r).toFixed(3))})`}function w6(t,e,n){const r=(w,S)=>S===3?w:w/255,[o,s,i,a]=Bm(t).map(r),[l,u,c,d]=Bm(e).map(r),f=d-a,p=n*2-1,m=((p*f===-1?p:p+f/(1+p*f))+1)/2,g=1-m,y=(o*g+l*m)*255,v=(s*g+u*m)*255,b=(i*g+c*m)*255,x=d*n+a*(1-n);return x6(y,v,b,x)}function boe(t,e){const[n,r,o,s]=Bm(t);return x6(n,r,o,s-e)}function jd(t){const[e,n,r,o]=Bm(t);let s=i=>{const a=oc(0,255,i).toString(16);return a.length===1?`0${a}`:a};return`#${s(e)}${s(n)}${s(r)}${o<1?s(Math.round(o*255)):""}`}var xoe=[50,100,200,300,400,500,600,700,800,900,950];function ye(t){return t==="gray"||t==="neutral"}function St(t){return t==="yellow"||t==="cyan"||t==="lime"}function Ge(t,e="#000000"){return function(n={},r="light",o="base"){var s,i,a,l,u,c;const[d,f]=t.split(".");if(f){const[,h]=(a=Object.entries((i=(s=n.semantics)==null?void 0:s.colorSchemes)!=null?i:{}).find(([m])=>d===m))!=null?a:[];h&&(t=`${h}.${f}`)}else{const[,h]=(c=Object.entries((u=(l=n.semantics)==null?void 0:l.colors)!=null?u:{}).find(([m])=>d===m))!=null?c:[];h&&(t=h)}const p=Be(n,`colors.${t}`,t);try{return qe(p)?jd(String(p[r!=="dark"?0:1])):vt(p)?jd(String(p[o])):jd(String(p))}catch{try{return jd(e)}catch{return"#000000"}}}}function Na(t,e){return function(n,r,o){const s=Ge(t,t)(n,r,o);return jd(w6(s,"#fff",e/100))}}function et(t,e){return function(n,r,o){const s=Ge(t,t)(n,r,o);return jd(w6(s,"#000",e/100))}}function pr(t,e){return function(n,r,o){const s=Ge(t,t)(n,r,o);return boe(s,1-e)}}function woe({colors:t,string:e}={}){var n,r;const o=Soe();return e&&t?(n=$oe(e,t))!=null?n:o:e&&!t?koe(e):t&&!e&&(r=Coe(t))!=null?r:o}function Soe(){return`#${Math.floor(Math.random()*16777215).toString(16).padEnd(6,"0")}`}function koe(t){let e=0;if(t.length===0)return e.toString();for(let r=0;r<t.length;r+=1)e=t.charCodeAt(r)+((e<<5)-e),e=e&e;let n="#";for(let r=0;r<3;r+=1){const o=e>>r*8&255;n+=`00${o.toString(16)}`.substr(-2)}return n}function $oe(t,e){let n=0;if(t.length===0)return e[0];for(let r=0;r<t.length;r+=1)n=t.charCodeAt(r)+((n<<5)-n),n=n&n;return n=(n%e.length+e.length)%e.length,e[n]}function Coe(t){return t[Math.floor(Math.random()*t.length)]}function Toe(t){const[e,n,r]=Bm(t);return(e*299+n*587+r*114)/1e3}function _oe(t){return function(e,n,r){const o=e?Ge(t)(e,n,r):t;return Toe(o)<128?"dark":"light"}}function Ioe(t){return function(e,n){return _oe(t)(e,n)==="light"}}function _f(){var t;return!!(typeof window<"u"&&((t=window.document)!=null&&t.createElement))}function Noe(){var t,e;return(e=(t=navigator.userAgentData)==null?void 0:t.platform)!=null?e:navigator.platform}function Eoe(t){return _f()&&t.test(navigator.vendor)}function Aoe(t){return _f()&&t.test(Noe())}function Ooe(){return Aoe(/mac|iphone|ipad|ipod/i)}function Poe(){return Ooe()&&Eoe(/apple/i)}function TE(t){return t!=null&&typeof t=="object"&&"nodeType"in t&&t.nodeType===Node.ELEMENT_NODE}function _E(t){var e;if(!TE(t))return!1;const n=(e=t.ownerDocument.defaultView)!=null?e:window;return t instanceof n.HTMLElement}function S6(t){return t.parentElement&&S6(t.parentElement)?!0:t.hidden}function Roe(t){return!!t.getAttribute("disabled")||!!t.getAttribute("data-disabled")||!!t.getAttribute("aria-disabled")}function Doe(t){return t.offsetWidth>0&&t.offsetHeight>0}function k6(t){return t.hasAttribute("tabindex")}function Foe(t){const e=t.getAttribute("contenteditable");return e!=="false"&&e!=null}function Uu(t,e){return t===e||(t==null?void 0:t.contains(e))}function Moe(t){if(yi(t))return t;if(Ms(t))return 0;if(t.includes("px"))return parseFloat(t);const e=_f();let n=16;if(e){const r=window.getComputedStyle(document.documentElement),o=parseFloat(r.fontSize);isNaN(o)||(n=o)}return parseFloat(t)*n}function zh(t){var e;return(e=t.relatedTarget)!=null?e:t.currentTarget.ownerDocument.activeElement}function nr(t){return t?"":void 0}function Ea(t){return t?!0:void 0}var Loe=["input:not(:disabled):not([disabled])","select:not(:disabled):not([disabled])","textarea:not(:disabled):not([disabled])","embed","iframe","object","a[href]","area[href]","button:not(:disabled):not([disabled])","[tabindex]","audio[controls]","video[controls]","*[tabindex]:not([aria-disabled])","*[contenteditable]"],zoe=Loe.join();function Boe(t){const e=Array.from(t.querySelectorAll(zoe));return e.unshift(t),e.filter(n=>$6(n)&&Doe(n))}function $6(t){if(!_E(t)||S6(t)||Roe(t))return!1;const{localName:e}=t;if(["input","select","textarea","button"].includes(e))return!0;const r={a:()=>t.hasAttribute("href"),audio:()=>t.hasAttribute("controls"),video:()=>t.hasAttribute("controls")};return e in r?r[e]():Foe(t)?!0:k6(t)}function joe(t){return k6(t)&&t.tabIndex===-1}function Voe(t){return t?_E(t)&&$6(t)&&!joe(t):!1}function dL(){return"ontouchstart"in window}function Woe(t){var e;return(e=Tw(t).defaultView)!=null?e:window}function Tw(t){return TE(t)?t.ownerDocument:document}function Uoe(t){return Tw(t).activeElement}var Vm=()=>{};function jn(t,...e){return _c(t)?t(...e):t}function Ot(...t){return function(e,...n){t.some(r=>(r==null||r(e,...n),e==null?void 0:e.defaultPrevented))}}function Vd(...t){return function(...e){return t.forEach(n=>n==null?void 0:n(...e))}}var fL=t=>t.sort((e,n)=>{const r=e.compareDocumentPosition(n);return r&Node.DOCUMENT_POSITION_FOLLOWING||r&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:r&Node.DOCUMENT_POSITION_PRECEDING||r&Node.DOCUMENT_POSITION_CONTAINS?1:((r&Node.DOCUMENT_POSITION_DISCONNECTED||r&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)&&console.warn("Cannot sort the given nodes."),0)}),pL=(t,e,n)=>{let r=t+1;return n&&r>=e&&(r=0),r},hL=(t,e,n)=>{let r=t-1;return n&&r<0&&(r=e),r},Goe=()=>{const t=new Map,e=S=>{t.forEach(k=>{const $=S.indexOf(k.node);k.index=$,k.node.dataset.index=k.index.toString()})},n=(S,k)=>{if(!S||t.has(S))return;const $=Array.from(t.keys()).concat(S),C=fL($);k!=null&&k.disabled&&(k.disabled=!!k.disabled);const I={index:-1,node:S,...k};t.set(S,I),e(C)},r=S=>{if(S!=null)return TE(S)?n(S):k=>n(k,S)},o=S=>{if(S==null)return;t.delete(S);const k=fL(Array.from(t.keys()));e(k)},s=()=>t.clear(),i=S=>c(S).length,a=S=>d(S).length,l=S=>{var k,$;return S&&($=(k=t.get(S))==null?void 0:k.index)!=null?$:-1},u=(S,k)=>S==null?-1:d(k).findIndex($=>$.node.isSameNode(S)),c=S=>{const k=Array.from(t.values());return S?k.filter(S).sort(($,C)=>$.index-C.index):k.sort(($,C)=>$.index-C.index)},d=S=>c(S).filter(({disabled:k})=>!k),f=(S,k)=>{if(i(k)!==0)return c(k)[S]},p=(S,k)=>{if(a(k)!==0)return d(k)[S]};return{count:i,destroy:s,enabledCount:a,enabledFirstValue:S=>p(0,S),enabledIndexOf:u,enabledLastValue:S=>p(d(S).length-1,S),enabledNextValue:(S,k,$=!0)=>{const C=f(S);if(!C)return;const I=u(C.node,k),E=pL(I,a(k),$);return p(E,k)},enabledPrevValue:(S,k,$=!0)=>{const C=f(S);if(!C)return;const I=u(C.node,k),E=hL(I,a(k)-1,$);return p(E,k)},enabledValue:p,enabledValues:d,firstValue:S=>f(0,S),indexOf:l,lastValue:S=>f(t.size-1,S),nextValue:(S,k,$=!0)=>{const C=pL(S,i(k),$);return f(C,k)},prevValue:(S,k,$=!0)=>{const C=hL(S,i(k)-1,$);return f(C,k)},register:r,unregister:o,value:f,values:c}},Hoe=()=>{const[t,e]=ul({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsContextProvider"});return{DescendantsContextProvider:t,useDescendant:o=>{const s=e(),[i,a]=N.useState(-1),l=N.useRef(null);vi(()=>()=>{l.current&&s.unregister(l.current)},[]),vi(()=>{if(!l.current)return;const c=Number(l.current.dataset.index);i!=c&&!Number.isNaN(c)&&a(c)});const u=o?s.register(o):s.register;return{descendants:s,enabledIndex:s.enabledIndexOf(l.current,o==null?void 0:o.filter),index:i,register:uo(u,l)}},useDescendants:()=>{const o=N.useRef(Goe());return vi(()=>()=>o.current.destroy()),o.current},useDescendantsContext:e}},qoe=!1;function Koe(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function Xoe(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var C6=function(){function t(n){var r=this;this._insertTag=function(o){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(o,s),r.tags.push(o)},this.isSpeedy=n.speedy===void 0?!qoe:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Xoe(this));var o=this.tags[this.tags.length-1];if(this.isSpeedy){var s=Koe(o);try{s.insertRule(r,s.cssRules.length)}catch{}}else o.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var o;return(o=r.parentNode)==null?void 0:o.removeChild(r)}),this.tags=[],this.ctr=0},t}(),zr="-ms-",lx="-moz-",Ct="-webkit-",T6="comm",IE="rule",NE="decl",Yoe="@import",_6="@keyframes",Zoe="@layer",Qoe=Math.abs,_w=String.fromCharCode,Joe=Object.assign;function ese(t,e){return Ir(t,0)^45?(((e<<2^Ir(t,0))<<2^Ir(t,1))<<2^Ir(t,2))<<2^Ir(t,3):0}function I6(t){return t.trim()}function tse(t,e){return(t=e.exec(t))?t[0]:t}function Tt(t,e,n){return t.replace(e,n)}function R_(t,e){return t.indexOf(e)}function Ir(t,e){return t.charCodeAt(e)|0}function Wm(t,e,n){return t.slice(e,n)}function Mi(t){return t.length}function EE(t){return t.length}function wv(t,e){return e.push(t),t}function nse(t,e){return t.map(e).join("")}var Iw=1,If=1,N6=0,Do=0,Ln=0,$p="";function Nw(t,e,n,r,o,s,i){return{value:t,root:e,parent:n,type:r,props:o,children:s,line:Iw,column:If,length:i,return:""}}function yh(t,e){return Joe(Nw("",null,null,"",null,null,0),t,{length:-t.length},e)}function rse(){return Ln}function ose(){return Ln=Do>0?Ir($p,--Do):0,If--,Ln===10&&(If=1,Iw--),Ln}function ns(){return Ln=Do<N6?Ir($p,Do++):0,If++,Ln===10&&(If=1,Iw++),Ln}function Ji(){return Ir($p,Do)}function wb(){return Do}function ry(t,e){return Wm($p,t,e)}function Um(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function E6(t){return Iw=If=1,N6=Mi($p=t),Do=0,[]}function A6(t){return $p="",t}function Sb(t){return I6(ry(Do-1,D_(t===91?t+2:t===40?t+1:t)))}function sse(t){for(;(Ln=Ji())&&Ln<33;)ns();return Um(t)>2||Um(Ln)>3?"":" "}function ise(t,e){for(;--e&&ns()&&!(Ln<48||Ln>102||Ln>57&&Ln<65||Ln>70&&Ln<97););return ry(t,wb()+(e<6&&Ji()==32&&ns()==32))}function D_(t){for(;ns();)switch(Ln){case t:return Do;case 34:case 39:t!==34&&t!==39&&D_(Ln);break;case 40:t===41&&D_(t);break;case 92:ns();break}return Do}function ase(t,e){for(;ns()&&t+Ln!==57;)if(t+Ln===84&&Ji()===47)break;return"/*"+ry(e,Do-1)+"*"+_w(t===47?t:ns())}function lse(t){for(;!Um(Ji());)ns();return ry(t,Do)}function use(t){return A6(kb("",null,null,null,[""],t=E6(t),0,[0],t))}function kb(t,e,n,r,o,s,i,a,l){for(var u=0,c=0,d=i,f=0,p=0,h=0,m=1,g=1,y=1,v=0,b="",x=o,w=s,S=r,k=b;g;)switch(h=v,v=ns()){case 40:if(h!=108&&Ir(k,d-1)==58){R_(k+=Tt(Sb(v),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:k+=Sb(v);break;case 9:case 10:case 13:case 32:k+=sse(h);break;case 92:k+=ise(wb()-1,7);continue;case 47:switch(Ji()){case 42:case 47:wv(cse(ase(ns(),wb()),e,n),l);break;default:k+="/"}break;case 123*m:a[u++]=Mi(k)*y;case 125*m:case 59:case 0:switch(v){case 0:case 125:g=0;case 59+c:y==-1&&(k=Tt(k,/\f/g,"")),p>0&&Mi(k)-d&&wv(p>32?gL(k+";",r,n,d-1):gL(Tt(k," ","")+";",r,n,d-2),l);break;case 59:k+=";";default:if(wv(S=mL(k,e,n,u,c,o,a,b,x=[],w=[],d),s),v===123)if(c===0)kb(k,e,S,S,x,s,d,a,w);else switch(f===99&&Ir(k,3)===110?100:f){case 100:case 108:case 109:case 115:kb(t,S,S,r&&wv(mL(t,S,S,0,0,o,a,b,o,x=[],d),w),o,w,d,a,r?x:w);break;default:kb(k,S,S,S,[""],w,0,a,w)}}u=c=p=0,m=y=1,b=k="",d=i;break;case 58:d=1+Mi(k),p=h;default:if(m<1){if(v==123)--m;else if(v==125&&m++==0&&ose()==125)continue}switch(k+=_w(v),v*m){case 38:y=c>0?1:(k+="\f",-1);break;case 44:a[u++]=(Mi(k)-1)*y,y=1;break;case 64:Ji()===45&&(k+=Sb(ns())),f=Ji(),c=d=Mi(b=k+=lse(wb())),v++;break;case 45:h===45&&Mi(k)==2&&(m=0)}}return s}function mL(t,e,n,r,o,s,i,a,l,u,c){for(var d=o-1,f=o===0?s:[""],p=EE(f),h=0,m=0,g=0;h<r;++h)for(var y=0,v=Wm(t,d+1,d=Qoe(m=i[h])),b=t;y<p;++y)(b=I6(m>0?f[y]+" "+v:Tt(v,/&\f/g,f[y])))&&(l[g++]=b);return Nw(t,e,n,o===0?IE:a,l,u,c)}function cse(t,e,n){return Nw(t,e,n,T6,_w(rse()),Wm(t,2,-2),0)}function gL(t,e,n,r){return Nw(t,e,n,NE,Wm(t,0,r),Wm(t,r+1,-1),r)}function of(t,e){for(var n="",r=EE(t),o=0;o<r;o++)n+=e(t[o],o,t,e)||"";return n}function dse(t,e,n,r){switch(t.type){case Zoe:if(t.children.length)break;case Yoe:case NE:return t.return=t.return||t.value;case T6:return"";case _6:return t.return=t.value+"{"+of(t.children,r)+"}";case IE:t.value=t.props.join(",")}return Mi(n=of(t.children,r))?t.return=t.value+"{"+n+"}":""}function fse(t){var e=EE(t);return function(n,r,o,s){for(var i="",a=0;a<e;a++)i+=t[a](n,r,o,s)||"";return i}}function pse(t){return function(e){e.root||(e=e.return)&&t(e)}}function O6(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var hse=function(e,n,r){for(var o=0,s=0;o=s,s=Ji(),o===38&&s===12&&(n[r]=1),!Um(s);)ns();return ry(e,Do)},mse=function(e,n){var r=-1,o=44;do switch(Um(o)){case 0:o===38&&Ji()===12&&(n[r]=1),e[r]+=hse(Do-1,n,r);break;case 2:e[r]+=Sb(o);break;case 4:if(o===44){e[++r]=Ji()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=_w(o)}while(o=ns());return e},gse=function(e,n){return A6(mse(E6(e),n))},yL=new WeakMap,yse=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,o=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!yL.get(r))&&!o){yL.set(e,!0);for(var s=[],i=gse(n,s),a=r.props,l=0,u=0;l<i.length;l++)for(var c=0;c<a.length;c++,u++)e.props[u]=s[l]?i[l].replace(/&\f/g,a[c]):a[c]+" "+i[l]}}},vse=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function P6(t,e){switch(ese(t,e)){case 5103:return Ct+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ct+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Ct+t+lx+t+zr+t+t;case 6828:case 4268:return Ct+t+zr+t+t;case 6165:return Ct+t+zr+"flex-"+t+t;case 5187:return Ct+t+Tt(t,/(\w+).+(:[^]+)/,Ct+"box-$1$2"+zr+"flex-$1$2")+t;case 5443:return Ct+t+zr+"flex-item-"+Tt(t,/flex-|-self/,"")+t;case 4675:return Ct+t+zr+"flex-line-pack"+Tt(t,/align-content|flex-|-self/,"")+t;case 5548:return Ct+t+zr+Tt(t,"shrink","negative")+t;case 5292:return Ct+t+zr+Tt(t,"basis","preferred-size")+t;case 6060:return Ct+"box-"+Tt(t,"-grow","")+Ct+t+zr+Tt(t,"grow","positive")+t;case 4554:return Ct+Tt(t,/([^-])(transform)/g,"$1"+Ct+"$2")+t;case 6187:return Tt(Tt(Tt(t,/(zoom-|grab)/,Ct+"$1"),/(image-set)/,Ct+"$1"),t,"")+t;case 5495:case 3959:return Tt(t,/(image-set\([^]*)/,Ct+"$1$`$1");case 4968:return Tt(Tt(t,/(.+:)(flex-)?(.*)/,Ct+"box-pack:$3"+zr+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ct+t+t;case 4095:case 3583:case 4068:case 2532:return Tt(t,/(.+)-inline(.+)/,Ct+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Mi(t)-1-e>6)switch(Ir(t,e+1)){case 109:if(Ir(t,e+4)!==45)break;case 102:return Tt(t,/(.+:)(.+)-([^]+)/,"$1"+Ct+"$2-$3$1"+lx+(Ir(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~R_(t,"stretch")?P6(Tt(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Ir(t,e+1)!==115)break;case 6444:switch(Ir(t,Mi(t)-3-(~R_(t,"!important")&&10))){case 107:return Tt(t,":",":"+Ct)+t;case 101:return Tt(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ct+(Ir(t,14)===45?"inline-":"")+"box$3$1"+Ct+"$2$3$1"+zr+"$2box$3")+t}break;case 5936:switch(Ir(t,e+11)){case 114:return Ct+t+zr+Tt(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Ct+t+zr+Tt(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Ct+t+zr+Tt(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Ct+t+zr+t+t}return t}var bse=function(e,n,r,o){if(e.length>-1&&!e.return)switch(e.type){case NE:e.return=P6(e.value,e.length);break;case _6:return of([yh(e,{value:Tt(e.value,"@","@"+Ct)})],o);case IE:if(e.length)return nse(e.props,function(s){switch(tse(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return of([yh(e,{props:[Tt(s,/:(read-\w+)/,":"+lx+"$1")]})],o);case"::placeholder":return of([yh(e,{props:[Tt(s,/:(plac\w+)/,":"+Ct+"input-$1")]}),yh(e,{props:[Tt(s,/:(plac\w+)/,":"+lx+"$1")]}),yh(e,{props:[Tt(s,/:(plac\w+)/,zr+"input-$1")]})],o)}return""})}},xse=[bse],R6=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(m){var g=m.getAttribute("data-emotion");g.indexOf(" ")!==-1&&(document.head.appendChild(m),m.setAttribute("data-s",""))})}var o=e.stylisPlugins||xse,s={},i,a=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(m){for(var g=m.getAttribute("data-emotion").split(" "),y=1;y<g.length;y++)s[g[y]]=!0;a.push(m)});var l,u=[yse,vse];{var c,d=[dse,pse(function(m){c.insert(m)})],f=fse(u.concat(o,d)),p=function(g){return of(use(g),f)};l=function(g,y,v,b){c=v,p(g?g+"{"+y.styles+"}":y.styles),b&&(h.inserted[y.name]=!0)}}var h={key:n,sheet:new C6({key:n,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return h.sheet.hydrate(a),h};function ux(){return ux=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ux.apply(null,arguments)}var vL=function(e){var n=new WeakMap;return function(r){if(n.has(r))return n.get(r);var o=e(r);return n.set(r,o),o}},D6={exports:{}},Ft={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var br=typeof Symbol=="function"&&Symbol.for,AE=br?Symbol.for("react.element"):60103,OE=br?Symbol.for("react.portal"):60106,Ew=br?Symbol.for("react.fragment"):60107,Aw=br?Symbol.for("react.strict_mode"):60108,Ow=br?Symbol.for("react.profiler"):60114,Pw=br?Symbol.for("react.provider"):60109,Rw=br?Symbol.for("react.context"):60110,PE=br?Symbol.for("react.async_mode"):60111,Dw=br?Symbol.for("react.concurrent_mode"):60111,Fw=br?Symbol.for("react.forward_ref"):60112,Mw=br?Symbol.for("react.suspense"):60113,wse=br?Symbol.for("react.suspense_list"):60120,Lw=br?Symbol.for("react.memo"):60115,zw=br?Symbol.for("react.lazy"):60116,Sse=br?Symbol.for("react.block"):60121,kse=br?Symbol.for("react.fundamental"):60117,$se=br?Symbol.for("react.responder"):60118,Cse=br?Symbol.for("react.scope"):60119;function ds(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case AE:switch(t=t.type,t){case PE:case Dw:case Ew:case Ow:case Aw:case Mw:return t;default:switch(t=t&&t.$$typeof,t){case Rw:case Fw:case zw:case Lw:case Pw:return t;default:return e}}case OE:return e}}}function F6(t){return ds(t)===Dw}Ft.AsyncMode=PE;Ft.ConcurrentMode=Dw;Ft.ContextConsumer=Rw;Ft.ContextProvider=Pw;Ft.Element=AE;Ft.ForwardRef=Fw;Ft.Fragment=Ew;Ft.Lazy=zw;Ft.Memo=Lw;Ft.Portal=OE;Ft.Profiler=Ow;Ft.StrictMode=Aw;Ft.Suspense=Mw;Ft.isAsyncMode=function(t){return F6(t)||ds(t)===PE};Ft.isConcurrentMode=F6;Ft.isContextConsumer=function(t){return ds(t)===Rw};Ft.isContextProvider=function(t){return ds(t)===Pw};Ft.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===AE};Ft.isForwardRef=function(t){return ds(t)===Fw};Ft.isFragment=function(t){return ds(t)===Ew};Ft.isLazy=function(t){return ds(t)===zw};Ft.isMemo=function(t){return ds(t)===Lw};Ft.isPortal=function(t){return ds(t)===OE};Ft.isProfiler=function(t){return ds(t)===Ow};Ft.isStrictMode=function(t){return ds(t)===Aw};Ft.isSuspense=function(t){return ds(t)===Mw};Ft.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Ew||t===Dw||t===Ow||t===Aw||t===Mw||t===wse||typeof t=="object"&&t!==null&&(t.$$typeof===zw||t.$$typeof===Lw||t.$$typeof===Pw||t.$$typeof===Rw||t.$$typeof===Fw||t.$$typeof===kse||t.$$typeof===$se||t.$$typeof===Cse||t.$$typeof===Sse)};Ft.typeOf=ds;D6.exports=Ft;var Tse=D6.exports,M6=Tse,_se={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Ise={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},L6={};L6[M6.ForwardRef]=_se;L6[M6.Memo]=Ise;var Nse=!0;function RE(t,e,n){var r="";return n.split(" ").forEach(function(o){t[o]!==void 0?e.push(t[o]+";"):o&&(r+=o+" ")}),r}var z6=function(e,n,r){var o=e.key+"-"+n.name;(r===!1||Nse===!1)&&e.registered[o]===void 0&&(e.registered[o]=n.styles)},DE=function(e,n,r){z6(e,n,r);var o=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+o:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function Ese(t){for(var e=0,n,r=0,o=t.length;o>=4;++r,o-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(o){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var Ase={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Ose=!1,Pse=/[A-Z]|^ms/g,Rse=/_EMO_([^_]+?)_([^]*?)_EMO_/g,B6=function(e){return e.charCodeAt(1)===45},bL=function(e){return e!=null&&typeof e!="boolean"},CC=O6(function(t){return B6(t)?t:t.replace(Pse,"-$&").toLowerCase()}),xL=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(Rse,function(r,o,s){return Li={name:o,styles:s,next:Li},o})}return Ase[e]!==1&&!B6(e)&&typeof n=="number"&&n!==0?n+"px":n},Dse="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function Gm(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var o=n;if(o.anim===1)return Li={name:o.name,styles:o.styles,next:Li},o.name;var s=n;if(s.styles!==void 0){var i=s.next;if(i!==void 0)for(;i!==void 0;)Li={name:i.name,styles:i.styles,next:Li},i=i.next;var a=s.styles+";";return a}return Fse(t,e,n)}case"function":{if(t!==void 0){var l=Li,u=n(t);return Li=l,Gm(t,e,u)}break}}var c=n;if(e==null)return c;var d=e[c];return d!==void 0?d:c}function Fse(t,e,n){var r="";if(Array.isArray(n))for(var o=0;o<n.length;o++)r+=Gm(t,e,n[o])+";";else for(var s in n){var i=n[s];if(typeof i!="object"){var a=i;e!=null&&e[a]!==void 0?r+=s+"{"+e[a]+"}":bL(a)&&(r+=CC(s)+":"+xL(s,a)+";")}else{if(s==="NO_COMPONENT_SELECTOR"&&Ose)throw new Error(Dse);if(Array.isArray(i)&&typeof i[0]=="string"&&(e==null||e[i[0]]===void 0))for(var l=0;l<i.length;l++)bL(i[l])&&(r+=CC(s)+":"+xL(s,i[l])+";");else{var u=Gm(t,e,i);switch(s){case"animation":case"animationName":{r+=CC(s)+":"+u+";";break}default:r+=s+"{"+u+"}"}}}}return r}var wL=/label:\s*([^\s;{]+)\s*(;|$)/g,Li;function sf(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,o="";Li=void 0;var s=t[0];if(s==null||s.raw===void 0)r=!1,o+=Gm(n,e,s);else{var i=s;o+=i[0]}for(var a=1;a<t.length;a++)if(o+=Gm(n,e,t[a]),r){var l=s;o+=l[a]}wL.lastIndex=0;for(var u="",c;(c=wL.exec(o))!==null;)u+="-"+c[1];var d=Ese(o)+u;return{name:d,styles:o,next:Li}}var Mse=function(e){return e()},j6=ZF.useInsertionEffect?ZF.useInsertionEffect:!1,Lse=j6||Mse,SL=j6||N.useLayoutEffect,V6=N.createContext(typeof HTMLElement<"u"?R6({key:"css"}):null);V6.Provider;var W6=function(e){return N.forwardRef(function(n,r){var o=N.useContext(V6);return e(n,o,r)})},Hm=N.createContext({}),zse=function(e,n){if(typeof n=="function"){var r=n(e);return r}return ux({},e,n)},Bse=vL(function(t){return vL(function(e){return zse(t,e)})}),jse=function(e){var n=N.useContext(Hm);return e.theme!==n&&(n=Bse(n)(e.theme)),N.createElement(Hm.Provider,{value:n},e.children)},FE=W6(function(t,e){var n=t.styles,r=sf([n],void 0,N.useContext(Hm)),o=N.useRef();return SL(function(){var s=e.key+"-global",i=new e.sheet.constructor({key:s,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return e.sheet.tags.length&&(i.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",s),i.hydrate([l])),o.current=[i,a],function(){i.flush()}},[e]),SL(function(){var s=o.current,i=s[0],a=s[1];if(a){s[1]=!1;return}if(r.next!==void 0&&DE(e,r.next,!0),i.tags.length){var l=i.tags[i.tags.length-1].nextElementSibling;i.before=l,i.flush()}e.insert("",r,i,!1)},[e,r.name]),null});function Vse(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return sf(e)}var Wse=function(){var e=Vse.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},Use=typeof Element<"u",Gse=typeof Map=="function",Hse=typeof Set=="function",qse=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function $b(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,o;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!$b(t[r],e[r]))return!1;return!0}var s;if(Gse&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(s=t.entries();!(r=s.next()).done;)if(!e.has(r.value[0]))return!1;for(s=t.entries();!(r=s.next()).done;)if(!$b(r.value[1],e.get(r.value[0])))return!1;return!0}if(Hse&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(s=t.entries();!(r=s.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(qse&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(o=Object.keys(t),n=o.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,o[r]))return!1;if(Use&&t instanceof Element)return!1;for(r=n;r--!==0;)if(!((o[r]==="_owner"||o[r]==="__v"||o[r]==="__o")&&t.$$typeof)&&!$b(t[o[r]],e[o[r]]))return!1;return!0}return t!==t&&e!==e}var Kse=function(e,n){try{return $b(e,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const kL=Dt(Kse);function $L(t,e){if(t.inserted[e.name]===void 0)return t.insert("",e,t.sheet,!0)}function CL(t,e,n){var r=[],o=RE(t,r,n);return r.length<2?n:o+e(r)}var Xse=function(e){var n=R6(e);n.sheet.speedy=function(a){this.isSpeedy=a},n.compat=!0;var r=function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var d=sf(u,n.registered,void 0);return DE(n,d,!1),n.key+"-"+d.name},o=function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var d=sf(u,n.registered),f="animation-"+d.name;return $L(n,{name:d.name,styles:"@keyframes "+f+"{"+d.styles+"}"}),f},s=function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var d=sf(u,n.registered);$L(n,d)},i=function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return CL(n.registered,r,Yse(u))};return{css:r,cx:i,injectGlobal:s,keyframes:o,hydrate:function(l){l.forEach(function(u){n.inserted[u]=!0})},flush:function(){n.registered={},n.inserted={},n.sheet.flush()},sheet:n.sheet,cache:n,getRegisteredStyles:RE.bind(null,n.registered),merge:CL.bind(null,n.registered,r)}},Yse=function t(e){for(var n="",r=0;r<e.length;r++){var o=e[r];if(o!=null){var s=void 0;switch(typeof o){case"boolean":break;case"object":{if(Array.isArray(o))s=t(o);else{s="";for(var i in o)o[i]&&i&&(s&&(s+=" "),s+=i)}break}default:s=o}s&&(n&&(n+=" "),n+=s)}}return n};Xse({key:"css"});var Zse=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Qse=O6(function(t){return Zse.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),Jse=Qse,eie=function(e){return e!=="theme"},TL=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?Jse:eie},_L=function(e,n,r){var o;if(n){var s=n.shouldForwardProp;o=e.__emotion_forwardProp&&s?function(i){return e.__emotion_forwardProp(i)&&s(i)}:s}return typeof o!="function"&&r&&(o=e.__emotion_forwardProp),o},tie=function(e){var n=e.cache,r=e.serialized,o=e.isStringTag;return z6(n,r,o),Lse(function(){return DE(n,r,o)}),null},nie=function t(e,n){var r=e.__emotion_real===e,o=r&&e.__emotion_base||e,s,i;n!==void 0&&(s=n.label,i=n.target);var a=_L(e,n,r),l=a||TL(o),u=!l("as");return function(){var c=arguments,d=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&d.push("label:"+s+";"),c[0]==null||c[0].raw===void 0)d.push.apply(d,c);else{d.push(c[0][0]);for(var f=c.length,p=1;p<f;p++)d.push(c[p],c[0][p])}var h=W6(function(m,g,y){var v=u&&m.as||o,b="",x=[],w=m;if(m.theme==null){w={};for(var S in m)w[S]=m[S];w.theme=N.useContext(Hm)}typeof m.className=="string"?b=RE(g.registered,x,m.className):m.className!=null&&(b=m.className+" ");var k=sf(d.concat(x),g.registered,w);b+=g.key+"-"+k.name,i!==void 0&&(b+=" "+i);var $=u&&a===void 0?TL(v):l,C={};for(var I in m)u&&I==="as"||$(I)&&(C[I]=m[I]);return C.className=b,C.ref=y,N.createElement(N.Fragment,null,N.createElement(tie,{cache:g,serialized:k,isStringTag:typeof v=="string"}),N.createElement(v,C))});return h.displayName=s!==void 0?s:"Styled("+(typeof o=="string"?o:o.displayName||o.name||"Component")+")",h.defaultProps=e.defaultProps,h.__emotion_real=h,h.__emotion_base=o,h.__emotion_styles=d,h.__emotion_forwardProp=a,Object.defineProperty(h,"toString",{value:function(){return"."+i}}),h.withComponent=function(m,g){return t(m,ux({},n,g,{shouldForwardProp:_L(h,g,!0)})).apply(void 0,d)},h}},rie=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],F_=nie.bind();rie.forEach(function(t){F_[t]=F_(t)});function We(t){return N.forwardRef(t)}function Bw(t,e){return N.memo(t,e)}var zt=t=>["[role=group]","[data-group]",".group"].map(e=>G6(U6(t),e," &")).join(", "),Bt=t=>["[data-peer]",".peer"].map(e=>G6(U6(t),e," ~ &")).join(", "),U6=t=>t.split(",").map(e=>e.trim().slice(1)),G6=(t,e="&",n="")=>t.map(r=>`${e}${r}${n}`).join(", "),Qn={_accept:"&[data-accept]",_between:"&[data-between]",_end:"&[data-end]",_expanded:"&[data-expanded], &[aria-expanded=true]",_filled:"&[data-filled]",_grabbed:"&[data-grabbed], &[aria-grabbed=true]",_hidden:"&[hidden], &[data-hidden]",_holiday:"&[data-holiday]",_idle:"&[data-idle]",_loaded:"&[data-loaded]",_loading:"&[data-loading], &[aria-busy=true]",_nativeHidden:"&[hidden]",_notAllowed:"&[data-not-allowed]",_outside:"&:where([data-outside])",_pressed:"&[data-pressed], &[aria-pressed=true]",_reject:"&[data-reject]",_ripple:"& .ui-ripple",_selected:"&[data-selected], &[aria-selected=true]",_start:"&[data-start]",_today:"&[data-today]",_weekend:"&:where([data-weekend])"},oie={_after:"&::after",_backdrop:"&::backdrop",_before:"&::before",_cue:"&::cue",_cueRegion:"&::cue-region",_fileSelector:"&::file-selector-button",_firstLetter:"&::first-letter",_firstLine:"&::first-line",_marker:"&::marker",_placeholder:"&::placeholder, &[data-placeholder]",_scrollbar:"&::-webkit-scrollbar, &[data-scrollbar]",_scrollbarButton:"&::-webkit-scrollbar-button",_scrollbarCorner:"&::-webkit-scrollbar-corner",_scrollbarThumb:"&::-webkit-scrollbar-thumb",_scrollbarTrack:"&::-webkit-scrollbar-track",_scrollbarTrackPiece:"&::-webkit-scrollbar-track-piece",_selection:"&::selection"},at={_active:"&:active, &[data-active]",_anyLink:"&:any-link, &[data-any-link]",_autofill:"&:autofill, &:-webkit-autofill",_blank:"&:blank, &[data-blank]",_checked:"&:checked, &[data-checked], &[aria-checked=true]",_default:"&:default",_disabled:"&:disabled, &[disabled], &[aria-disabled=true], &[data-disabled]",_empty:"&:empty",_enabled:"&:enabled, &[data-enabled]",_even:"&:nth-of-type(even)",_first:"&:first-of-type",_focus:"&:focus, &[data-focus]",_focusVisible:"&:focus-visible, &[data-focus-visible]",_focusWithin:"&:focus-within, &[data-focus-within]",_fullScreen:"&:fullscreen",_horizontal:"&:horizontal, &[data-orientation=horizontal], &[aria-orientation=horizontal]",_hover:"&:hover, &[data-hover]",_indeterminate:"&:indeterminate, &[data-indeterminate], &[aria-checked=mixed]",_inRange:"&:in-range, &[data-in-range]",_invalid:"&[data-invalid], &[aria-invalid=true]",_last:"&:last-of-type",_link:"&:link, &[data-link]",_modal:"&:modal",_nativeActive:"&:active",_nativeChecked:"&:checked",_nativeDisabled:"&:disabled, &[disabled]",_nativeFocus:"&:focus",_nativeFocusVisible:"&:focus-visible",_nativeFocusWithin:"&:focus-within",_nativeHover:"&:hover",_nativeReadOnly:"&[readonly], &[aria-readonly=true]",_nativeTarget:"&:target",_nativeValid:"&:valid",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_notTarget:"&:not(:target)",_odd:"&:nth-of-type(odd)",_only:"&:only-of-type",_optional:"&:optional, &[data-optional]",_outRange:"&:out-of-range, &[data-out-of-range]",_paused:"&:paused, &[data-paused]",_picture:"&:picture-in-picture",_placeholderShown:"&:placeholder-shown",_playing:"&:playing, &[data-playing]",_readOnly:"&[readonly], &[data-readonly], &[aria-readonly=true]",_readWrite:"&:read-write, &[data-read-write]",_required:"&:required, &[required]",_target:"&:target, &[data-target]",_userInvalid:"&:user-invalid, &[data-user-invalid]",_valid:"&:valid, &[data-valid]",_vertical:"&:vertical, &[data-orientation=vertical], &[aria-orientation=vertical]",_visited:"&:visited"},sie={_dark:".ui-dark &:not([data-mode]), [data-mode=dark] &:not([data-mode]), &[data-mode=dark]",_landscape:"@media (orientation: landscape)",_light:".ui-light &:not([data-mode]), [data-mode=light] &:not([data-mode]), &[data-mode=light]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaLight:"@media (prefers-color-scheme: light)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_portrait:"@media (orientation: portrait)",_print:"@media print"},iie={_groupAccept:zt(Qn._accept),_groupActive:zt(at._active),_groupBlank:zt(at._blank),_groupChecked:zt(at._checked),_groupDisabled:zt(at._disabled),_groupEnabled:zt(at._enabled),_groupExpanded:zt(Qn._expanded),_groupFocus:zt(at._focus),_groupFocusVisible:zt(at._focusVisible),_groupFocusWithin:zt(at._focusWithin),_groupGrabbed:zt(Qn._grabbed),_groupHorizontal:zt(at._horizontal),_groupHover:zt(at._hover),_groupIdle:zt(Qn._idle),_groupInvalid:zt(at._invalid),_groupLoaded:zt(Qn._loaded),_groupLoading:zt(Qn._loading),_groupOptional:zt(at._optional),_groupPlaceholderShown:zt(at._placeholderShown),_groupPressed:zt(Qn._pressed),_groupReadOnly:zt(at._readOnly),_groupReadWrite:zt(at._readWrite),_groupReject:zt(Qn._reject),_groupRequired:zt(at._required),_groupSelected:zt(Qn._selected),_groupUserInvalid:zt(at._userInvalid),_groupValid:zt(at._valid),_groupVertical:zt(at._vertical)},aie={_peerAccept:Bt(Qn._accept),_peerActive:Bt(at._active),_peerBlank:Bt(at._blank),_peerChecked:Bt(at._checked),_peerDisabled:Bt(at._disabled),_peerEnabled:Bt(at._enabled),_peerExpanded:Bt(Qn._expanded),_peerFocus:Bt(at._focus),_peerFocusVisible:Bt(at._focusVisible),_peerFocusWithin:Bt(at._focusWithin),_peerGrabbed:Bt(Qn._grabbed),_peerHorizontal:Bt(at._horizontal),_peerHover:Bt(at._hover),_peerIdle:Bt(Qn._idle),_peerInvalid:Bt(at._invalid),_peerLoaded:Bt(Qn._loaded),_peerLoading:Bt(Qn._loading),_peerOptional:Bt(at._optional),_peerPlaceholderShown:Bt(at._placeholderShown),_peerPressed:Bt(Qn._pressed),_peerReadOnly:Bt(at._readOnly),_peerReadWrite:Bt(at._readWrite),_peerReject:Bt(Qn._reject),_peerRequired:Bt(at._required),_peerSelected:Bt(Qn._selected),_peerUserInvalid:Bt(at._userInvalid),_peerValid:Bt(at._valid),_peerVertical:Bt(at._vertical)},Ya={...oie,...Qn,...at,...sie,...iie,...aie},lie=Object.keys(Ya);Object.values(Ya);var oy=new Set(["-moz-initial","inherit","initial","none","revert","unset"]);function Nf(t){return ll(t)&&t.includes("(")&&t.includes(")")}function jw(t){var e;const n=/(^[a-z-A-Z]+)\((.*)\)/g,[,r,o]=(e=n.exec(t))!=null?e:[];return{type:r,values:o}}function di(t,e=r=>r===",",n=!1){const r=[];let o="",s=0;for(let i=0;i<t.length;i++){const a=t[i],l=t[i-1],u=t[i+1];a==="("&&s++,a===")"&&s--,!Ms(a)&&e(a,l,u)&&s===0?(o&&r.push(o.trim()),n&&r.push(a),o=""):o+=a}return o&&r.push(o.trim()),r.filter(Boolean)}function uie(t){return/^var\(--.+\)$/.test(t)}function cie(t){let e=parseFloat(t.toString());const n=t.toString().replace(String(e),"");return{isUnitless:!n,unit:n,value:t}}function Hi(t,e){return function(n){var r;const o=ll(e)?e.match(/fallback\(([^,)]+),?\s*([^]+)?\)/):null,[,s,i]=o??[];s&&(e=s);const a=`${t}.${e}`;return vt(n.__cssMap)&&a in n.__cssMap?(r=n.__cssMap[a])==null?void 0:r.ref:i??e}}function Ur(t,e){return function(n="light"){return n==="light"?t:e}}function die(t,e){return function(n,...r){return e(t(n,...r),...r)}}function te(...t){return t.reduce(die)}var IL=_f()?new C6({key:"css",container:document.head}):void 0;function fie(t){return Object.entries(t).reduce((e,[n,r])=>(n==="duration"?e.animationDuration=r:n==="timingFunction"?e.animationTimingFunction=r:e[n]=r,e),{})}function M_(t,e,n,r){if(t==null||oy.has(t))return t;if(vt(t)){const{animationDuration:o="0s",animationTimingFunction:s="ease",delay:i="0s",direction:a="normal",fillMode:l="none",iterationCount:u="1",keyframes:c,playState:d="running"}=n(fie(t))(e),{name:f,styles:p}=Wse(c);return IL==null||IL.insert(p),`${f} ${o} ${s} ${i} ${u} ${a} ${l} ${d}`}else return t.includes(",")?(t=t.split(",").map(o=>(o=o.trim(),o=Hi("animations",o)(e),o)).join(","),t):(t=Hi("animations",t)(e),t)}var TC=t=>(e,n)=>qe(e)?e.reduce((r,{type:o,name:s,css:i,h:a,height:l,maxH:u,maxHeight:c,maxW:d,maxWidth:f,minH:p,minHeight:h,minW:m,minWidth:g,query:y,w:v,width:b,...x})=>{var w;if(b??(b=v),g??(g=m),f??(f=d),l??(l=a),h??(h=p),c??(c=u),!y){const k=Cw({height:l,maxHeight:c,maxWidth:f,minHeight:h,minWidth:g,width:b,...x});y=Object.entries(k).map(([$,C])=>(C=Hi("sizes",C)(n),`(${roe($)}: ${C})`)).join(" and ")}const S=`@${t} ${(w=o??s)!=null?w:""} ${y}`;return r[S]=i,r},{}):e,H6=["+","-","*","/"];function Pi(t,e=""){return function(n,r,...o){var s;if(!t)return e;if(Nf(t))return ME(n)(t,r,...o);{if(Kre(t))return t;const a=`${n}.${t}`;return r.__cssMap&&a in r.__cssMap?(s=r.__cssMap[a])==null?void 0:s.ref:t}}}function pie(t){return new RegExp(`\\s[${H6.join("\\")}]\\s`).test(t)}function ME(t){return function(e,n,...r){if(e==null||oy.has(e)||!Nf(e))return e;let{type:s,values:i}=jw(e);if(!s||!i)return e;switch(s){case"calc":return`calc(${di(i,(l,u,c)=>pie(`${u}${l}${c}`),!0).map(l=>l&&H6.includes(l)?l:Pi(l)(t,n,...r)).join(" ")})`;case"min":case"max":{let[a,l,...u]=di(i);return a=Pi(a,"100%")(t,n,...r),l=Pi(l,"100%")(t,n,...r),u=u.map(c=>Pi(c)(t,n,...r)),`${s}(${a}, ${l}`+(u.length?`, ${u.join(", ")}`:"")+")"}case"clamp":{let[a,l,u]=di(i);return u||(u=l,l=""),a=Pi(a)(t,n,...r),l=Pi(l,"100%")(t,n,...r),u=Pi(u)(t,n,...r),`clamp(${a}, ${l}, ${u})`}case"minmax":{let[a,l]=di(i);return a=Pi(a)(t,n,...r),l=Pi(l)(t,n,...r),`minmax(${a}, ${l})`}case"fit-content":{let[a]=di(i);return a=Pi(a)(t,n,...r),`fit-content(${a})`}default:return e}}}var _C="in srgb",NL={"a98-rgb":"in a98-rgb","display-p3":"in display-p3",lab:"in lab",oklab:"in oklab","prophoto-rgb":"in prophoto-rgb",rec2020:"in rec2020",srgb:"in srgb","srgb-linear":"in srgb-linear",xyz:"in xyz","xyz-d50":"in xyz-d50","xyz-d65":"in xyz-d65"};function Sv(t,e){var n;if(!t)return"";let[r,o,...s]=t.split(" ").filter(Boolean);if(s.length)return t;const i=`colors.${r}`;return r=e.__cssMap&&i in e.__cssMap?(n=e.__cssMap[i])==null?void 0:n.ref:r,o&&!o.endsWith("%")&&(o=`${o}%`),o?`${r} ${o}`:r}function hie(t,e,n,r){if(t==null||oy.has(t)||!Nf(t))return t;const{type:s,values:i}=jw(t);if(!i)return t;switch(s){case"mix":case"color-mix":{let[a,l,u]=di(i).reverse();return u?u=u in NL?NL[u]:u:u=_C,l=Sv(l,e),a=Sv(a,e),`color-mix(${u}`+(l?`, ${l}`:"")+(a?`, ${a}`:"")+")"}case"tint":case"shade":case"transparentize":{const[a,l]=di(i),u=Sv(`${a} ${l}`,e);return`color-mix(${_C}, ${u}, ${s==="transparentize"?"transparent":s==="tint"?"#fff":"#000"})`}case"tone":{const[a,l]=di(i),u=Sv(a,e);if(!l)return u;let c=parseInt(l)||500;if(c<50&&950<c&&(c=500),c===500)return u;const d=c<500?"#fff":"#000",f=`${100-Math.abs(c-500)*2/10}%`;return`color-mix(${_C}, ${u} ${f}, ${d})`}default:return t}}function mie(t="filter"){return function(e){return e!=="auto"?e:t==="filter"?["var(--ui-blur, /*!*/ /*!*/)","var(--ui-brightness, /*!*/ /*!*/)","var(--ui-contrast, /*!*/ /*!*/)","var(--ui-drop-shadow, /*!*/ /*!*/)","var(--ui-grayscale, /*!*/ /*!*/)","var(--ui-hue-rotate, /*!*/ /*!*/)","var(--ui-invert, /*!*/ /*!*/)","var(--ui-opacity, /*!*/ /*!*/)","var(--ui-saturate, /*!*/ /*!*/)","var(--ui-sepia, /*!*/ /*!*/)"].join(" "):["var(--ui-backdrop-blur, /*!*/ /*!*/)","var(--ui-backdrop-brightness, /*!*/ /*!*/)","var(--ui-backdrop-contrast, /*!*/ /*!*/)","var(--ui-backdrop-drop-shadow, /*!*/ /*!*/)","var(--ui-backdrop-grayscale, /*!*/ /*!*/)","var(--ui-backdrop-hue-rotate, /*!*/ /*!*/)","var(--ui-backdrop-invert, /*!*/ /*!*/)","var(--ui-backdrop-opacity, /*!*/ /*!*/)","var(--ui-backdrop-saturate, /*!*/ /*!*/)","var(--ui-backdrop-sepia, /*!*/ /*!*/)"].join(" ")}}function gie(t){return function(e){return`${t}(${e})`}}var L_={"to-b":"to bottom","to-bl":"to bottom left","to-br":"to bottom right","to-l":"to left","to-r":"to right","to-t":"to top","to-tl":"to top left","to-tr":"to top right"},yie=new Set(Object.values(L_));function z_(t,e,n,r){if(t==null||oy.has(t))return t;if(!Nf(t))return`url('${t}')`;let{type:s,values:i}=jw(t);if(!s||!i)return t;s=s.includes("-gradient")?s:`${s}-gradient`;const[a,...l]=di(i);if(!l.length)return t;const u=a&&a in L_?L_[a]:a;Ms(u)||l.unshift(u);const c=l.map(d=>{var f,p;if(Ms(d)||yie.has(d))return d;const h=d.indexOf(" ");let[m,g]=h!==-1?[d.slice(0,h),d.slice(h+1)]:[d];const y=Nf(g)?g:g==null?void 0:g.split(" "),v=`colors.${m}`;return m=e.__cssMap&&v in e.__cssMap&&(p=(f=e.__cssMap[v])==null?void 0:f.ref)!=null?p:m,y?[m,...qe(y)?y:[y]].join(" "):m});return`${s}(${c.join(", ")})`}var EL={fill:"auto-fill",fit:"auto-fit"};function q6(t,e,n,r){if(t==null||oy.has(t))return t;const o=di(t,i=>i===" ");return o.length?o.map(i=>{var a,l;if(!Nf(i)){const f=`sizes.${i}`;return e.__cssMap&&f in e.__cssMap&&(l=(a=e.__cssMap[f])==null?void 0:a.ref)!=null?l:i}const{type:c,values:d}=jw(i);if(!c||!d)return i;if(c==="repeat"){let[f,p]=di(d);return f=f&&f in EL?EL[f]:f,p=q6(p,e,n,r),`repeat(${f}, ${p})`}else return ME("sizes")(i,e,n,r)}).join(" "):t}function vie(t){return function(e,n,r,o={}){const s={},i=Be(n,t?`styles.${t}.${e}`:`styles.${e}`,{});for(const a in i)a in o&&o[a]!=null||(s[a]=i[a]);return s}}function bie(t){return function(e,n){return Hi(t,e)(n)}}var AL=["rotate(var(--ui-rotate, 0))","scaleX(var(--ui-scale-x, 1))","scaleY(var(--ui-scale-y, 1))","skewX(var(--ui-skew-x, 0))","skewY(var(--ui-skew-y, 0))"];function xie(t,e,n,r){return t==="auto"?["translateX(var(--ui-translate-x, 0))","translateY(var(--ui-translate-y, 0))",...AL].join(" "):t==="auto-3d"?["translate3d(var(--ui-translate-x, 0), var(--ui-translate-y, 0), 0)",...AL].join(" "):t}var LE="ui";function K6(t,e,n){var r;if(e.length===0)return n;const[o,...s]=e;return Ms(o)||(t[o]=K6((r=t[o])!=null?r:{},s,n)),t}function IC(t,e){return function(n){const r=ax(e);return Object.entries(r).reduce((o,[s,i])=>{const a=s.split(".");return qe(i)?i=i.map(l=>Hi(t,l)(n)):i=Hi(t,i)(n),K6(o,a,i),o},{})}}function wie(t,e){return function(n){return t&&(vt(e)?e=Object.entries(e).reduce((r,[o,s])=>(vt(s)?r[o]=IC(t,s)(n):qe(s)?r[o]=s.map(i=>vt(i)?IC(t,i)(n):Hi(t,i)(n)):r[o]=Hi(t,s)(n),r),{}):qe(e)?e=e.map(r=>vt(r)?IC(t,r)(n):Hi(t,r)(n)):e=Hi(t,e)(n)),e}}function Sie(t,e,n,r){return qe(t)?t.reduce((o,{name:s,token:i,value:a,__prefix:l})=>{var u,c,d;return s=`--${(d=l??((c=(u=e.__config)==null?void 0:u.var)==null?void 0:c.prefix))!=null?d:LE}-${s}`,o[s]=wie(i,a)(e),o},{}):t}var _={animation:M_,bgClip:t=>t==="text"?{backgroundClip:"text",color:"transparent"}:{backgroundClip:t},calc:ME,colorMix:hie,container:TC("container"),content:t=>vt(t)?{content:"''",...t}:t,deg:t=>uie(t)||t==null?t:typeof t=="string"&&!t.endsWith("deg")||yi(t)?`${t}deg`:t,filter:mie,fraction:t=>(yi(t)&&t<=1&&(t=`${t*100}%`),t),function:gie,gradient:z_,grid:q6,isTruncated:t=>{if(t)return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},media:TC("media"),px:t=>{if(t==null)return t;const{isUnitless:e}=cie(t);return e||yi(t)?`${t}px`:t},styles:vie,supports:TC("supports"),token:bie,transform:xie,vars:Sie},xe={accentColor:{properties:"accentColor",token:"colors",transform:te(_.token("colors"),_.colorMix)},alignContent:!0,alignItems:!0,alignmentBaseline:!0,alignSelf:!0,all:!0,animation:{properties:"animation",token:"animations",transform:te(_.token("animations"),_.animation)},animationComposition:!0,animationDelay:!0,animationDirection:!0,animationDuration:{properties:"animationDuration",token:"transitions.duration",transform:_.token("transitions.duration")},animationFillMode:!0,animationIterationCount:!0,animationName:!0,animationPlayState:!0,animationRange:!0,animationRangeEnd:!0,animationRangeStart:!0,animationTimeline:!0,animationTimingFunction:{properties:"animationTimingFunction",token:"transitions.easing",transform:_.token("transitions.easing")},appearance:!0,aspectRatio:!0,azimuth:!0,backdropBlur:{properties:"--ui-backdrop-blur",token:"blurs",transform:te(_.token("blurs"),_.function("blur"))},backdropBrightness:{properties:"--ui-backdrop-brightness",transform:_.function("brightness")},backdropContrast:{properties:"--ui-backdrop-contrast",transform:_.function("contrast")},backdropDropShadow:{properties:"--ui-backdrop-drop-shadow",token:"shadows",transform:te(_.token("shadows"),_.function("drop-shadow"))},backdropFilter:{transform:_.filter("backdrop")},backdropGrayscale:{properties:"--ui-backdrop-grayscale",transform:_.function("grayscale")},backdropHueRotate:{properties:"--ui-backdrop-hue-rotate",transform:te(_.deg,_.function("hue-rotate"))},backdropInvert:{properties:"--ui-backdrop-invert",transform:_.function("invert")},backdropSaturate:{properties:"--ui-backdrop-saturate",transform:_.function("saturate")},backdropSepia:{properties:"--ui-backdrop-sepia",transform:_.function("sepia")},backfaceVisibility:{properties:"backfaceVisibility",token:"sizes",transform:te(_.token("sizes"),_.fraction,_.px,_.calc("sizes"))},background:{properties:"background",token:"colors",transform:te(_.token("colors"),_.colorMix)},backgroundAttachment:!0,backgroundBlendMode:!0,backgroundClip:{properties:"backgroundClip",transform:_.bgClip},backgroundColor:{properties:"backgroundColor",token:"colors",transform:te(_.token("colors"),_.colorMix)},backgroundImage:{properties:"backgroundImage",token:"gradients",transform:te(_.token("gradients"),_.gradient)},backgroundOrigin:!0,backgroundPosition:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0,backgroundSize:!0,baselineShift:!0,blockSize:{properties:"blockSize",token:"sizes",transform:te(_.token("sizes"),_.fraction,_.px,_.calc("sizes"))},blur:{properties:"--ui-blur",token:"blurs",transform:te(_.token("blurs"),_.function("blur"))},border:{properties:"border",token:"borders",transform:te(_.token("borders"),_.px)},borderBlock:{properties:"borderBlock",token:"borders",transform:te(_.token("borders"),_.px)},borderBlockColor:{properties:"borderBlockColor",token:"colors",transform:te(_.token("colors"),_.colorMix)},borderBlockEnd:{properties:"borderBlockEnd",token:"borders",transform:te(_.token("borders"),_.px)},borderBlockEndColor:{properties:"borderBlockEndColor",token:"colors",transform:te(_.token("colors"),_.colorMix)},borderBlockEndStyle:!0,borderBlockEndWidth:{properties:"borderBlockEndWidth",transform:_.px},borderBlockStart:{properties:"borderBlockStart",token:"borders",transform:te(_.token("borders"),_.px)},borderBlockStartColor:{properties:"borderBlockStartColor",token:"colors",transform:te(_.token("colors"),_.colorMix)},borderBlockStartStyle:!0,borderBlockStartWidth:{properties:"borderBlockStartWidth",transform:_.px},borderBlockStyle:!0,borderBlockWidth:{properties:"borderBlockWidth",transform:_.px},borderBottom:{properties:"borderBottom",token:"borders",transform:te(_.token("borders"),_.px)},borderBottomColor:{properties:"borderBottomColor",token:"colors",transform:te(_.token("colors"),_.colorMix)},borderBottomLeftRadius:{properties:"borderBottomLeftRadius",token:"radii",transform:te(_.token("radii"),_.px,_.calc("radii"))},borderBottomRadius:{properties:["borderBottomLeftRadius","borderBottomRightRadius"],token:"radii",transform:te(_.token("radii"),_.px,_.calc("radii"))},borderBottomRightRadius:{properties:"borderBottomRightRadius",token:"radii",transform:te(_.token("radii"),_.px,_.calc("radii"))},borderBottomStyle:!0,borderBottomWidth:{properties:"borderBottomWidth",transform:_.px},borderCollapse:!0,borderColor:{properties:"borderColor",token:"colors",transform:te(_.token("colors"),_.colorMix)},borderEndEndRadius:{properties:"borderEndEndRadius",token:"radii",transform:te(_.token("radii"),_.px,_.calc("radii"))},borderEndStartRadius:{properties:"borderEndStartRadius",token:"radii",transform:te(_.token("radii"),_.px,_.calc("radii"))},borderImage:{properties:"borderImage",token:"borders",transform:te(_.token("borders"),_.px)},borderImageOutset:!0,borderImageRepeat:!0,borderImageSlice:!0,borderImageSource:{properties:"borderImageSource",token:"gradients",transform:te(_.token("gradients"),_.gradient)},borderImageWidth:{properties:"borderImageWidth",transform:_.px},borderInline:{properties:"borderInline",token:"borders",transform:te(_.token("borders"),_.px)},borderInlineColor:{properties:"borderInlineColor",token:"colors",transform:te(_.token("colors"),_.colorMix)},borderInlineEnd:{properties:"borderInlineEnd",token:"borders",transform:te(_.token("borders"),_.px)},borderInlineEndColor:{properties:"borderInlineEndColor",token:"colors",transform:te(_.token("colors"),_.colorMix)},borderInlineEndRadius:{properties:["borderEndStartRadius","borderEndEndRadius"],token:"radii",transform:te(_.token("radii"),_.px,_.calc("radii"))},borderInlineEndStyle:!0,borderInlineEndWidth:{properties:"borderInlineEndWidth",transform:_.px},borderInlineStart:{properties:"borderInlineStart",token:"borders",transform:te(_.token("borders"),_.px)},borderInlineStartColor:{properties:"borderInlineStartColor",token:"colors",transform:te(_.token("colors"),_.colorMix)},borderInlineStartRadius:{properties:["borderStartStartRadius","borderStartEndRadius"],token:"radii",transform:te(_.token("radii"),_.px,_.calc("radii"))},borderInlineStartStyle:!0,borderInlineStartWidth:{properties:"borderInlineStartWidth",transform:_.px},borderInlineStyle:!0,borderInlineWidth:{properties:"borderInlineWidth",transform:_.px},borderLeft:{properties:"borderLeft",token:"borders",transform:te(_.token("borders"),_.px)},borderLeftColor:{properties:"borderLeftColor",token:"colors",transform:te(_.token("colors"),_.colorMix)},borderLeftRadius:{properties:["borderTopLeftRadius","borderBottomLeftRadius"],token:"radii",transform:te(_.token("radii"),_.px,_.calc("radii"))},borderLeftStyle:!0,borderLeftWidth:{properties:"borderLeftWidth",transform:_.px},borderRadius:{properties:"borderRadius",token:"radii",transform:te(_.token("radii"),_.px,_.calc("radii"))},borderRight:{properties:"borderRight",token:"borders",transform:te(_.token("borders"),_.px)},borderRightColor:{properties:"borderRightColor",token:"colors",transform:te(_.token("colors"),_.colorMix)},borderRightRadius:{properties:["borderTopRightRadius","borderBottomRightRadius"],token:"radii",transform:te(_.token("radii"),_.px,_.calc("radii"))},borderRightStyle:!0,borderRightWidth:{properties:"borderRightWidth",transform:_.px},borderSpacing:!0,borderStartEndRadius:{properties:"borderStartEndRadius",token:"radii",transform:te(_.token("radii"),_.px,_.calc("radii"))},borderStartStartRadius:{properties:"borderStartStartRadius",token:"radii",transform:te(_.token("radii"),_.px,_.calc("radii"))},borderStyle:!0,borderTop:{properties:"borderTop",token:"borders",transform:te(_.token("borders"),_.px)},borderTopColor:{properties:"borderTopColor",token:"colors",transform:te(_.token("colors"),_.colorMix)},borderTopLeftRadius:{properties:"borderTopLeftRadius",token:"radii",transform:te(_.token("radii"),_.px,_.calc("radii"))},borderTopRadius:{properties:["borderTopLeftRadius","borderTopRightRadius"],token:"radii",transform:te(_.token("radii"),_.px,_.calc("radii"))},borderTopRightRadius:{properties:"borderTopRightRadius",token:"radii",transform:te(_.token("radii"),_.px,_.calc("radii"))},borderTopStyle:!0,borderTopWidth:{properties:"borderTopWidth",transform:_.px},borderWidth:{properties:"borderWidth",transform:_.px},borderX:{properties:["borderLeft","borderRight"],token:"borders",transform:te(_.token("borders"),_.px)},borderY:{properties:["borderTop","borderBottom"],token:"borders",transform:te(_.token("borders"),_.px)},bottom:{properties:"bottom",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},boxAlign:!0,boxDecorationBreak:!0,boxDirection:!0,boxFlex:!0,boxFlexGroup:!0,boxLines:!0,boxOrdinalGroup:!0,boxOrient:!0,boxPack:!0,boxShadow:{properties:"boxShadow",token:"shadows",transform:_.token("shadows")},boxSize:{properties:["width","height"],token:"sizes",transform:te(_.token("sizes"),_.fraction,_.px,_.calc("sizes"))},boxSizing:!0,breakAfter:!0,breakBefore:!0,breakInside:!0,brightness:{properties:"--ui-brightness",transform:_.function("brightness")},captionSide:!0,caretColor:{properties:"caretColor",token:"colors",transform:te(_.token("colors"),_.colorMix)},clear:!0,clip:!0,clipPath:!0,clipRule:!0,color:{properties:"color",token:"colors",transform:te(_.token("colors"),_.colorMix)},colorInterpolation:!0,colorMode:{properties:"colorScheme"},columnCount:!0,columnFill:!0,columnGap:{properties:"columnGap",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},columnRule:{properties:"columnRule",transform:_.px},columnRuleColor:{properties:"columnRuleColor",token:"colors",transform:te(_.token("colors"),_.colorMix)},columnRuleStyle:!0,columnRuleWidth:{properties:"columnRuleWidth",transform:_.px},columns:!0,columnSpan:!0,columnWidth:{properties:"columnWidth",token:"sizes",transform:te(_.token("sizes"),_.fraction,_.px,_.calc("sizes"))},contain:!0,container:!0,containerName:!0,containerType:!0,containIntrinsicBlockSize:!0,containIntrinsicHeight:!0,containIntrinsicInlineSize:!0,containIntrinsicSize:!0,containIntrinsicWidth:{properties:"containIntrinsicWidth",token:"sizes",transform:te(_.token("sizes"),_.fraction,_.px,_.calc("sizes"))},content:!0,contentVisibility:!0,contrast:{properties:"--ui-contrast",transform:_.function("contrast")},counterIncrement:!0,counterReset:!0,counterSet:!0,cursor:!0,direction:!0,display:!0,dominantBaseline:!0,dropShadow:{properties:"--ui-drop-shadow",token:"shadows",transform:te(_.token("shadows"),_.function("drop-shadow"))},emptyCells:!0,fill:{properties:"fill",token:"colors",transform:te(_.token("colors"),_.colorMix)},fillOpacity:!0,fillRule:!0,filter:{transform:_.filter()},flex:!0,flexBasis:{properties:"flexBasis",token:"sizes",transform:te(_.token("sizes"),_.fraction,_.px,_.calc("sizes"))},flexDirection:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexWrap:!0,float:!0,floodColor:{properties:"floodColor",token:"colors",transform:te(_.token("colors"),_.colorMix)},floodOpacity:!0,font:!0,fontFamily:{properties:"fontFamily",token:"fonts",transform:_.token("fonts")},fontFeatureSettings:!0,fontKerning:!0,fontLanguageOverride:!0,fontOpticalSizing:!0,fontPalette:!0,fontSize:{properties:"fontSize",token:"fontSizes",transform:te(_.token("fontSizes"),_.px,_.calc("fontSizes"))},fontSizeAdjust:!0,fontSmooth:!0,fontStretch:!0,fontStyle:!0,fontSynthesis:!0,fontSynthesisPosition:!0,fontSynthesisSmallCaps:!0,fontSynthesisStyle:!0,fontSynthesisWeight:!0,fontVariant:!0,fontVariantAlternates:!0,fontVariantCaps:!0,fontVariantEastAsian:!0,fontVariantEmoji:!0,fontVariantLigatures:!0,fontVariantNumeric:!0,fontVariantPosition:!0,fontVariationSettings:!0,fontWeight:{properties:"fontWeight",token:"fontWeights",transform:_.token("fontWeights")},forcedColorAdjust:!0,gap:{properties:"gap",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},glyphOrientationVertical:!0,grayscale:{properties:"--ui-grayscale",transform:_.function("grayscale")},grid:!0,gridArea:!0,gridAutoColumns:{properties:"gridAutoColumns",token:"sizes",transform:te(_.token("sizes"),_.fraction,_.px,_.grid)},gridAutoFlow:!0,gridAutoRows:{properties:"gridAutoRows",token:"sizes",transform:te(_.token("sizes"),_.fraction,_.px,_.grid)},gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,gridTemplate:!0,gridTemplateAreas:!0,gridTemplateColumns:{properties:"gridTemplateColumns",token:"sizes",transform:te(_.token("sizes"),_.fraction,_.px,_.grid)},gridTemplateRows:{properties:"gridTemplateRows",token:"sizes",transform:te(_.token("sizes"),_.fraction,_.px,_.grid)},hangingPunctuation:!0,height:{properties:"height",token:"sizes",transform:te(_.token("sizes"),_.fraction,_.px,_.calc("sizes"))},hueRotate:{properties:"--ui-hue-rotate",transform:te(_.deg,_.function("hue-rotate"))},hyphenateCharacter:!0,hyphenateLimitChars:!0,hyphens:!0,imageOrientation:!0,imageRendering:!0,imageResolution:!0,initialLetter:!0,inlineSize:{properties:"inlineSize",token:"sizes",transform:te(_.token("sizes"),_.fraction,_.px,_.calc("sizes"))},inset:{properties:"inset",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},insetBlock:{properties:"insetBlock",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},insetBlockEnd:{properties:"insetBlockEnd",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},insetBlockStart:{properties:"insetBlockStart",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},insetInline:{properties:"insetInline",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},insetInlineEnd:{properties:"insetInlineEnd",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},insetInlineStart:{properties:"insetInlineStart",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},insetX:{properties:["left","right"],token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},insetY:{properties:["top","bottom"],token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},invert:{properties:"--ui-invert",transform:_.function("invert")},isolation:!0,justifyContent:!0,justifyItems:!0,justifySelf:!0,left:{properties:"left",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},letterSpacing:{properties:"letterSpacing",token:"letterSpacings",transform:_.token("letterSpacings")},lightingColor:{properties:"lightingColor",token:"colors",transform:te(_.token("colors"),_.colorMix)},lineBreak:!0,lineHeight:{properties:"lineHeight",token:"lineHeights",transform:_.token("lineHeights")},lineHeightStep:!0,listStyle:!0,listStyleImage:{properties:"listStyleImage",token:"gradients",transform:te(_.token("gradients"),_.gradient)},listStylePosition:!0,listStyleType:!0,margin:{properties:"margin",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},marginBlock:{properties:"marginBlock",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},marginBlockEnd:{properties:"marginBlockEnd",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},marginBlockStart:{properties:"marginBlockStart",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},marginBottom:{properties:"marginBottom",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},marginInline:{properties:"marginInline",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},marginInlineEnd:{properties:"marginInlineEnd",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},marginInlineStart:{properties:"marginInlineStart",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},marginLeft:{properties:"marginLeft",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},marginRight:{properties:"marginRight",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},marginTop:{properties:"marginTop",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},marginTrim:!0,marginX:{properties:["marginInlineStart","marginInlineEnd"],token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},marginY:{properties:["marginTop","marginBottom"],token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},marker:!0,markerEnd:!0,markerMid:!0,markerStart:!0,mask:!0,maskBorder:!0,maskBorderMode:!0,maskBorderOutset:!0,maskBorderRepeat:!0,maskBorderSlice:!0,maskBorderSource:!0,maskBorderWidth:{properties:"maskBorderWidth",transform:_.px},maskClip:!0,maskComposite:!0,maskImage:{properties:"maskImage",token:"gradients",transform:te(_.token("gradients"),_.gradient)},maskMode:!0,maskOrigin:!0,maskPosition:!0,maskRepeat:!0,maskSize:!0,maskType:!0,masonryAutoFlow:!0,mathDepth:!0,mathShift:!0,mathStyle:!0,maxBlockSize:{properties:"maxBlockSize",token:"sizes",transform:te(_.token("sizes"),_.fraction,_.px,_.calc("sizes"))},maxBoxSize:{properties:["maxWidth","maxHeight"],token:"sizes",transform:te(_.token("sizes"),_.fraction,_.px,_.calc("sizes"))},maxHeight:{properties:"maxHeight",token:"sizes",transform:te(_.token("sizes"),_.fraction,_.px,_.calc("sizes"))},maxInlineSize:{properties:"maxInlineSize",token:"sizes",transform:te(_.token("sizes"),_.fraction,_.px,_.calc("sizes"))},maxWidth:{properties:"maxWidth",token:"sizes",transform:te(_.token("sizes"),_.fraction,_.px,_.calc("sizes"))},minBlockSize:{properties:"minBlockSize",token:"sizes",transform:te(_.token("sizes"),_.fraction,_.px,_.calc("sizes"))},minBoxSize:{properties:["minWidth","minHeight"],token:"sizes",transform:te(_.token("sizes"),_.fraction,_.px,_.calc("sizes"))},minHeight:{properties:"minHeight",token:"sizes",transform:te(_.token("sizes"),_.fraction,_.px,_.calc("sizes"))},minInlineSize:{properties:"minInlineSize",token:"sizes",transform:te(_.token("sizes"),_.fraction,_.px,_.calc("sizes"))},minWidth:{properties:"minWidth",token:"sizes",transform:te(_.token("sizes"),_.fraction,_.px,_.calc("sizes"))},mixBlendMode:!0,objectFit:!0,objectPosition:!0,offset:!0,offsetAnchor:!0,offsetDistance:!0,offsetPath:!0,offsetPosition:!0,offsetRotate:!0,opacity:!0,order:!0,orphans:!0,outline:!0,outlineColor:{properties:"outlineColor",token:"colors",transform:te(_.token("colors"),_.colorMix)},outlineOffset:!0,outlineStyle:!0,outlineWidth:{properties:"outlineWidth",transform:_.px},overflow:!0,overflowAnchor:!0,overflowBlock:!0,overflowClipMargin:!0,overflowInline:!0,overflowWrap:!0,overflowX:!0,overflowY:!0,overlay:!0,overscrollBehavior:!0,overscrollBehaviorBlock:!0,overscrollBehaviorInline:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,padding:{properties:"padding",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},paddingBlock:{properties:"paddingBlock",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},paddingBlockEnd:{properties:"paddingBlockEnd",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},paddingBlockStart:{properties:"paddingBlockStart",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},paddingBottom:{properties:"paddingBottom",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},paddingInline:{properties:"paddingInline",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},paddingInlineEnd:{properties:"paddingInlineEnd",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},paddingInlineStart:{properties:"paddingInlineStart",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},paddingLeft:{properties:"paddingLeft",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},paddingRight:{properties:"paddingRight",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},paddingTop:{properties:"paddingTop",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},paddingX:{properties:["paddingInlineStart","paddingInlineEnd"],token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},paddingY:{properties:["paddingTop","paddingBottom"],token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},page:!0,pageBreakAfter:!0,pageBreakBefore:!0,pageBreakInside:!0,paintOrder:!0,perspective:!0,perspectiveOrigin:!0,placeContent:!0,placeItems:!0,placeSelf:!0,pointerEvents:!0,position:!0,printColorAdjust:!0,quotes:!0,resize:!0,right:{properties:"right",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},rotate:{properties:"--ui-rotate",transform:_.deg},rowGap:{properties:"rowGap",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},rubyAlign:!0,rubyPosition:!0,saturate:{properties:"--ui-saturate",transform:_.function("saturate")},scale:{properties:["--ui-scale-x","--ui-scale-y"]},scaleX:{properties:"--ui-scale-x"},scaleY:{properties:"--ui-scale-y"},scrollbarColor:{properties:"scrollbarColor",token:"colors",transform:te(_.token("colors"),_.colorMix)},scrollbarGutter:!0,scrollbarWidth:{properties:"scrollbarWidth",transform:_.px},scrollBehavior:!0,scrollMargin:{properties:"scrollMargin",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},scrollMarginBlock:!0,scrollMarginBlockEnd:!0,scrollMarginBlockStart:!0,scrollMarginBottom:{properties:"scrollMarginBottom",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},scrollMarginInline:!0,scrollMarginInlineEnd:!0,scrollMarginInlineStart:!0,scrollMarginLeft:{properties:"scrollMarginLeft",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},scrollMarginRight:{properties:"scrollMarginRight",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},scrollMarginTop:{properties:"scrollMarginTop",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},scrollMarginX:{properties:["scrollMarginLeft","scrollMarginRight"],token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},scrollMarginY:{properties:["scrollMarginTop","scrollMarginBottom"],token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},scrollPadding:{properties:"scrollPadding",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},scrollPaddingBlock:!0,scrollPaddingBlockEnd:!0,scrollPaddingBlockStart:!0,scrollPaddingBottom:{properties:"scrollPaddingBottom",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},scrollPaddingInline:!0,scrollPaddingInlineEnd:!0,scrollPaddingInlineStart:!0,scrollPaddingLeft:{properties:"scrollPaddingLeft",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},scrollPaddingRight:{properties:"scrollPaddingRight",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},scrollPaddingTop:{properties:"scrollPaddingTop",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},scrollPaddingX:{properties:["scrollPaddingLeft","scrollPaddingRight"],token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},scrollPaddingY:{properties:["scrollPaddingTop","scrollPaddingBottom"],token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollTimeline:!0,scrollTimelineAxis:!0,scrollTimelineName:!0,sepia:{properties:"--ui-sepia",transform:_.function("sepia")},shapeImageThreshold:!0,shapeMargin:!0,shapeOutside:!0,shapeRendering:!0,skewX:{properties:"--ui-skew-x",transform:_.deg},skewY:{properties:"--ui-skew-y",transform:_.deg},stopColor:!0,stopOpacity:!0,stroke:{properties:"stroke",token:"colors",transform:te(_.token("colors"),_.colorMix)},strokeDasharray:!0,strokeDashoffset:!0,strokeLinecap:!0,strokeLinejoin:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:{properties:"strokeWidth",transform:_.px},tableLayout:!0,tabSize:!0,textAlign:!0,textAlignLast:!0,textAnchor:!0,textCombineUpright:!0,textDecoration:!0,textDecorationColor:{properties:"textDecorationColor",token:"colors",transform:te(_.token("colors"),_.colorMix)},textDecorationLine:!0,textDecorationSkip:!0,textDecorationSkipInk:!0,textDecorationStyle:!0,textDecorationThickness:!0,textEmphasis:!0,textEmphasisColor:{properties:"textEmphasisColor",token:"colors",transform:te(_.token("colors"),_.colorMix)},textEmphasisPosition:!0,textEmphasisStyle:!0,textIndent:!0,textJustify:!0,textOrientation:!0,textOverflow:!0,textRendering:!0,textShadow:{properties:"textShadow",token:"shadows",transform:_.token("shadows")},textSizeAdjust:!0,textTransform:!0,textUnderlineOffset:!0,textUnderlinePosition:!0,textWrap:!0,timelineScope:!0,top:{properties:"top",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},touchAction:!0,transform:{properties:"transform",transform:_.transform},transformBox:!0,transformOrigin:!0,transformStyle:!0,transition:!0,transitionBehavior:!0,transitionDelay:!0,transitionDuration:{properties:"transitionDuration",token:"transitions.duration",transform:_.token("transitions.duration")},transitionProperty:{properties:"transitionProperty",token:"transitions.property",transform:_.token("transitions.property")},transitionTimingFunction:{properties:"transitionTimingFunction",token:"transitions.easing",transform:_.token("transitions.easing")},translate:!0,translateX:{properties:"--ui-translate-x",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},translateY:{properties:"--ui-translate-y",token:"spaces",transform:te(_.token("spaces"),_.px,_.calc("spaces"))},unicodeBidi:!0,userSelect:!0,vectorEffect:!0,verticalAlign:!0,viewTimeline:!0,viewTimelineAxis:!0,viewTimelineInset:!0,viewTimelineName:!0,viewTransitionName:!0,visibility:!0,whiteSpace:!0,whiteSpaceCollapse:!0,widows:!0,width:{properties:"width",token:"sizes",transform:te(_.token("sizes"),_.fraction,_.px,_.calc("sizes"))},willChange:!0,wordBreak:!0,wordSpacing:!0,writingMode:!0,zIndex:{properties:"zIndex",token:"zIndices",transform:_.token("zIndices")},zoom:!0},kie={accent:xe.accentColor,bg:xe.background,bgAttachment:{properties:"backgroundAttachment"},bgBlendMode:{properties:"backgroundBlendMode"},bgClip:xe.backgroundClip,bgColor:xe.backgroundColor,bgGradient:xe.backgroundImage,bgImage:xe.backgroundImage,bgImg:xe.backgroundImage,bgOrigin:{properties:"backgroundOrigin"},bgPosition:{properties:"backgroundPosition"},bgPositionX:{properties:"backgroundPositionX"},bgPositionY:{properties:"backgroundPositionY"},bgPosX:{properties:"backgroundPositionX"},bgPosY:{properties:"backgroundPositionY"},bgRepeat:{properties:"backgroundRepeat"},bgSize:{properties:"backgroundSize"},blendMode:{properties:"mixBlendMode"},borderBottomEndRadius:xe.borderEndEndRadius,borderBottomStartRadius:xe.borderEndStartRadius,borderEnd:xe.borderInlineEnd,borderEndColor:xe.borderInlineEndColor,borderEndRadius:xe.borderInlineEndRadius,borderEndStyle:{properties:"borderInlineEndStyle"},borderEndWidth:xe.borderInlineEndWidth,borderStart:xe.borderInlineStart,borderStartColor:xe.borderInlineStartColor,borderStartRadius:xe.borderInlineStartRadius,borderStartStyle:{properties:"borderInlineStartStyle"},borderStartWidth:xe.borderInlineStartWidth,borderTopEndRadius:xe.borderStartEndRadius,borderTopStartRadius:xe.borderStartStartRadius,caret:xe.caretColor,flexDir:{properties:"flexDirection"},g:xe.gap,gapX:xe.columnGap,gapY:xe.rowGap,gx:xe.columnGap,gy:xe.rowGap,h:xe.height,insetEnd:xe.insetInlineEnd,insetStart:xe.insetInlineStart,leading:xe.lineHeight,listStyleImg:xe.listStyleImage,listStylePos:{properties:"listStylePosition"},m:xe.margin,marginEnd:xe.marginInlineEnd,marginStart:xe.marginInlineStart,maxH:xe.maxHeight,maxW:xe.maxWidth,mb:xe.marginBottom,me:xe.marginInlineEnd,minH:xe.minHeight,minW:xe.minWidth,ml:xe.marginLeft,mr:xe.marginRight,ms:xe.marginInlineStart,mt:xe.marginTop,mx:xe.marginX,my:xe.marginY,overscroll:{properties:"overscrollBehavior"},overscrollX:{properties:"overscrollBehaviorX"},overscrollY:{properties:"overscrollBehaviorY"},p:xe.padding,paddingEnd:xe.paddingInlineEnd,paddingStart:xe.paddingInlineStart,pb:xe.paddingBottom,pe:xe.paddingInlineEnd,pl:xe.paddingLeft,pos:{properties:"position"},pr:xe.paddingRight,ps:xe.paddingInlineStart,pt:xe.paddingTop,px:xe.paddingX,py:xe.paddingY,rounded:xe.borderRadius,roundedBottom:xe.borderBottomRadius,roundedBottomEnd:xe.borderEndEndRadius,roundedBottomLeft:xe.borderBottomLeftRadius,roundedBottomRight:xe.borderBottomRightRadius,roundedBottomStart:xe.borderEndStartRadius,roundedEnd:xe.borderInlineEndRadius,roundedLeft:xe.borderLeftRadius,roundedRight:xe.borderRightRadius,roundedStart:xe.borderInlineStartRadius,roundedTop:xe.borderTopRadius,roundedTopEnd:xe.borderStartEndRadius,roundedTopLeft:xe.borderTopLeftRadius,roundedTopRight:xe.borderTopRightRadius,roundedTopStart:xe.borderStartStartRadius,shadow:xe.boxShadow,text:xe.fontSize,textColor:xe.color,textDecor:{properties:"textDecoration"},tracking:xe.letterSpacing,w:xe.width,z:xe.zIndex},$ie={"&::after":{properties:"&::after",transform:_.content},"&::before":{properties:"&::before",transform:_.content}},Cie={apply:{isProcessResult:!0,transform:_.styles()},layerStyle:{isProcessResult:!0,transform:_.styles("layerStyles")},textStyle:{isProcessResult:!0,transform:_.styles("textStyles")},isTruncated:{transform:_.isTruncated},lineClamp:{properties:"--ui-line-clamp",static:{display:"-webkit-box",overflow:"hidden",textOverflow:"ellipsis",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--ui-line-clamp)"}},vars:{isProcessSkip:!0,transform:_.vars}},Tie={_container:{isProcessSkip:!0,transform:_.container},_media:{isProcessSkip:!0,transform:_.media},_supports:{isProcessSkip:!0,transform:_.supports}},zE={...xe,...kie,...$ie,...Cie,...Tie},_ie=Object.keys(zE),Iie=["vars","_media","_container","_supports"],X6=["width","inlineSize","height","backfaceVisibility","blockSize","boxSize","minWidth","minInlineSize","minHeight","minBlockSize","maxWidth","maxInlineSize","maxHeight","maxBlockSize","overflow","overflowX","overflowY","overscrollBehavior","overscroll","overscrollX","textDecor","overscrollBehaviorY","overscrollY","display","aspectRatio","verticalAlign","boxSizing","boxDecorationBreak","float","objectFit","objectPosition","visibility","isolation","w","h","minW","maxW","minH","maxH","position","pos","zIndex","inset","insetX","insetInline","insetY","insetBlock","top","insetBlockStart","bottom","insetBlockEnd","left","insetInlineStart","right","insetInlineEnd","insetStart","insetEnd","margin","marginTop","marginBlockStart","marginRight","marginInlineEnd","marginBottom","marginBlockEnd","marginLeft","marginInlineStart","marginX","marginInline","marginY","marginBlock","padding","paddingTop","paddingBlockStart","paddingRight","paddingBottom","paddingBlockEnd","paddingLeft","paddingInlineStart","paddingInlineEnd","paddingX","paddingInline","paddingY","paddingBlock","m","mt","mr","me","marginEnd","mb","ml","ms","marginStart","mx","my","p","pt","py","px","pb","pl","ps","paddingStart","pr","pe","paddingEnd","alignItems","alignContent","justifyItems","justifyContent","flexWrap","flexDirection","flexDir","flex","flexFlow","flexGrow","flexShrink","flexBasis","justifySelf","alignSelf","order","placeItems","placeContent","placeSelf","gap","rowGap","columnGap","grid","gridColumn","gridRow","gridAutoFlow","gridAutoColumns","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridAutoRows","gridTemplate","gridTemplateColumns","gridTemplateRows","gridTemplateAreas","gridArea"],Nie=new Set(["__css","as","css","errorBorderColor","focusBorderColor","sx",...lie,..._ie]);function Eie(t){return function(e){var n;return((n=t==null?void 0:t(e))!=null?n:!1)||!Nie.has(e)}}function Cb(t,e,n="@media screen"){const r=[n];return t&&r.push("and",`(min-width: ${t}px)`),e&&r.push("and",`(max-width: ${e}px)`),r.length>1?r.join(" ").replace(/^@container(\s+\w*)?\s+and/,"@container$1"):void 0}function Aie(t,e){const{direction:n,identifier:r}=e,o=n!=="up";return Object.entries(t).map(([s,i],a,l)=>{var u;const[,c]=(u=l[a+1])!=null?u:[];let d=o?c:i,f=o?i:c;s==="base"&&(o?f=void 0:d=void 0),o?d&&(d+=1):f&&(f-=1);const p=Cb(void 0,f,r),h=Cb(d,void 0,r),m=Cb(d,f,r);return{breakpoint:s,maxW:f,maxWQuery:p,minMaxQuery:m,minW:d,minWQuery:h,query:o?p:h}})}function Oie(t,e){return Object.fromEntries(Object.entries(t).map(([n,r])=>[n,Moe(r)]).sort((n,r)=>e.direction!=="up"?r[1]-n[1]:n[1]-r[1]))}function Pie(t,e={}){var n,r;if(!t)return;(n=e.base)!=null||(e.base="9999px"),(r=e.direction)!=null||(e.direction="down"),t.base=e.direction!=="up"?e.base:"0px",t=Oie(t,e);const o=Object.keys(t),s=Aie(t,e);return{isResponsive:(a,l=!1)=>{const u=Object.keys(a);return!u.length||l&&!u.includes("base")?!1:u.every(c=>o.includes(c))},keys:o,queries:s}}function NC(t){return Iie.includes(t)}function Rie(t){return function(e){const n=Object.keys(t);return!n.length||!n.includes("base")?!1:n.every(r=>e.includes(r)||r.startsWith("@")||r.startsWith("_"))}}function cx(t,e,n){let r={};return vt(e[0])?r=BE(t,e[0],n):r[t]=e[0],r[Ya._dark]={[t]:e[1]},r}function BE(t,e,n){return n.reduce((r,{breakpoint:o,query:s})=>{const i=e[o];return s?i&&(r[s]={[t]:i}):qe(i)?r=pn(r,cx(t,i,n)):r[t]=i,r},{})}function Die(t,e,n){return Object.entries(e).reduce((r,[o,s])=>{var i,a;return o==="base"?qe(s)?r=pn(r,cx(t,s,n)):r[t]=s:(o=(a=(i=n.find(({breakpoint:l})=>l===o))==null?void 0:i.query)!=null?a:o,vt(s)?r=pn(r,{[o]:BE(t,s,n)}):qe(s)?r=pn(r,{[o]:cx(t,s,n)}):r[o]={[t]:s}),r},{})}function Fie(t){return function(e){if(!e.__breakpoints)return t;const{isResponsive:n,keys:r,queries:o}=e.__breakpoints;let s={};for(let[i,a]of Object.entries(t))if(a=jn(a,e),a!=null){if(qe(a)&&!NC(i)){s=pn(s,cx(i,a,o));continue}if(vt(a)&&n(a)&&!NC(i)){s=pn(s,BE(i,a,o));continue}if(vt(a)&&Rie(a)(r)&&!NC(i)){s=pn(s,Die(i,a,o));continue}s=pn(s,{[i]:a})}return s}}function Mie(t,e){var n,r,o;if(qe(t)||vt(t))return t;if(ll(t)){const s=(o=(r=(n=e.__config)==null?void 0:n.var)==null?void 0:r.prefix)!=null?o:LE;return t.replace(/\$([^,)/\s]+)/g,(i,a)=>{var l;return vt(e.__cssMap)&&a in e.__cssMap&&(l=e.__cssMap[a])!=null&&l.ref?e.__cssMap[a].ref:`var(--${s}-${a})`})}else return t}function Ic(t){return function(e,n){function r(o,s=!1){var i,a,l,u,c;const d=jn(o,e),f=Fie(d)(e);let p={};for(let[h,m]of Object.entries(f)){if(n!=null&&n(h)||(m=jn(m,e),m=Mie(m,e),m==null))continue;h in Ya&&(h=Ya[h]);let g=zE[h];if(g===!0&&(g={properties:h}),vt(m)&&!(g!=null&&g.isProcessSkip)){m=(a=(i=g==null?void 0:g.transform)==null?void 0:i.call(g,m,e,Ic,p))!=null?a:m,p[h]=(l=p[h])!=null?l:{},p[h]=pn(p[h],r(m,!0));continue}if(m=(c=(u=g==null?void 0:g.transform)==null?void 0:u.call(g,m,e,Ic,p))!=null?c:m,(g!=null&&g.isProcessResult||g!=null&&g.isProcessSkip)&&(m=r(m,!0)),!s&&(g!=null&&g.static)){const v=jn(g.static,e);p=pn(p,v)}const y=jn(g==null?void 0:g.properties,e);if(y)if(qe(y)){for(const v of y)p[v]=m;continue}else if(vt(m)){p=pn(p,m);continue}else{p[y]=m;continue}if(vt(m)){p=pn(p,m);continue}p[h]=m}return p}return r(t)}}var B_=(...t)=>t.filter(Boolean).flatMap(e=>e),Lie=t=>t.startsWith("gradients."),zie=t=>t.startsWith("animations."),Bie=t=>t.startsWith("spaces.");function jie(t=LE,e){function n(r){r=r.replace(/\./g,"-");const o=`--${[t,eoe(r,"-")].filter(Boolean).join("-")}`;return{reference:`var(${o})`,variable:o}}return function(r){return function({cssMap:o={},cssVars:s={},prevTokens:i}={}){const a={__cssMap:o};function l(m,g=""){var y;const v=[m.split(".")[0],g].join(".");if(!((y=r[v])!=null?y:i==null?void 0:i[v]))return[,g];const{reference:x,variable:w}=n(v);return[w,x]}function u(m){var g;return(g=e.find(({breakpoint:y})=>y===m))==null?void 0:g.query}function c(m){return ll(m)?m.replace(/\$([^,)/\s]+)/g,(g,y)=>{var v,b;return((v=r[y])!=null?v:i==null?void 0:i[y])?n(y).reference:y in o&&((b=o[y])!=null&&b.ref)?o[y].ref:`var(--${t}-${y})`}):m}function d(m,g){const y=m.split("."),[v,...b]=y,x=`${v}.-${b.join(".")}`;return{negativeReference:Ui.negate(g),negativeToken:x}}function f(m){return qe(m)?m.map(g=>M_(g,a,Ic)).join(","):M_(m,a,Ic)}function p(m,g){return function(y){if(y){const[v,b]=l(m,g);return v?b:z_(g,a)}else return z_(g,a)}}function h(m,g,y){return function(v,b=[]){if(qe(g)){const[x,w]=g;h(m,x,y)(v,b),h(m,w,y)(v,[...b,Ya._dark])}else if(vt(g))Object.entries(g).forEach(([x,w])=>{if(x==="base")h(m,w,y)(v,b);else{const S=u(x);if(!S)return;h(m,w,y)(v,[...b,S])}});else{let x=c(g);if(Lie(m))x=p(m,x)(v);else if(v){const[,w]=l(m,x);x=w}s=pn(s,b.reduceRight((w,S)=>({[S]:w}),{[y]:x}))}}}for(let[m,{isSemantic:g,value:y}]of Object.entries(r)){const{reference:v,variable:b}=n(m);if(zie(m)&&(y=f(y)),h(m,y,b)(g),Bie(m)){const{negativeReference:x,negativeToken:w}=d(m,v);o[w]={ref:x,var:b}}o[m]={ref:v,var:b}}return{cssMap:o,cssVars:s}}}}var Vie="ui-color-mode",Wie=!!globalThis.document,Uie=t=>({type:"localStorage",get:(e="light")=>(n=t)=>{if(!Wie)return e;try{return localStorage.getItem(n)||e}catch{return e}},set:e=>(n=t)=>{try{localStorage.setItem(n,e)}catch{}},ssr:!1}),Gie={localStorage:Uie(Vie)},Y6={getDocument:()=>document,getWindow:()=>window},Z6=N.createContext(Y6),Q6=({children:t,disabled:e,environment:n})=>{const r=N.useRef(null),o=N.useMemo(()=>n||{getDocument:()=>{var i,a;return(a=(i=r.current)==null?void 0:i.ownerDocument)!=null?a:document},getWindow:()=>{var i,a;return(a=(i=r.current)==null?void 0:i.ownerDocument.defaultView)!=null?a:window}},[n]),s=!e||!n;return M.jsxs(Z6.Provider,{value:o,children:[t,s?M.jsx("span",{id:"__ui_dev",ref:r,hidden:!0}):null]})};Q6.displayName="EnvironmentProvider";var J6=({isDefer:t}={})=>{const[,e]=N.useReducer(n=>n+1,0);return vi(()=>{t&&e()},[t]),N.useContext(Z6)},eG=t=>{const{getDocument:e,getWindow:n}=t,r=n(),o=e();if(!o)return;const s=o.createElement("style"),i=o.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}");return s.appendChild(i),o.head.appendChild(s),()=>{r==null?void 0:r.getComputedStyle(o.body),requestAnimationFrame(()=>{requestAnimationFrame(()=>{document.head.removeChild(s)})})}},kv={light:"ui-light",dark:"ui-dark"},Hie={dark:"(prefers-color-scheme: dark)"},tG=({environment:t=Y6,isPreventTransition:e=!0})=>{const{getDocument:n,getWindow:r}=t,o=u=>{const c=n(),d=e?eG(t):void 0;c&&(c.documentElement.dataset.mode=u,c.documentElement.style.colorScheme=u,d==null||d())},s=u=>{const c=n();c&&(c.body.classList.add(u?kv.dark:kv.light),c.body.classList.remove(u?kv.light:kv.dark))},i=()=>{const u=r();if(u)return u.matchMedia(Hie.dark)};return{getSystemColorMode:u=>{var c;const d=i();return((c=d==null?void 0:d.matches)!=null?c:u==="dark")?"dark":"light"},query:i,setClassName:s,setDataset:o,systemColorModeObserver:u=>{const c=i(),d=f=>{u(f.matches?"dark":"light")};return typeof(c==null?void 0:c.addListener)=="function"?c.addListener(d):c==null||c.addEventListener("change",d),()=>{typeof(c==null?void 0:c.removeListener)=="function"?c.removeListener(d):c==null||c.removeEventListener("change",d)}}}},{localStorage:qie}=Gie,Kie=(t,e)=>n=>t.type==="cookie"&&t.ssr?t.get(e)(n):e,nG=N.createContext({}),Xie=({children:t,colorMode:e,colorModeManager:n=qie,config:{disableTransitionOnChange:r=!0,initialColorMode:o="light"}={},storageKey:s})=>{const i=J6(),[a,l]=N.useState(()=>Kie(n,o)(s)),u=Yie({callback:v=>{a==="system"&&(p(v==="dark"),h(v))},environment:i}),d=a==="system"?u||(o==="dark"?"dark":"light"):a,{getSystemColorMode:f,setClassName:p,setDataset:h}=N.useMemo(()=>tG({environment:i,isPreventTransition:r}),[r,i]),m=N.useCallback(v=>{const b=v==="system"?f():v;l(v),p(b==="dark"),h(b),n.set(v)(s)},[n,f,p,h,s]),g=N.useCallback(()=>{m(d==="dark"?"light":"dark")},[m,d]);N.useEffect(()=>{const v=n.get()(s);m(v)},[m,n,s]);const y=N.useMemo(()=>({changeColorMode:e?Vm:m,colorMode:e??d,forced:e!==void 0,internalColorMode:a,toggleColorMode:e?Vm:g}),[e,d,a,m,g]);return M.jsx(nG.Provider,{value:y,children:t})},sy=()=>{const t=N.useContext(nG);return CE(t)?{changeColorMode:Vm,colorMode:"light",forced:!1,internalColorMode:"light",toggleColorMode:Vm}:t},Yie=({callback:t,environment:e,initialColorMode:n}={})=>{const r=Fa(t),[o,s]=N.useState(n),{getSystemColorMode:i,systemColorModeObserver:a}=N.useMemo(()=>tG({environment:e}),[e]);return vi(()=>{s(i())},[i]),N.useEffect(()=>a(Vd(s,r)),[a,i,r]),o},j_=(t,e)=>n=>n==="light"?t:e,Zie="ui-theme-scheme",Qie=!!globalThis.document,Jie=t=>({type:"localStorage",get:(e="base")=>(n=t)=>{if(!Qie)return e;try{return localStorage.getItem(n)||e}catch{return e}},set:e=>(n=t)=>{try{localStorage.setItem(n,String(e))}catch{}},ssr:!1}),eae={localStorage:Jie(Zie)},OL=["blurs","borders","colors","fonts","fontSizes","fontWeights","letterSpacings","lineHeights","radii","shadows","sizes","spaces","zIndices"],PL=["gradients"];function tae(t,e){var n,r;t=rae(t);const o=(n=e==null?void 0:e.var)==null?void 0:n.prefix,s=Pie(t.breakpoints,e==null?void 0:e.breakpoint),i=nae(s,(r=e==null?void 0:e.theme)==null?void 0:r.responsive),{queries:a=[]}=s??{},l=jie(o,a),u=i(t),c=i(t,"secondary"),d=i(t,"animation");let{cssMap:f,cssVars:p}=RL(l(u),l(c),l(d))();if(t.themeSchemes)for(const[h,m]of Object.entries(t.themeSchemes)){const g=i(m),y=i(m,"secondary"),v=i(m,"animation");let{cssVars:b}=RL(l(g),l(y),l(v))({...u,...c,...d});p={...p,[`[data-theme=${h}] &:not([data-theme]), &[data-theme=${h}]`]:b}}return Object.assign(t,{__breakpoints:s,__config:e,__cssMap:f,__cssVars:p}),t}function nae(t,e){return function(n,r="primary"){var o;let s,i=[],a=[],l=[];switch(e&&(s=p=>!(t!=null&&t.isResponsive(p,!0))),r){case"primary":i=[...OL,"transitions"],a=[...OL,"transitions","colorSchemes"];break;case"secondary":i=[...PL],a=[...PL];break;case"animation":i=["animations"],a=["animations"],l=["keyframes"];break}const u=ix(n,i),c=ix((o=n.semantics)!=null?o:{},a),d=Object.entries(ax(u,{omitKeys:l,shouldProcess:s})).map(([p,h])=>[p,{isSemantic:!1,value:h}]),f=Object.entries(ax(c,{omitKeys:l,shouldProcess:s})).reduce((p,[h,m])=>{if(h.startsWith("colorSchemes.")){const[,g,y]=h.split(".");if(y){const v={isSemantic:!1,value:m};p.push([`colors.${g}.${y}`,v])}else xoe.forEach(v=>{const b={isSemantic:!0,value:qe(m)?[`${m[0]}.${v}`,`${m[1]}.${v}`]:`${m}.${v}`};p.push([`colors.${g}.${v}`,b])})}else{const g={isSemantic:!0,value:m};p.push([h,g])}return p},[]);return ooe([...d,...f])}}function RL(...t){return function(e){let n={},r={};for(const o of t){const{cssMap:s,cssVars:i}=o({cssMap:n,cssVars:r,prevTokens:e});n={...n,...s},r={...r,...i}}return{cssMap:n,cssVars:r}}}function rae(t){return ny(t,["__cssMap","__cssVar","__breakpoints"])}function Vo(t,e=[]){return ny(t,["size","variant","colorScheme",...e])}function Vw(t,...e){return function({omit:n=[],pick:r=[]}={}){return e.reduce((o,s)=>dx(rG(o)({omit:n,pick:r}),s),t)}}function Gt(t,...e){return function({omit:n=[],pick:r=[]}={}){return e.reduce((o,s)=>dx(rG(o)({isMulti:!0,omit:n,pick:r}),s),t)}}function dx(t,e){let n=Object.assign({},t);if(vt(e)&&vt(t))for(const[r,o]of Object.entries(e)){const s=t[r];t.hasOwnProperty(r)?!_c(s)&&!_c(o)?n[r]=dx(s,o):n[r]=i=>dx(jn(s,i),jn(o,i)):Object.assign(n,{[r]:o})}else n=e;return n}function rG(t){return function({isMulti:e=!1,omit:n,pick:r}){return vt(t)&&(n.length&&(t=im(t,n,e)(ny)),r.length&&(t=im(t,r,e)(ix))),t}}function im(t,e,n,r=[]){return function(o){if(!vt(t))return t;let s=Object.assign({},t);return s=o(s,e),Object.entries(s).forEach(([i,a])=>{const l=e.filter(c=>c!==i),u=[...r,i];oae(u,n)&&(_c(a)?s[i]=c=>im(a(c),l,n,u)(o):o===ny||Object.keys(a).some(c=>l.includes(c))?s[i]=im(a,l,n,u)(o):s[i]=pn(s[i],im(a,l,n,u)(o)))}),s}}function oae(t,e){switch(t[0]){case"baseStyle":return t.length<(e?2:1);case"variants":case"sizes":return t.length<(e?3:2);default:return!1}}function sae(t,e,n=!0){const r={};return Object.entries(t).forEach(([o,s])=>{switch(o){case"baseStyle":_c(s)?r[o]=i=>s(i)[e]:r[o]=s[e];break;case"variants":case"sizes":r[o]=Object.entries(s).reduce((i,[a,l])=>(_c(l)?i[a]=u=>l(u)[e]:l[e]&&(i[a]=l[e]),i),{});break;case"defaultProps":n&&(r[o]=s);break}}),r}var{localStorage:iae}=eae,aae=({children:t,config:e,storageKey:n,theme:r={},themeSchemeManager:o=iae})=>{const s=J6(),[i,a]=N.useState(o.get(e==null?void 0:e.initialThemeScheme)(n)),l=N.useCallback(c=>{const{getDocument:d}=s,f=d(),p=e!=null&&e.disableTransitionOnChange?eG(s):void 0;f&&(f.documentElement.dataset.theme=c),p==null||p(),a(c),o.set(c)(n)},[e,s,o,n]),u=N.useMemo(()=>tae(r,e),[r,e]);return N.useEffect(()=>{const c=o.get()(n);c&&l(c)},[l,o,n]),M.jsxs(jse,{theme:{changeThemeScheme:l,themeScheme:i,...u},children:[M.jsx(lae,{}),t]})},lae=()=>M.jsx(FE,{styles:({__cssVars:t})=>({":host, :root, [data-mode]":t})}),uae=()=>{const{colorMode:t}=sy();return M.jsx(FE,{styles:e=>{const{themeScheme:n}=e,r=Be(e,"styles.resetStyle",{}),o=jn(r,{colorMode:t,theme:e,themeScheme:n});if(!CE(o))return Ic(o)(e)}})},cae=()=>{const{colorMode:t}=sy();return M.jsx(FE,{styles:e=>{const{themeScheme:n}=e;let r=Be(e,"styles.globalStyle",{});const o=jn(r,{colorMode:t,theme:e,themeScheme:n});if(!CE(o))return Ic(o)(e)}})},iy=()=>{const t=N.useContext(Hm),e=N.useMemo(()=>{var r;const{themeScheme:o}=t;if(Ms(o)||o==="base")return t;const s=(r=t.themeSchemes)==null?void 0:r[o];return s?pn(t,s):t},[t]);return N.useMemo(()=>{const{changeThemeScheme:r,themeScheme:o}=t;return{changeThemeScheme:r,internalTheme:t,theme:e,themeScheme:o}},[e,t])};function dae(t,e,n){return function({isMulti:r=!1,selectors:o=[]}){const[s,i]=t,a=Ef(s,e,n)({isMulti:r,selectors:[...o,Ya._light]}),l=Ef(i,e,n)({isMulti:r,selectors:[...o,Ya._dark]});return pn(a,l)}}function fae(t,e,n){return t.filter(({breakpoint:s})=>s!=="base"&&e.includes(s)).sort((s,i)=>{var a,l,u,c;return n?((a=s.maxW)!=null?a:0)-((l=i.maxW)!=null?l:0):((u=i.minW)!=null?u:0)-((c=s.minW)!=null?c:0)})[0]}function pae(t,e,n){let r=n+1,o;for(;r<e.length;){const s=e[r];if(t[s.breakpoint]){const i=r-1;o=e[i];break}r+=1}return o}function hae(t,e,n){return function({isMulti:r=!1,selectors:o=[]}){var s,i,a;const l=soe(t);if(l.length===1&&"base"in t)return jE(e[t.base],n)({isMulti:r});{const{queries:u=[]}=(s=n.theme.__breakpoints)!=null?s:{},{direction:c="down",identifier:d}=(a=(i=n.theme.__config)==null?void 0:i.breakpoint)!=null?a:{},f=c!=="up",p=fae(u,l,f);let h=!1;return u.reduce((m,{breakpoint:g,maxW:y,maxWQuery:v,minW:b,minWQuery:x},w)=>{const S=t[g],k=g===(p==null?void 0:p.breakpoint);if(g==="base"||!S)return m;if(!h){const I=t.base,E=u[w-1],O=E==null?void 0:E[f?"minWQuery":"maxWQuery"],R=Ef(I,e,n)({isMulti:r,selectors:[...o,O]});m=pn(m,R),h=!0}let $=f?v:x;if(!k){const I=pae(t,u,w);b=f?I==null?void 0:I.minW:b,y=f?y:I==null?void 0:I.maxW,$=Cb(b,y,d)}const C=Ef(S,e,n)({isMulti:r,selectors:[...o,$]});return m=pn(m,C),m},{})}}}function Ef(t,e,n){return function({isMulti:r=!1,selectors:o=[]}){let s={};return t&&(qe(t)?s=dae(t,e,n)({isMulti:r,selectors:o}):vt(t)?s=hae(t,e,n)({isMulti:r,selectors:o}):s=jE(e[t],n)({isMulti:r,selectors:o})),s}}function DL(t,e){return t.reduceRight((n,r)=>r?{[r]:n}:n,e)}function jE(t,e){return function({isMulti:n=!1,selectors:r=[]}){const o=jn(t,e);return n?Object.fromEntries(Object.entries(o??{}).map(([s,i])=>{const a=jn(i,e);return r.length?[s,DL(r,a)]:[s,a]})):r.length?DL(r,o):o}}function mae(t,e,n){return e&&(t=pn(e,t)),n&&(t=jn(n,t)),t}function oG(t,e,{isMulti:n,isProcessSkip:r,styles:o={}}={}){const{theme:s,themeScheme:i}=iy(),{colorMode:a}=sy(),l=N.useRef({}),u=N.useRef(r?o:{});if(!r){const d=Be(s,`components.${t}`);if(e=Cw(e),d){const{baseStyle:f,sizes:p,variants:h,defaultProps:m,overrideProps:g}=d;e=mae(e,m,g);const{colorScheme:y,size:v,variant:b}=e,x=qe(y)?j_(y[0],y[1])(a):y,w={...e,colorScheme:x},S=ny(w,["children"]);let k={};if(f&&(k=jE(f,{colorMode:a,theme:s,themeScheme:i,...S})({isMulti:n})),p){const C=Ef(v,p,{colorMode:a,theme:s,themeScheme:i,...S})({isMulti:n});k=pn(k,C)}if(h){const C=Ef(b,h,{colorMode:a,theme:s,themeScheme:i,...S})({isMulti:n});k=pn(k,C)}kL(u.current,k)||(u.current=k)}}return kL(l.current,e)||(l.current=e),[u.current,l.current]}function cl(t,e,n){return oG(t,e,n)}function ay(t,e,n){return oG(t,e,{isMulti:!0,...n})}var gae=qre(F_),yae={...zE,...Ya};function vae({baseStyle:t,disableStyleProp:e}){return function(n){const{css:r,sx:o,theme:s,__css:i,...a}=n,l=b6(a,d=>d in yae),u=jn(t,n),c=Ic(loe({},i,u,Cw(l),o))(s,e);return r?[c,r]:c}}function af(t,{baseStyle:e,disableStyleProp:n,...r}={}){r.shouldForwardProp||(r.shouldForwardProp=Eie(n));const o=vae({baseStyle:e,disableStyleProp:n}),s=gae(t,r)(o),i=N.forwardRef((a,l)=>{const{colorMode:u,forced:c}=sy();return N.createElement(s,{ref:l,"data-mode":c?u:void 0,...a})});return i.displayName="UIComponent",i}function bae(){const t=new Map;return new Proxy(af,{apply:(e,n,[r,o])=>af(r,o),get:(e,n)=>(t.has(n)||t.set(n,af(n)),t.get(n))})}var Re=bae(),go=We((t,e)=>{const[n,{size:r,...o}]=cl("Icon",t);let{as:s,className:i,fontSize:a=r,viewBox:l,__css:u,...c}=Vo(o);const d={...n,...u,vars:B_(n.vars,u==null?void 0:u.vars)};return a&&(d.vars=B_(d.vars,[{name:"boxSize",token:"fontSizes",value:a}]),d.boxSize="$boxSize"),s&&typeof s!="string"?M.jsx(Re.svg,{as:s,className:Ye("ui-icon",i),"aria-hidden":!0,role:"img",__css:d,...c}):M.jsx(Re.svg,{ref:e,className:Ye("ui-icon",i),"aria-hidden":!0,role:"img",verticalAlign:"middle",viewBox:l,__css:d,...c})});go.displayName="Icon";go.__ui__="Icon";var Ww=t=>M.jsx(go,{"aria-hidden":!0,focusable:"false",viewBox:"0 0 24 24",...t,children:M.jsx("path",{d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z",fill:"currentColor"})});Ww.displayName="CloseIcon";Ww.__ui__="CloseIcon";var VE=t=>M.jsx(go,{"aria-hidden":!0,focusable:"false",viewBox:"0 0 24 24",...t,children:M.jsx("path",{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z",fill:"currentColor"})});VE.displayName="ChevronIcon";VE.__ui__="ChevronIcon";function xae(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,o)=>o==="create"?t:(e.has(o)||e.set(o,t(o)),e.get(o))})}function Uw(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const V_=t=>Array.isArray(t);function sG(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function qm(t){return typeof t=="string"||Array.isArray(t)}function FL(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function WE(t,e,n,r){if(typeof e=="function"){const[o,s]=FL(r);e=e(n!==void 0?n:t.custom,o,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[o,s]=FL(r);e=e(n!==void 0?n:t.custom,o,s)}return e}function Gw(t,e,n){const r=t.getProps();return WE(r,e,n!==void 0?n:r.custom,t)}const UE=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],GE=["initial",...UE],ly=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Yc=new Set(ly),Ma=t=>t*1e3,La=t=>t/1e3,wae={type:"spring",stiffness:500,damping:25,restSpeed:10},Sae=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),kae={type:"keyframes",duration:.8},$ae={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Cae=(t,{keyframes:e})=>e.length>2?kae:Yc.has(t)?t.startsWith("scale")?Sae(e[1]):wae:$ae;function HE(t,e){return t?t[e]||t.default||t:void 0}const Tae={useManualTiming:!1},_ae=t=>t!==null;function Hw(t,{repeat:e,repeatType:n="loop"},r){const o=t.filter(_ae),s=e&&n!=="loop"&&e%2===1?0:o.length-1;return!s||r===void 0?o[s]:r}const Zr=t=>t;function Iae(t){let e=new Set,n=new Set,r=!1,o=!1;const s=new WeakSet;let i={delta:0,timestamp:0,isProcessing:!1};function a(u){s.has(u)&&(l.schedule(u),t()),u(i)}const l={schedule:(u,c=!1,d=!1)=>{const p=d&&r?e:n;return c&&s.add(u),p.has(u)||p.add(u),u},cancel:u=>{n.delete(u),s.delete(u)},process:u=>{if(i=u,r){o=!0;return}r=!0,[e,n]=[n,e],n.clear(),e.forEach(a),r=!1,o&&(o=!1,l.process(u))}};return l}const $v=["read","resolveKeyframes","update","preRender","render","postRender"],Nae=40;function iG(t,e){let n=!1,r=!0;const o={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,i=$v.reduce((y,v)=>(y[v]=Iae(s),y),{}),{read:a,resolveKeyframes:l,update:u,preRender:c,render:d,postRender:f}=i,p=()=>{const y=performance.now();n=!1,o.delta=r?1e3/60:Math.max(Math.min(y-o.timestamp,Nae),1),o.timestamp=y,o.isProcessing=!0,a.process(o),l.process(o),u.process(o),c.process(o),d.process(o),f.process(o),o.isProcessing=!1,n&&e&&(r=!1,t(p))},h=()=>{n=!0,r=!0,o.isProcessing||t(p)};return{schedule:$v.reduce((y,v)=>{const b=i[v];return y[v]=(x,w=!1,S=!1)=>(n||h(),b.schedule(x,w,S)),y},{}),cancel:y=>{for(let v=0;v<$v.length;v++)i[$v[v]].cancel(y)},state:o,steps:i}}const{schedule:Vt,cancel:Jl,state:_r,steps:EC}=iG(typeof requestAnimationFrame<"u"?requestAnimationFrame:Zr,!0),aG=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Eae=1e-7,Aae=12;function Oae(t,e,n,r,o){let s,i,a=0;do i=e+(n-e)/2,s=aG(i,r,o)-t,s>0?n=i:e=i;while(Math.abs(s)>Eae&&++a<Aae);return i}function uy(t,e,n,r){if(t===e&&n===r)return Zr;const o=s=>Oae(s,0,1,t,n);return s=>s===0||s===1?s:aG(o(s),e,r)}const lG=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,uG=t=>e=>1-t(1-e),cG=uy(.33,1.53,.69,.99),qE=uG(cG),dG=lG(qE),fG=t=>(t*=2)<1?.5*qE(t):.5*(2-Math.pow(2,-10*(t-1))),KE=t=>1-Math.sin(Math.acos(t)),pG=uG(KE),hG=lG(KE),mG=t=>/^0[^.\s]+$/u.test(t);function Pae(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||mG(t):!0}let W_=Zr;const gG=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),yG=t=>e=>typeof e=="string"&&e.startsWith(t),vG=yG("--"),Rae=yG("var(--"),XE=t=>Rae(t)?Dae.test(t.split("/*")[0].trim()):!1,Dae=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Fae=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Mae(t){const e=Fae.exec(t);if(!e)return[,];const[,n,r,o]=e;return[`--${n??r}`,o]}function bG(t,e,n=1){const[r,o]=Mae(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const i=s.trim();return gG(i)?parseFloat(i):i}return XE(o)?bG(o,e,n+1):o}const eu=(t,e,n)=>n>e?e:n<t?t:n,Cp={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Km={...Cp,transform:t=>eu(0,1,t)},Cv={...Cp,default:1},cy=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Sl=cy("deg"),ea=cy("%"),ze=cy("px"),Lae=cy("vh"),zae=cy("vw"),ML={...ea,parse:t=>ea.parse(t)/100,transform:t=>ea.transform(t*100)},Bae=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),LL=t=>t===Cp||t===ze,zL=(t,e)=>parseFloat(t.split(", ")[e]),BL=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const o=r.match(/^matrix3d\((.+)\)$/u);if(o)return zL(o[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?zL(s[1],t):0}},jae=new Set(["x","y","z"]),Vae=ly.filter(t=>!jae.has(t));function Wae(t){const e=[];return Vae.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Af={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:BL(4,13),y:BL(5,14)};Af.translateX=Af.x;Af.translateY=Af.y;const xG=t=>e=>e.test(t),Uae={test:t=>t==="auto",parse:t=>t},wG=[Cp,ze,ea,Sl,zae,Lae,Uae],jL=t=>wG.find(xG(t)),mc=new Set;let U_=!1,G_=!1;function SG(){if(G_){const t=Array.from(mc).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const o=Wae(r);o.length&&(n.set(r,o),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const o=n.get(r);o&&o.forEach(([s,i])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(i)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}G_=!1,U_=!1,mc.forEach(t=>t.complete()),mc.clear()}function kG(){mc.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(G_=!0)})}function Gae(){kG(),SG()}class YE{constructor(e,n,r,o,s,i=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=o,this.element=s,this.isAsync=i}scheduleResolve(){this.isScheduled=!0,this.isAsync?(mc.add(this),U_||(U_=!0,Vt.read(kG),Vt.resolveKeyframes(SG))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:o}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const i=o==null?void 0:o.get(),a=e[e.length-1];if(i!==void 0)e[0]=i;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),o&&i===void 0&&o.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),mc.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,mc.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const am=t=>Math.round(t*1e5)/1e5,ZE=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Hae(t){return t==null}const qae=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,QE=(t,e)=>n=>!!(typeof n=="string"&&qae.test(n)&&n.startsWith(t)||e&&!Hae(n)&&Object.prototype.hasOwnProperty.call(n,e)),$G=(t,e,n)=>r=>{if(typeof r!="string")return r;const[o,s,i,a]=r.match(ZE);return{[t]:parseFloat(o),[e]:parseFloat(s),[n]:parseFloat(i),alpha:a!==void 0?parseFloat(a):1}},Kae=t=>eu(0,255,t),AC={...Cp,transform:t=>Math.round(Kae(t))},sc={test:QE("rgb","red"),parse:$G("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+AC.transform(t)+", "+AC.transform(e)+", "+AC.transform(n)+", "+am(Km.transform(r))+")"};function Xae(t){let e="",n="",r="",o="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),o=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),o=t.substring(4,5),e+=e,n+=n,r+=r,o+=o),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:o?parseInt(o,16)/255:1}}const H_={test:QE("#"),parse:Xae,transform:sc.transform},Wd={test:QE("hsl","hue"),parse:$G("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+ea.transform(am(e))+", "+ea.transform(am(n))+", "+am(Km.transform(r))+")"},Br={test:t=>sc.test(t)||H_.test(t)||Wd.test(t),parse:t=>sc.test(t)?sc.parse(t):Wd.test(t)?Wd.parse(t):H_.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?sc.transform(t):Wd.transform(t)},Yae=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Zae(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(ZE))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(Yae))===null||n===void 0?void 0:n.length)||0)>0}const CG="number",TG="color",Qae="var",Jae="var(",VL="${}",ele=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Xm(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},o=[];let s=0;const a=e.replace(ele,l=>(Br.test(l)?(r.color.push(s),o.push(TG),n.push(Br.parse(l))):l.startsWith(Jae)?(r.var.push(s),o.push(Qae),n.push(l)):(r.number.push(s),o.push(CG),n.push(parseFloat(l))),++s,VL)).split(VL);return{values:n,split:a,indexes:r,types:o}}function _G(t){return Xm(t).values}function IG(t){const{split:e,types:n}=Xm(t),r=e.length;return o=>{let s="";for(let i=0;i<r;i++)if(s+=e[i],o[i]!==void 0){const a=n[i];a===CG?s+=am(o[i]):a===TG?s+=Br.transform(o[i]):s+=o[i]}return s}}const tle=t=>typeof t=="number"?0:t;function nle(t){const e=_G(t);return IG(t)(e.map(tle))}const tu={test:Zae,parse:_G,createTransformer:IG,getAnimatableNone:nle},rle=new Set(["brightness","contrast","saturate","opacity"]);function ole(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(ZE)||[];if(!r)return t;const o=n.replace(r,"");let s=rle.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+o+")"}const sle=/\b([a-z-]*)\(.*?\)/gu,q_={...tu,getAnimatableNone:t=>{const e=t.match(sle);return e?e.map(ole).join(" "):t}},ile={borderWidth:ze,borderTopWidth:ze,borderRightWidth:ze,borderBottomWidth:ze,borderLeftWidth:ze,borderRadius:ze,radius:ze,borderTopLeftRadius:ze,borderTopRightRadius:ze,borderBottomRightRadius:ze,borderBottomLeftRadius:ze,width:ze,maxWidth:ze,height:ze,maxHeight:ze,top:ze,right:ze,bottom:ze,left:ze,padding:ze,paddingTop:ze,paddingRight:ze,paddingBottom:ze,paddingLeft:ze,margin:ze,marginTop:ze,marginRight:ze,marginBottom:ze,marginLeft:ze,backgroundPositionX:ze,backgroundPositionY:ze},ale={rotate:Sl,rotateX:Sl,rotateY:Sl,rotateZ:Sl,scale:Cv,scaleX:Cv,scaleY:Cv,scaleZ:Cv,skew:Sl,skewX:Sl,skewY:Sl,distance:ze,translateX:ze,translateY:ze,translateZ:ze,x:ze,y:ze,z:ze,perspective:ze,transformPerspective:ze,opacity:Km,originX:ML,originY:ML,originZ:ze},WL={...Cp,transform:Math.round},JE={...ile,...ale,zIndex:WL,size:ze,fillOpacity:Km,strokeOpacity:Km,numOctaves:WL},lle={...JE,color:Br,backgroundColor:Br,outlineColor:Br,fill:Br,stroke:Br,borderColor:Br,borderTopColor:Br,borderRightColor:Br,borderBottomColor:Br,borderLeftColor:Br,filter:q_,WebkitFilter:q_},eA=t=>lle[t];function NG(t,e){let n=eA(t);return n!==q_&&(n=tu),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const ule=new Set(["auto","none","0"]);function cle(t,e,n){let r=0,o;for(;r<t.length&&!o;){const s=t[r];typeof s=="string"&&!ule.has(s)&&Xm(s).values.length&&(o=t[r]),r++}if(o&&n)for(const s of e)t[s]=NG(n,o)}class EG extends YE{constructor(e,n,r,o,s){super(e,n,r,o,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),XE(u))){const c=bG(u,n.current);c!==void 0&&(e[l]=c),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!Bae.has(r)||e.length!==2)return;const[o,s]=e,i=jL(o),a=jL(s);if(i!==a)if(LL(i)&&LL(a))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let o=0;o<e.length;o++)Pae(e[o])&&r.push(o);r.length&&cle(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Af[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const o=n[n.length-1];o!==void 0&&e.getValue(r,o).jump(o,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:o}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const i=o.length-1,a=o[i];o[i]=Af[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,u])=>{n.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function tA(t){return typeof t=="function"}let Tb;function dle(){Tb=void 0}const ta={now:()=>(Tb===void 0&&ta.set(_r.isProcessing||Tae.useManualTiming?_r.timestamp:performance.now()),Tb),set:t=>{Tb=t,queueMicrotask(dle)}},UL=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(tu.test(t)||t==="0")&&!t.startsWith("url("));function fle(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function ple(t,e,n,r){const o=t[0];if(o===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],i=UL(o,e),a=UL(s,e);return!i||!a?!1:fle(t)||(n==="spring"||tA(n))&&r}const hle=40;class AG{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:o=0,repeatDelay:s=0,repeatType:i="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ta.now(),this.options={autoplay:e,delay:n,type:r,repeat:o,repeatDelay:s,repeatType:i,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>hle?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Gae(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=ta.now(),this.hasAttemptedResolve=!0;const{name:r,type:o,velocity:s,delay:i,onComplete:a,onUpdate:l,isGenerator:u}=this.options;if(!u&&!ple(e,r,o,s))if(i)this.options.duration=0;else{l==null||l(Hw(e,this.options,n)),a==null||a(),this.resolveFinishedPromise();return}const c=this.initPlayback(e,n);c!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...c},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}function OG(t,e){return e?t*(1e3/e):0}const mle=5;function PG(t,e,n){const r=Math.max(e-mle,0);return OG(n-t(r),e-r)}const OC=.001,gle=.01,yle=10,vle=.05,ble=1;function xle({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let o,s,i=1-e;i=eu(vle,ble,i),t=eu(gle,yle,La(t)),i<1?(o=u=>{const c=u*i,d=c*t,f=c-n,p=K_(u,i),h=Math.exp(-d);return OC-f/p*h},s=u=>{const d=u*i*t,f=d*n+n,p=Math.pow(i,2)*Math.pow(u,2)*t,h=Math.exp(-d),m=K_(Math.pow(u,2),i);return(-o(u)+OC>0?-1:1)*((f-p)*h)/m}):(o=u=>{const c=Math.exp(-u*t),d=(u-n)*t+1;return-OC+c*d},s=u=>{const c=Math.exp(-u*t),d=(n-u)*(t*t);return c*d});const a=5/t,l=Sle(o,s,a);if(t=Ma(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:i*2*Math.sqrt(r*u),duration:t}}}const wle=12;function Sle(t,e,n){let r=n;for(let o=1;o<wle;o++)r=r-t(r)/e(r);return r}function K_(t,e){return t*Math.sqrt(1-e*e)}const kle=["duration","bounce"],$le=["stiffness","damping","mass"];function GL(t,e){return e.some(n=>t[n]!==void 0)}function Cle(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!GL(t,$le)&&GL(t,kle)){const n=xle(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function RG({keyframes:t,restDelta:e,restSpeed:n,...r}){const o=t[0],s=t[t.length-1],i={done:!1,value:o},{stiffness:a,damping:l,mass:u,duration:c,velocity:d,isResolvedFromDuration:f}=Cle({...r,velocity:-La(r.velocity||0)}),p=d||0,h=l/(2*Math.sqrt(a*u)),m=s-o,g=La(Math.sqrt(a/u)),y=Math.abs(m)<5;n||(n=y?.01:2),e||(e=y?.005:.5);let v;if(h<1){const b=K_(g,h);v=x=>{const w=Math.exp(-h*g*x);return s-w*((p+h*g*m)/b*Math.sin(b*x)+m*Math.cos(b*x))}}else if(h===1)v=b=>s-Math.exp(-g*b)*(m+(p+g*m)*b);else{const b=g*Math.sqrt(h*h-1);v=x=>{const w=Math.exp(-h*g*x),S=Math.min(b*x,300);return s-w*((p+h*g*m)*Math.sinh(S)+b*m*Math.cosh(S))/b}}return{calculatedDuration:f&&c||null,next:b=>{const x=v(b);if(f)i.done=b>=c;else{let w=0;h<1&&(w=b===0?Ma(p):PG(v,b,x));const S=Math.abs(w)<=n,k=Math.abs(s-x)<=e;i.done=S&&k}return i.value=i.done?s:x,i}}}function HL({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:o=10,bounceStiffness:s=500,modifyTarget:i,min:a,max:l,restDelta:u=.5,restSpeed:c}){const d=t[0],f={done:!1,value:d},p=$=>a!==void 0&&$<a||l!==void 0&&$>l,h=$=>a===void 0?l:l===void 0||Math.abs(a-$)<Math.abs(l-$)?a:l;let m=n*e;const g=d+m,y=i===void 0?g:i(g);y!==g&&(m=y-d);const v=$=>-m*Math.exp(-$/r),b=$=>y+v($),x=$=>{const C=v($),I=b($);f.done=Math.abs(C)<=u,f.value=f.done?y:I};let w,S;const k=$=>{p(f.value)&&(w=$,S=RG({keyframes:[f.value,h(f.value)],velocity:PG(b,$,f.value),damping:o,stiffness:s,restDelta:u,restSpeed:c}))};return k(0),{calculatedDuration:null,next:$=>{let C=!1;return!S&&w===void 0&&(C=!0,x($),k($)),w!==void 0&&$>=w?S.next($-w):(!C&&x($),f)}}}const Tle=uy(.42,0,1,1),_le=uy(0,0,.58,1),DG=uy(.42,0,.58,1),Ile=t=>Array.isArray(t)&&typeof t[0]!="number",nA=t=>Array.isArray(t)&&typeof t[0]=="number",qL={linear:Zr,easeIn:Tle,easeInOut:DG,easeOut:_le,circIn:KE,circInOut:hG,circOut:pG,backIn:qE,backInOut:dG,backOut:cG,anticipate:fG},KL=t=>{if(nA(t)){W_(t.length===4);const[e,n,r,o]=t;return uy(e,n,r,o)}else if(typeof t=="string")return W_(qL[t]!==void 0),qL[t];return t},Nle=(t,e)=>n=>e(t(n)),za=(...t)=>t.reduce(Nle),Of=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},vn=(t,e,n)=>t+(e-t)*n;function PC(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Ele({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let o=0,s=0,i=0;if(!e)o=s=i=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;o=PC(l,a,t+1/3),s=PC(l,a,t),i=PC(l,a,t-1/3)}return{red:Math.round(o*255),green:Math.round(s*255),blue:Math.round(i*255),alpha:r}}function fx(t,e){return n=>n>0?e:t}const RC=(t,e,n)=>{const r=t*t,o=n*(e*e-r)+r;return o<0?0:Math.sqrt(o)},Ale=[H_,sc,Wd],Ole=t=>Ale.find(e=>e.test(t));function XL(t){const e=Ole(t);if(!e)return!1;let n=e.parse(t);return e===Wd&&(n=Ele(n)),n}const YL=(t,e)=>{const n=XL(t),r=XL(e);if(!n||!r)return fx(t,e);const o={...n};return s=>(o.red=RC(n.red,r.red,s),o.green=RC(n.green,r.green,s),o.blue=RC(n.blue,r.blue,s),o.alpha=vn(n.alpha,r.alpha,s),sc.transform(o))},X_=new Set(["none","hidden"]);function Ple(t,e){return X_.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Rle(t,e){return n=>vn(t,e,n)}function rA(t){return typeof t=="number"?Rle:typeof t=="string"?XE(t)?fx:Br.test(t)?YL:Mle:Array.isArray(t)?FG:typeof t=="object"?Br.test(t)?YL:Dle:fx}function FG(t,e){const n=[...t],r=n.length,o=t.map((s,i)=>rA(s)(s,e[i]));return s=>{for(let i=0;i<r;i++)n[i]=o[i](s);return n}}function Dle(t,e){const n={...t,...e},r={};for(const o in n)t[o]!==void 0&&e[o]!==void 0&&(r[o]=rA(t[o])(t[o],e[o]));return o=>{for(const s in r)n[s]=r[s](o);return n}}function Fle(t,e){var n;const r=[],o={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const i=e.types[s],a=t.indexes[i][o[i]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=l,o[i]++}return r}const Mle=(t,e)=>{const n=tu.createTransformer(e),r=Xm(t),o=Xm(e);return r.indexes.var.length===o.indexes.var.length&&r.indexes.color.length===o.indexes.color.length&&r.indexes.number.length>=o.indexes.number.length?X_.has(t)&&!o.values.length||X_.has(e)&&!r.values.length?Ple(t,e):za(FG(Fle(r,o),o.values),n):fx(t,e)};function MG(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?vn(t,e,n):rA(t)(t,e)}function Lle(t,e,n){const r=[],o=n||MG,s=t.length-1;for(let i=0;i<s;i++){let a=o(t[i],t[i+1]);if(e){const l=Array.isArray(e)?e[i]||Zr:e;a=za(l,a)}r.push(a)}return r}function zle(t,e,{clamp:n=!0,ease:r,mixer:o}={}){const s=t.length;if(W_(s===e.length),s===1)return()=>e[0];if(s===2&&t[0]===t[1])return()=>e[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const i=Lle(e,r,o),a=i.length,l=u=>{let c=0;if(a>1)for(;c<t.length-2&&!(u<t[c+1]);c++);const d=Of(t[c],t[c+1],u);return i[c](d)};return n?u=>l(eu(t[0],t[s-1],u)):l}function Ble(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const o=Of(0,e,r);t.push(vn(n,1,o))}}function jle(t){const e=[0];return Ble(e,t.length-1),e}function Vle(t,e){return t.map(n=>n*e)}function Wle(t,e){return t.map(()=>e||DG).splice(0,t.length-1)}function px({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const o=Ile(r)?r.map(KL):KL(r),s={done:!1,value:e[0]},i=Vle(n&&n.length===e.length?n:jle(e),t),a=zle(i,e,{ease:Array.isArray(o)?o:Wle(e,o)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const ZL=2e4;function Ule(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<ZL;)e+=n,r=t.next(e);return e>=ZL?1/0:e}const Gle=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Vt.update(e,!0),stop:()=>Jl(e),now:()=>_r.isProcessing?_r.timestamp:ta.now()}},Hle={decay:HL,inertia:HL,tween:px,keyframes:px,spring:RG},qle=t=>t/100;class oA extends AG{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:o,keyframes:s}=this.options,i=(o==null?void 0:o.KeyframeResolver)||YE,a=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new i(s,a,n,r,o),this.resolver.scheduleResolve()}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:s,velocity:i=0}=this.options,a=tA(n)?n:Hle[n]||px;let l,u;a!==px&&typeof e[0]!="number"&&(l=za(qle,MG(e[0],e[1])),e=[0,100]);const c=a({...this.options,keyframes:e});s==="mirror"&&(u=a({...this.options,keyframes:[...e].reverse(),velocity:-i})),c.calculatedDuration===null&&(c.calculatedDuration=Ule(c));const{calculatedDuration:d}=c,f=d+o,p=f*(r+1)-o;return{generator:c,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:f,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:$}=this.options;return{done:!0,value:$[$.length-1]}}const{finalKeyframe:o,generator:s,mirroredGenerator:i,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:u,totalDuration:c,resolvedDuration:d}=r;if(this.startTime===null)return s.next(0);const{delay:f,repeat:p,repeatType:h,repeatDelay:m,onUpdate:g}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-c/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const y=this.currentTime-f*(this.speed>=0?1:-1),v=this.speed>=0?y<0:y>c;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let b=this.currentTime,x=s;if(p){const $=Math.min(this.currentTime,c)/d;let C=Math.floor($),I=$%1;!I&&$>=1&&(I=1),I===1&&C--,C=Math.min(C,p+1),!!(C%2)&&(h==="reverse"?(I=1-I,m&&(I-=m/d)):h==="mirror"&&(x=i)),b=eu(0,1,I)*d}const w=v?{done:!1,value:l[0]}:x.next(b);a&&(w.value=a(w.value));let{done:S}=w;!v&&u!==null&&(S=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return k&&o!==void 0&&(w.value=Hw(l,this.options,o)),g&&g(w.value),k&&this.finish(),w}get duration(){const{resolved:e}=this;return e?La(e.calculatedDuration):0}get time(){return La(this.currentTime)}set time(e){e=Ma(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=La(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=Gle,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const o=this.driver.now();this.holdTime!==null?this.startTime=o-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=o):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const Kle=new Set(["opacity","clipPath","filter","transform"]),Xle=10,Yle=(t,e)=>{let n="";const r=Math.max(Math.round(e/Xle),2);for(let o=0;o<r;o++)n+=t(Of(0,r-1,o))+", ";return`linear(${n.substring(0,n.length-2)})`};function sA(t){let e;return()=>(e===void 0&&(e=t()),e)}const Zle={linearEasing:void 0};function Qle(t,e){const n=sA(t);return()=>{var r;return(r=Zle[e])!==null&&r!==void 0?r:n()}}const hx=Qle(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function LG(t){return!!(typeof t=="function"&&hx()||!t||typeof t=="string"&&(t in Y_||hx())||nA(t)||Array.isArray(t)&&t.every(LG))}const Bh=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Y_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Bh([0,.65,.55,1]),circOut:Bh([.55,0,1,.45]),backIn:Bh([.31,.01,.66,-.59]),backOut:Bh([.33,1.53,.69,.99])};function zG(t,e){if(t)return typeof t=="function"&&hx()?Yle(t,e):nA(t)?Bh(t):Array.isArray(t)?t.map(n=>zG(n,e)||Y_.easeOut):Y_[t]}function Jle(t,e,n,{delay:r=0,duration:o=300,repeat:s=0,repeatType:i="loop",ease:a,times:l}={}){const u={[e]:n};l&&(u.offset=l);const c=zG(a,o);return Array.isArray(c)&&(u.easing=c),t.animate(u,{delay:r,duration:o,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:s+1,direction:i==="reverse"?"alternate":"normal"})}function QL(t,e){t.timeline=e,t.onfinish=null}const eue=sA(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),mx=10,tue=2e4;function nue(t){return tA(t.type)||t.type==="spring"||!LG(t.ease)}function rue(t,e){const n=new oA({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const o=[];let s=0;for(;!r.done&&s<tue;)r=n.sample(s),o.push(r.value),s+=mx;return{times:void 0,keyframes:o,duration:s-mx,ease:"linear"}}const BG={anticipate:fG,backInOut:dG,circInOut:hG};function oue(t){return t in BG}class JL extends AG{constructor(e){super(e);const{name:n,motionValue:r,element:o,keyframes:s}=this.options;this.resolver=new EG(s,(i,a)=>this.onKeyframesResolved(i,a),n,r,o),this.resolver.scheduleResolve()}initPlayback(e,n){var r;let{duration:o=300,times:s,ease:i,type:a,motionValue:l,name:u,startTime:c}=this.options;if(!(!((r=l.owner)===null||r===void 0)&&r.current))return!1;if(typeof i=="string"&&hx()&&oue(i)&&(i=BG[i]),nue(this.options)){const{onComplete:f,onUpdate:p,motionValue:h,element:m,...g}=this.options,y=rue(e,g);e=y.keyframes,e.length===1&&(e[1]=e[0]),o=y.duration,s=y.times,i=y.ease,a="keyframes"}const d=Jle(l.owner.current,u,e,{...this.options,duration:o,times:s,ease:i});return d.startTime=c??this.calcStartTime(),this.pendingTimeline?(QL(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:f}=this.options;l.set(Hw(e,this.options,n)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:o,times:s,type:a,ease:i,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return La(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return La(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Ma(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Zr;const{animation:r}=n;QL(r,e)}return Zr}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:o,type:s,ease:i,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:c,onComplete:d,element:f,...p}=this.options,h=new oA({...p,keyframes:r,duration:o,type:s,ease:i,times:a,isGenerator:!0}),m=Ma(this.time);u.setWithVelocity(h.sample(m-mx).value,h.sample(m).value,mx)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:o,repeatType:s,damping:i,type:a}=e;return eue()&&r&&Kle.has(r)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!o&&s!=="mirror"&&i!==0&&a!=="inertia"}}const sue=sA(()=>window.ScrollTimeline!==void 0);class iue{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,n){return Promise.all(this.animations).then(e).catch(n)}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(o=>sue()&&o.attachTimeline?o.attachTimeline(e):n(o));return()=>{r.forEach((o,s)=>{o&&o(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function aue({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:o,repeat:s,repeatType:i,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const iA=(t,e,n,r={},o,s)=>i=>{const a=HE(r,t)||{},l=a.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Ma(l);let c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-u,onUpdate:f=>{e.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{i(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:o};aue(a)||(c={...c,...Cae(t,c)}),c.duration&&(c.duration=Ma(c.duration)),c.repeatDelay&&(c.repeatDelay=Ma(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let d=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(c.duration=0,c.delay===0&&(d=!0)),d&&!s&&e.get()!==void 0){const f=Hw(c.keyframes,a);if(f!==void 0)return Vt.update(()=>{c.onUpdate(f),c.onComplete()}),new iue([])}return!s&&JL.supports(c)?new JL(c):new oA(c)},lue=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),uue=t=>V_(t)?t[t.length-1]||0:t;function aA(t,e){t.indexOf(e)===-1&&t.push(e)}function lA(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class uA{constructor(){this.subscriptions=[]}add(e){return aA(this.subscriptions,e),()=>lA(this.subscriptions,e)}notify(e,n,r){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](e,n,r);else for(let s=0;s<o;s++){const i=this.subscriptions[s];i&&i(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const e3=30,cue=t=>!isNaN(parseFloat(t));class due{constructor(e,n={}){this.version="11.11.11",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,o=!0)=>{const s=ta.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),o&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=ta.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=cue(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new uA);const r=this.events[e].add(n);return e==="change"?()=>{r(),Vt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ta.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>e3)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,e3);return OG(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ym(t,e){return new due(t,e)}function fue(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ym(n))}function pue(t,e){const n=Gw(t,e);let{transitionEnd:r={},transition:o={},...s}=n||{};s={...s,...r};for(const i in s){const a=uue(s[i]);fue(t,i,a)}}const cA=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),hue="framerAppearId",jG="data-"+cA(hue);function VG(t){return t.props[jG]}const Yr=t=>!!(t&&t.getVelocity);function mue(t){return!!(Yr(t)&&t.add)}function Z_(t,e){const n=t.getValue("willChange");if(mue(n))return n.add(e)}function gue({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function WG(t,e,{delay:n=0,transitionOverride:r,type:o}={}){var s;let{transition:i=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(i=r);const u=[],c=o&&t.animationState&&t.animationState.getState()[o];for(const d in l){const f=t.getValue(d,(s=t.latestValues[d])!==null&&s!==void 0?s:null),p=l[d];if(p===void 0||c&&gue(c,d))continue;const h={delay:n,...HE(i||{},d)};let m=!1;if(window.MotionHandoffAnimation){const y=VG(t);if(y){const v=window.MotionHandoffAnimation(y,d,Vt);v!==null&&(h.startTime=v,m=!0)}}Z_(t,d),f.start(iA(d,f,p,t.shouldReduceMotion&&Yc.has(d)?{type:!1}:h,t,m));const g=f.animation;g&&u.push(g)}return a&&Promise.all(u).then(()=>{Vt.update(()=>{a&&pue(t,a)})}),u}function Q_(t,e,n={}){var r;const o=Gw(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=o||{};n.transitionOverride&&(s=n.transitionOverride);const i=o?()=>Promise.all(WG(t,o,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:f}=s;return yue(t,e,c+u,d,f,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,c]=l==="beforeChildren"?[i,a]:[a,i];return u().then(()=>c())}else return Promise.all([i(),a(n.delay)])}function yue(t,e,n=0,r=0,o=1,s){const i=[],a=(t.variantChildren.size-1)*r,l=o===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(t.variantChildren).sort(vue).forEach((u,c)=>{u.notify("AnimationStart",e),i.push(Q_(u,e,{...s,delay:n+l(c)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(i)}function vue(t,e){return t.sortNodePosition(e)}function bue(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const o=e.map(s=>Q_(t,s,n));r=Promise.all(o)}else if(typeof e=="string")r=Q_(t,e,n);else{const o=typeof e=="function"?Gw(t,e,n.custom):e;r=Promise.all(WG(t,o,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const xue=GE.length;function UG(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?UG(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<xue;n++){const r=GE[n],o=t.props[r];(qm(o)||o===!1)&&(e[r]=o)}return e}const wue=[...UE].reverse(),Sue=UE.length;function kue(t){return e=>Promise.all(e.map(({animation:n,options:r})=>bue(t,n,r)))}function $ue(t){let e=kue(t),n=t3(),r=!0;const o=l=>(u,c)=>{var d;const f=Gw(t,c,l==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(f){const{transition:p,transitionEnd:h,...m}=f;u={...u,...m,...h}}return u};function s(l){e=l(t)}function i(l){const{props:u}=t,c=UG(t.parent)||{},d=[],f=new Set;let p={},h=1/0;for(let g=0;g<Sue;g++){const y=wue[g],v=n[y],b=u[y]!==void 0?u[y]:c[y],x=qm(b),w=y===l?v.isActive:null;w===!1&&(h=g);let S=b===c[y]&&b!==u[y]&&x;if(S&&r&&t.manuallyAnimateOnMount&&(S=!1),v.protectedKeys={...p},!v.isActive&&w===null||!b&&!v.prevProp||Uw(b)||typeof b=="boolean")continue;const k=Cue(v.prevProp,b);let $=k||y===l&&v.isActive&&!S&&x||g>h&&x,C=!1;const I=Array.isArray(b)?b:[b];let E=I.reduce(o(y),{});w===!1&&(E={});const{prevResolvedValues:O={}}=v,R={...O,...E},z=D=>{$=!0,f.has(D)&&(C=!0,f.delete(D)),v.needsAnimating[D]=!0;const F=t.getValue(D);F&&(F.liveStyle=!1)};for(const D in R){const F=E[D],j=O[D];if(p.hasOwnProperty(D))continue;let G=!1;V_(F)&&V_(j)?G=!sG(F,j):G=F!==j,G?F!=null?z(D):f.add(D):F!==void 0&&f.has(D)?z(D):v.protectedKeys[D]=!0}v.prevProp=b,v.prevResolvedValues=E,v.isActive&&(p={...p,...E}),r&&t.blockInitialAnimation&&($=!1),$&&(!(S&&k)||C)&&d.push(...I.map(D=>({animation:D,options:{type:y}})))}if(f.size){const g={};f.forEach(y=>{const v=t.getBaseTarget(y),b=t.getValue(y);b&&(b.liveStyle=!0),g[y]=v??null}),d.push({animation:g})}let m=!!d.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(m=!1),r=!1,m?e(d):Promise.resolve()}function a(l,u){var c;if(n[l].isActive===u)return Promise.resolve();(c=t.variantChildren)===null||c===void 0||c.forEach(f=>{var p;return(p=f.animationState)===null||p===void 0?void 0:p.setActive(l,u)}),n[l].isActive=u;const d=i(l);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:i,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=t3(),r=!0}}}function Cue(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!sG(e,t):!1}function Lu(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function t3(){return{animate:Lu(!0),whileInView:Lu(),whileHover:Lu(),whileTap:Lu(),whileDrag:Lu(),whileFocus:Lu(),exit:Lu()}}class yu{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Tue extends yu{constructor(e){super(e),e.animationState||(e.animationState=$ue(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Uw(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let _ue=0;class Iue extends yu{constructor(){super(...arguments),this.id=_ue++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const o=this.node.animationState.setActive("exit",!e);n&&!e&&o.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Nue={animation:{Feature:Tue},exit:{Feature:Iue}},GG=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function qw(t,e="page"){return{point:{x:t[`${e}X`],y:t[`${e}Y`]}}}const Eue=t=>e=>GG(e)&&t(e,qw(e));function Aa(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Ba(t,e,n,r){return Aa(t,e,Eue(n),r)}const n3=(t,e)=>Math.abs(t-e);function Aue(t,e){const n=n3(t.x,e.x),r=n3(t.y,e.y);return Math.sqrt(n**2+r**2)}class HG{constructor(e,n,{transformPagePoint:r,contextWindow:o,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=FC(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=Aue(d.offset,{x:0,y:0})>=3;if(!f&&!p)return;const{point:h}=d,{timestamp:m}=_r;this.history.push({...h,timestamp:m});const{onStart:g,onMove:y}=this.handlers;f||(g&&g(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=DC(f,this.transformPagePoint),Vt.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:p,onSessionEnd:h,resumeAnimation:m}=this.handlers;if(this.dragSnapToOrigin&&m&&m(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=FC(d.type==="pointercancel"?this.lastMoveEventInfo:DC(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(d,g),h&&h(d,g)},!GG(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=o||window;const i=qw(e),a=DC(i,this.transformPagePoint),{point:l}=a,{timestamp:u}=_r;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=n;c&&c(e,FC(a,this.history)),this.removeListeners=za(Ba(this.contextWindow,"pointermove",this.handlePointerMove),Ba(this.contextWindow,"pointerup",this.handlePointerUp),Ba(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Jl(this.updatePoint)}}function DC(t,e){return e?{point:e(t.point)}:t}function r3(t,e){return{x:t.x-e.x,y:t.y-e.y}}function FC({point:t},e){return{point:t,delta:r3(t,qG(e)),offset:r3(t,Oue(e)),velocity:Pue(e,.1)}}function Oue(t){return t[0]}function qG(t){return t[t.length-1]}function Pue(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const o=qG(t);for(;n>=0&&(r=t[n],!(o.timestamp-r.timestamp>Ma(e)));)n--;if(!r)return{x:0,y:0};const s=La(o.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const i={x:(o.x-r.x)/s,y:(o.y-r.y)/s};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function KG(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const o3=KG("dragHorizontal"),s3=KG("dragVertical");function XG(t){let e=!1;if(t==="y")e=s3();else if(t==="x")e=o3();else{const n=o3(),r=s3();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function YG(){const t=XG(!0);return t?(t(),!1):!0}function Ud(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}const ZG=1e-4,Rue=1-ZG,Due=1+ZG,QG=.01,Fue=0-QG,Mue=0+QG;function ss(t){return t.max-t.min}function Lue(t,e,n){return Math.abs(t-e)<=n}function i3(t,e,n,r=.5){t.origin=r,t.originPoint=vn(e.min,e.max,t.origin),t.scale=ss(n)/ss(e),t.translate=vn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Rue&&t.scale<=Due||isNaN(t.scale))&&(t.scale=1),(t.translate>=Fue&&t.translate<=Mue||isNaN(t.translate))&&(t.translate=0)}function lm(t,e,n,r){i3(t.x,e.x,n.x,r?r.originX:void 0),i3(t.y,e.y,n.y,r?r.originY:void 0)}function a3(t,e,n){t.min=n.min+e.min,t.max=t.min+ss(e)}function zue(t,e,n){a3(t.x,e.x,n.x),a3(t.y,e.y,n.y)}function l3(t,e,n){t.min=e.min-n.min,t.max=t.min+ss(e)}function um(t,e,n){l3(t.x,e.x,n.x),l3(t.y,e.y,n.y)}function Bue(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?vn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?vn(n,t,r.max):Math.min(t,n)),t}function u3(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function jue(t,{top:e,left:n,bottom:r,right:o}){return{x:u3(t.x,n,o),y:u3(t.y,e,r)}}function c3(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Vue(t,e){return{x:c3(t.x,e.x),y:c3(t.y,e.y)}}function Wue(t,e){let n=.5;const r=ss(t),o=ss(e);return o>r?n=Of(e.min,e.max-r,t.min):r>o&&(n=Of(t.min,t.max-o,e.min)),eu(0,1,n)}function Uue(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const J_=.35;function Gue(t=J_){return t===!1?t=0:t===!0&&(t=J_),{x:d3(t,"left","right"),y:d3(t,"top","bottom")}}function d3(t,e,n){return{min:f3(t,e),max:f3(t,n)}}function f3(t,e){return typeof t=="number"?t:t[e]||0}const p3=()=>({translate:0,scale:1,origin:0,originPoint:0}),Gd=()=>({x:p3(),y:p3()}),h3=()=>({min:0,max:0}),Pn=()=>({x:h3(),y:h3()});function ws(t){return[t("x"),t("y")]}function JG({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Hue({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function que(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function MC(t){return t===void 0||t===1}function eI({scale:t,scaleX:e,scaleY:n}){return!MC(t)||!MC(e)||!MC(n)}function Gu(t){return eI(t)||eH(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function eH(t){return m3(t.x)||m3(t.y)}function m3(t){return t&&t!=="0%"}function gx(t,e,n){const r=t-n,o=e*r;return n+o}function g3(t,e,n,r,o){return o!==void 0&&(t=gx(t,o,r)),gx(t,n,r)+e}function tI(t,e=0,n=1,r,o){t.min=g3(t.min,e,n,r,o),t.max=g3(t.max,e,n,r,o)}function tH(t,{x:e,y:n}){tI(t.x,e.translate,e.scale,e.originPoint),tI(t.y,n.translate,n.scale,n.originPoint)}const y3=.999999999999,v3=1.0000000000001;function Kue(t,e,n,r=!1){const o=n.length;if(!o)return;e.x=e.y=1;let s,i;for(let a=0;a<o;a++){s=n[a],i=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&qd(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),i&&(e.x*=i.x.scale,e.y*=i.y.scale,tH(t,i)),r&&Gu(s.latestValues)&&qd(t,s.latestValues))}e.x<v3&&e.x>y3&&(e.x=1),e.y<v3&&e.y>y3&&(e.y=1)}function Hd(t,e){t.min=t.min+e,t.max=t.max+e}function b3(t,e,n,r,o=.5){const s=vn(t.min,t.max,o);tI(t,e,n,s,r)}function qd(t,e){b3(t.x,e.x,e.scaleX,e.scale,e.originX),b3(t.y,e.y,e.scaleY,e.scale,e.originY)}function nH(t,e){return JG(que(t.getBoundingClientRect(),e))}function Xue(t,e,n){const r=nH(t,n),{scroll:o}=e;return o&&(Hd(r.x,o.offset.x),Hd(r.y,o.offset.y)),r}const rH=({current:t})=>t?t.ownerDocument.defaultView:null,Yue=new WeakMap;class Zue{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Pn(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const o=c=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(qw(c,"page").point)},s=(c,d)=>{const{drag:f,dragPropagation:p,onDragStart:h}=this.getProps();if(f&&!p&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=XG(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ws(g=>{let y=this.getAxisMotionValue(g).get()||0;if(ea.test(y)){const{projection:v}=this.visualElement;if(v&&v.layout){const b=v.layout.layoutBox[g];b&&(y=ss(b)*(parseFloat(y)/100))}}this.originPoint[g]=y}),h&&Vt.postRender(()=>h(c,d)),Z_(this.visualElement,"transform");const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},i=(c,d)=>{const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:h,onDrag:m}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:g}=d;if(p&&this.currentDirection===null){this.currentDirection=Que(g),this.currentDirection!==null&&h&&h(this.currentDirection);return}this.updateAxis("x",d.point,g),this.updateAxis("y",d.point,g),this.visualElement.render(),m&&m(c,d)},a=(c,d)=>this.stop(c,d),l=()=>ws(c=>{var d;return this.getAnimationState(c)==="paused"&&((d=this.getAxisMotionValue(c).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new HG(e,{onSessionStart:o,onStart:s,onMove:i,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:rH(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:o}=n;this.startAnimation(o);const{onDragEnd:s}=this.getProps();s&&Vt.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:o}=this.getProps();if(!r||!Tv(e,o,this.currentDirection))return;const s=this.getAxisMotionValue(e);let i=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(i=Bue(i,this.constraints[e],this.elastic[e])),s.set(i)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Ud(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&o?this.constraints=jue(o.layoutBox,n):this.constraints=!1,this.elastic=Gue(r),s!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&ws(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=Uue(o.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ud(e))return!1;const r=e.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const s=Xue(r,o.root,this.visualElement.getTransformPagePoint());let i=Vue(o.layout.layoutBox,s);if(n){const a=n(Hue(i));this.hasMutatedConstraints=!!a,a&&(i=JG(a))}return i}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:o,dragTransition:s,dragSnapToOrigin:i,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=ws(c=>{if(!Tv(c,n,this.currentDirection))return;let d=l&&l[c]||{};i&&(d={min:0,max:0});const f=o?200:1e6,p=o?40:1e7,h={type:"inertia",velocity:r?e[c]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(c,h)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Z_(this.visualElement,e),r.start(iA(e,r,0,n,this.visualElement,!1))}stopAnimation(){ws(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ws(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),o=r[n];return o||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ws(n=>{const{drag:r}=this.getProps();if(!Tv(n,r,this.currentDirection))return;const{projection:o}=this.visualElement,s=this.getAxisMotionValue(n);if(o&&o.layout){const{min:i,max:a}=o.layout.layoutBox[n];s.set(e[n]-vn(i,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ud(n)||!r||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};ws(i=>{const a=this.getAxisMotionValue(i);if(a&&this.constraints!==!1){const l=a.get();o[i]=Wue({min:l,max:l},this.constraints[i])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ws(i=>{if(!Tv(i,e,null))return;const a=this.getAxisMotionValue(i),{min:l,max:u}=this.constraints[i];a.set(vn(l,u,o[i]))})}addListeners(){if(!this.visualElement.current)return;Yue.set(this.visualElement,this);const e=this.visualElement.current,n=Ba(e,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Ud(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,s=o.addEventListener("measure",r);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),Vt.read(r);const i=Aa(window,"resize",()=>this.scalePositionWithinConstraints()),a=o.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(ws(c=>{const d=this.getAxisMotionValue(c);d&&(this.originPoint[c]+=l[c].translate,d.set(d.get()+l[c].translate))}),this.visualElement.render())});return()=>{i(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:o=!1,dragConstraints:s=!1,dragElastic:i=J_,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:o,dragConstraints:s,dragElastic:i,dragMomentum:a}}}function Tv(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Que(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Jue extends yu{constructor(e){super(e),this.removeGroupControls=Zr,this.removeListeners=Zr,this.controls=new Zue(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Zr}unmount(){this.removeGroupControls(),this.removeListeners()}}const x3=t=>(e,n)=>{t&&Vt.postRender(()=>t(e,n))};class ece extends yu{constructor(){super(...arguments),this.removePointerDownListener=Zr}onPointerDown(e){this.session=new HG(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:rH(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:o}=this.node.getProps();return{onSessionStart:x3(e),onStart:x3(n),onMove:r,onEnd:(s,i)=>{delete this.session,o&&Vt.postRender(()=>o(s,i))}}}mount(){this.removePointerDownListener=Ba(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const dy=N.createContext(null);function tce(){const t=N.useContext(dy);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,o=N.useId();N.useEffect(()=>r(o),[]);const s=N.useCallback(()=>n&&n(o),[o,n]);return!e&&n?[!1,s]:[!0]}function nce(){return rce(N.useContext(dy))}function rce(t){return t===null?!0:t.isPresent}const dA=N.createContext({}),oH=N.createContext({}),_b={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function w3(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const vh={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ze.test(t))t=parseFloat(t);else return t;const n=w3(t,e.target.x),r=w3(t,e.target.y);return`${n}% ${r}%`}},oce={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,o=tu.parse(t);if(o.length>5)return r;const s=tu.createTransformer(t),i=typeof o[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;o[0+i]/=a,o[1+i]/=l;const u=vn(a,l,.5);return typeof o[2+i]=="number"&&(o[2+i]/=u),typeof o[3+i]=="number"&&(o[3+i]/=u),s(o)}},yx={};function sce(t){Object.assign(yx,t)}const{schedule:fA}=iG(queueMicrotask,!1);class ice extends N.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:o}=this.props,{projection:s}=e;sce(ace),s&&(n.group&&n.group.add(s),r&&r.register&&o&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),_b.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:o,isPresent:s}=this.props,i=r.projection;return i&&(i.isPresent=s,o||e.layoutDependency!==n||n===void 0?i.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?i.promote():i.relegate()||Vt.postRender(()=>{const a=i.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),fA.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:o}=e;o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),r&&r.deregister&&r.deregister(o))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function sH(t){const[e,n]=tce(),r=N.useContext(dA);return M.jsx(ice,{...t,layoutGroup:r,switchLayoutGroup:N.useContext(oH),isPresent:e,safeToRemove:n})}const ace={borderRadius:{...vh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:vh,borderTopRightRadius:vh,borderBottomLeftRadius:vh,borderBottomRightRadius:vh,boxShadow:oce},iH=["TopLeft","TopRight","BottomLeft","BottomRight"],lce=iH.length,S3=t=>typeof t=="string"?parseFloat(t):t,k3=t=>typeof t=="number"||ze.test(t);function uce(t,e,n,r,o,s){o?(t.opacity=vn(0,n.opacity!==void 0?n.opacity:1,cce(r)),t.opacityExit=vn(e.opacity!==void 0?e.opacity:1,0,dce(r))):s&&(t.opacity=vn(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let i=0;i<lce;i++){const a=`border${iH[i]}Radius`;let l=$3(e,a),u=$3(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||k3(l)===k3(u)?(t[a]=Math.max(vn(S3(l),S3(u),r),0),(ea.test(u)||ea.test(l))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=vn(e.rotate||0,n.rotate||0,r))}function $3(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const cce=aH(0,.5,pG),dce=aH(.5,.95,Zr);function aH(t,e,n){return r=>r<t?0:r>e?1:n(Of(t,e,r))}function C3(t,e){t.min=e.min,t.max=e.max}function ms(t,e){C3(t.x,e.x),C3(t.y,e.y)}function T3(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function _3(t,e,n,r,o){return t-=e,t=gx(t,1/n,r),o!==void 0&&(t=gx(t,1/o,r)),t}function fce(t,e=0,n=1,r=.5,o,s=t,i=t){if(ea.test(e)&&(e=parseFloat(e),e=vn(i.min,i.max,e/100)-i.min),typeof e!="number")return;let a=vn(s.min,s.max,r);t===s&&(a-=e),t.min=_3(t.min,e,n,a,o),t.max=_3(t.max,e,n,a,o)}function I3(t,e,[n,r,o],s,i){fce(t,e[n],e[r],e[o],e.scale,s,i)}const pce=["x","scaleX","originX"],hce=["y","scaleY","originY"];function N3(t,e,n,r){I3(t.x,e,pce,n?n.x:void 0,r?r.x:void 0),I3(t.y,e,hce,n?n.y:void 0,r?r.y:void 0)}function E3(t){return t.translate===0&&t.scale===1}function lH(t){return E3(t.x)&&E3(t.y)}function A3(t,e){return t.min===e.min&&t.max===e.max}function mce(t,e){return A3(t.x,e.x)&&A3(t.y,e.y)}function O3(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function uH(t,e){return O3(t.x,e.x)&&O3(t.y,e.y)}function P3(t){return ss(t.x)/ss(t.y)}function R3(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class gce{constructor(){this.members=[]}add(e){aA(this.members,e),e.scheduleRender()}remove(e){if(lA(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(o=>e===o);if(n===0)return!1;let r;for(let o=n;o>=0;o--){const s=this.members[o];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:o}=e.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function yce(t,e,n){let r="";const o=t.x.translate/e.x,s=t.y.translate/e.y,i=(n==null?void 0:n.z)||0;if((o||s||i)&&(r=`translate3d(${o}px, ${s}px, ${i}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:c,rotateX:d,rotateY:f,skewX:p,skewY:h}=n;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),d&&(r+=`rotateX(${d}deg) `),f&&(r+=`rotateY(${f}deg) `),p&&(r+=`skewX(${p}deg) `),h&&(r+=`skewY(${h}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const vce=(t,e)=>t.depth-e.depth;class bce{constructor(){this.children=[],this.isDirty=!1}add(e){aA(this.children,e),this.isDirty=!0}remove(e){lA(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(vce),this.isDirty=!1,this.children.forEach(e)}}function Ib(t){const e=Yr(t)?t.get():t;return lue(e)?e.toValue():e}function xce(t,e){const n=ta.now(),r=({timestamp:o})=>{const s=o-n;s>=e&&(Jl(r),t(s-e))};return Vt.read(r,!0),()=>Jl(r)}function wce(t){return t instanceof SVGElement&&t.tagName!=="svg"}function Sce(t,e,n){const r=Yr(t)?t:Ym(t);return r.start(iA("",r,e,n)),r.animation}const Hu={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},jh=typeof window<"u"&&window.MotionDebug!==void 0,LC=["","X","Y","Z"],kce={visibility:"hidden"},D3=1e3;let $ce=0;function zC(t,e,n,r){const{latestValues:o}=e;o[t]&&(n[t]=o[t],e.setStaticValue(t,0),r&&(r[t]=0))}function cH(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=VG(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:o,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Vt,!(o||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&cH(r)}function dH({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:o}){return class{constructor(i={},a=e==null?void 0:e()){this.id=$ce++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,jh&&(Hu.totalNodes=Hu.resolvedTargetDeltas=Hu.recalculatedProjection=0),this.nodes.forEach(_ce),this.nodes.forEach(Oce),this.nodes.forEach(Pce),this.nodes.forEach(Ice),jh&&window.MotionDebug.record(Hu)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new bce)}addEventListener(i,a){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new uA),this.eventHandlers.get(i).add(a)}notifyListeners(i,...a){const l=this.eventHandlers.get(i);l&&l.notify(...a)}hasListeners(i){return this.eventHandlers.has(i)}mount(i,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=wce(i),this.instance=i;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),t){let d;const f=()=>this.root.updateBlockedByResize=!1;t(i,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=xce(f,250),_b.hasAnimatedSinceResize&&(_b.hasAnimatedSinceResize=!1,this.nodes.forEach(M3))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:p,layout:h})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||c.getDefaultTransition()||Lce,{onLayoutAnimationStart:g,onLayoutAnimationComplete:y}=c.getProps(),v=!this.targetLayout||!uH(this.targetLayout,h)||p,b=!f&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||f&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,b);const x={...HE(m,"layout"),onPlay:g,onComplete:y};(c.shouldReduceMotion||this.options.layoutRoot)&&(x.delay=0,x.type=!1),this.startAnimation(x)}else f||M3(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=h})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Jl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Rce),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cH(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const d=this.path[c];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(F3);return}this.isUpdating||this.nodes.forEach(Ece),this.isUpdating=!1,this.nodes.forEach(Ace),this.nodes.forEach(Cce),this.nodes.forEach(Tce),this.clearAllSnapshots();const a=ta.now();_r.delta=eu(0,1e3/60,a-_r.timestamp),_r.timestamp=a,_r.isProcessing=!0,EC.update.process(_r),EC.preRender.process(_r),EC.render.process(_r),_r.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,fA.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Nce),this.sharedNodes.forEach(Dce)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Vt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Vt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Pn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!o)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!lH(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;i&&(a||Gu(this.latestValues)||c)&&(o(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return i&&(l=this.removeTransform(l)),zce(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var i;const{visualElement:a}=this.options;if(!a)return Pn();const l=a.measureViewportBox();if(!(((i=this.scroll)===null||i===void 0?void 0:i.wasRoot)||this.path.some(Bce))){const{scroll:c}=this.root;c&&(Hd(l.x,c.offset.x),Hd(l.y,c.offset.y))}return l}removeElementScroll(i){var a;const l=Pn();if(ms(l,i),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:d,options:f}=c;c!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&ms(l,i),Hd(l.x,d.offset.x),Hd(l.y,d.offset.y))}return l}applyTransform(i,a=!1){const l=Pn();ms(l,i);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&qd(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Gu(c.latestValues)&&qd(l,c.latestValues)}return Gu(this.latestValues)&&qd(l,this.latestValues),l}removeTransform(i){const a=Pn();ms(a,i);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Gu(u.latestValues))continue;eI(u.latestValues)&&u.updateSnapshot();const c=Pn(),d=u.measurePageBox();ms(c,d),N3(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Gu(this.latestValues)&&N3(a,this.latestValues),a}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==_r.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(i||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=_r.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pn(),this.relativeTargetOrigin=Pn(),um(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),ms(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Pn(),this.targetWithTransforms=Pn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),zue(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ms(this.target,this.layout.layoutBox),tH(this.target,this.targetDelta)):ms(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pn(),this.relativeTargetOrigin=Pn(),um(this.relativeTargetOrigin,this.target,p.target),ms(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}jh&&Hu.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||eI(this.parent.latestValues)||eH(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var i;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((i=this.parent)===null||i===void 0)&&i.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===_r.timestamp&&(u=!1),u)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;ms(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;Kue(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Pn());const{target:h}=a;if(!h){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(T3(this.prevProjectionDelta.x,this.projectionDelta.x),T3(this.prevProjectionDelta.y,this.projectionDelta.y)),lm(this.projectionDelta,this.layoutCorrected,h,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==p||!R3(this.projectionDelta.x,this.prevProjectionDelta.x)||!R3(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",h)),jh&&Hu.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),i){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Gd(),this.projectionDelta=Gd(),this.projectionDeltaWithTransform=Gd()}setAnimationOrigin(i,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},d=Gd();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=Pn(),p=l?l.source:void 0,h=this.layout?this.layout.source:void 0,m=p!==h,g=this.getStack(),y=!g||g.members.length<=1,v=!!(m&&!y&&this.options.crossfade===!0&&!this.path.some(Mce));this.animationProgress=0;let b;this.mixTargetDelta=x=>{const w=x/1e3;L3(d.x,i.x,w),L3(d.y,i.y,w),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(um(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Fce(this.relativeTarget,this.relativeTargetOrigin,f,w),b&&mce(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=Pn()),ms(b,this.relativeTarget)),m&&(this.animationValues=c,uce(c,u,this.latestValues,w,v,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Jl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Vt.update(()=>{_b.hasAnimatedSinceResize=!0,this.currentAnimation=Sce(0,D3,{...i,onUpdate:a=>{this.mixTargetDelta(a),i.onUpdate&&i.onUpdate(a)},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(D3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=i;if(!(!a||!l||!u)){if(this!==i&&this.layout&&u&&fH(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Pn();const d=ss(this.layout.layoutBox.x);l.x.min=i.target.x.min,l.x.max=l.x.min+d;const f=ss(this.layout.layoutBox.y);l.y.min=i.target.y.min,l.y.max=l.y.min+f}ms(a,l),qd(a,c),lm(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(i,a){this.sharedNodes.has(i)||this.sharedNodes.set(i,new gce),this.sharedNodes.get(i).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){var i;const{layoutId:a}=this.options;return a?((i=this.getStack())===null||i===void 0?void 0:i.lead)||this:this}getPrevLead(){var i;const{layoutId:a}=this.options;return a?(i=this.getStack())===null||i===void 0?void 0:i.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),i&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let a=!1;const{latestValues:l}=i;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&zC("z",i,u,this.animationValues);for(let c=0;c<LC.length;c++)zC(`rotate${LC[c]}`,i,u,this.animationValues),zC(`skew${LC[c]}`,i,u,this.animationValues);i.render();for(const c in u)i.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);i.scheduleRender()}getProjectionStyles(i){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return kce;const u={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Ib(i==null?void 0:i.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=Ib(i==null?void 0:i.pointerEvents)||""),this.hasProjected&&!Gu(this.latestValues)&&(m.transform=c?c({},""):"none",this.hasProjected=!1),m}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=yce(this.projectionDeltaWithTransform,this.treeScale,f),c&&(u.transform=c(f,u.transform));const{x:p,y:h}=this.projectionDelta;u.transformOrigin=`${p.origin*100}% ${h.origin*100}% 0`,d.animationValues?u.opacity=d===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const m in yx){if(f[m]===void 0)continue;const{correct:g,applyTo:y}=yx[m],v=u.transform==="none"?f[m]:g(f[m],d);if(y){const b=y.length;for(let x=0;x<b;x++)u[y[x]]=v}else u[m]=v}return this.options.layoutId&&(u.pointerEvents=d===this?Ib(i==null?void 0:i.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>{var a;return(a=i.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(F3),this.root.sharedNodes.clear()}}}function Cce(t){t.updateLayout()}function Tce(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:o}=t.layout,{animationType:s}=t.options,i=n.source!==t.layout.source;s==="size"?ws(d=>{const f=i?n.measuredBox[d]:n.layoutBox[d],p=ss(f);f.min=r[d].min,f.max=f.min+p}):fH(s,n.layoutBox,r)&&ws(d=>{const f=i?n.measuredBox[d]:n.layoutBox[d],p=ss(r[d]);f.max=f.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+p)});const a=Gd();lm(a,r,n.layoutBox);const l=Gd();i?lm(l,t.applyTransform(o,!0),n.measuredBox):lm(l,r,n.layoutBox);const u=!lH(a);let c=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:p}=d;if(f&&p){const h=Pn();um(h,n.layoutBox,f.layoutBox);const m=Pn();um(m,r,p.layoutBox),uH(h,m)||(c=!0),d.options.layoutRoot&&(t.relativeTarget=m,t.relativeTargetOrigin=h,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:c})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function _ce(t){jh&&Hu.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Ice(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Nce(t){t.clearSnapshot()}function F3(t){t.clearMeasurements()}function Ece(t){t.isLayoutDirty=!1}function Ace(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function M3(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Oce(t){t.resolveTargetDelta()}function Pce(t){t.calcProjection()}function Rce(t){t.resetSkewAndRotation()}function Dce(t){t.removeLeadSnapshot()}function L3(t,e,n){t.translate=vn(e.translate,0,n),t.scale=vn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function z3(t,e,n,r){t.min=vn(e.min,n.min,r),t.max=vn(e.max,n.max,r)}function Fce(t,e,n,r){z3(t.x,e.x,n.x,r),z3(t.y,e.y,n.y,r)}function Mce(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Lce={duration:.45,ease:[.4,0,.1,1]},B3=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),j3=B3("applewebkit/")&&!B3("chrome/")?Math.round:Zr;function V3(t){t.min=j3(t.min),t.max=j3(t.max)}function zce(t){V3(t.x),V3(t.y)}function fH(t,e,n){return t==="position"||t==="preserve-aspect"&&!Lue(P3(e),P3(n),.2)}function Bce(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const jce=dH({attachResizeListener:(t,e)=>Aa(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),BC={current:void 0},pH=dH({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!BC.current){const t=new jce({});t.mount(window),t.setOptions({layoutScroll:!0}),BC.current=t}return BC.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Vce={pan:{Feature:ece},drag:{Feature:Jue,ProjectionNode:pH,MeasureLayout:sH}};function W3(t,e){const n=e?"pointerenter":"pointerleave",r=e?"onHoverStart":"onHoverEnd",o=(s,i)=>{if(s.pointerType==="touch"||YG())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e);const l=a[r];l&&Vt.postRender(()=>l(s,i))};return Ba(t.current,n,o,{passive:!t.getProps()[r]})}class Wce extends yu{mount(){this.unmount=za(W3(this.node,!0),W3(this.node,!1))}unmount(){}}class Uce extends yu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=za(Aa(this.node.current,"focus",()=>this.onFocus()),Aa(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const hH=(t,e)=>e?t===e?!0:hH(t,e.parentElement):!1;function jC(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,qw(n))}class Gce extends yu{constructor(){super(...arguments),this.removeStartListeners=Zr,this.removeEndListeners=Zr,this.removeAccessibleListeners=Zr,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=Ba(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:c,globalTapTarget:d}=this.node.getProps(),f=!d&&!hH(this.node.current,a.target)?c:u;f&&Vt.update(()=>f(a,l))},{passive:!(r.onTap||r.onPointerUp)}),i=Ba(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=za(s,i),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const i=a=>{a.key!=="Enter"||!this.checkPressEnd()||jC("up",(l,u)=>{const{onTap:c}=this.node.getProps();c&&Vt.postRender(()=>c(l,u))})};this.removeEndListeners(),this.removeEndListeners=Aa(this.node.current,"keyup",i),jC("down",(a,l)=>{this.startPress(a,l)})},n=Aa(this.node.current,"keydown",e),r=()=>{this.isPressing&&jC("cancel",(s,i)=>this.cancelPress(s,i))},o=Aa(this.node.current,"blur",r);this.removeAccessibleListeners=za(n,o)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:o}=this.node.getProps();o&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Vt.postRender(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!YG()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Vt.postRender(()=>r(e,n))}mount(){const e=this.node.getProps(),n=Ba(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Aa(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=za(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const nI=new WeakMap,VC=new WeakMap,Hce=t=>{const e=nI.get(t.target);e&&e(t)},qce=t=>{t.forEach(Hce)};function Kce({root:t,...e}){const n=t||document;VC.has(n)||VC.set(n,{});const r=VC.get(n),o=JSON.stringify(e);return r[o]||(r[o]=new IntersectionObserver(qce,{root:t,...e})),r[o]}function Xce(t,e,n){const r=Kce(e);return nI.set(t,n),r.observe(t),()=>{nI.delete(t),r.unobserve(t)}}const Yce={some:0,all:1};class Zce extends yu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:o="some",once:s}=e,i={root:n?n.current:void 0,rootMargin:r,threshold:typeof o=="number"?o:Yce[o]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:d}=this.node.getProps(),f=u?c:d;f&&f(l)};return Xce(this.node.current,i,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Qce(e,n))&&this.startObserver()}unmount(){}}function Qce({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Jce={inView:{Feature:Zce},tap:{Feature:Gce},focus:{Feature:Uce},hover:{Feature:Wce}},ede={layout:{ProjectionNode:pH,MeasureLayout:sH}},Zm=N.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Kw=N.createContext({}),pA=typeof window<"u",mH=pA?N.useLayoutEffect:N.useEffect,gH=N.createContext({strict:!1});function tde(t,e,n,r,o){var s,i;const{visualElement:a}=N.useContext(Kw),l=N.useContext(gH),u=N.useContext(dy),c=N.useContext(Zm).reducedMotion,d=N.useRef();r=r||l.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:a,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:c}));const f=d.current,p=N.useContext(oH);f&&!f.projection&&o&&(f.type==="html"||f.type==="svg")&&nde(d.current,n,o,p);const h=N.useRef(!1);N.useInsertionEffect(()=>{f&&h.current&&f.update(n,u)});const m=n[jG],g=N.useRef(!!m&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,m))&&((i=window.MotionHasOptimisedAnimation)===null||i===void 0?void 0:i.call(window,m)));return mH(()=>{f&&(h.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),fA.render(f.render),g.current&&f.animationState&&f.animationState.animateChanges())}),N.useEffect(()=>{f&&(!g.current&&f.animationState&&f.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)===null||y===void 0||y.call(window,m)}),g.current=!1))}),f}function nde(t,e,n,r){const{layoutId:o,layout:s,drag:i,dragConstraints:a,layoutScroll:l,layoutRoot:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:yH(t.parent)),t.projection.setOptions({layoutId:o,layout:s,alwaysMeasureLayout:!!i||a&&Ud(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}function yH(t){if(t)return t.options.allowProjection!==!1?t.projection:yH(t.parent)}function rde(t,e,n){return N.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Ud(n)&&(n.current=r))},[e])}function Xw(t){return Uw(t.animate)||GE.some(e=>qm(t[e]))}function vH(t){return!!(Xw(t)||t.variants)}function ode(t,e){if(Xw(t)){const{initial:n,animate:r}=t;return{initial:n===!1||qm(n)?n:void 0,animate:qm(r)?r:void 0}}return t.inherit!==!1?e:{}}function sde(t){const{initial:e,animate:n}=ode(t,N.useContext(Kw));return N.useMemo(()=>({initial:e,animate:n}),[U3(e),U3(n)])}function U3(t){return Array.isArray(t)?t.join(" "):t}const G3={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Pf={};for(const t in G3)Pf[t]={isEnabled:e=>G3[t].some(n=>!!e[n])};function ide(t){for(const e in t)Pf[e]={...Pf[e],...t[e]}}const ade=Symbol.for("motionComponentSymbol");function lde({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:o}){t&&ide(t);function s(a,l){let u;const c={...N.useContext(Zm),...a,layoutId:ude(a)},{isStatic:d}=c,f=sde(a),p=r(a,d);if(!d&&pA){cde();const h=dde(c);u=h.MeasureLayout,f.visualElement=tde(o,p,c,e,h.ProjectionNode)}return M.jsxs(Kw.Provider,{value:f,children:[u&&f.visualElement?M.jsx(u,{visualElement:f.visualElement,...c}):null,n(o,a,rde(p,f.visualElement,l),p,d,f.visualElement)]})}const i=N.forwardRef(s);return i[ade]=o,i}function ude({layoutId:t}){const e=N.useContext(dA).id;return e&&t!==void 0?e+"-"+t:t}function cde(t,e){N.useContext(gH).strict}function dde(t){const{drag:e,layout:n}=Pf;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const fde=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function hA(t){return typeof t!="string"||t.includes("-")?!1:!!(fde.indexOf(t)>-1||/[A-Z]/u.test(t))}function bH(t,{style:e,vars:n},r,o){Object.assign(t.style,e,o&&o.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const xH=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function wH(t,e,n,r){bH(t,e,void 0,r);for(const o in e.attrs)t.setAttribute(xH.has(o)?o:cA(o),e.attrs[o])}function SH(t,{layout:e,layoutId:n}){return Yc.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!yx[t]||t==="opacity")}function mA(t,e,n){var r;const{style:o}=t,s={};for(const i in o)(Yr(o[i])||e.style&&Yr(e.style[i])||SH(i,t)||((r=n==null?void 0:n.getValue(i))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[i]=o[i]);return s}function kH(t,e,n){const r=mA(t,e,n);for(const o in t)if(Yr(t[o])||Yr(e[o])){const s=ly.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;r[s]=t[o]}return r}function Yw(t){const e=N.useRef(null);return e.current===null&&(e.current=t()),e.current}function pde({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,o,s){const i={latestValues:hde(r,o,s,t),renderState:e()};return n&&(i.mount=a=>n(r,a,i)),i}const $H=t=>(e,n)=>{const r=N.useContext(Kw),o=N.useContext(dy),s=()=>pde(t,e,r,o);return n?s():Yw(s)};function hde(t,e,n,r){const o={},s=r(t,{});for(const f in s)o[f]=Ib(s[f]);let{initial:i,animate:a}=t;const l=Xw(t),u=vH(t);e&&u&&!l&&t.inherit!==!1&&(i===void 0&&(i=e.initial),a===void 0&&(a=e.animate));let c=n?n.initial===!1:!1;c=c||i===!1;const d=c?a:i;if(d&&typeof d!="boolean"&&!Uw(d)){const f=Array.isArray(d)?d:[d];for(let p=0;p<f.length;p++){const h=WE(t,f[p]);if(h){const{transitionEnd:m,transition:g,...y}=h;for(const v in y){let b=y[v];if(Array.isArray(b)){const x=c?b.length-1:0;b=b[x]}b!==null&&(o[v]=b)}for(const v in m)o[v]=m[v]}}}return o}const gA=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),CH=()=>({...gA(),attrs:{}}),TH=(t,e)=>e&&typeof t=="number"?e.transform(t):t,mde={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},gde=ly.length;function yde(t,e,n){let r="",o=!0;for(let s=0;s<gde;s++){const i=ly[s],a=t[i];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(i.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const u=TH(a,JE[i]);if(!l){o=!1;const c=mde[i]||i;r+=`${c}(${u}) `}n&&(e[i]=u)}}return r=r.trim(),n?r=n(e,o?"":r):o&&(r="none"),r}function yA(t,e,n){const{style:r,vars:o,transformOrigin:s}=t;let i=!1,a=!1;for(const l in e){const u=e[l];if(Yc.has(l)){i=!0;continue}else if(vG(l)){o[l]=u;continue}else{const c=TH(u,JE[l]);l.startsWith("origin")?(a=!0,s[l]=c):r[l]=c}}if(e.transform||(i||n?r.transform=yde(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:c=0}=s;r.transformOrigin=`${l} ${u} ${c}`}}function H3(t,e,n){return typeof t=="string"?t:ze.transform(e+n*t)}function vde(t,e,n){const r=H3(e,t.x,t.width),o=H3(n,t.y,t.height);return`${r} ${o}`}const bde={offset:"stroke-dashoffset",array:"stroke-dasharray"},xde={offset:"strokeDashoffset",array:"strokeDasharray"};function wde(t,e,n=1,r=0,o=!0){t.pathLength=1;const s=o?bde:xde;t[s.offset]=ze.transform(-r);const i=ze.transform(e),a=ze.transform(n);t[s.array]=`${i} ${a}`}function vA(t,{attrX:e,attrY:n,attrScale:r,originX:o,originY:s,pathLength:i,pathSpacing:a=1,pathOffset:l=0,...u},c,d){if(yA(t,u,d),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:p,dimensions:h}=t;f.transform&&(h&&(p.transform=f.transform),delete f.transform),h&&(o!==void 0||s!==void 0||p.transform)&&(p.transformOrigin=vde(h,o!==void 0?o:.5,s!==void 0?s:.5)),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),i!==void 0&&wde(f,i,a,l,!1)}const bA=t=>typeof t=="string"&&t.toLowerCase()==="svg",Sde={useVisualState:$H({scrapeMotionValuesFromProps:kH,createRenderState:CH,onMount:(t,e,{renderState:n,latestValues:r})=>{Vt.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Vt.render(()=>{vA(n,r,bA(e.tagName),t.transformTemplate),wH(e,n)})}})},kde={useVisualState:$H({scrapeMotionValuesFromProps:mA,createRenderState:gA})};function _H(t,e,n){for(const r in e)!Yr(e[r])&&!SH(r,n)&&(t[r]=e[r])}function $de({transformTemplate:t},e){return N.useMemo(()=>{const n=gA();return yA(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Cde(t,e){const n=t.style||{},r={};return _H(r,n,t),Object.assign(r,$de(t,e)),r}function Tde(t,e){const n={},r=Cde(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const _de=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function vx(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||_de.has(t)}let IH=t=>!vx(t);function NH(t){t&&(IH=e=>e.startsWith("on")?!vx(e):t(e))}try{NH(require("@emotion/is-prop-valid").default)}catch{}function Ide(t,e,n){const r={};for(const o in t)o==="values"&&typeof t.values=="object"||(IH(o)||n===!0&&vx(o)||!e&&!vx(o)||t.draggable&&o.startsWith("onDrag"))&&(r[o]=t[o]);return r}function Nde(t,e,n,r){const o=N.useMemo(()=>{const s=CH();return vA(s,e,bA(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};_H(s,t.style,t),o.style={...s,...o.style}}return o}function Ede(t=!1){return(n,r,o,{latestValues:s},i)=>{const l=(hA(n)?Nde:Tde)(r,s,i,n),u=Ide(r,typeof n=="string",t),c=n!==N.Fragment?{...u,...l,ref:o}:{},{children:d}=r,f=N.useMemo(()=>Yr(d)?d.get():d,[d]);return N.createElement(n,{...c,children:f})}}function Ade(t,e){return function(r,{forwardMotionProps:o}={forwardMotionProps:!1}){const i={...hA(r)?Sde:kde,preloadedFeatures:t,useRender:Ede(o),createVisualElement:e,Component:r};return lde(i)}}const rI={current:null},EH={current:!1};function Ode(){if(EH.current=!0,!!pA)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>rI.current=t.matches;t.addListener(e),e()}else rI.current=!1}function Pde(t,e,n){for(const r in e){const o=e[r],s=n[r];if(Yr(o))t.addValue(r,o);else if(Yr(s))t.addValue(r,Ym(o,{owner:t}));else if(s!==o)if(t.hasValue(r)){const i=t.getValue(r);i.liveStyle===!0?i.jump(o):i.hasAnimated||i.set(o)}else{const i=t.getStaticValue(r);t.addValue(r,Ym(i!==void 0?i:o,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const q3=new WeakMap,Rde=[...wG,Br,tu],Dde=t=>Rde.find(xG(t)),K3=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Fde{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:o,blockInitialAnimation:s,visualState:i},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=YE,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=ta.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,Vt.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=o,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=Xw(n),this.isVariantNode=vH(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in d){const p=d[f];l[f]!==void 0&&Yr(p)&&p.set(l[f],!1)}}mount(e){this.current=e,q3.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),EH.current||Ode(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:rI.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){q3.delete(this.current),this.projection&&this.projection.unmount(),Jl(this.notifyUpdate),Jl(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Yc.has(e),o=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Vt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{o(),s(),i&&i(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Pf){const n=Pf[e];if(!n)continue;const{isEnabled:r,Feature:o}=n;if(!this.features[e]&&o&&r(this.props)&&(this.features[e]=new o(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Pn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<K3.length;r++){const o=K3[r];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const s="on"+o,i=e[s];i&&(this.propEventSubscriptions[o]=this.on(o,i))}this.prevMotionValues=Pde(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Ym(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let o=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return o!=null&&(typeof o=="string"&&(gG(o)||mG(o))?o=parseFloat(o):!Dde(o)&&tu.test(n)&&(o=NG(e,n)),this.setBaseTarget(e,Yr(o)?o.get():o)),Yr(o)?o.get():o}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let o;if(typeof r=="string"||typeof r=="object"){const i=WE(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);i&&(o=i[e])}if(r&&o!==void 0)return o;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Yr(s)?s:this.initialValues[e]!==void 0&&o===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new uA),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class AH extends Fde{constructor(){super(...arguments),this.KeyframeResolver=EG}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}}function Mde(t){return window.getComputedStyle(t)}class Lde extends AH{constructor(){super(...arguments),this.type="html",this.renderInstance=bH}readValueFromInstance(e,n){if(Yc.has(n)){const r=eA(n);return r&&r.default||0}else{const r=Mde(e),o=(vG(n)?r.getPropertyValue(n):r[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:n}){return nH(e,n)}build(e,n,r){yA(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return mA(e,n,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Yr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class zde extends AH{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Pn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Yc.has(n)){const r=eA(n);return r&&r.default||0}return n=xH.has(n)?n:cA(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return kH(e,n,r)}build(e,n,r){vA(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,o){wH(e,n,r,o)}mount(e){this.isSVGTag=bA(e.tagName),super.mount(e)}}const Bde=(t,e)=>hA(t)?new zde(e):new Lde(e,{allowProjection:t!==N.Fragment}),jde=Ade({...Nue,...Jce,...Vce,...ede},Bde),X3=xae(jde);class Vde extends N.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Wde({children:t,isPresent:e}){const n=N.useId(),r=N.useRef(null),o=N.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=N.useContext(Zm);return N.useInsertionEffect(()=>{const{width:i,height:a,top:l,left:u}=o.current;if(e||!r.current||!i||!a)return;r.current.dataset.motionPopId=n;const c=document.createElement("style");return s&&(c.nonce=s),document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),M.jsx(Vde,{isPresent:e,childRef:r,sizeRef:o,children:N.cloneElement(t,{ref:r})})}const Ude=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:o,presenceAffectsLayout:s,mode:i})=>{const a=Yw(Gde),l=N.useId(),u=N.useCallback(d=>{a.set(d,!0);for(const f of a.values())if(!f)return;r&&r()},[a,r]),c=N.useMemo(()=>({id:l,initial:e,isPresent:n,custom:o,onExitComplete:u,register:d=>(a.set(d,!1),()=>a.delete(d))}),s?[Math.random(),u]:[n,u]);return N.useMemo(()=>{a.forEach((d,f)=>a.set(f,!1))},[n]),N.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),i==="popLayout"&&(t=M.jsx(Wde,{isPresent:n,children:t})),M.jsx(dy.Provider,{value:c,children:t})};function Gde(){return new Map}const _v=t=>t.key||"";function Y3(t){const e=[];return N.Children.forEach(t,n=>{N.isValidElement(n)&&e.push(n)}),e}const fy=({children:t,exitBeforeEnter:e,custom:n,initial:r=!0,onExitComplete:o,presenceAffectsLayout:s=!0,mode:i="sync"})=>{const a=N.useMemo(()=>Y3(t),[t]),l=a.map(_v),u=N.useRef(!0),c=N.useRef(a),d=Yw(()=>new Map),[f,p]=N.useState(a),[h,m]=N.useState(a);mH(()=>{u.current=!1,c.current=a;for(let v=0;v<h.length;v++){const b=_v(h[v]);l.includes(b)?d.delete(b):d.get(b)!==!0&&d.set(b,!1)}},[h,l.length,l.join("-")]);const g=[];if(a!==f){let v=[...a];for(let b=0;b<h.length;b++){const x=h[b],w=_v(x);l.includes(w)||(v.splice(b,0,x),g.push(x))}i==="wait"&&g.length&&(v=g),m(Y3(v)),p(a);return}const{forceRender:y}=N.useContext(dA);return M.jsx(M.Fragment,{children:h.map(v=>{const b=_v(v),x=a===h||l.includes(b),w=()=>{if(d.has(b))d.set(b,!0);else return;let S=!0;d.forEach(k=>{k||(S=!1)}),S&&(y==null||y(),m(c.current),o&&o())};return M.jsx(Ude,{isPresent:x,initial:!u.current||r?void 0:!1,custom:x?void 0:n,presenceAffectsLayout:s,mode:i,onExitComplete:x?void 0:w,children:v},b)})})};function Hde({children:t,isValidProp:e,...n}){e&&NH(e),n={...N.useContext(Zm),...n},n.isStatic=Yw(()=>n.isStatic);const r=N.useMemo(()=>n,[JSON.stringify(n.transition),n.transformPagePoint,n.reducedMotion]);return M.jsx(Zm.Provider,{value:r,children:t})}function qde(){const t=new Map;return new Proxy(af,{apply:(e,n,[r,o])=>X3(af(r,o)),get:(e,n)=>(t.has(n)||t.set(n,X3(af(n))),t.get(n))})}var Za=qde();function xA(t){return N.forwardRef(t)}var Z3={easeIn:[.4,0,1,1],easeOut:[0,0,.2,1]},OH={enter:{duration:.25,ease:Z3.easeOut},exit:{duration:.2,ease:Z3.easeIn}};function PH(t){return function(e,n){return{...t??OH.enter,...n?{duration:yi(n)?n:n.enter}:{},delay:yi(e)?e:e==null?void 0:e.enter}}}function oI(t){return function(e,n){return{...t??OH.exit,...n?{duration:yi(n)?n:n.exit}:{},delay:yi(e)?e:e==null?void 0:e.exit}}}var Kde=()=>{var t,e;const n=N.useRef(0),{theme:r}=iy(),o=r.__breakpoints,{containerRef:s,direction:i="down",identifier:a="@media screen"}=(e=(t=r.__config)==null?void 0:t.breakpoint)!=null?e:{},l=!!s;o||console.warn("useBreakpoint: `breakpoints` is undefined. Seems you forgot to put theme in `breakpoints`");const u=N.useMemo(()=>o?o.queries.map(({breakpoint:h,maxW:m,minMaxQuery:g,minW:y})=>{var v;const b=a==="@media screen"?"@media screen and ":`${a} `,x=(v=g==null?void 0:g.replace(b,""))!=null?v:"";return{breakpoint:h,maxW:m,minW:y,query:x}}):[],[o,a]),c=!!u.length,[d,f]=N.useState(()=>{if(!_f()||l||!c)return"base";for(const{breakpoint:m,query:g}of u)if(window.matchMedia(g).matches)return m}),p=N.useCallback(h=>{for(const{breakpoint:m,maxW:g,minW:y}of u)if(i!=="up"){if((y??0)<=h)return m}else if(h<=(g??1/0))return m;return"base"},[u,i]);return N.useEffect(()=>{if(!l||!c||!_f())return;const m=new ResizeObserver(([g])=>{if(!g)return;cancelAnimationFrame(n.current);const{width:y}=g.contentRect;n.current=requestAnimationFrame(()=>{const v=p(y);f(v)})});return s.current&&m.observe(s.current),()=>{m.disconnect(),cancelAnimationFrame(n.current)}},[c,l,s,p]),N.useEffect(()=>{if(l||!c)return;const h=u.map(({breakpoint:m,query:g})=>{const y=window.matchMedia(g),v=b=>{b.matches&&f(m)};return typeof y.addEventListener=="function"&&y.addEventListener("change",v),()=>{typeof y.removeEventListener=="function"&&y.removeEventListener("change",v)}});return()=>{h.forEach(m=>m())}},[u,c,l]),d},Q3=(t={})=>(e,n)=>{var r,o;e||console.warn("getBreakpointValue: `theme` is undefined.");const s=(o=(r=e==null?void 0:e.__breakpoints)==null?void 0:r.keys)!=null?o:[];s.length||console.warn("getBreakpointValue: `breakpoints` is undefined.");const i=s.indexOf(n);for(let a=i;0<a;a--){const l=s[a];if(l&&t.hasOwnProperty(l))return t[l]}return t.base},bx=t=>{const{theme:e}=iy(),n=Kde(),{colorMode:r}=sy();return N.useMemo(()=>Xde(t)(e,r,n),[t,e,r,n])},Xde=t=>(e,n,r)=>{var o;if(vt(t)){const s=Q3(t)(e,r);if(qe(s)){const[i,a]=s;return j_(i,a)(n)}else return s}else if(qe(t)){const[s,i]=t,a=j_(s,i)(n);return vt(a)&&(o=e.__breakpoints)!=null&&o.isResponsive(a)?Q3(a)(e,r):a}else return t};function Yde({value:t,...e}){var n;(n=e.onUpdate)!=null||(e.onUpdate=(c,d)=>c!==d);const r=Fa(e.onChange),o=Fa(e.onUpdate),[s,i]=N.useState(e.defaultValue),a=t!==void 0,l=a?t:s,u=Fa(c=>{const d=jn(c,l);o(l,d)&&((!a||Ms(d)||Xre(d))&&i(d),r(d))},[a,l,r,o]);return[l,u]}var Zde={enter:({delay:t,duration:e,enter:n,transition:r,transitionEnd:o}={})=>({opacity:1,scale:1,transition:PH(r==null?void 0:r.enter)(t,e),transitionEnd:o==null?void 0:o.enter,...n}),exit:({delay:t,duration:e,exit:n,reverse:r,scale:o,transition:s,transitionEnd:i}={})=>({opacity:0,transition:oI(s==null?void 0:s.exit)(t,e),...r?{scale:o,transitionEnd:i==null?void 0:i.exit}:{transitionEnd:{scale:o,...i==null?void 0:i.exit}},...n})},RH={animate:"enter",exit:"exit",initial:"exit",variants:Zde},DH=xA((t,e)=>{const[n,r]=cl("ScaleFade",t);let{className:o,delay:s,duration:i,isOpen:a,reverse:l,scale:u,transition:c,transitionEnd:d,unmountOnExit:f,...p}=Vo(r);const h=a||f?"enter":"exit",m={delay:s,duration:i,reverse:l,scale:u,transition:c,transitionEnd:d};return a=f?a&&f:!0,M.jsx(fy,{custom:m,children:a?M.jsx(Za.div,{ref:e,className:Ye("ui-scale-fade",o),custom:m,...RH,animate:h,__css:n,...p}):null})});DH.displayName="ScaleFade";DH.__ui__="ScaleFade";var Qde={enter:({delay:t,duration:e,enter:n,transition:r,transitionEnd:o}={})=>({opacity:1,transition:PH(r==null?void 0:r.enter)(t,e),transitionEnd:o==null?void 0:o.enter,x:0,y:0,...n}),exit:({delay:t,duration:e,exit:n,offsetX:r,offsetY:o,reverse:s,transition:i,transitionEnd:a}={})=>({opacity:0,transition:oI(i==null?void 0:i.exit)(t,e),...s?{transitionEnd:a==null?void 0:a.exit,x:r,y:o}:{transitionEnd:{x:r,y:o,...a==null?void 0:a.exit}},...n}),initial:({delay:t,duration:e,initial:n,offsetX:r,offsetY:o,transition:s,transitionEnd:i})=>({opacity:0,transition:oI(s==null?void 0:s.exit)(t,e),transitionEnd:i==null?void 0:i.exit,x:r,y:o,...n})},Vh={animate:"enter",exit:"exit",initial:"exit",variants:Qde},FH=xA((t,e)=>{const[n,r]=cl("SlideFade",t);let{className:o,delay:s,duration:i,isOpen:a,offsetX:l,offsetY:u,reverse:c,transition:d,transitionEnd:f,unmountOnExit:p,...h}=Vo(r);const m=a||p?"enter":"exit",g=bx(l),y=bx(u),v={delay:s,duration:i,offsetX:g,offsetY:y,reverse:c,transition:d,transitionEnd:f};return a=p?a&&p:!0,M.jsx(fy,{custom:v,children:a?M.jsx(Za.div,{ref:e,className:Ye("ui-slide-fade",o),custom:v,...Vh,animate:m,__css:n,...h}):null})});FH.displayName="SlideFade";FH.__ui__="SlideFade";var wA=We(({color:t,duration:e="1.8s",...n},r)=>M.jsx(go,{ref:r,stroke:t,viewBox:"0 0 44 44",...n,children:M.jsxs("g",{fill:"none",fillRule:"evenodd",strokeWidth:"2",children:[M.jsxs("circle",{cx:"22",cy:"22",r:"1",children:[M.jsx("animate",{attributeName:"r",begin:"0s",calcMode:"spline",dur:e,keySplines:"0.165, 0.84, 0.44, 1",keyTimes:"0; 1",repeatCount:"indefinite",values:"1; 20"}),M.jsx("animate",{attributeName:"stroke-opacity",begin:"0s",calcMode:"spline",dur:e,keySplines:"0.3, 0.61, 0.355, 1",keyTimes:"0; 1",repeatCount:"indefinite",values:"1; 0"})]}),M.jsxs("circle",{cx:"22",cy:"22",r:"1",children:[M.jsx("animate",{attributeName:"r",begin:"-0.9s",calcMode:"spline",dur:e,keySplines:"0.165, 0.84, 0.44, 1",keyTimes:"0; 1",repeatCount:"indefinite",values:"1; 20"}),M.jsx("animate",{attributeName:"stroke-opacity",begin:"-0.9s",calcMode:"spline",dur:e,keySplines:"0.3, 0.61, 0.355, 1",keyTimes:"0; 1",repeatCount:"indefinite",values:"1; 0"})]})]})}));wA.displayName="Puff";wA.__ui__="Puff";var SA=We(({color:t,duration:e="3s",...n},r)=>{const o=typeof e=="string"?parseFloat(e):e;return M.jsx(go,{ref:r,stroke:t,viewBox:"0 0 45 45",...n,children:M.jsxs("g",{fill:"none",fillRule:"evenodd",strokeWidth:"2",transform:"translate(1 1)",children:[M.jsxs("circle",{cx:"22",cy:"22",r:"6",strokeOpacity:"0",children:[M.jsx("animate",{attributeName:"r",begin:"1.5s",calcMode:"linear",dur:`${o}s`,repeatCount:"indefinite",values:"6;22"}),M.jsx("animate",{attributeName:"stroke-opacity",begin:"1.5s",calcMode:"linear",dur:`${o}s`,repeatCount:"indefinite",values:"1;0"}),M.jsx("animate",{attributeName:"stroke-width",begin:"1.5s",calcMode:"linear",dur:`${o}s`,repeatCount:"indefinite",values:"2;0"})]}),M.jsxs("circle",{cx:"22",cy:"22",r:"6",strokeOpacity:"0",children:[M.jsx("animate",{attributeName:"r",begin:"3s",calcMode:"linear",dur:`${o}s`,repeatCount:"indefinite",values:"6;22"}),M.jsx("animate",{attributeName:"stroke-opacity",begin:"3s",calcMode:"linear",dur:`${o}s`,repeatCount:"indefinite",values:"1;0"}),M.jsx("animate",{attributeName:"stroke-width",begin:"3s",calcMode:"linear",dur:`${o}s`,repeatCount:"indefinite",values:"2;0"})]}),M.jsx("circle",{cx:"22",cy:"22",r:"8",children:M.jsx("animate",{attributeName:"r",begin:"0s",calcMode:"linear",dur:`${o/2}s`,repeatCount:"indefinite",values:"6;1;2;3;4;5;6"})})]})})});SA.displayName="Rings";SA.__ui__="Rings";var kA=We(({color:t,duration:e="1.4s",...n},r)=>{const o=typeof e=="string"?parseFloat(e):e;return M.jsx(go,{ref:r,fill:t,viewBox:"0 0 55 80",...n,children:M.jsxs("g",{transform:"matrix(1 0 0 -1 0 80)",children:[M.jsx("rect",{height:"20",rx:"3",width:"10",children:M.jsx("animate",{attributeName:"height",begin:"0s",calcMode:"linear",dur:`${o*3}s`,repeatCount:"indefinite",values:"20;45;57;80;64;32;66;45;64;23;66;13;64;56;34;34;2;23;76;79;20"})}),M.jsx("rect",{height:"80",rx:"3",width:"10",x:"15",children:M.jsx("animate",{attributeName:"height",begin:"0s",calcMode:"linear",dur:`${o*1.4}s`,repeatCount:"indefinite",values:"80;55;33;5;75;23;73;33;12;14;60;80"})}),M.jsx("rect",{height:"50",rx:"3",width:"10",x:"30",children:M.jsx("animate",{attributeName:"height",begin:"0s",calcMode:"linear",dur:`${o}s`,repeatCount:"indefinite",values:"50;34;78;23;56;23;34;76;80;54;21;50"})}),M.jsx("rect",{height:"30",rx:"3",width:"10",x:"45",children:M.jsx("animate",{attributeName:"height",begin:"0s",calcMode:"linear",dur:`${o*1.4}s`,repeatCount:"indefinite",values:"30;45;13;80;56;72;45;76;34;23;67;30"})})]})})});kA.displayName="Audio";kA.__ui__="Audio";var $A=We(({color:t,duration:e="3s",...n},r)=>M.jsx(go,{ref:r,stroke:t,viewBox:"0 0 58 58",...n,children:M.jsx("g",{fill:"none",fillRule:"evenodd",children:M.jsxs("g",{stroke:t,strokeWidth:"1.5",transform:"translate(2 1)",children:[M.jsx(Re.circle,{cx:"42.601",cy:"11.462",fill:t,fillOpacity:"1",r:"5",children:M.jsx("animate",{attributeName:"fill-opacity",begin:"0s",calcMode:"linear",dur:e,repeatCount:"indefinite",values:"1;0;0;0;0;0;0;0"})}),M.jsx(Re.circle,{cx:"49.063",cy:"27.063",fill:t,fillOpacity:"0",r:"5",children:M.jsx("animate",{attributeName:"fill-opacity",begin:"0s",calcMode:"linear",dur:e,repeatCount:"indefinite",values:"0;1;0;0;0;0;0;0"})}),M.jsx(Re.circle,{cx:"42.601",cy:"42.663",fill:t,fillOpacity:"0",r:"5",children:M.jsx("animate",{attributeName:"fill-opacity",begin:"0s",calcMode:"linear",dur:e,repeatCount:"indefinite",values:"0;0;1;0;0;0;0;0"})}),M.jsx(Re.circle,{cx:"27",cy:"49.125",fill:t,fillOpacity:"0",r:"5",children:M.jsx("animate",{attributeName:"fill-opacity",begin:"0s",calcMode:"linear",dur:e,repeatCount:"indefinite",values:"0;0;0;1;0;0;0;0"})}),M.jsx(Re.circle,{cx:"11.399",cy:"42.663",fill:t,fillOpacity:"0",r:"5",children:M.jsx("animate",{attributeName:"fill-opacity",begin:"0s",calcMode:"linear",dur:e,repeatCount:"indefinite",values:"0;0;0;0;1;0;0;0"})}),M.jsx(Re.circle,{cx:"4.938",cy:"27.063",fill:t,fillOpacity:"0",r:"5",children:M.jsx("animate",{attributeName:"fill-opacity",begin:"0s",calcMode:"linear",dur:e,repeatCount:"indefinite",values:"0;0;0;0;0;1;0;0"})}),M.jsx(Re.circle,{cx:"11.399",cy:"11.462",fill:t,fillOpacity:"0",r:"5",children:M.jsx("animate",{attributeName:"fill-opacity",begin:"0s",calcMode:"linear",dur:e,repeatCount:"indefinite",values:"0;0;0;0;0;0;1;0"})}),M.jsx(Re.circle,{cx:"27",cy:"5",fill:t,fillOpacity:"0",r:"5",children:M.jsx("animate",{attributeName:"fill-opacity",begin:"0s",calcMode:"linear",dur:e,repeatCount:"indefinite",values:"0;0;0;0;0;0;0;1"})})]})})}));$A.displayName="Circles";$A.__ui__="Circles";var CA=We(({color:t,duration:e="1s",...n},r)=>M.jsxs(go,{ref:r,fill:t,viewBox:"0 0 120 30",...n,children:[M.jsxs("circle",{cx:"15",cy:"15",r:"15",children:[M.jsx("animate",{attributeName:"r",begin:"0s",calcMode:"linear",dur:e,from:"15",repeatCount:"indefinite",to:"15",values:"15;9;15"}),M.jsx("animate",{attributeName:"fill-opacity",begin:"0s",calcMode:"linear",dur:e,from:"1",repeatCount:"indefinite",to:"1",values:"1;.5;1"})]}),M.jsxs("circle",{cx:"60",cy:"15",fillOpacity:"0.3",r:"9",children:[M.jsx("animate",{attributeName:"r",begin:"0s",calcMode:"linear",dur:e,from:"9",repeatCount:"indefinite",to:"9",values:"9;15;9"}),M.jsx("animate",{attributeName:"fill-opacity",begin:"0s",calcMode:"linear",dur:e,from:"0.5",repeatCount:"indefinite",to:"0.5",values:".5;1;.5"})]}),M.jsxs("circle",{cx:"105",cy:"15",r:"15",children:[M.jsx("animate",{attributeName:"r",begin:"0s",calcMode:"linear",dur:e,from:"15",repeatCount:"indefinite",to:"15",values:"15;9;15"}),M.jsx("animate",{attributeName:"fill-opacity",begin:"0s",calcMode:"linear",dur:e,from:"1",repeatCount:"indefinite",to:"1",values:"1;.5;1"})]})]}));CA.displayName="Dots";CA.__ui__="Dots";var TA=We(({color:t,duration:e="1s",...n},r)=>M.jsxs(go,{ref:r,fill:t,viewBox:"0 0 105 105",...n,children:[M.jsx("circle",{cx:"12.5",cy:"12.5",r:"12.5",children:M.jsx("animate",{attributeName:"fill-opacity",begin:"0s",calcMode:"linear",dur:e,repeatCount:"indefinite",values:"1;.2;1"})}),M.jsx("circle",{cx:"12.5",cy:"52.5",fillOpacity:".5",r:"12.5",children:M.jsx("animate",{attributeName:"fill-opacity",begin:"100ms",calcMode:"linear",dur:e,repeatCount:"indefinite",values:"1;.2;1"})}),M.jsx("circle",{cx:"52.5",cy:"12.5",r:"12.5",children:M.jsx("animate",{attributeName:"fill-opacity",begin:"300ms",calcMode:"linear",dur:e,repeatCount:"indefinite",values:"1;.2;1"})}),M.jsx("circle",{cx:"52.5",cy:"52.5",r:"12.5",children:M.jsx("animate",{attributeName:"fill-opacity",begin:"600ms",calcMode:"linear",dur:e,repeatCount:"indefinite",values:"1;.2;1"})}),M.jsx("circle",{cx:"92.5",cy:"12.5",r:"12.5",children:M.jsx("animate",{attributeName:"fill-opacity",begin:"800ms",calcMode:"linear",dur:e,repeatCount:"indefinite",values:"1;.2;1"})}),M.jsx("circle",{cx:"92.5",cy:"52.5",r:"12.5",children:M.jsx("animate",{attributeName:"fill-opacity",begin:"400ms",calcMode:"linear",dur:e,repeatCount:"indefinite",values:"1;.2;1"})}),M.jsx("circle",{cx:"12.5",cy:"92.5",r:"12.5",children:M.jsx("animate",{attributeName:"fill-opacity",begin:"700ms",calcMode:"linear",dur:e,repeatCount:"indefinite",values:"1;.2;1"})}),M.jsx("circle",{cx:"52.5",cy:"92.5",r:"12.5",children:M.jsx("animate",{attributeName:"fill-opacity",begin:"500ms",calcMode:"linear",dur:e,repeatCount:"indefinite",values:"1;.2;1"})}),M.jsx("circle",{cx:"92.5",cy:"92.5",r:"12.5",children:M.jsx("animate",{attributeName:"fill-opacity",begin:"200ms",calcMode:"linear",dur:e,repeatCount:"indefinite",values:"1;.2;1"})})]}));TA.displayName="Grid";TA.__ui__="Grid";var _A=We(({color:t,duration:e="1s",secondaryColor:n,...r},o)=>M.jsx(go,{ref:o,stroke:t,viewBox:"0 0 38 38",...r,children:M.jsx("g",{fill:"none",fillRule:"evenodd",children:M.jsxs("g",{strokeWidth:"2",transform:"translate(1 1)",children:[M.jsx("circle",{...n?{stroke:n}:{strokeOpacity:".5"},cx:"18",cy:"18",r:"18"}),M.jsx("path",{d:"M36 18c0-9.94-8.06-18-18-18",children:M.jsx("animateTransform",{type:"rotate",attributeName:"transform",dur:e,from:"0 18 18",repeatCount:"indefinite",to:"360 18 18"})})]})})}));_A.displayName="Oval";_A.__ui__="Oval";var nu=We((t,e)=>{const[{color:n,...r},{colorScheme:o,size:s="1em",variant:i="oval",...a}]=cl("Loading",t),{className:l,color:u,dur:c,duration:d,secondaryColor:f,...p}=Vo(a),h=N.useMemo(()=>{var m;return{className:Ye("ui-loading",l),size:s,color:"$color",...f?{secondaryColor:"$secondary-color"}:{},duration:d??c,__css:{...r,vars:B_(r.vars,[{name:"color",token:"colors",value:(m=u??n)!=null?m:`${o}.500`},{name:"secondary-color",token:"colors",value:f}])},...p}},[l,s,f,d,c,r,u,n,o,p]);switch(i){case"grid":return M.jsx(TA,{ref:e,...h});case"audio":return M.jsx(kA,{ref:e,...h});case"dots":return M.jsx(CA,{ref:e,...h});case"puff":return M.jsx(wA,{ref:e,...h});case"rings":return M.jsx(SA,{ref:e,...h});case"circles":return M.jsx($A,{ref:e,...h});default:return M.jsx(_A,{ref:e,...h})}});nu.displayName="Loading";nu.__ui__="Loading";var[MH,Jde]=ul({name:"PortalContext",strict:!1}),efe=({appendToParentPortal:t,children:e,containerRef:n})=>{const r=n.current,o=r??(typeof window<"u"?document.body:void 0),s=N.useMemo(()=>{if(!r)return;const{ownerDocument:a}=r,l=a.createElement("div");return l.className="ui-portal",l},[r]),[,i]=N.useState({});return vi(()=>i({}),[]),vi(()=>{if(!(!s||!o))return o.appendChild(s),()=>{o.removeChild(s)}},[s,o]),o&&s?$E.createPortal(M.jsx(MH,{value:t?s:null,children:e}),s):null},tfe=({appendToParentPortal:t,children:e})=>{const[n,r]=N.useState(null),o=N.useRef(null),[,s]=N.useState({});N.useEffect(()=>s({}),[]);const i=Jde();return vi(()=>{if(!n)return;const{ownerDocument:a}=n,l=t?i??a.body:a.body;o.current=a.createElement("div"),o.current.className="ui-portal",l.appendChild(o.current),s({});const u=o.current;return()=>{l.contains(u)&&l.removeChild(u)}},[n]),o.current?$E.createPortal(M.jsx(MH,{value:o.current,children:e}),o.current):M.jsx("span",{ref:a=>a?r(a):void 0})},py=({appendToParentPortal:t=!0,children:e,containerRef:n,isDisabled:r})=>r?e:n?M.jsx(efe,{containerRef:n,appendToParentPortal:t,children:e}):M.jsx(tfe,{appendToParentPortal:t,children:e});py.displayName="Portal";py.__ui__="Portal";var Zw=(t,e)=>{const n=Fa(t);N.useEffect(()=>{if(e==null)return;let r=null;return r=window.setTimeout(n,e),()=>{r&&window.clearTimeout(r)}},[e,n])},Gi=function(){return Gi=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Gi.apply(this,arguments)};function LH(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function nfe(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,s;r<o;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var Nb="right-scroll-bar-position",Eb="width-before-scroll-bar",rfe="with-scroll-bars-hidden",ofe="--removed-body-scroll-bar-size";function WC(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function sfe(t,e){var n=N.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=e,n.facade}var ife=typeof window<"u"?N.useLayoutEffect:N.useEffect,J3=new WeakMap;function afe(t,e){var n=sfe(null,function(r){return t.forEach(function(o){return WC(o,r)})});return ife(function(){var r=J3.get(n);if(r){var o=new Set(r),s=new Set(t),i=n.current;o.forEach(function(a){s.has(a)||WC(a,null)}),s.forEach(function(a){o.has(a)||WC(a,i)})}J3.set(n,t)},[t]),n}function lfe(t){return t}function ufe(t,e){e===void 0&&(e=lfe);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var i=e(s,r);return n.push(i),function(){n=n.filter(function(a){return a!==i})}},assignSyncMedium:function(s){for(r=!0;n.length;){var i=n;n=[],i.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var i=[];if(n.length){var a=n;n=[],a.forEach(s),i=n}var l=function(){var c=i;i=[],c.forEach(s)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(c){i.push(c),u()},filter:function(c){return i=i.filter(c),n}}}};return o}function cfe(t){t===void 0&&(t={});var e=ufe(null);return e.options=Gi({async:!0,ssr:!1},t),e}var zH=function(t){var e=t.sideCar,n=LH(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return N.createElement(r,Gi({},n))};zH.isSideCarExport=!0;function dfe(t,e){return t.useMedium(e),zH}var BH=cfe(),UC=function(){},Qw=N.forwardRef(function(t,e){var n=N.useRef(null),r=N.useState({onScrollCapture:UC,onWheelCapture:UC,onTouchMoveCapture:UC}),o=r[0],s=r[1],i=t.forwardProps,a=t.children,l=t.className,u=t.removeScrollBar,c=t.enabled,d=t.shards,f=t.sideCar,p=t.noIsolation,h=t.inert,m=t.allowPinchZoom,g=t.as,y=g===void 0?"div":g,v=t.gapMode,b=LH(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),x=f,w=afe([n,e]),S=Gi(Gi({},b),o);return N.createElement(N.Fragment,null,c&&N.createElement(x,{sideCar:BH,removeScrollBar:u,shards:d,noIsolation:p,inert:h,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:v}),i?N.cloneElement(N.Children.only(a),Gi(Gi({},S),{ref:w})):N.createElement(y,Gi({},S,{className:l,ref:w}),a))});Qw.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Qw.classNames={fullWidth:Eb,zeroRight:Nb};var ffe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function pfe(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=ffe();return e&&t.setAttribute("nonce",e),t}function hfe(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function mfe(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var gfe=function(){var t=0,e=null;return{add:function(n){t==0&&(e=pfe())&&(hfe(e,n),mfe(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},yfe=function(){var t=gfe();return function(e,n){N.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},jH=function(){var t=yfe(),e=function(n){var r=n.styles,o=n.dynamic;return t(r,o),null};return e},vfe={left:0,top:0,right:0,gap:0},GC=function(t){return parseInt(t||"",10)||0},bfe=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],o=e[t==="padding"?"paddingRight":"marginRight"];return[GC(n),GC(r),GC(o)]},xfe=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return vfe;var e=bfe(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},wfe=jH(),lf="data-scroll-locked",Sfe=function(t,e,n,r){var o=t.left,s=t.top,i=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(rfe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(lf,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Nb,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Eb,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Nb," .").concat(Nb,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Eb," .").concat(Eb,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(lf,`] {
    `).concat(ofe,": ").concat(a,`px;
  }
`)},ez=function(){var t=parseInt(document.body.getAttribute(lf)||"0",10);return isFinite(t)?t:0},kfe=function(){N.useEffect(function(){return document.body.setAttribute(lf,(ez()+1).toString()),function(){var t=ez()-1;t<=0?document.body.removeAttribute(lf):document.body.setAttribute(lf,t.toString())}},[])},$fe=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,o=r===void 0?"margin":r;kfe();var s=N.useMemo(function(){return xfe(o)},[o]);return N.createElement(wfe,{styles:Sfe(s,!e,o,n?"":"!important")})},sI=!1;if(typeof window<"u")try{var Iv=Object.defineProperty({},"passive",{get:function(){return sI=!0,!0}});window.addEventListener("test",Iv,Iv),window.removeEventListener("test",Iv,Iv)}catch{sI=!1}var gd=sI?{}:!1,Cfe=function(t){return t.tagName==="TEXTAREA"},VH=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!Cfe(t)&&n[e]==="visible")},Tfe=function(t){return VH(t,"overflowY")},_fe=function(t){return VH(t,"overflowX")},tz=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=WH(t,r);if(o){var s=UH(t,r),i=s[1],a=s[2];if(i>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Ife=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},Nfe=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},WH=function(t,e){return t==="v"?Tfe(e):_fe(e)},UH=function(t,e){return t==="v"?Ife(e):Nfe(e)},Efe=function(t,e){return t==="h"&&e==="rtl"?-1:1},Afe=function(t,e,n,r,o){var s=Efe(t,window.getComputedStyle(e).direction),i=s*r,a=n.target,l=e.contains(a),u=!1,c=i>0,d=0,f=0;do{var p=UH(t,a),h=p[0],m=p[1],g=p[2],y=m-g-s*h;(h||y)&&WH(t,a)&&(d+=y,f+=h),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(c&&(Math.abs(d)<1||!o)||!c&&(Math.abs(f)<1||!o))&&(u=!0),u},Nv=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},nz=function(t){return[t.deltaX,t.deltaY]},rz=function(t){return t&&"current"in t?t.current:t},Ofe=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Pfe=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Rfe=0,yd=[];function Dfe(t){var e=N.useRef([]),n=N.useRef([0,0]),r=N.useRef(),o=N.useState(Rfe++)[0],s=N.useState(jH)[0],i=N.useRef(t);N.useEffect(function(){i.current=t},[t]),N.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(o));var m=nfe([t.lockRef.current],(t.shards||[]).map(rz),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(o))})}}},[t.inert,t.lockRef.current,t.shards]);var a=N.useCallback(function(m,g){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!i.current.allowPinchZoom;var y=Nv(m),v=n.current,b="deltaX"in m?m.deltaX:v[0]-y[0],x="deltaY"in m?m.deltaY:v[1]-y[1],w,S=m.target,k=Math.abs(b)>Math.abs(x)?"h":"v";if("touches"in m&&k==="h"&&S.type==="range")return!1;var $=tz(k,S);if(!$)return!0;if($?w=k:(w=k==="v"?"h":"v",$=tz(k,S)),!$)return!1;if(!r.current&&"changedTouches"in m&&(b||x)&&(r.current=w),!w)return!0;var C=r.current||w;return Afe(C,g,m,C==="h"?b:x,!0)},[]),l=N.useCallback(function(m){var g=m;if(!(!yd.length||yd[yd.length-1]!==s)){var y="deltaY"in g?nz(g):Nv(g),v=e.current.filter(function(w){return w.name===g.type&&(w.target===g.target||g.target===w.shadowParent)&&Ofe(w.delta,y)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var b=(i.current.shards||[]).map(rz).filter(Boolean).filter(function(w){return w.contains(g.target)}),x=b.length>0?a(g,b[0]):!i.current.noIsolation;x&&g.cancelable&&g.preventDefault()}}},[]),u=N.useCallback(function(m,g,y,v){var b={name:m,delta:g,target:y,should:v,shadowParent:Ffe(y)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(x){return x!==b})},1)},[]),c=N.useCallback(function(m){n.current=Nv(m),r.current=void 0},[]),d=N.useCallback(function(m){u(m.type,nz(m),m.target,a(m,t.lockRef.current))},[]),f=N.useCallback(function(m){u(m.type,Nv(m),m.target,a(m,t.lockRef.current))},[]);N.useEffect(function(){return yd.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,gd),document.addEventListener("touchmove",l,gd),document.addEventListener("touchstart",c,gd),function(){yd=yd.filter(function(m){return m!==s}),document.removeEventListener("wheel",l,gd),document.removeEventListener("touchmove",l,gd),document.removeEventListener("touchstart",c,gd)}},[]);var p=t.removeScrollBar,h=t.inert;return N.createElement(N.Fragment,null,h?N.createElement(s,{styles:Pfe(o)}):null,p?N.createElement($fe,{gapMode:t.gapMode}):null)}function Ffe(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Mfe=dfe(BH,Dfe);var GH=N.forwardRef(function(t,e){return N.createElement(Qw,Gi({},t,{ref:e,sideCar:Mfe}))});GH.classNames=Qw.classNames;var HH=N.createContext({}),Ev=()=>({finish:N.createRef(),force:N.createRef(),isLoading:N.createRef(),start:N.createRef(),update:N.createRef()}),Av=t=>({finish:()=>{var e,n;return(n=(e=t.current.finish).current)==null?void 0:n.call(e)},force:e=>{var n,r;return(r=(n=t.current.force).current)==null?void 0:r.call(n,e)},isLoading:()=>{var e,n,r;return(r=(n=(e=t.current.isLoading).current)==null?void 0:n.call(e))!=null?r:!1},start:e=>{var n,r;return(r=(n=t.current.start).current)==null?void 0:r.call(n,e)},update:e=>{var n,r;return(r=(n=t.current.update).current)==null?void 0:r.call(n,e)}}),Lfe=t=>t+1,zfe=t=>t===0?t:t-1,qH=({background:t,children:e,custom:n,page:r,screen:o})=>{var s,i,a,l,u;const c=N.useRef(Ev()),d=N.useRef(Ev()),f=N.useRef(Ev()),p=N.useRef(Ev()),h=Av(c),m=Av(d),g=Av(f),y=Av(p),v={background:g,custom:y,page:m,screen:h};return M.jsxs(HH.Provider,{value:v,children:[e,M.jsx(Wh,{controlRefs:c,...o,component:(s=o==null?void 0:o.component)!=null?s:(b,x)=>M.jsx(EA,{ref:x,...b})}),M.jsx(Wh,{controlRefs:d,...r,component:(i=r==null?void 0:r.component)!=null?i:(b,x)=>M.jsx(AA,{ref:x,...b})}),M.jsx(Wh,{controlRefs:f,...t,blockScrollOnMount:(a=t==null?void 0:t.blockScrollOnMount)!=null?a:!1,component:(l=t==null?void 0:t.component)!=null?l:(b,x)=>M.jsx(OA,{ref:x,...b})}),M.jsx(Wh,{blockScrollOnMount:(u=t==null?void 0:t.blockScrollOnMount)!=null?u:!1,controlRefs:p,...n,component:n==null?void 0:n.component})]})};qH.__ui__="LoadingProvider";var Wh=({allowPinchZoom:t=!1,appendToParentPortal:e,blockScrollOnMount:n=!0,component:r,containerRef:o,controlRefs:s,duration:i=null,icon:a,initialState:l,text:u})=>{const c=N.useRef(!1),[{duration:d,loadingCount:f,message:p},h]=N.useState({duration:i,loadingCount:l?1:0,message:void 0}),{finish:m,force:g,isLoading:y,start:v,update:b}=N.useMemo(()=>({finish:()=>{c.current=!1,h(({loadingCount:w})=>({duration:i,loadingCount:zfe(w),message:void 0}))},force:({duration:w=i,loadingCount:S=0,message:k})=>{c.current=!!S,h({duration:w,loadingCount:S,message:k})},isLoading:()=>c.current,start:({duration:w=i,message:S}={})=>{c.current=!0,h(({loadingCount:k})=>({duration:w,loadingCount:Lfe(k),message:S}))},update:w=>h(S=>({...S,...w}))}),[i]);$d(s.current.isLoading,y),$d(s.current.start,v),$d(s.current.finish,m),$d(s.current.update,b),$d(s.current.force,g);const x={duration:d,icon:a,initialState:l,message:p,text:u,onFinish:m};return Qi(()=>{(l||yi(i))&&h({duration:i,loadingCount:l?1:0,message:void 0})},[l,i]),M.jsx(fy,{initial:!1,children:f?M.jsx(py,{appendToParentPortal:e,containerRef:o,children:M.jsx(GH,{allowPinchZoom:t,enabled:n,forwardProps:!0,children:M.jsx(IA,{component:r,...x})})}):null})};Wh.__ui__="Controller";var IA=We(({component:t,...e},n)=>typeof t=="function"?t(e,n):null);IA.displayName="Render";IA.__ui__="Render";var NA=({message:t,...e})=>t?m6(t)?t:M.jsx(Re.p,{...e,children:t}):null,Bfe=(t="fade")=>({animate:{opacity:1,scale:t==="scaleFade"?1:void 0,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:t==="scaleFade"?.95:void 0,transition:{duration:.4,ease:[.4,0,1,1]}},initial:{opacity:0,scale:t==="scaleFade"?.95:void 0}}),KH=(t="fill")=>({alignItems:"center",bg:t==="fill"?["fallback(white, #fbfbfb)","fallback(black, #141414)"]:"fallback(blackAlpha.600, rgba(0, 0, 0, 0.48))",bottom:0,display:"flex",h:"100dvh",justifyContent:"center",left:0,p:"fallback(4, 1rem)",position:"fixed",right:0,top:0,w:"100vw",zIndex:"fallback(beerus, 9999)"}),xx=(t,e="fade")=>({animate:"animate",exit:"exit",initial:t?!1:"initial",variants:Bfe(e)}),EA=Bw(We(({duration:t,icon:e,initialState:n,message:r,text:o,onFinish:s},i)=>{const a={alignItems:"center",display:"flex",flexDirection:"column",gap:"fallback(2, 0.5rem)",justifyContent:"center",maxW:"24rem"};return Zw(s,t),M.jsx(Za.div,{ref:i,className:"ui-loading-screen",...xx(n),__css:KH(),children:M.jsxs(Re.div,{__css:a,children:[M.jsx(nu,{fontSize:"6xl",...e}),M.jsx(NA,{lineClamp:3,message:r,...o})]})})}));EA.displayName="ScreenComponent";EA.__ui__="ScreenComponent";var AA=Bw(We(({duration:t,icon:e,initialState:n,message:r,text:o,onFinish:s},i)=>{const a={alignItems:"center",bg:["fallback(white, #fbfbfb)","fallback(black, #141414)"],boxShadow:["fallback(lg, 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05))","fallback(dark-lg, 0px 0px 0px 1px rgba(0, 0, 0, 0.1), 0px 5px 10px rgba(0, 0, 0, 0.2), 0px 15px 40px rgba(0, 0, 0, 0.4))"],display:"flex",flexDirection:"column",gap:"fallback(2, 0.5rem)",justifyContent:"center",maxW:"24rem",p:"fallback(4, 1rem)",rounded:"fallback(md, 0.375rem)"};return Zw(s,t),M.jsx(Za.div,{ref:i,className:"ui-loading-page",...xx(n),__css:KH("transparent"),children:M.jsxs(Za.div,{className:"ui-loading-page__inner",...xx(n,"scaleFade"),__css:a,children:[M.jsx(nu,{fontSize:"6xl",...e}),M.jsx(NA,{lineClamp:3,message:r,...o})]})})}));AA.displayName="PageComponent";AA.__ui__="PageComponent";var OA=Bw(We(({duration:t,icon:e,initialState:n,message:r,text:o,onFinish:s},i)=>{const a={alignItems:"center",bg:["fallback(white, #fbfbfb)","fallback(black, #141414)"],bottom:"fallback(4, 1rem)",boxShadow:["fallback(3xl, 0 25px 50px -12px rgba(0, 0, 0, 0.25), 0 -25px 50px -12px rgba(0, 0, 0, 0.25))","fallback(dark-lg, 0px 0px 0px 1px rgba(0, 0, 0, 0.1), 0px 5px 10px rgba(0, 0, 0, 0.2), 0px 15px 40px rgba(0, 0, 0, 0.4))"],display:"flex",gap:"fallback(2, 0.5rem)",justifyContent:"center",maxW:"20rem",p:"fallback(2, 0.5rem)",position:"fixed",right:"fallback(4, 1rem)",rounded:"fallback(md, 0.375rem)",zIndex:"fallback(beerus, 9999)"};return Zw(s,t),M.jsxs(Za.div,{ref:i,className:"ui-loading-background",...xx(n,"scaleFade"),__css:a,children:[M.jsx(nu,{fontSize:"xl",...e}),M.jsx(NA,{fontSize:"sm",lineClamp:1,message:r,...o})]})}));OA.displayName="BackgroundComponent";OA.__ui__="BackgroundComponent";var jfe=()=>{const{background:t,custom:e,page:n,screen:r}=N.useContext(HH);return N.useMemo(()=>({background:t,custom:e,page:n,screen:r}),[t,e,n,r])};/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vfe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),XH=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Wfe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ufe=N.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:s,iconNode:i,...a},l)=>N.createElement("svg",{ref:l,...Wfe,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:XH("lucide",o),...a},[...i.map(([u,c])=>N.createElement(u,c)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jw=(t,e)=>{const n=N.forwardRef(({className:r,...o},s)=>N.createElement(Ufe,{ref:s,iconNode:e,className:XH(`lucide-${Vfe(t)}`,r),...o}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gfe=Jw("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hfe=Jw("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qfe=Jw("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kfe=Jw("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var oz=We((t,e)=>M.jsx(go,{ref:e,as:Kfe,...t})),Xfe=We((t,e)=>M.jsx(go,{ref:e,as:qfe,...t})),Yfe=We((t,e)=>M.jsx(go,{ref:e,as:Hfe,...t})),Zfe=We((t,e)=>M.jsx(go,{ref:e,as:Gfe,...t})),YH={error:{colorScheme:"danger",icon:oz},info:{colorScheme:"info",icon:Yfe},loading:{colorScheme:"primary",icon:nu},success:{colorScheme:"success",icon:Zfe},warning:{colorScheme:"warning",icon:oz}},[Qfe,PA]=ul({name:"AlertStylesContext",errorMessage:`useAlert returned is 'undefined'. Seems you forgot to wrap the components in "<Alert />" `}),Jfe=(t,e)=>{var n,r;return(r=(n=e==null?void 0:e[t])==null?void 0:n.colorScheme)!=null?r:YH[t].colorScheme},epe=(t,e)=>{var n,r;return(r=(n=e==null?void 0:e[t])==null?void 0:n.icon)!=null?r:YH[t].icon},RA=We(({colorScheme:t,status:e="info",...n},r)=>{var o,s,i;const{theme:a}=iy(),l=(i=(s=(o=a.__config)==null?void 0:o.alert)==null?void 0:s.statuses)!=null?i:{};t??(t=Jfe(e,l));const[u,c]=ay("Alert",{...n,colorScheme:t}),{className:d,children:f,...p}=Vo(c),h={alignItems:"center",display:"flex",overflow:"hidden",position:"relative",w:"100%",...u.container};return M.jsx(Qfe,{value:{status:e,styles:u},children:M.jsx(Re.div,{ref:r,className:Ye("ui-alert",d),role:"alert",__css:h,...p,children:f})})});RA.displayName="Alert";RA.__ui__="Alert";var DA=({className:t,variant:e="oval",children:n,...r})=>{var o,s,i;const{status:a,styles:l}=PA(),{theme:u}=iy(),c=(i=(s=(o=u.__config)==null?void 0:o.alert)==null?void 0:s.statuses)!=null?i:{},d=epe(a,c),f={...l.icon,...a==="loading"?l.loading:{}};return M.jsx(Re.span,{className:Ye("ui-alert__icon",t),display:"inherit",__css:f,...r,children:n||M.jsx(d,{...a==="loading"?{variant:e,color:"currentcolor"}:{boxSize:"100%"}})})};DA.displayName="AlertIcon";DA.__ui__="AlertIcon";var FA=We(({className:t,...e},n)=>{const{styles:r}=PA(),o={display:"block",...r.title};return M.jsx(Re.p,{ref:n,className:Ye("ui-alert__title",t),__css:o,...e})});FA.displayName="AlertTitle";FA.__ui__="AlertTitle";var MA=We(({className:t,...e},n)=>{const{styles:r}=PA(),o={...r.description};return M.jsx(Re.span,{ref:n,className:Ye("ui-alert__desc",t),__css:o,...e})});MA.displayName="AlertDescription";MA.__ui__="AlertDescription";var{DescendantsContextProvider:tpe,useDescendant:npe,useDescendants:rpe,useDescendantsContext:LA}=Hoe(),[ope,yo]=ul({name:"AutocompleteContext",errorMessage:`useAutocompleteContext returned is 'undefined'. Seems you forgot to wrap the components in "<Autocomplete />" or "<MultiAutocomplete />"`}),spe=({label:t,...e})=>{const{omitSelectedValues:n,value:r}=yo(),o=LA(),s=N.useRef(null),i=N.useId(),a=o.values(),c=(qe(r)&&n?o.values(({node:v})=>{var b;return r.includes((b=v.dataset.value)!=null?b:"")}):[]).map(({index:v})=>v),f=!a.filter(({index:v,node:b})=>{var x;return((x=b.parentElement)==null?void 0:x.dataset.label)===t&&!c.includes(v)&&"target"in b.dataset}).length,[p,h]=v6(e,X6),m=N.useCallback((v={},b=null)=>{var x;const w={border:"0px",clip:"rect(0px, 0px, 0px, 0px)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0px",position:"absolute",whiteSpace:"nowrap",width:"1px"};return{ref:b,"aria-labelledby":(x=s.current)==null?void 0:x.id,role:"group",...v,...p,style:f?w:void 0}},[p,f]),g=N.useCallback(({id:v,...b}={},x=null)=>({id:v??i,ref:uo(x,s),role:"presentation",...b}),[i]),y=N.useCallback((v={},b=null)=>({ref:b,...v,...h,"data-label":t}),[h,t]);return{label:t,getContainerProps:m,getGroupProps:y,getLabelProps:g}},zA=We(({className:t,children:e,color:n,h:r,height:o,minH:s,minHeight:i,labelProps:a,...l},u)=>{const{styles:c}=yo(),{label:d,getContainerProps:f,getGroupProps:p,getLabelProps:h}=spe(l);return r??(r=o),s??(s=i),M.jsxs(Re.section,{className:Ye("ui-autocomplete__item","ui-autocomplete__item--group",t),__css:{color:n,h:"fit-content",w:"100%"},...f(),children:[M.jsx(Re.header,{className:"ui-autocomplete__item__group-label",lineClamp:1,__css:c.groupLabel,...h(a),children:d}),M.jsx(Re.div,{...p({},u),className:"ui-autocomplete__item__group",__css:{h:r,minH:s,...c.group},children:e})]})});zA.displayName="AutocompleteOptionGroup";zA.__ui__="AutocompleteOptionGroup";var ipe=t=>{var e;return _E(t)&&!!((e=t.getAttribute("role"))!=null&&e.startsWith("option"))},ape=t=>{var e,n;const{closeOnSelect:r,focusedIndex:o,inputRef:s,omitSelectedValues:i,setFocusedIndex:a,value:l,optionProps:u,onChange:c,onClose:d,onFocusNext:f}=yo(),p=N.useId(),h=N.useRef(null);let{id:m,children:g,closeOnSelect:y,icon:v,isDisabled:b,isFocusable:x,value:w,...S}={...u,...t};const k=!!b&&!x,{descendants:$,index:C,register:I}=npe({disabled:k}),O=$.values().slice(0,C),R=qe(l),z=O.some(({node:G})=>G.dataset.value===(w??"")),L=!z&&(R?l.includes(w??""):(w??"")===l),B="target"in((n=(e=h.current)==null?void 0:e.dataset)!=null?n:{}),D=C===o;m??(m=p),Ms(w)&&(ll(g)||yi(g)?w=g.toString():console.warn(`${R?"MultiAutocomplete":"Autocomplete"}: Cannot infer the option value of complex children. Pass a \`value\` prop or use a plain string as children to <Option>.`));const F=N.useCallback(G=>{if(G.stopPropagation(),b||!ipe(G.currentTarget)){s.current&&s.current.focus();return}z||a(C),c(w??""),s.current&&s.current.focus(),(y??r)&&d(),i&&f(C)},[z,f,i,b,w,a,C,c,y,r,d,s]),j=N.useCallback((G={},Y=null)=>{const X=!B||i&&L,ee={border:"0px",clip:"rect(0px, 0px, 0px, 0px)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0px",position:"absolute",whiteSpace:"nowrap",width:"1px"};return{ref:uo(h,Y,I),role:"option",...S,...G,id:m,style:X?ee:void 0,"aria-disabled":Ea(b),"aria-hidden":Ea(X),"aria-selected":L,"data-disabled":nr(b),"data-duplicated":nr(z),"data-focus":nr(D),"data-target":nr(!0),"data-value":w??"",tabIndex:-1,onClick:Ot(S.onClick,G.onClick,F)}},[m,z,w,S,b,D,L,B,i,F,I]);return{children:g,customIcon:v,isFocused:D,isSelected:L,isTarget:B,omitSelectedValues:i,getOptionProps:j}},lpe=()=>{const{isHit:t,onCreate:e}=yo();return{getCreateProps:N.useCallback((r={},o=null)=>({ref:o,role:"option",...r,style:t?{border:"0px",clip:"rect(0px, 0px, 0px, 0px)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0px",position:"absolute",whiteSpace:"nowrap",width:"1px"}:void 0,"aria-hidden":Ea(t),"data-focus":nr(!t),tabIndex:-1,onClick:Ot(r.onClick,e)}),[t,e])}},upe=()=>{const{isEmpty:t,isHit:e}=yo();return{getEmptyProps:N.useCallback((r={},o=null)=>{const s=e&&!t;return{ref:o,role:"presentation",...r,style:s?{border:"0px",clip:"rect(0px, 0px, 0px, 0px)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0px",position:"absolute",whiteSpace:"nowrap",width:"1px"}:void 0,"aria-hidden":Ea(s),tabIndex:-1}},[e,t])}},BA=(t,e,n,r)=>{const o=Fa(n);return N.useEffect(()=>{const s=typeof t=="function"?t():t??document;if(s)return s.addEventListener(e,o,r),()=>{s.removeEventListener(e,o,r)}},[e,t,r,o,n]),()=>{const s=typeof t=="function"?t():t??document;s==null||s.removeEventListener(e,o,r)}},cpe=()=>{const t=N.useRef(new Map),e=t.current,n=N.useCallback((o,s,i,a)=>{t.current.set(i,{el:o,event:s,options:a}),o.addEventListener(s,i,a)},[]),r=N.useCallback((o,s,i,a)=>{o.removeEventListener(s,i,a),t.current.delete(i)},[]);return N.useEffect(()=>()=>{e.forEach(({el:o,event:s,options:i},a)=>r(o,s,a,i))},[r,e]),{add:n,remove:r}},HC=t=>{const{isContentEditable:e,tagName:n}=t.target;return n!=="INPUT"&&n!=="TEXTAREA"&&!e},dpe=({ref:t,clickOnEnter:e=!0,clickOnSpace:n=!0,disableTouchBehavior:r=!0,focusOnClick:o=!0,isDisabled:s,isFocusable:i,tabIndex:a,onClick:l,onKeyDown:u,onKeyUp:c,onMouseDown:d,onMouseLeave:f,onMouseOver:p,onMouseUp:h,...m}={})=>{const[g,y]=N.useState(!0),[v,b]=N.useState(!1),x=cpe(),w=g?a:a||0,S=s&&!i,k=D=>{D&&D.tagName!=="BUTTON"&&y(!1)},$=N.useCallback(D=>{if(s){D.stopPropagation(),D.preventDefault();return}o&&D.currentTarget.focus(),l==null||l(D)},[s,o,l]),C=N.useCallback(D=>{v&&HC(D)&&(D.preventDefault(),D.stopPropagation(),b(!1),x.remove(document,"keyup",C,!1))},[v,x]),I=N.useCallback(D=>{u==null||u(D),!(s||D.defaultPrevented||D.metaKey)&&(!HC(D.nativeEvent)||g||(n&&D.key===" "&&(D.preventDefault(),b(!0)),e&&D.key==="Enter"&&(D.preventDefault(),D.currentTarget.click()),x.add(document,"keyup",C,!1)))},[s,g,u,e,n,x,C]),E=N.useCallback(D=>{c==null||c(D),!(s||D.defaultPrevented||D.metaKey)&&(!HC(D.nativeEvent)||g||n&&D.key===" "&&(D.preventDefault(),b(!1),D.currentTarget.click()))},[n,g,s,c]),O=N.useCallback(D=>{D.button===0&&(b(!1),x.remove(document,"mouseup",O,!1))},[x]),R=N.useCallback(D=>{if(D.button===0){if(s){D.stopPropagation(),D.preventDefault();return}g||b(!0),D.currentTarget.focus({preventScroll:!0}),x.add(document,"mouseup",O,!1),d==null||d(D)}},[s,g,d,x,O]),z=N.useCallback(D=>{D.button===0&&(g||b(!1),h==null||h(D))},[h,g]),L=N.useCallback(D=>{if(s){D.preventDefault();return}r&&dL()||p==null||p(D)},[s,p,r]),B=N.useCallback(D=>{v&&(D.preventDefault(),b(!1)),!(r&&dL())&&(f==null||f(D))},[v,f,r]);return g?{...m,ref:uo(t,k),type:"button","aria-disabled":S?void 0:s,disabled:S,onClick:$,onKeyDown:u,onKeyUp:c,onMouseDown:d,onMouseLeave:f,onMouseOver:p,onMouseUp:h}:{...m,ref:uo(t,k),"aria-disabled":s?"true":void 0,"data-active":nr(v),role:"button",tabIndex:S?void 0:w,onClick:$,onKeyDown:I,onKeyUp:E,onMouseDown:R,onMouseLeave:B,onMouseOver:L,onMouseUp:z}},eS=We(({className:t,children:e,__css:n,...r},o)=>{const{styles:s}=yo(),i={alignItems:"center",cursor:"pointer",display:"inline-flex",justifyContent:"center",pointerEvents:"none",position:"absolute",top:"50%",transform:"translateY(-50%)",...s.icon,...n},l=kp(e).map(u=>N.cloneElement(u,{style:{color:"currentColor",maxHeight:"1em",maxWidth:"1em"},"aria-hidden":!0,focusable:!1}));return M.jsx(Re.div,{ref:o,className:Ye("ui-autocomplete__icon",t),__css:i,...r,children:m6(e)?l:M.jsx(VE,{})})});eS.displayName="AutocompleteIcon";eS.__ui__="AutocompleteIcon";var jA=({className:t,children:e,...n})=>{const r=N.useRef(null),{styles:o}=yo(),s=n.disabled,i=dpe({ref:r,isDisabled:s,...n});return M.jsx(eS,{className:Ye("ui-autocomplete__icon--clear",t),"aria-label":"Clear value",__css:o.clearIcon,...i,children:e??M.jsx(Ww,{h:"0.5em",w:"0.5em"})})};jA.displayName="AutocompleteClearIcon";jA.__ui__="AutocompleteClearIcon";var hy=We(({className:t,...e},n)=>{const{styles:r}=yo(),o={alignItems:"center",display:"inline-flex",flexShrink:0,fontSize:"0.85em",justifyContent:"center",...r.itemIcon};return M.jsx(Re.span,{ref:n,className:Ye("ui-autocomplete__item__icon",t),__css:o,...e})});hy.displayName="AutocompleteItemIcon";hy.__ui__="AutocompleteItemIcon";var wx=We(({className:t,icon:e,...n},r)=>{const{styles:o}=yo(),{children:s,customIcon:i,isSelected:a,getOptionProps:l}=ape(n);e??(e=i);const u={alignItems:"center",color:"inherit",display:"flex",flex:"0 0 auto",gap:"0.75rem",outline:0,textAlign:"start",textDecoration:"none",userSelect:"none",width:"100%",...o.item};return M.jsxs(Re.div,{className:Ye("ui-autocomplete__item",t),__css:u,...l({},r),children:[e!==null?M.jsx(hy,{opacity:a?1:0,children:e||M.jsx(VA,{})}):null,M.jsx(Re.span,{style:{flex:1},"data-label":!0,children:s})]})});wx.displayName="AutocompleteOption";wx.__ui__="AutocompleteOption";var VA=()=>M.jsx("svg",{height:"1em",viewBox:"0 0 14 14",width:"1em",children:M.jsx("polygon",{fill:"currentColor",points:"5.5 11.9993304 14 3.49933039 12.5 2 5.5 8.99933039 1.5 4.9968652 0 6.49933039"})});VA.displayName="AutocompleteCheckIcon";VA.__ui__="AutocompleteCheckIcon";var[fpe,tS]=ul({name:"FormControlContext",strict:!1}),[ppe,nS]=ul({name:"FormControlStyleContext",strict:!1}),ZH=We(({id:t,...e},n)=>{const[r,o]=ay("FormControl",e),{className:s,children:i,errorMessage:a,helperMessage:l,isDisabled:u=!1,isInvalid:c=!1,isReadOnly:d=!1,isReplace:f=!0,isRequired:p=!1,label:h,optionalIndicator:m,requiredIndicator:g,errorMessageProps:y,helperMessageProps:v,labelProps:b,...x}=Vo(o),w=N.useId(),S=N.useId();t??(t=w);const[k,$]=N.useState(!1),C=kp(i),I=$C(C,Sx),E=$C(C,$x),O=$C(C,Cx),R=!!I,z=!!E,L=!!O,B={...r.container};return M.jsx(fpe,{value:{id:t,isDisabled:u,isFocused:k,isInvalid:c,isReadOnly:d,isReplace:f,isRequired:p,labelId:S,onBlur:()=>$(!1),onFocus:()=>$(!0)},children:M.jsx(ppe,{value:r,children:M.jsxs(Re.div,{ref:n,className:Ye("ui-form__control",s),"data-disabled":nr(u),"data-focus":nr(k),"data-invalid":nr(c),"data-readonly":nr(d),__css:B,...x,children:[!R&&h?M.jsx(Sx,{optionalIndicator:m,requiredIndicator:g,...b,children:h}):null,i,!z&&l?M.jsx($x,{...v,children:l}):null,!L&&a?M.jsx(Cx,{...y,children:a}):null]})})})});ZH.displayName="FormControl";ZH.__ui__="FormControl";var hpe=({id:t,disabled:e,isDisabled:n,isInvalid:r,isReadOnly:o,isRequired:s,readOnly:i,required:a,onBlur:l,onFocus:u,...c})=>{const d=tS();return e??(e=n??(d==null?void 0:d.isDisabled)),a??(a=s??(d==null?void 0:d.isRequired)),i??(i=o??(d==null?void 0:d.isReadOnly)),r??(r=d==null?void 0:d.isInvalid),{id:t??(d==null?void 0:d.id),"aria-disabled":Ea(e),"aria-invalid":Ea(r),"aria-readonly":Ea(i),"aria-required":Ea(a),"data-readonly":nr(i),disabled:e,readOnly:i,required:a,onBlur:Ot(d==null?void 0:d.onBlur,l),onFocus:Ot(d==null?void 0:d.onFocus,u),...e||i?{_active:{},_focus:{},_focusVisible:{},_hover:{},_invalid:{}}:{},...c}},mpe=["disabled","required","readOnly","aria-disabled","aria-readonly","aria-required","aria-invalid","data-readonly","onFocus","onBlur","_hover","_active","_focus","_invalid","_focusVisible"],Sx=We(({id:t,htmlFor:e,className:n,children:r,isRequired:o,optionalIndicator:s=null,requiredIndicator:i=null,...a},l)=>{var u,c;const{id:d,isDisabled:f,isFocused:p,isInvalid:h,isReadOnly:m,isRequired:g,labelId:y}=(u=tS())!=null?u:{},v=(c=nS())!=null?c:{};t??(t=y),o??(o=g);const b={display:"block",pointerEvents:m?"none":void 0,...v.label};return M.jsxs(Re.label,{id:t,ref:l,htmlFor:e??d,className:Ye("ui-form__label",n),style:{cursor:f?"not-allowed":void 0},"data-disabled":nr(f),"data-focus":nr(p),"data-invalid":nr(h),"data-readonly":nr(m),__css:b,...a,children:[r,o?i?M.jsx(kx,{children:i}):M.jsx(kx,{}):s]})});Sx.displayName="Label";Sx.__ui__="Label";var kx=We(({className:t,children:e,...n},r)=>{var o;const i={...((o=nS())!=null?o:{}).requiredIndicator};return N.isValidElement(e)?e:M.jsx(Re.span,{ref:r,className:Ye("ui-form__required-indicator",t),"aria-hidden":!0,role:"presentation",__css:i,...n,children:e??M.jsx(M.Fragment,{children:"*"})})});kx.displayName="RequiredIndicator";kx.__ui__="RequiredIndicator";var $x=We(({className:t,...e},n)=>{var r,o;const{id:s,isInvalid:i,isReplace:a}=(r=tS())!=null?r:{},l=(o=nS())!=null?o:{};if(a&&i)return null;const u={...l.helperMessage};return M.jsx(Re.span,{ref:n,className:Ye("ui-form__helper-message",t),"aria-describedby":s,__css:u,...e})});$x.displayName="HelperMessage";$x.__ui__="HelperMessage";var Cx=We(({className:t,...e},n)=>{var r,o;const{isInvalid:s}=(r=tS())!=null?r:{},i=(o=nS())!=null?o:{};if(!s)return null;const a={...i.errorMessage};return M.jsx(Re.span,{ref:n,className:Ye("ui-form__error-message",t),"aria-live":"polite",__css:a,...e})});Cx.displayName="ErrorMessage";Cx.__ui__="ErrorMessage";var QH=(t={})=>{var e,n;const[r,o]=N.useState((e=t.defaultIsOpen)!=null?e:!1),s=N.useRef((n=t.timing)!=null?n:"after"),i=Fa(t.onOpen),a=Fa(t.onClose),l=t.isOpen!==void 0,u=t.isOpen!==void 0?t.isOpen:r,c=N.useCallback(async(...p)=>{s.current==="before"&&await i(...p),l||o(!0),s.current==="after"&&await i(...p)},[l,i,s]),d=N.useCallback(async(...p)=>{s.current==="before"&&await a(...p),l||o(!1),s.current==="after"&&await a(...p)},[l,a,s]),f=N.useCallback(async(...p)=>u?d(...p):c(...p),[u,c,d]);return{isOpen:u,onClose:d,onOpen:c,onToggle:f}},gpe=({enabled:t,isSelected:e,mode:n="unmount",wasSelected:r})=>!!(!t||e||n==="keepMounted"&&r),ype=({ref:t,enabled:e=!0,handler:n})=>{const r=Fa(n),o=N.useRef({ignoreEmulatedMouseEvents:!1,isPointerDown:!1});N.useEffect(()=>{if(!e)return;const s=u=>{qC(u,t)&&(o.current.isPointerDown=!0)},i=u=>{if(o.current.ignoreEmulatedMouseEvents){o.current.ignoreEmulatedMouseEvents=!1;return}o.current.isPointerDown&&n&&qC(u,t)&&(o.current.isPointerDown=!1,r(u))},a=u=>{o.current.ignoreEmulatedMouseEvents=!0,n&&o.current.isPointerDown&&qC(u,t)&&(o.current.isPointerDown=!1,r(u))},l=Tw(t.current);return l.addEventListener("mousedown",s,!0),l.addEventListener("mouseup",i,!0),l.addEventListener("touchstart",s,!0),l.addEventListener("touchend",a,!0),()=>{l.removeEventListener("mousedown",s,!0),l.removeEventListener("mouseup",i,!0),l.removeEventListener("touchstart",s,!0),l.removeEventListener("touchend",a,!0)}},[n,t,r,o,e])},qC=(t,e)=>{var n;const r=t.target;return"button"in t&&t.button>0||r&&!Tw(r).contains(r)?!1:!((n=e.current)!=null&&n.contains(r))},sz={"":"","":"","":"","":"","":"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},vpe=t=>{t=t.replace(/[-]/g,n=>String.fromCharCode(n.charCodeAt(0)-65248));const e=new RegExp("("+Object.keys(sz).join("|")+")","g");return t=t.replace(e,n=>sz[n]).replace(//g,"").replace(//g,""),t=t.toUpperCase(),t},bpe=t=>{const e=n=>n.map(r=>{var o;const{isDisabled:s,isFocusable:i}=r;if(!(s&&!i))return"items"in r?e((o=r.items)!=null?o:[]):r}).filter(Boolean);return e(t).flat(1/0)},xpe=t=>{const{allowCreate:e=!1,allowFree:n=!1,animation:r,boundary:o,children:s,closeDelay:i,closeOnBlur:a=!0,closeOnEsc:l=!0,closeOnSelect:u=!0,defaultIsOpen:c,defaultValue:d,duration:f=.2,emptyMessage:p="No results found",eventListeners:h,flip:m,format:g=vpe,gutter:y,insertPositionItem:v="first",isLazy:b,isOpen:x,items:w,lazyBehavior:S,matchWidth:k=!0,maxSelectValues:$,modifiers:C,offset:I,omitSelectedValues:E=!1,openDelay:O,placeholder:R,placement:z="bottom-start",preventOverflow:L,strategy:B,value:D,optionProps:F,onChange:j,onClose:G,onCreate:Y,onKeyDown:X,onOpen:ee,onSearch:ie,...se}=hpe(t),{"aria-readonly":de,onFocus:me,...le}=ix(se,mpe),[oe,fe]=v6(se,X6),{id:pe}=se,Q=rpe(),_e=N.useRef(null),Ee=N.useRef(null),De=N.useRef(null),Pe=N.useRef(new Set([])),He=N.useRef(!1),st=N.useRef(void 0),[nn,gt]=N.useState(w?JSON.parse(JSON.stringify(w)):void 0),[it,At]=Yde({defaultValue:d,value:D,onChange:j}),[ur,$n]=N.useState(void 0),[It,cr]=N.useState(""),[On,$t]=N.useState(-1),[qo,pd]=N.useState(!1),[Ei,Z0]=N.useState(!0),{isOpen:wt,onClose:vo,onOpen:Q0}=QH({defaultIsOpen:c,isOpen:x,onClose:G,onOpen:ee}),sh=On>-1,H$=On===-2&&e,Yt=qe(it),J0=Yt?!it.length:!it,[ih,VF]=N.useMemo(()=>qe(v)?v:[v,"first"],[v]);e&&!Ms(s)&&console.warn(`${Yt?"MultiAutocomplete":"Autocomplete"}: ${Yt?"MultiAutocomplete":"Autocomplete"} internally prefers 'children'. If 'allowCreate' is true, it will not be reflected correctly. If want to reflect, please set 'items' in props.`);const va=Q.enabledValues(({node:$e})=>{var Ke;return Yt&&it.includes((Ke=$e.dataset.value)!=null?Ke:"")}).map(({index:$e})=>$e),Ai=Q.enabledValues(({index:$e,node:Ke})=>"target"in Ke.dataset&&!va.includes($e)),dte=kp(s),q$=N.useMemo(()=>nn==null?void 0:nn.map(($e,Ke)=>{if("value"in $e){const{label:Ve,value:Le,...Lt}=$e;return M.jsx(wx,{value:Le,...Lt,children:Ve},Ke)}else if("items"in $e){const{items:Ve=[],label:Le,...Lt}=$e;return M.jsx(zA,{label:Le,...Lt,children:Ve.map(({label:Ht,value:Yn,...xl},lh)=>M.jsx(wx,{value:Yn,...xl,children:Ht},lh))},Ke)}}).filter(Boolean),[nn]),Mu=!dte.length&&!(q$!=null&&q$.length),bo=N.useCallback(()=>{le.disabled||le.readOnly||!e&&(Mu||qo)||(Q0(),De.current&&De.current.focus())},[e,le,qo,Mu,Q0]),hd=N.useCallback(()=>{const $e=setTimeout(()=>{var Ke;if(Mu||qo)return;const Ve=Q.enabledFirstValue(({node:Le})=>"target"in Le.dataset);if(Ve)if(!Yt||!E)$t(Ve.index);else if(va.includes(Ve.index)){const Le=Ai[0];$t((Ke=Le==null?void 0:Le.index)!=null?Ke:-1)}else $t(Ve.index)});Pe.current.add($e)},[Q,Ai,qo,Mu,Yt,E,va]),ev=N.useCallback(()=>{const $e=setTimeout(()=>{var Ke;if(Mu||qo)return;const Ve=Q.enabledLastValue(({node:Le})=>"target"in Le.dataset);if(Ve)if(!Yt||!E)$t(Ve.index);else if(va.includes(Ve.index)){const Le=Ai.reverse()[0];$t((Ke=Le==null?void 0:Le.index)!=null?Ke:-1)}else $t(Ve.index)});Pe.current.add($e)},[Q,Ai,qo,Mu,Yt,E,va]),K$=N.useCallback(()=>{const $e=setTimeout(()=>{const Ve=Q.enabledValues().find(({node:Le})=>{var Lt;return Yt?it.includes((Lt=Le.dataset.value)!=null?Lt:""):Le.dataset.value===it});Ve&&$t(Ve.index)});Pe.current.add($e)},[Q,Yt,it]),ah=N.useCallback(($e=On)=>{const Ke=setTimeout(()=>{var Ve,Le;const Lt=Q.enabledNextValue($e,({node:Ht})=>"target"in Ht.dataset);if(Lt)if(!Yt||!E)$t(Lt.index);else if(va.includes(Lt.index)){const Ht=(Ve=Ai.find(({index:Yn})=>Lt.index<Yn))!=null?Ve:Ai[0];$t((Le=Ht==null?void 0:Ht.index)!=null?Le:-1)}else $t(Lt.index)});Pe.current.add(Ke)},[Q,Ai,On,Yt,E,va]),X$=N.useCallback(($e=On)=>{const Ke=setTimeout(()=>{var Ve,Le;const Lt=Q.enabledPrevValue($e,({node:Ht})=>"target"in Ht.dataset);if(Lt)if(!Yt||!E)$t(Lt.index);else if(va.includes(Lt.index)){const Ht=(Ve=Ai.reverse().find(({index:Yn})=>Yn<Lt.index))!=null?Ve:Ai[0];$t((Le=Ht==null?void 0:Ht.index)!=null?Le:-1)}else $t(Lt.index)});Pe.current.add(Ke)},[Q,Ai,On,Yt,E,va]),bl=J0||E?hd:K$,WF=J0||E?ev:K$,Y$=N.useCallback($e=>{const Ke=Q.values();let Ve=!1,Le=!1;Ke.forEach(({index:Lt,node:Ht})=>{var Yn;if(g((Yn=Ht.textContent)!=null?Yn:"").includes($e)){Ve=!0;const xl="disabled"in Ht.dataset;Ht.dataset.target="",!Le&&!xl&&(Le=!0,$t(Lt))}else delete Ht.dataset.target}),Z0(Ve)},[Q,g]),ba=N.useCallback(($e=!0)=>{Q.values().forEach(({node:Ve})=>{Ve.dataset.target=""}),$e&&hd(),Z0(!0)},[Q,hd]),fte=N.useCallback($e=>{const Ke=Q.values();if(!Ke.length)return;const Le=(qe($e)?$e:[$e]).map(Lt=>{var Ht,Yn;const{node:xl}=(Ht=Ke.find(({node:lh})=>lh.dataset.value===Lt))!=null?Ht:{};if(xl){const{textContent:lh}=(Yn=Array.from(xl.children).find(xte=>xte.getAttribute("data-label")!==null))!=null?Yn:{};return lh}else return n?Lt:void 0}).filter(Lt=>!Ms(Lt));$n(Yt?Le:Le[0])},[n,Q,Yt]),hs=N.useCallback(($e,Ke=!0)=>{At(Ve=>{let Le;return qe(Ve)?Ve.includes($e)?Le=Ve.filter(Ht=>Ht!==$e):Le=[...Ve,$e]:Le=$e,st.current=Le,Le}),cr(""),Yt&&Ke&&ba(!1)},[Yt,ba,At]),Z$=N.useCallback(()=>{var $e,Ke;let Ve=Q.value(On);if("disabled"in(($e=Ve==null?void 0:Ve.node.dataset)!=null?$e:{})&&(Ve=void 0),!Ve)return;const Le=(Ke=Ve.node.dataset.value)!=null?Ke:"";hs(Le),u&&vo(),E&&ah()},[u,Q,On,E,hs,vo,ah]),pte=N.useCallback($e=>{wt||bo(),ie==null||ie($e);const Ke=$e.target.value,Ve=g(Ke);Ve?Y$(Ve):ba(),cr(Ke)},[wt,bo,g,ie,Y$,ba]),hte=N.useCallback(()=>{He.current=!0},[]),mte=N.useCallback(()=>{He.current=!1},[]),tv=N.useCallback(()=>{var $e,Ke;if(!Ee.current)return;const Ve={label:It,value:It};let Le=[];if(nn&&(Le=[...nn]),ih==="first")Le=[Ve,...Le];else if(ih==="last")Le=[...Le,Ve];else{const Ht=Le.findIndex(({label:xl})=>xl===ih),Yn=Le[Ht];Ht!==-1&&Yn&&"items"in Yn?(VF==="first"?Yn.items=[Ve,...($e=Yn.items)!=null?$e:[]]:Yn.items=[...(Ke=Yn.items)!=null?Ke:[],Ve],Le[Ht]=Yn):console.warn(`${Yt?"MultiAutocomplete":"Autocomplete"}: '${ih}' specified in insertPositionItem does not exist in the option group.`)}gt(Le),hs(It),ba(!1);const Lt=bpe(Le).findIndex(({value:Ht})=>Ht===It);$t(Lt),Y==null||Y(Ve,Le)},[It,nn,ih,hs,ba,Y,VF,Yt]),UF=N.useCallback(()=>{wt?De.current&&De.current.focus():(bo(),bl())},[wt,bl,bo]),nv=N.useCallback(()=>{wt||(bo(),bl())},[wt,bl,bo]),GF=N.useCallback($e=>{const Ke=zh($e);Uu(_e.current,Ke)||!a&&Ei||(n&&It&&hs(It,!1),cr(""),wt&&vo())},[a,Ei,wt,It,n,vo,hs]),HF=N.useCallback(()=>{hs(Yt?it[it.length-1]:""),wt||nv()},[Yt,wt,hs,nv,it]),gte=N.useCallback($e=>{$e.stopPropagation(),st.current=[],At([]),$n(void 0),cr(""),ba(),wt&&De.current&&De.current.focus()},[wt,$n,cr,At,ba]),qF=N.useCallback($e=>{if($e.key===" "&&($e.key=$e.code),le.disabled||le.readOnly||He.current)return;const Ke=ur===It||!It.length,Le={ArrowDown:sh?()=>ah():wt?void 0:Vd(bo,bl),ArrowUp:sh?()=>X$():wt?void 0:Vd(bo,WF),Backspace:!J0&&Ke?HF:void 0,End:wt?ev:void 0,Enter:H$?tv:sh?Z$:wt?n&&Yt?()=>{It&&hs(It),$t(0)}:void 0:Vd(bo,bl),Escape:l?vo:void 0,Home:wt?hd:void 0,Space:H$?tv:sh?Z$:wt?void 0:Vd(bo,bl)}[$e.key];Le&&($e.preventDefault(),$e.stopPropagation(),Le($e))},[n,le,ur,It,bo,sh,Yt,bl,ah,WF,X$,H$,tv,Z$,wt,hd,ev,l,vo,J0,HF,hs]);N.useEffect(()=>{if(!Yt||!E&&Ms($))return;const $e=it.length>0&&it.length===Q.count(),Ke=it.length===$;$e||Ke?(vo(),pd(!0)):pd(!1)},[E,it,Q,Yt,vo,$]),vi(()=>{fte(it)},[it]),Qi(()=>{wt||n||($t(-1),cr(""))},[wt]),Qi(()=>{Ei||$t(-2)},[Ei]),Qi(()=>{gt(w?JSON.parse(JSON.stringify(w)):void 0)},[w]),Yre(()=>{Pe.current.forEach($e=>clearTimeout($e)),Pe.current.clear()}),ype({ref:_e,enabled:wt&&(a||!Ei),handler:vo});const yte=N.useCallback($e=>({animation:r,boundary:o,closeDelay:i,closeOnBlur:a,duration:f,eventListeners:h,flip:m,gutter:y,isLazy:b,lazyBehavior:S,matchWidth:k,modifiers:C,offset:I,openDelay:O,placement:z,preventOverflow:L,strategy:B,...$e,closeOnButton:!1,isOpen:wt,trigger:"never",onClose:vo,onOpen:bo}),[a,O,i,b,S,r,f,I,y,L,m,k,o,h,B,z,C,wt,bo,vo]),vte=N.useCallback(($e={},Ke=null)=>({ref:uo(_e,Ke),...oe,...$e,...le,onBlur:Ot($e.onBlur,se.onBlur,GF),onClick:Ot($e.onClick,se.onClick,UF)}),[oe,le,GF,UF,se]),bte=N.useCallback(($e={},Ke=null)=>({ref:Ke,tabIndex:-1,...$e,...le,"data-active":nr(wt),placeholder:R,onFocus:Ot($e.onFocus,me,nv),onKeyDown:Ot($e.onKeyDown,X,qF)}),[le,R,wt,me,nv,X,qF]);return{id:pe,allowCreate:e,allowFree:n,children:s??q$,closeOnSelect:u,descendants:Q,emptyMessage:p,focusedIndex:On,inputRef:De,inputValue:It,isAllSelected:qo,isEmpty:Mu,isHit:Ei,isOpen:wt,label:ur,listRef:Ee,omitSelectedValues:E,pickOptions:Y$,rebirthOptions:ba,setFocusedIndex:$t,value:it,formControlProps:le,getContainerProps:vte,getFieldProps:bte,getPopoverProps:yte,inputProps:fe,optionProps:F,onChange:hs,onClear:gte,onClose:vo,onCompositionEnd:mte,onCompositionStart:hte,onCreate:tv,onFocusFirst:hd,onFocusLast:ev,onFocusNext:ah,onFocusPrev:X$,onFocusSelected:K$,onOpen:bo,onSearch:pte}},wpe=()=>{var t,e;const{id:n,focusedIndex:r,inputRef:o,isAllSelected:s,isOpen:i,listRef:a,formControlProps:l,inputProps:u,onCompositionEnd:c,onCompositionStart:d,onSearch:f}=yo(),h=(t=LA().value(r))==null?void 0:t.node.id,m=(e=a.current)==null?void 0:e.id;return Qi(()=>{s&&o.current&&o.current.blur()},[s]),{getInputProps:N.useCallback((y={},v=null)=>({ref:uo(o,v),...l,"aria-activedescendant":h,"aria-autocomplete":"list","aria-controls":m,"aria-expanded":i,"aria-haspopup":"listbox",autoCapitalize:"none",autoComplete:"off",role:"combobox",spellCheck:"false",tabIndex:s?-1:0,...u,...y,id:n,cursor:l.readOnly?"default":"text",pointerEvents:l.disabled||s?"none":"auto",onChange:Ot(y.onChange,f),onCompositionEnd:Ot(y.onCompositionEnd,u.onCompositionEnd,c),onCompositionStart:Ot(y.onCompositionStart,u.onCompositionStart,d)}),[m,h,i,u,o,l,n,s,f,d,c])}},Tx=We(({className:t,children:e,icon:n,...r},o)=>{const{inputValue:s,styles:i}=yo(),{getCreateProps:a}=lpe();e??(e=s);const l={alignItems:"center",color:"inherit",display:"flex",flex:"0 0 auto",gap:"0.75rem",outline:0,textAlign:"start",textDecoration:"none",userSelect:"none",width:"100%",...i.item};return M.jsxs(Re.div,{className:Ye("ui-autocomplete__item--create",t),__css:l,...a(r,o),children:[n!==null?M.jsx(hy,{children:n||M.jsx(WA,{})}):null,n?M.jsx(Re.span,{style:{flex:1,pointerEvents:"none"},lineClamp:1,children:jn(e,s)}):jn(e,s)]})});Tx.displayName="AutocompleteCreate";Tx.__ui__="AutocompleteCreate";var WA=()=>M.jsx("svg",{height:"1em",viewBox:"0 0 45.402 45.402",width:"1em",children:M.jsx("path",{d:"M41.267,18.557H26.832V4.134C26.832,1.851,24.99,0,22.707,0c-2.283,0-4.124,1.851-4.124,4.135v14.432H4.141   c-2.283,0-4.139,1.851-4.138,4.135c-0.001,1.141,0.46,2.187,1.207,2.934c0.748,0.749,1.78,1.222,2.92,1.222h14.453V41.27   c0,1.142,0.453,2.176,1.201,2.922c0.748,0.748,1.777,1.211,2.919,1.211c2.282,0,4.129-1.851,4.129-4.133V26.857h14.435   c2.283,0,4.134-1.867,4.133-4.15C45.399,20.425,43.548,18.557,41.267,18.557z",fill:"currentColor"})});WA.displayName="AutocompletePlusIcon";WA.__ui__="AutocompletePlusIcon";var _x=We(({className:t,children:e,icon:n,...r},o)=>{const{emptyMessage:s,styles:i}=yo(),{getEmptyProps:a}=upe();e??(e=s);const l={alignItems:"center",color:"inherit",display:"flex",flex:"0 0 auto",gap:"0.75rem",outline:0,pointerEvents:"none",textAlign:"start",textDecoration:"none",userSelect:"none",width:"100%",...i.item};return M.jsxs(Re.div,{className:Ye("ui-autocomplete__item--empty",t),__css:l,...a(r,o),children:[n!==null?M.jsx(hy,{children:n||M.jsx(UA,{})}):null,n?M.jsx(Re.span,{style:{flex:1,pointerEvents:"none"},lineClamp:1,children:e}):e]})});_x.displayName="AutocompleteEmpty";_x.__ui__="AutocompleteEmpty";var UA=()=>M.jsx("svg",{height:"1em",viewBox:"0 0 448 512",width:"1em",children:M.jsx("path",{d:"M432 256c0 17.7-14.3 32-32 32L48 288c-17.7 0-32-14.3-32-32s14.3-32 32-32l352 0c17.7 0 32 14.3 32 32z",fill:"currentColor"})});UA.displayName="AutocompleteMinusIcon";UA.__ui__="AutocompleteMinusIcon";var Spe=()=>{const{focusedIndex:t,isOpen:e,listRef:n,rebirthOptions:r,value:o}=yo(),s=LA(),i=N.useId(),a=N.useRef(-1),l=s.value(t),u=qe(o),c=N.useCallback(()=>{e||r(!1)},[e,r]);return N.useEffect(()=>{if(!n.current||!l||a.current===l.index)return;const f=n.current,p=l.node,h=f.clientHeight,m=f.scrollTop,g=m+h,y=p.clientHeight,v=p.offsetTop,b=v+y,x=m<=v&&b<=g,w=a.current<l.index;x||(b<=h?n.current.scrollTo({top:0}):w?n.current.scrollTo({top:b-h}):n.current.scrollTo({top:v+1})),a.current=l.index},[n,l]),Qi(()=>{e||(a.current=-1)},[e]),{getListProps:N.useCallback(({id:f,...p}={},h=null)=>({id:f??i,ref:uo(n,h),"aria-multiselectable":Ea(u),position:"relative",role:"listbox",tabIndex:-1,...p}),[n,i,u]),onAnimationComplete:c}},kpe=(t=!1)=>{const[e,n]=N.useState(t),r=N.useCallback(()=>n(!0),[]),o=N.useCallback(()=>n(!1),[]),s=N.useCallback(()=>n(i=>!i),[]);return[e,{on:r,off:o,toggle:s}]},$pe=({ref:t,isOpen:e})=>{const[n,r]=N.useState(e),[o,{on:s}]=kpe();return N.useEffect(()=>{o||(r(e),s())},[e,o,s]),BA(()=>t.current,"animationend",()=>r(e)),{present:!(e?!1:!n),onAnimationComplete(){var a;const l=Woe(t.current),u=new l.CustomEvent("animationend",{bubbles:!0});(a=t.current)==null||a.dispatchEvent(u)}}},Cpe=t=>{const e=t.current;if(!e)return!1;const n=Uoe(e);return!n||e.contains(n)?!1:!!Voe(n)},Tpe=(t,{focusRef:e,shouldFocus:n,visible:r})=>{const o=n&&!r;Qi(()=>{if(!o||Cpe(t))return;const s=e.current||t.current;s&&requestAnimationFrame(()=>{s.focus()})},[o,t,e])},_pe=(t,{focusRef:e,preventScroll:n,shouldFocus:r,visible:o}={preventScroll:!0,shouldFocus:!1})=>{const s=g6(t)?t.current:t,i=r&&o,a=N.useRef(i),l=N.useRef(o);vi(()=>{!l.current&&o&&(a.current=i),l.current=o},[o,i]);const u=N.useCallback(()=>{if(!(!o||!s||!a.current)&&(a.current=!1,!s.contains(document.activeElement)))if(e!=null&&e.current)requestAnimationFrame(()=>{var c;(c=e.current)==null||c.focus({preventScroll:n})});else{const c=Boe(s);c.length>0&&requestAnimationFrame(()=>{var d;(d=c[0])==null||d.focus({preventScroll:n})})}},[o,n,s,e]);Qi(()=>{requestAnimationFrame(()=>{u()})},[u]),BA(s,"transitionend",u)},Ipe=({ref:t,elements:e,enabled:n})=>{const r=()=>{var o,s;return(s=(o=t.current)==null?void 0:o.ownerDocument)!=null?s:document};BA(r,"pointerdown",o=>{if(!Poe()||!n)return;const s=o.target,a=(e??[t]).some(l=>{const u=g6(l)?l.current:l;return(u==null?void 0:u.contains(s))||u===s});r().activeElement!==s&&a&&(o.preventDefault(),s.focus())})},Oo="top",Us="bottom",Gs="right",Po="left",GA="auto",my=[Oo,Us,Gs,Po],Rf="start",Qm="end",Npe="clippingParents",JH="viewport",bh="popper",Epe="reference",iz=my.reduce(function(t,e){return t.concat([e+"-"+Rf,e+"-"+Qm])},[]),e8=[].concat(my,[GA]).reduce(function(t,e){return t.concat([e,e+"-"+Rf,e+"-"+Qm])},[]),Ape="beforeRead",Ope="read",Ppe="afterRead",Rpe="beforeMain",Dpe="main",Fpe="afterMain",Mpe="beforeWrite",Lpe="write",zpe="afterWrite",Bpe=[Ape,Ope,Ppe,Rpe,Dpe,Fpe,Mpe,Lpe,zpe];function ca(t){return t?(t.nodeName||"").toLowerCase():null}function is(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Nc(t){var e=is(t).Element;return t instanceof e||t instanceof Element}function Ls(t){var e=is(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function HA(t){if(typeof ShadowRoot>"u")return!1;var e=is(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function jpe(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},o=e.attributes[n]||{},s=e.elements[n];!Ls(s)||!ca(s)||(Object.assign(s.style,r),Object.keys(o).forEach(function(i){var a=o[i];a===!1?s.removeAttribute(i):s.setAttribute(i,a===!0?"":a)}))})}function Vpe(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var o=e.elements[r],s=e.attributes[r]||{},i=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=i.reduce(function(l,u){return l[u]="",l},{});!Ls(o)||!ca(o)||(Object.assign(o.style,a),Object.keys(s).forEach(function(l){o.removeAttribute(l)}))})}}const Wpe={name:"applyStyles",enabled:!0,phase:"write",fn:jpe,effect:Vpe,requires:["computeStyles"]};function na(t){return t.split("-")[0]}var gc=Math.max,Ix=Math.min,Df=Math.round;function iI(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function t8(){return!/^((?!chrome|android).)*safari/i.test(iI())}function Ff(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),o=1,s=1;e&&Ls(t)&&(o=t.offsetWidth>0&&Df(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&Df(r.height)/t.offsetHeight||1);var i=Nc(t)?is(t):window,a=i.visualViewport,l=!t8()&&n,u=(r.left+(l&&a?a.offsetLeft:0))/o,c=(r.top+(l&&a?a.offsetTop:0))/s,d=r.width/o,f=r.height/s;return{width:d,height:f,top:c,right:u+d,bottom:c+f,left:u,x:u,y:c}}function qA(t){var e=Ff(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function n8(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&HA(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Qa(t){return is(t).getComputedStyle(t)}function Upe(t){return["table","td","th"].indexOf(ca(t))>=0}function vu(t){return((Nc(t)?t.ownerDocument:t.document)||window.document).documentElement}function rS(t){return ca(t)==="html"?t:t.assignedSlot||t.parentNode||(HA(t)?t.host:null)||vu(t)}function az(t){return!Ls(t)||Qa(t).position==="fixed"?null:t.offsetParent}function Gpe(t){var e=/firefox/i.test(iI()),n=/Trident/i.test(iI());if(n&&Ls(t)){var r=Qa(t);if(r.position==="fixed")return null}var o=rS(t);for(HA(o)&&(o=o.host);Ls(o)&&["html","body"].indexOf(ca(o))<0;){var s=Qa(o);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return o;o=o.parentNode}return null}function gy(t){for(var e=is(t),n=az(t);n&&Upe(n)&&Qa(n).position==="static";)n=az(n);return n&&(ca(n)==="html"||ca(n)==="body"&&Qa(n).position==="static")?e:n||Gpe(t)||e}function KA(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function cm(t,e,n){return gc(t,Ix(e,n))}function Hpe(t,e,n){var r=cm(t,e,n);return r>n?n:r}function r8(){return{top:0,right:0,bottom:0,left:0}}function o8(t){return Object.assign({},r8(),t)}function s8(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var qpe=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,o8(typeof e!="number"?e:s8(e,my))};function Kpe(t){var e,n=t.state,r=t.name,o=t.options,s=n.elements.arrow,i=n.modifiersData.popperOffsets,a=na(n.placement),l=KA(a),u=[Po,Gs].indexOf(a)>=0,c=u?"height":"width";if(!(!s||!i)){var d=qpe(o.padding,n),f=qA(s),p=l==="y"?Oo:Po,h=l==="y"?Us:Gs,m=n.rects.reference[c]+n.rects.reference[l]-i[l]-n.rects.popper[c],g=i[l]-n.rects.reference[l],y=gy(s),v=y?l==="y"?y.clientHeight||0:y.clientWidth||0:0,b=m/2-g/2,x=d[p],w=v-f[c]-d[h],S=v/2-f[c]/2+b,k=cm(x,S,w),$=l;n.modifiersData[r]=(e={},e[$]=k,e.centerOffset=k-S,e)}}function Xpe(t){var e=t.state,n=t.options,r=n.element,o=r===void 0?"[data-popper-arrow]":r;o!=null&&(typeof o=="string"&&(o=e.elements.popper.querySelector(o),!o)||n8(e.elements.popper,o)&&(e.elements.arrow=o))}const Ype={name:"arrow",enabled:!0,phase:"main",fn:Kpe,effect:Xpe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Mf(t){return t.split("-")[1]}var Zpe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Qpe(t,e){var n=t.x,r=t.y,o=e.devicePixelRatio||1;return{x:Df(n*o)/o||0,y:Df(r*o)/o||0}}function lz(t){var e,n=t.popper,r=t.popperRect,o=t.placement,s=t.variation,i=t.offsets,a=t.position,l=t.gpuAcceleration,u=t.adaptive,c=t.roundOffsets,d=t.isFixed,f=i.x,p=f===void 0?0:f,h=i.y,m=h===void 0?0:h,g=typeof c=="function"?c({x:p,y:m}):{x:p,y:m};p=g.x,m=g.y;var y=i.hasOwnProperty("x"),v=i.hasOwnProperty("y"),b=Po,x=Oo,w=window;if(u){var S=gy(n),k="clientHeight",$="clientWidth";if(S===is(n)&&(S=vu(n),Qa(S).position!=="static"&&a==="absolute"&&(k="scrollHeight",$="scrollWidth")),S=S,o===Oo||(o===Po||o===Gs)&&s===Qm){x=Us;var C=d&&S===w&&w.visualViewport?w.visualViewport.height:S[k];m-=C-r.height,m*=l?1:-1}if(o===Po||(o===Oo||o===Us)&&s===Qm){b=Gs;var I=d&&S===w&&w.visualViewport?w.visualViewport.width:S[$];p-=I-r.width,p*=l?1:-1}}var E=Object.assign({position:a},u&&Zpe),O=c===!0?Qpe({x:p,y:m},is(n)):{x:p,y:m};if(p=O.x,m=O.y,l){var R;return Object.assign({},E,(R={},R[x]=v?"0":"",R[b]=y?"0":"",R.transform=(w.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",R))}return Object.assign({},E,(e={},e[x]=v?m+"px":"",e[b]=y?p+"px":"",e.transform="",e))}function Jpe(t){var e=t.state,n=t.options,r=n.gpuAcceleration,o=r===void 0?!0:r,s=n.adaptive,i=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,u={placement:na(e.placement),variation:Mf(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:o,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,lz(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:i,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,lz(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const ehe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Jpe,data:{}};var Ov={passive:!0};function the(t){var e=t.state,n=t.instance,r=t.options,o=r.scroll,s=o===void 0?!0:o,i=r.resize,a=i===void 0?!0:i,l=is(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&u.forEach(function(c){c.addEventListener("scroll",n.update,Ov)}),a&&l.addEventListener("resize",n.update,Ov),function(){s&&u.forEach(function(c){c.removeEventListener("scroll",n.update,Ov)}),a&&l.removeEventListener("resize",n.update,Ov)}}const nhe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:the,data:{}};var rhe={left:"right",right:"left",bottom:"top",top:"bottom"};function Ab(t){return t.replace(/left|right|bottom|top/g,function(e){return rhe[e]})}var ohe={start:"end",end:"start"};function uz(t){return t.replace(/start|end/g,function(e){return ohe[e]})}function XA(t){var e=is(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function YA(t){return Ff(vu(t)).left+XA(t).scrollLeft}function she(t,e){var n=is(t),r=vu(t),o=n.visualViewport,s=r.clientWidth,i=r.clientHeight,a=0,l=0;if(o){s=o.width,i=o.height;var u=t8();(u||!u&&e==="fixed")&&(a=o.offsetLeft,l=o.offsetTop)}return{width:s,height:i,x:a+YA(t),y:l}}function ihe(t){var e,n=vu(t),r=XA(t),o=(e=t.ownerDocument)==null?void 0:e.body,s=gc(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),i=gc(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),a=-r.scrollLeft+YA(t),l=-r.scrollTop;return Qa(o||n).direction==="rtl"&&(a+=gc(n.clientWidth,o?o.clientWidth:0)-s),{width:s,height:i,x:a,y:l}}function ZA(t){var e=Qa(t),n=e.overflow,r=e.overflowX,o=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+r)}function i8(t){return["html","body","#document"].indexOf(ca(t))>=0?t.ownerDocument.body:Ls(t)&&ZA(t)?t:i8(rS(t))}function dm(t,e){var n;e===void 0&&(e=[]);var r=i8(t),o=r===((n=t.ownerDocument)==null?void 0:n.body),s=is(r),i=o?[s].concat(s.visualViewport||[],ZA(r)?r:[]):r,a=e.concat(i);return o?a:a.concat(dm(rS(i)))}function aI(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function ahe(t,e){var n=Ff(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function cz(t,e,n){return e===JH?aI(she(t,n)):Nc(e)?ahe(e,n):aI(ihe(vu(t)))}function lhe(t){var e=dm(rS(t)),n=["absolute","fixed"].indexOf(Qa(t).position)>=0,r=n&&Ls(t)?gy(t):t;return Nc(r)?e.filter(function(o){return Nc(o)&&n8(o,r)&&ca(o)!=="body"}):[]}function uhe(t,e,n,r){var o=e==="clippingParents"?lhe(t):[].concat(e),s=[].concat(o,[n]),i=s[0],a=s.reduce(function(l,u){var c=cz(t,u,r);return l.top=gc(c.top,l.top),l.right=Ix(c.right,l.right),l.bottom=Ix(c.bottom,l.bottom),l.left=gc(c.left,l.left),l},cz(t,i,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function a8(t){var e=t.reference,n=t.element,r=t.placement,o=r?na(r):null,s=r?Mf(r):null,i=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(o){case Oo:l={x:i,y:e.y-n.height};break;case Us:l={x:i,y:e.y+e.height};break;case Gs:l={x:e.x+e.width,y:a};break;case Po:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var u=o?KA(o):null;if(u!=null){var c=u==="y"?"height":"width";switch(s){case Rf:l[u]=l[u]-(e[c]/2-n[c]/2);break;case Qm:l[u]=l[u]+(e[c]/2-n[c]/2);break}}return l}function Jm(t,e){e===void 0&&(e={});var n=e,r=n.placement,o=r===void 0?t.placement:r,s=n.strategy,i=s===void 0?t.strategy:s,a=n.boundary,l=a===void 0?Npe:a,u=n.rootBoundary,c=u===void 0?JH:u,d=n.elementContext,f=d===void 0?bh:d,p=n.altBoundary,h=p===void 0?!1:p,m=n.padding,g=m===void 0?0:m,y=o8(typeof g!="number"?g:s8(g,my)),v=f===bh?Epe:bh,b=t.rects.popper,x=t.elements[h?v:f],w=uhe(Nc(x)?x:x.contextElement||vu(t.elements.popper),l,c,i),S=Ff(t.elements.reference),k=a8({reference:S,element:b,placement:o}),$=aI(Object.assign({},b,k)),C=f===bh?$:S,I={top:w.top-C.top+y.top,bottom:C.bottom-w.bottom+y.bottom,left:w.left-C.left+y.left,right:C.right-w.right+y.right},E=t.modifiersData.offset;if(f===bh&&E){var O=E[o];Object.keys(I).forEach(function(R){var z=[Gs,Us].indexOf(R)>=0?1:-1,L=[Oo,Us].indexOf(R)>=0?"y":"x";I[R]+=O[L]*z})}return I}function che(t,e){e===void 0&&(e={});var n=e,r=n.placement,o=n.boundary,s=n.rootBoundary,i=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,u=l===void 0?e8:l,c=Mf(r),d=c?a?iz:iz.filter(function(h){return Mf(h)===c}):my,f=d.filter(function(h){return u.indexOf(h)>=0});f.length===0&&(f=d);var p=f.reduce(function(h,m){return h[m]=Jm(t,{placement:m,boundary:o,rootBoundary:s,padding:i})[na(m)],h},{});return Object.keys(p).sort(function(h,m){return p[h]-p[m]})}function dhe(t){if(na(t)===GA)return[];var e=Ab(t);return[uz(t),e,uz(e)]}function fhe(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var o=n.mainAxis,s=o===void 0?!0:o,i=n.altAxis,a=i===void 0?!0:i,l=n.fallbackPlacements,u=n.padding,c=n.boundary,d=n.rootBoundary,f=n.altBoundary,p=n.flipVariations,h=p===void 0?!0:p,m=n.allowedAutoPlacements,g=e.options.placement,y=na(g),v=y===g,b=l||(v||!h?[Ab(g)]:dhe(g)),x=[g].concat(b).reduce(function(ie,se){return ie.concat(na(se)===GA?che(e,{placement:se,boundary:c,rootBoundary:d,padding:u,flipVariations:h,allowedAutoPlacements:m}):se)},[]),w=e.rects.reference,S=e.rects.popper,k=new Map,$=!0,C=x[0],I=0;I<x.length;I++){var E=x[I],O=na(E),R=Mf(E)===Rf,z=[Oo,Us].indexOf(O)>=0,L=z?"width":"height",B=Jm(e,{placement:E,boundary:c,rootBoundary:d,altBoundary:f,padding:u}),D=z?R?Gs:Po:R?Us:Oo;w[L]>S[L]&&(D=Ab(D));var F=Ab(D),j=[];if(s&&j.push(B[O]<=0),a&&j.push(B[D]<=0,B[F]<=0),j.every(function(ie){return ie})){C=E,$=!1;break}k.set(E,j)}if($)for(var G=h?3:1,Y=function(se){var de=x.find(function(me){var le=k.get(me);if(le)return le.slice(0,se).every(function(oe){return oe})});if(de)return C=de,"break"},X=G;X>0;X--){var ee=Y(X);if(ee==="break")break}e.placement!==C&&(e.modifiersData[r]._skip=!0,e.placement=C,e.reset=!0)}}const phe={name:"flip",enabled:!0,phase:"main",fn:fhe,requiresIfExists:["offset"],data:{_skip:!1}};function dz(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function fz(t){return[Oo,Gs,Us,Po].some(function(e){return t[e]>=0})}function hhe(t){var e=t.state,n=t.name,r=e.rects.reference,o=e.rects.popper,s=e.modifiersData.preventOverflow,i=Jm(e,{elementContext:"reference"}),a=Jm(e,{altBoundary:!0}),l=dz(i,r),u=dz(a,o,s),c=fz(l),d=fz(u);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}const mhe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hhe};function ghe(t,e,n){var r=na(t),o=[Po,Oo].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,i=s[0],a=s[1];return i=i||0,a=(a||0)*o,[Po,Gs].indexOf(r)>=0?{x:a,y:i}:{x:i,y:a}}function yhe(t){var e=t.state,n=t.options,r=t.name,o=n.offset,s=o===void 0?[0,0]:o,i=e8.reduce(function(c,d){return c[d]=ghe(d,e.rects,s),c},{}),a=i[e.placement],l=a.x,u=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=i}const vhe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:yhe};function bhe(t){var e=t.state,n=t.name;e.modifiersData[n]=a8({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const xhe={name:"popperOffsets",enabled:!0,phase:"read",fn:bhe,data:{}};function whe(t){return t==="x"?"y":"x"}function She(t){var e=t.state,n=t.options,r=t.name,o=n.mainAxis,s=o===void 0?!0:o,i=n.altAxis,a=i===void 0?!1:i,l=n.boundary,u=n.rootBoundary,c=n.altBoundary,d=n.padding,f=n.tether,p=f===void 0?!0:f,h=n.tetherOffset,m=h===void 0?0:h,g=Jm(e,{boundary:l,rootBoundary:u,padding:d,altBoundary:c}),y=na(e.placement),v=Mf(e.placement),b=!v,x=KA(y),w=whe(x),S=e.modifiersData.popperOffsets,k=e.rects.reference,$=e.rects.popper,C=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,I=typeof C=="number"?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C),E=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,O={x:0,y:0};if(S){if(s){var R,z=x==="y"?Oo:Po,L=x==="y"?Us:Gs,B=x==="y"?"height":"width",D=S[x],F=D+g[z],j=D-g[L],G=p?-$[B]/2:0,Y=v===Rf?k[B]:$[B],X=v===Rf?-$[B]:-k[B],ee=e.elements.arrow,ie=p&&ee?qA(ee):{width:0,height:0},se=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:r8(),de=se[z],me=se[L],le=cm(0,k[B],ie[B]),oe=b?k[B]/2-G-le-de-I.mainAxis:Y-le-de-I.mainAxis,fe=b?-k[B]/2+G+le+me+I.mainAxis:X+le+me+I.mainAxis,pe=e.elements.arrow&&gy(e.elements.arrow),Q=pe?x==="y"?pe.clientTop||0:pe.clientLeft||0:0,_e=(R=E==null?void 0:E[x])!=null?R:0,Ee=D+oe-_e-Q,De=D+fe-_e,Pe=cm(p?Ix(F,Ee):F,D,p?gc(j,De):j);S[x]=Pe,O[x]=Pe-D}if(a){var He,st=x==="x"?Oo:Po,nn=x==="x"?Us:Gs,gt=S[w],it=w==="y"?"height":"width",At=gt+g[st],ur=gt-g[nn],$n=[Oo,Po].indexOf(y)!==-1,It=(He=E==null?void 0:E[w])!=null?He:0,cr=$n?At:gt-k[it]-$[it]-It+I.altAxis,On=$n?gt+k[it]+$[it]-It-I.altAxis:ur,$t=p&&$n?Hpe(cr,gt,On):cm(p?cr:At,gt,p?On:ur);S[w]=$t,O[w]=$t-gt}e.modifiersData[r]=O}}const khe={name:"preventOverflow",enabled:!0,phase:"main",fn:She,requiresIfExists:["offset"]};function $he(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Che(t){return t===is(t)||!Ls(t)?XA(t):$he(t)}function The(t){var e=t.getBoundingClientRect(),n=Df(e.width)/t.offsetWidth||1,r=Df(e.height)/t.offsetHeight||1;return n!==1||r!==1}function _he(t,e,n){n===void 0&&(n=!1);var r=Ls(e),o=Ls(e)&&The(e),s=vu(e),i=Ff(t,o,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((ca(e)!=="body"||ZA(s))&&(a=Che(e)),Ls(e)?(l=Ff(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=YA(s))),{x:i.left+a.scrollLeft-l.x,y:i.top+a.scrollTop-l.y,width:i.width,height:i.height}}function Ihe(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function o(s){n.add(s.name);var i=[].concat(s.requires||[],s.requiresIfExists||[]);i.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&o(l)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||o(s)}),r}function Nhe(t){var e=Ihe(t);return Bpe.reduce(function(n,r){return n.concat(e.filter(function(o){return o.phase===r}))},[])}function Ehe(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function Ahe(t){var e=t.reduce(function(n,r){var o=n[r.name];return n[r.name]=o?Object.assign({},o,r,{options:Object.assign({},o.options,r.options),data:Object.assign({},o.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var pz={placement:"bottom",modifiers:[],strategy:"absolute"};function hz(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Ohe(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,o=e.defaultOptions,s=o===void 0?pz:o;return function(a,l,u){u===void 0&&(u=s);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},pz,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],f=!1,p={state:c,setOptions:function(y){var v=typeof y=="function"?y(c.options):y;m(),c.options=Object.assign({},s,c.options,v),c.scrollParents={reference:Nc(a)?dm(a):a.contextElement?dm(a.contextElement):[],popper:dm(l)};var b=Nhe(Ahe([].concat(r,c.options.modifiers)));return c.orderedModifiers=b.filter(function(x){return x.enabled}),h(),p.update()},forceUpdate:function(){if(!f){var y=c.elements,v=y.reference,b=y.popper;if(hz(v,b)){c.rects={reference:_he(v,gy(b),c.options.strategy==="fixed"),popper:qA(b)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(I){return c.modifiersData[I.name]=Object.assign({},I.data)});for(var x=0;x<c.orderedModifiers.length;x++){if(c.reset===!0){c.reset=!1,x=-1;continue}var w=c.orderedModifiers[x],S=w.fn,k=w.options,$=k===void 0?{}:k,C=w.name;typeof S=="function"&&(c=S({state:c,options:$,name:C,instance:p})||c)}}}},update:Ehe(function(){return new Promise(function(g){p.forceUpdate(),g(c)})}),destroy:function(){m(),f=!0}};if(!hz(a,l))return p;p.setOptions(u).then(function(g){!f&&u.onFirstUpdate&&u.onFirstUpdate(g)});function h(){c.orderedModifiers.forEach(function(g){var y=g.name,v=g.options,b=v===void 0?{}:v,x=g.effect;if(typeof x=="function"){var w=x({state:c,name:y,instance:p,options:b}),S=function(){};d.push(w||S)}})}function m(){d.forEach(function(g){return g()}),d=[]}return p}}var Phe=[nhe,xhe,ehe,Wpe,vhe,phe,khe,Ype,mhe],Rhe=Ohe({defaultModifiers:Phe}),mz={resize:!0,scroll:!0},gz={bottom:"top center","bottom-end":"top right","bottom-start":"top left",left:"right center","left-end":"right bottom","left-start":"right top",right:"left center","right-end":"left bottom","right-start":"left top",top:"bottom center","top-end":"bottom right","top-start":"bottom left"},Dhe=({boundary:t="clippingParents",enabled:e=!0,eventListeners:n=!0,flip:r=!0,gutter:o=8,matchWidth:s,modifiers:i,offset:a,placement:l="bottom",preventOverflow:u=!0,strategy:c="absolute"}={})=>{const d=N.useRef(null),f=N.useRef(null),p=N.useRef(null),h=bx(o),m=bx(l),g=N.useRef(Vm),y=N.useCallback(()=>{if(!e||!d.current||!f.current)return;g.current();const S={name:"transformOrigin",effect:({state:O})=>()=>{var R;O.elements.popper.style.setProperty("--popper-transform-origin",(R=gz[O.placement])!=null?R:"")},enabled:!0,fn:({state:O})=>{var R;O.elements.popper.style.setProperty("--popper-transform-origin",(R=gz[O.placement])!=null?R:"")},phase:"write"},k={name:"eventListeners",...typeof n=="object"?{enabled:!0,options:{...mz,...n}}:{enabled:n,options:mz}},$={name:"offset",options:{offset:a??[0,h]}},C={name:"flip",enabled:!!r,options:{padding:8}},I={name:"preventOverflow",enabled:!!u,options:{boundary:t}},E={name:"matchWidth",effect:({state:O})=>()=>{O.elements.popper.style.width=`${O.elements.reference.offsetWidth}px`},enabled:!!s,fn:({state:O})=>{O.styles.popper&&(O.styles.popper.width=`${O.rects.reference.width}px`)},phase:"beforeWrite",requires:["computeStyles"]};p.current=Rhe(d.current,f.current,{modifiers:[S,E,k,$,C,I,...i??[]],placement:m,strategy:c}),p.current.forceUpdate(),g.current=p.current.destroy},[m,e,i,s,n,a,h,r,u,t,c]);N.useEffect(()=>()=>{var S;d.current||f.current||((S=p.current)==null||S.destroy(),p.current=null)},[]);const v=N.useCallback(S=>{d.current=S,y()},[y]),b=N.useCallback((S={},k=null)=>({...S,ref:uo(v,k)}),[v]),x=N.useCallback(S=>{f.current=S,y()},[y]),w=N.useCallback((S={},k=null)=>({...S,ref:uo(x,k),style:{...S.style,inset:"0 auto auto 0",minWidth:s?void 0:"max-content",position:c}}),[c,x,s]);return{forceUpdate:()=>{var S;return(S=p.current)==null?void 0:S.forceUpdate()},popperRef:x,referenceRef:v,transformOrigin:"var(--popper-transform-origin)",update:async()=>{var S;return(S=p.current)==null?void 0:S.update()},getPopperProps:w,getReferenceProps:b}},[Fhe,QA]=ul({name:"PopoverContext",errorMessage:`usePopoverContext returned is 'undefined'. Seems you forgot to wrap the components in "<Popover />"`}),JA=t=>{const[e,n]=ay("Popover",t),{animation:r="scale",autoFocus:o=!0,children:s,closeDelay:i=200,closeOnBlur:a=!0,closeOnButton:l=!0,closeOnEsc:u=!0,duration:c,initialFocusRef:d,isLazy:f,lazyBehavior:p="unmount",openDelay:h=200,relatedRef:m,restoreFocus:g=!0,trigger:y="click",...v}=Vo(n),b=N.useId(),x=N.useId(),w=N.useId(),{isOpen:S,onClose:k,onOpen:$,onToggle:C}=QH(n),I=N.useRef(null),E=N.useRef(null),O=N.useRef(null),{present:R,onAnimationComplete:z}=$pe({ref:O,isOpen:S}),L=N.useRef(void 0),B=N.useRef(void 0),D=N.useRef(!1),F=N.useRef(!1),{forceUpdate:j,referenceRef:G,transformOrigin:Y,getPopperProps:X}=Dhe({...v,enabled:S});S&&(F.current=!0),N.useEffect(()=>()=>{L.current&&clearTimeout(L.current),B.current&&clearTimeout(B.current)},[]),Ipe({ref:E,enabled:S}),Tpe(O,{focusRef:E,shouldFocus:g&&(y==="click"||y==="contextmenu"),visible:S}),_pe(O,{focusRef:d,shouldFocus:o&&(y==="click"||y==="contextmenu"),visible:S});const ee=gpe({enabled:f,isSelected:R,mode:p,wasSelected:F.current}),ie=N.useCallback((le={},oe=null)=>{const fe={id:b,"aria-describedby":w,"aria-hidden":!S,"aria-labelledby":x,role:"dialog",...le,ref:uo(O,oe),style:{...le.style,transformOrigin:Y},children:ee?le.children:null,tabIndex:-1,onBlur:Ot(le.onBlur,pe=>{const Q=zh(pe),_e=Uu(O.current,Q),Ee=Uu(E.current,Q),De=m!=null&&m.current?Uu(m.current,Q):!1;S&&a&&(!_e&&!Ee&&!De)&&k()}),onKeyDown:Ot(le.onKeyDown,pe=>{u&&pe.key==="Escape"&&k()})};return y==="hover"&&(fe.onMouseEnter=Ot(le.onMouseEnter,()=>{D.current=!0}),fe.onMouseLeave=Ot(le.onMouseLeave,pe=>{pe.nativeEvent.relatedTarget!==null&&(D.current=!1,a&&setTimeout(k,i))})),fe},[i,a,u,S,k,ee,Y,y,m,b,x,w]),se=N.useCallback(le=>{I.current==null&&G(le)},[G]),de=N.useCallback((le={},oe=null)=>{const fe={"aria-controls":S?b:void 0,"aria-expanded":S,role:"button",...le,ref:uo(E,oe,se)};return y==="click"&&(fe.onClick=Ot(le.onClick,C),fe.onBlur=Ot(le.onBlur,pe=>{const Q=zh(pe),_e=!Uu(O.current,Q);S&&a&&_e&&k()})),y==="contextmenu"&&(fe.onContextMenu=Ot(le.onContextMenu,pe=>{pe.preventDefault(),$()}),fe.onBlur=Ot(le.onBlur,pe=>{const Q=zh(pe),_e=!Uu(O.current,Q);S&&a&&_e&&k()})),y==="hover"&&(fe.onFocus=Ot(le.onFocus,()=>{L.current===void 0&&$()}),fe.onBlur=Ot(le.onBlur,pe=>{const Q=zh(pe),_e=!Uu(O.current,Q);S&&a&&_e&&k()}),fe.onKeyDown=Ot(le.onKeyDown,pe=>{pe.key==="Escape"&&k()}),fe.onMouseEnter=Ot(le.onMouseEnter,()=>{D.current=!0,L.current=window.setTimeout($,h)}),fe.onMouseLeave=Ot(le.onMouseLeave,()=>{D.current=!1,L.current&&(clearTimeout(L.current),L.current=void 0),B.current=window.setTimeout(()=>{D.current||k()},i)})),fe},[i,a,S,se,k,$,C,h,y,b]),me=N.useCallback((le={},oe=null)=>({...le,ref:uo(oe,I,G)}),[I,G]);return M.jsx(Fhe,{value:{id:b,animation:r,closeOnButton:l,describedbyId:w,duration:c,forceUpdate:j,isOpen:S,labelledbyId:x,styles:e,getAnchorProps:me,getPopoverProps:ie,getPopperProps:X,getTriggerProps:de,onAnimationComplete:z,onClose:k},children:jn(s,{forceUpdate:j,isOpen:S,onClose:k})})};JA.displayName="Popover";JA.__ui__="Popover";var Mhe=(t,e,n)=>Math.min(Math.max(t,e),n),oS=({className:t,style:e,color:n="currentColor",isDisabled:r,ripples:o,onAnimationComplete:s,onClear:i,...a})=>{if(r)return null;const l={rounded:"fallback(full, 9999px)",zIndex:"fallback(kurillin, 9)"};return M.jsx(M.Fragment,{children:o.map(({key:u,size:c,x:d,y:f})=>{const p=Mhe(.01*c,.2,c>100?.75:.5);return M.jsx(fy,{mode:"popLayout",children:M.jsx(Za.span,{className:Ye("ui-ripple",t),style:{height:`${c}px`,left:d,pointerEvents:"none",position:"absolute",top:f,transformOrigin:"center",width:`${c}px`,...e},animate:{opacity:0,transform:"scale(2)"},bgColor:n,exit:{opacity:0},initial:{opacity:.35,transform:"scale(0)"},transition:{duration:p},__css:l,...a,onAnimationComplete:Ot(s,()=>i(u))})},u)})})};oS.displayName="Ripple";oS.__ui__="Ripple";var l8=({disabled:t,isDisabled:e,...n}={})=>{const[r,o]=N.useState([]),s=N.useCallback(a=>{if(t||e)return o([]);const l=a.currentTarget,u=Math.max(l.clientWidth,l.clientHeight),c=l.getBoundingClientRect();o(d=>[...d,{key:Jre(d.length.toString()),size:u,x:a.clientX-c.x-u/2,y:a.clientY-c.y-u/2}])},[t,e]),i=N.useCallback(a=>{o(l=>l.filter(u=>u.key!==a))},[]);return{ripples:r,onClear:i,onPointerDown:Ot(s,n.onPointerDown)}},sS=We((t,e)=>{const[n,r]=cl("CloseButton",t),{className:o,children:s,disableRipple:i,isDisabled:a,isRounded:l,__css:u,...c}=Vo(r),{onPointerDown:d,...f}=l8({...c,isDisabled:i||a}),p={alignItems:"center",display:"flex",flexShrink:0,justifyContent:"center",outline:0,overflow:"hidden",position:"relative",...n,...u,...l?{borderRadius:"fallback(full, 9999px)"}:{}};return M.jsxs(Re.button,{ref:e,type:"button",className:Ye("ui-close-button",o),"aria-label":"Close",disabled:a,__css:p,...c,onPointerDown:d,children:[s||M.jsx(Ww,{height:"1em",width:"1em"}),M.jsx(oS,{...f})]})});sS.displayName="CloseButton";sS.__ui__="CloseButton";var Nx=We(({onClick:t,...e},n)=>{const{id:r,styles:o,onClose:s}=QA(),i={position:"absolute",...o.closeButton};return M.jsx(sS,{ref:n,className:Ye("ui-popover__close-button"),size:"sm","aria-controls":r,"aria-label":"Close popover",onClick:Ot(t,a=>{a.stopPropagation(),s==null||s()}),__css:i,...e})});Nx.displayName="PopoverCloseButton";Nx.__ui__="PopoverCloseButton";var Lhe=(t="scale",e)=>{const n={duration:e,enter:{visibility:"visible"},reverse:!0,transitionEnd:{exit:{visibility:"hidden"}}};switch(t){case"scale":return{...RH,custom:{...n,scale:.95}};case"top":return{...Vh,custom:{...n,offsetX:0,offsetY:-16}};case"right":return{...Vh,custom:{...n,offsetX:16,offsetY:0}};case"left":return{...Vh,custom:{...n,offsetX:-16,offsetY:0}};case"bottom":return{...Vh,custom:{...n,offsetX:0,offsetY:16}}}},eO=xA(({as:t="section",className:e,children:n,maxW:r,maxWidth:o,minW:s,minWidth:i,w:a,width:l,z:u,zIndex:c,containerProps:d,__css:f,...p},h)=>{var m,g,y,v,b;const{animation:x,closeOnButton:w,duration:S,isOpen:k,styles:$,getPopoverProps:C,getPopperProps:I,onAnimationComplete:E}=QA(),O=kp(n),[R,...z]=Zre(O,Nx),L=N.useMemo(()=>Za(t),[t]),B=(m=f??$.container)!=null?m:{},D={display:"flex",flexDirection:"column",outline:0,position:"relative",w:"100%",...B};return l??(l=a),l??(l=(g=B.width)!=null?g:B.w),i??(i=s),i??(i=(y=B.minWidth)!=null?y:B.minW),o??(o=r),o??(o=(v=B.maxWidth)!=null?v:B.maxW),c??(c=u),c??(c=(b=B.zIndex)!=null?b:B.z),M.jsx(Re.div,{...I({style:{visibility:k?"visible":"hidden"}}),className:"ui-popover",maxWidth:o,minWidth:i,outline:"none",width:l,zIndex:c,...d,children:M.jsxs(L,{className:Ye("ui-popover__content",e),...x!=="none"?Lhe(x,S):{},...C(p,h),animate:k?"enter":"exit",exit:"exit",initial:"exit",onAnimationComplete:Vd(E,p.onAnimationComplete),__css:D,children:[R??(w?M.jsx(Nx,{}):null),z]})})});eO.displayName="PopoverContent";eO.__ui__="PopoverContent";var tO=({children:t})=>{const e=N.Children.only(t),{getTriggerProps:n}=QA();return N.cloneElement(e,n(e.props,e.ref))};tO.displayName="PopoverTrigger";tO.__ui__="PopoverTrigger";var nO=We(({className:t,children:e,footer:n,header:r,maxW:o,maxWidth:s,minW:i,minWidth:a,w:l,width:u,contentProps:c,...d},f)=>{var p,h,m,g,y,v,b,x,w;const{styles:S}=yo(),{getListProps:k,onAnimationComplete:$}=Spe();return u??(u=l),u??(u=(m=(p=S.list)==null?void 0:p.width)!=null?m:(h=S.list)==null?void 0:h.w),a??(a=i),a??(a=(v=(g=S.list)==null?void 0:g.minWidth)!=null?v:(y=S.list)==null?void 0:y.minW),s??(s=o),s??(s=(w=(b=S.list)==null?void 0:b.maxWidth)!=null?w:(x=S.list)==null?void 0:x.maxW),M.jsxs(eO,{className:"ui-autocomplete__popover",maxWidth:s,minWidth:a,width:u,__css:{...S.content,maxWidth:s,minWidth:a,width:u},...c,onAnimationComplete:Ot(c==null?void 0:c.onAnimationComplete,$),children:[r?M.jsx(Re.header,{className:"ui-autocomplete__header",__css:{...S.header},children:r}):null,M.jsx(Re.div,{className:Ye("ui-autocomplete__list",t),__css:{...S.list},...k(d,f),children:e}),n?M.jsx(Re.footer,{className:"ui-autocomplete__footer",__css:{...S.footer},children:n}):null]})});nO.displayName="AutocompleteList";nO.__ui__="AutocompleteList";var rO=We((t,e)=>{const[n,r]=ay("MultiAutocomplete",t);let{className:o,closeOnSelect:s=!1,color:i,component:a,defaultValue:l=[],footer:u,h:c,header:d,height:f,isClearable:p=!0,keepPlaceholder:h=!1,minH:m,minHeight:g,separator:y,clearIconProps:v,containerProps:b,contentProps:x,createProps:w,emptyProps:S,fieldProps:k,iconProps:$,inputProps:C,listProps:I,portalProps:E={isDisabled:!0},...O}=Vo(r);const{allowCreate:R,children:z,descendants:L,inputValue:B,isEmpty:D,value:F,formControlProps:j,getContainerProps:G,getFieldProps:Y,getPopoverProps:X,onClear:ee,onClose:ie,...se}=xpe({...O,closeOnSelect:s,defaultValue:l});c??(c=f),m??(m=g);const de={color:i,h:"fit-content",w:"100%",...n.container};return M.jsx(tpe,{value:L,children:M.jsx(ope,{value:{...se,allowCreate:R,inputValue:B,isEmpty:D,styles:n,value:F,formControlProps:j,onClose:ie},children:M.jsx(JA,{...X(),children:M.jsxs(Re.div,{className:Ye("ui-multi-autocomplete",o),__css:de,...G(b),children:[M.jsxs(Re.div,{className:"ui-multi-autocomplete__inner",__css:{position:"relative",...n.inner},children:[M.jsx(oO,{component:a,h:c,keepPlaceholder:h,minH:m,separator:y,inputProps:C,...Y(k,e)}),p&&F.length?M.jsx(jA,{...v,onClick:Ot(v==null?void 0:v.onClick,ee),...j}):M.jsx(eS,{...$,...j})]}),M.jsx(py,{...E,children:M.jsx(nO,{footer:jn(u,{value:F,onClose:ie}),header:jn(d,{value:F,onClose:ie}),contentProps:x,...I,children:D?R&&B?M.jsx(Tx,{...w}):M.jsx(_x,{...S}):M.jsxs(M.Fragment,{children:[R?M.jsx(Tx,{...w}):M.jsx(_x,{...S}),z]})})})]})})})})});rO.displayName="MultiAutocomplete";rO.__ui__="MultiAutocomplete";var oO=We(({className:t,component:e,h:n,keepPlaceholder:r,minH:o,placeholder:s,separator:i=",",inputProps:a,...l},u)=>{const{inputRef:c,inputValue:d,isOpen:f,label:p,styles:h,value:m,onChange:g}=yo(),{getInputProps:y}=wpe(),v=N.useMemo(()=>p!=null&&p.length?e?p.map((x,w)=>{if(!m[w])return null;const S=C=>{m[w]&&(C.stopPropagation(),g(m[w]),c.current&&c.current.focus())},k=e({index:w,label:x,value:m[w],onRemove:S}),$={marginBlockEnd:"0.125rem",marginBlockStart:"0.125rem",marginInlineEnd:"0.25rem"};return k?N.cloneElement(k,{key:w,style:$}):null}):p.map((x,w)=>{const S=p.length===w+1;return M.jsxs(Re.span,{display:"inline-block",me:"0.25rem",children:[x,!S||f?i:null]},w)}):null,[p,e,m,g,f,c,i]),b={alignItems:"center",display:"flex",flexWrap:"wrap",h:n,minH:o,pe:"2rem",...h.field,cursor:"text"};return p!=null&&p.length&&e&&(b.py="0.125rem"),M.jsx(tO,{children:M.jsxs(Re.div,{className:Ye("ui-multi-autocomplete__field",t),__css:b,...l,children:[v,M.jsx(Re.input,{className:"ui-multi-autocomplete__field__input",display:"inline-block",flex:"1",marginBlockEnd:"0.125rem",marginBlockStart:"0.125rem",minW:"0px",overflow:"hidden",placeholder:!(p!=null&&p.length)||r&&f?s:void 0,...y({...a,value:d},u)})]})})});oO.displayName="MultiAutocompleteField";oO.__ui__="MultiAutocompleteField";var[zhe,Bhe]=ul({name:"ButtonGroupContext",strict:!1}),u8=We(({className:t,size:e,variant:n,columnGap:r,direction:o,gap:s,isAttached:i,isDisabled:a,rowGap:l,...u},c)=>{const d=o==="column"||o==="column-reverse",f={display:"inline-flex",flexDirection:o},p=N.useMemo(()=>({size:e,variant:n,isDisabled:a}),[e,n,a]);return i?Object.assign(f,{"> *:first-of-type:not(:last-of-type)":d?{borderBottomRadius:0,marginBlockEnd:"-1px"}:{borderRightRadius:0,marginInlineEnd:"-1px"},"> *:not(:first-of-type):last-of-type":d?{borderTopRadius:0,marginBlockStart:"-1px"}:{borderLeftRadius:0},"> *:not(:first-of-type):not(:last-of-type)":d?{borderRadius:0,marginBlockStart:"-1px"}:{borderRadius:0,marginInlineEnd:"-1px"}}):Object.assign(f,{columnGap:r,gap:s,rowGap:l}),M.jsx(zhe,{value:p,children:M.jsx(Re.div,{ref:c,className:Ye("ui-button-group",t),"data-attached":nr(i),role:"group",__css:f,...u})})});u8.displayName="ButtonGroup";u8.__ui__="ButtonGroup";var sO=We(({children:t,__isProcessSkip:e,__styles:n,...r},o)=>{const s=Bhe(),[i,a]=cl("Button",{...s,...r},{isProcessSkip:e,styles:n}),{as:l,type:u,className:c,disableRipple:d,isActive:f,isDisabled:p=s==null?void 0:s.isDisabled,isLoading:h,isRounded:m,leftIcon:g,loadingIcon:y,loadingPlacement:v="start",loadingText:b,rightIcon:x,__css:w,...S}=Vo(a),k=p||h,{ref:$,type:C}=jhe(l),{onPointerDown:I,...E}=l8({...S,isDisabled:d||k}),O=N.useMemo(()=>{var L;const B="_focus"in i?pn((L=i._focus)!=null?L:{},{zIndex:"fallback(yamcha, 1)"}):{};return{alignItems:"center",appearance:"none",display:"inline-flex",gap:"fallback(2, 0.5rem)",justifyContent:"center",outline:"none",overflow:"hidden",position:"relative",userSelect:"none",verticalAlign:"middle",whiteSpace:"nowrap",...i,...w,...s?{_focus:B}:{},...m?{borderRadius:"fallback(full, 9999px)"}:{}}},[i,w,s,m]),R={children:t,leftIcon:g,rightIcon:x},z={loadingIcon:y,loadingText:b};return M.jsxs(Re.button,{ref:uo(o,$),as:l,type:u??C,className:Ye("ui-button",c),"data-active":nr(f),"data-loading":nr(h),disabled:k,__css:O,...S,onPointerDown:I,children:[h&&v==="start"?M.jsx(Ex,{className:"ui-button__loading--start",...z}):null,h?b||M.jsx(Re.span,{opacity:0,children:M.jsx(Ax,{...R})}):M.jsx(Ax,{...R}),h&&v==="end"?M.jsx(Ex,{className:"ui-button__loading--end",...z}):null,M.jsx(oS,{...E})]})});sO.displayName="Button";sO.__ui__="Button";var Ex=({className:t,loadingIcon:e,loadingText:n})=>{const r=N.useMemo(()=>({alignItems:"center",display:"flex",fontSize:"1em",lineHeight:"normal",position:n?"relative":"absolute"}),[n]),o=N.useMemo(()=>typeof e=="string"?M.jsx(nu,{variant:e,color:"current"}):e||M.jsx(nu,{color:"current"}),[e]);return M.jsx(Re.div,{className:Ye("ui-button__loading",t),__css:r,children:o})};Ex.displayName="ButtonLoading";Ex.__ui__="ButtonLoading";var Ax=({children:t,leftIcon:e,rightIcon:n})=>M.jsxs(M.Fragment,{children:[e?M.jsx(Ox,{children:e}):null,t,n?M.jsx(Ox,{children:n}):null]});Ax.displayName="ButtonContent";Ax.__ui__="ButtonContent";var Ox=({className:t,children:e,...n})=>M.jsx(Re.span,{className:Ye("ui-button__icon",t),"aria-hidden":!0,alignSelf:"center",display:"inline-flex",flexShrink:0,...n,children:e});Ox.displayName="ButtonIcon";Ox.__ui__="ButtonIcon";var jhe=t=>{const e=N.useRef(!t),n=N.useCallback(o=>{o&&(e.current=o.tagName==="BUTTON")},[]),r=e.current?"button":void 0;return{ref:n,type:r}},[Vhe,iO]=ul({name:"CardContext",errorMessage:`useCard returned is 'undefined'. Seems you forgot to wrap the components in "<Card />" `}),aO=We((t,e)=>{const[n,r]=ay("Card",t),{className:o,align:s,direction:i="column",justify:a,...l}=Vo(r),u={alignItems:s,display:"flex",flexDirection:i,justifyContent:a,wordWrap:"break-word",...n.container};return M.jsx(Vhe,{value:n,children:M.jsx(Re.article,{ref:e,className:Ye("ui-card",o),__css:u,...l})})});aO.displayName="Card";aO.__ui__="Card";var c8=We(({className:t,...e},n)=>{const o={alignItems:"center",display:"flex",justifyContent:"flex-start",...iO().header};return M.jsx(Re.header,{ref:n,className:Ye("ui-card__header",t),__css:o,...e})});c8.displayName="CardHeader";c8.__ui__="CardHeader";var lO=We(({className:t,...e},n)=>{const o={alignItems:"flex-start",display:"flex",flexDirection:"column",...iO().body};return M.jsx(Re.div,{ref:n,className:Ye("ui-card__body",t),__css:o,...e})});lO.displayName="CardBody";lO.__ui__="CardBody";var d8=We(({className:t,...e},n)=>{const o={alignItems:"center",display:"flex",justifyContent:"flex-start",...iO().footer};return M.jsx(Re.footer,{ref:n,className:Ye("ui-card__footer",t),__css:o,...e})});d8.displayName="CardFooter";d8.__ui__="CardFooter";var iS=We(({className:t,align:e,children:n,direction:r="column",divider:o,gap:s="fallback(md, 1rem)",justify:i,wrap:a,...l},u)=>{const c=m=>m==="column"||m==="column-reverse",d=N.useMemo(()=>({borderBottomWidth:xv(r,m=>c(m)?"1px":0),borderLeftWidth:xv(r,m=>c(m)?0:"1px"),h:xv(r,m=>c(m)?"fit-content":"100%"),w:xv(r,m=>c(m)?"100%":"fit-content")}),[r]),f=kp(n),p=o?f.map((m,g)=>{const y=typeof m.key<"u"?m.key:g,v=N.cloneElement(o,{__css:d});return M.jsxs(N.Fragment,{children:[g?v:null,m]},y)}):f,h=N.useMemo(()=>({alignItems:e,display:"flex",flexDirection:r,flexWrap:a,gap:s,justifyContent:i}),[e,r,a,s,i]);return M.jsx(Re.div,{ref:u,className:Ye("ui-stack",t),__css:h,...l,children:p})});iS.displayName="Stack";iS.__ui__="Stack";var uO=We(({className:t,...e},n)=>M.jsx(iS,{ref:n,className:Ye("ui-stack--horizontal",t),align:"center",direction:"row",...e}));uO.displayName="HStack";uO.__ui__="HStack";var f8=We(({className:t,...e},n)=>M.jsx(iS,{ref:n,className:Ye("ui-stack--vertical",t),align:"stretch",direction:"column",w:"100%",...e}));f8.displayName="VStack";f8.__ui__="VStack";var p8=We(({className:t,children:e,direction:n="bottom",fit:r=!0,gap:o="fallback(md, 1rem)",reverse:s=!1,startIndex:i=0,...a},l)=>{const u=N.useRef(new Map),[c,d]=N.useState({height:0,width:0}),f={minHeight:`${c.height}px`,minWidth:`${c.width}px`},p={overflow:"hidden",position:"relative",vars:[{name:"space",token:"spaces",value:o}],...r?f:{}},h=N.useCallback(y=>n.includes("top")?{[s?"top":"bottom"]:y}:n.includes("bottom")?{[s?"bottom":"top"]:y}:{[s?"bottom":"top"]:0},[n,s]),m=N.useCallback(y=>n.includes("left")?{[s?"left":"right"]:y}:n.includes("right")?{[s?"right":"left"]:y}:{[s?"right":"left"]:0},[n,s]),g=N.useMemo(()=>kp(e).map((b,x)=>{var w;const S=N.createRef();u.current.set(x,S);const k=(w=b.key)!=null?w:x,$=i+x,C=`calc($space * ${x})`;let I={};I={...I,position:"absolute",zIndex:$},I={...I,...h(C)},I={...I,...m(C)};const E={...b.props,ref:uo(b.ref,S),__css:I},O=N.cloneElement(b,E);return M.jsx(N.Fragment,{children:O},k)}),[e,i,h,m]);return N.useEffect(()=>{var y,v;if(!r)return;let b=n.includes("left"),x=n.includes("top"),w=0,S=0;s&&(b=!b,x=!x);for(const k of u.current.values()){if(!k.current)continue;let{offsetHeight:$,offsetLeft:C,offsetParent:I,offsetTop:E,offsetWidth:O}=k.current;I&&(b&&(C=((y=I==null?void 0:I.offsetWidth)!=null?y:0)-C-O),x&&(E=((v=I==null?void 0:I.offsetHeight)!=null?v:0)-E-$),O+=C,$+=E,O>w&&(w=O),$>S&&(S=$))}d({height:S,width:w})},[g,n,s,r]),M.jsx(Re.div,{ref:l,className:Ye("ui-stack--depth",t),__css:p,...a,children:g})});p8.displayName="ZStack";p8.__ui__="ZStack";var cO=Re("div",{baseStyle:{alignItems:"center",display:"flex",justifyContent:"center"}});cO.displayName="Center";cO.__ui__="Center";var dO=We((t,e)=>{const[n,r]=cl("Container",t),{className:o,centerContent:s,...i}=Vo(r),a=N.useMemo(()=>({alignItems:s?"center":void 0,...n}),[s,n]);return M.jsx(Re.section,{ref:e,className:Ye("ui-container",o),__css:a,...i})});dO.displayName="Container";dO.__ui__="Container";var h8={exports:{}},Whe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Uhe=Whe,Ghe=Uhe;function m8(){}function g8(){}g8.resetWarningCache=m8;var Hhe=function(){function t(r,o,s,i,a,l){if(l!==Ghe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:g8,resetWarningCache:m8};return n.PropTypes=n,n};h8.exports=Hhe();var qhe=h8.exports;const Je=Dt(qhe);var fO=We((t,e)=>{const[n,r]=cl("Heading",t),{className:o,...s}=Vo(r);return M.jsx(Re.h1,{ref:e,className:Ye("ui-heading",o),__css:n,...s})});fO.displayName="Heading";fO.__ui__="Heading";var fm=We((t,e)=>{const[n,r]=cl("Text",t),{className:o,align:s,casing:i,decoration:a,...l}=Vo(r),u=Cw({textAlign:s,textDecoration:a,textTransform:i});return M.jsx(Re.p,{ref:e,className:Ye("ui-text",o),__css:n,...u,...l})});fm.displayName="Text";fm.__ui__="Text";var Khe=(t,e)=>t.find(n=>n.id===e),yz=(t,e)=>{const n=y8(t,e);return{index:n?t[n].findIndex(o=>o.id===e):-1,placement:n}},y8=(t,e)=>{for(const[n,r]of Object.entries(t))if(Khe(r,e))return n},vz=0,Xhe=(t,{id:e,style:n,duration:r,placement:o="top",status:s,onCloseComplete:i})=>(vz+=1,e??(e=vz),{id:e,style:n,duration:r,isDelete:!1,message:t,placement:o,status:s,onCloseComplete:i,onDelete:()=>pm.remove(String(e),o)}),Yhe=t=>{const{component:e}=t;return r=>typeof e=="function"?e({...r,...t}):M.jsx(pO,{...r,...t})},Zhe={bottom:[],"bottom-left":[],"bottom-right":[],top:[],"top-left":[],"top-right":[]},Qhe=t=>{let e=t;const n=new Set,r=o=>{e=o(e),n.forEach(s=>s())};return{close:o=>{r(s=>{const i=y8(s,o);return i?{...s,[i]:s[i].map(a=>a.id==o?{...a,isDelete:!0}:a)}:s})},closeAll:({placement:o}={})=>{r(s=>{let i=["bottom","bottom-right","bottom-left","top","top-left","top-right"];return o&&(i=o),i.reduce((a,l)=>(a[l]=s[l].map(u=>({...u,isDelete:!0})),a),{...s})})},create:(o,s)=>{const i=s.limit,a=Xhe(o,s),{id:l,placement:u}=a;return r(c=>{let d=c[u];if(i!==void 0&&i>0&&d.length>i-1){const p=d.length-(i-1),m=(u.includes("top")?d.slice(p*-1):d.slice(0,p)).map(({id:g})=>g);d=d.map(g=>m.includes(g.id)?{...g,isDelete:!0}:g)}const f=u.includes("top")?[a,...d]:[...d,a];return{...c,[u]:f}}),l},getSnapshot:()=>e,isActive:o=>!!yz(pm.getSnapshot(),o).placement,remove:(o,s)=>{r(i=>({...i,[s]:i[s].filter(a=>a.id!=o)}))},subscribe:o=>(n.add(o),()=>{r(()=>t),n.delete(o)}),update:(o,s)=>{r(i=>{const a={...i},{index:l,placement:u}=yz(a,o);return u&&l!==-1&&a[u][l]&&(a[u][l]={...a[u][l],...s,message:Yhe(s)}),a})}}},pm=Qhe(Zhe),pO=({className:t,colorScheme:e,variant:n="basic",closeStrategy:r="button",description:o,icon:s,isClosable:i,status:a,title:l,onClose:u})=>{const c=i&&(r==="button"||r==="both"),d=i&&(r==="element"||r==="both");return M.jsxs(RA,{className:Ye("ui-notice",t),colorScheme:e,variant:n,alignItems:"start",boxShadow:"fallback(lg, 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05))",pe:c?8:void 0,status:a,onClick:d?u:void 0,children:[M.jsx(DA,{className:"ui-notice__icon",variant:s==null?void 0:s.variant,...s!=null&&s.color?{color:s.color}:{},children:s==null?void 0:s.children}),M.jsxs(Re.div,{flex:"1",children:[l?M.jsx(FA,{className:"ui-notice__title",lineClamp:1,children:l}):null,o?M.jsx(MA,{className:"ui-notice__desc",lineClamp:3,children:o}):null]}),c?M.jsx(sS,{className:"ui-notice__close-button",size:"sm",position:"absolute",right:2,top:2,onClick:f=>{f.stopPropagation(),u==null||u()}}):null]})};pO.displayName="Notice";pO.__ui__="Notice";var Jhe=({appendToParentPortal:t,containerRef:e,gap:n="fallback(4, 1rem)",variants:r,itemProps:o,listProps:s})=>{const i=N.useSyncExternalStore(pm.subscribe,pm.getSnapshot,pm.getSnapshot),a=Object.entries(i).map(([l,u])=>{const c=l.includes("top")?"env(safe-area-inset-top, 0px)":void 0,d=l.includes("bottom")?"env(safe-area-inset-bottom, 0px)":void 0,f=l.includes("left")?void 0:"env(safe-area-inset-right, 0px)",p=l.includes("right")?void 0:"env(safe-area-inset-left, 0px)",h={bottom:d,display:"flex",flexDirection:"column",gap:n,left:p,margin:n,pointerEvents:"none",position:"fixed",right:f,top:c,zIndex:"fallback(zarbon, 160)"};return M.jsx(Re.ul,{className:Ye("ui-notice__list",`ui-notice__list--${l}`),__css:h,...s,children:M.jsx(fy,{initial:!1,children:u.map(m=>M.jsx(hO,{variants:r,itemProps:o,...m},m.id))})},l)});return M.jsx(py,{appendToParentPortal:t,containerRef:e,children:a})},eme={animate:{opacity:1,scale:1,transition:{duration:.4,ease:[.4,0,.2,1]},x:0,y:0},exit:{opacity:0,scale:.95,transition:{duration:.2,ease:[.4,0,1,1]}},initial:({placement:t})=>({[["bottom","top"].includes(t)?"y":"x"]:(t==="bottom"||t.includes("right")?1:-1)*24,opacity:0})},hO=Bw(({style:t,duration:e=5e3,isDelete:n=!1,message:r,placement:o,variants:s=eme,itemProps:i,onCloseComplete:a,onDelete:l})=>{const[u,c]=N.useState(e),d=nce();Qi(()=>{d||a==null||a()},[d]),Qi(()=>{c(e)},[e]);const f=()=>c(null),p=()=>c(e),h=()=>{d&&l()};N.useEffect(()=>{d&&n&&l()},[d,n,l]),Zw(h,u);const m={maxW:"36rem",minW:"20rem",pointerEvents:"auto",...t};return M.jsx(Za.li,{className:"ui-notice__list__item",style:{display:"flex",justifyContent:o.includes("left")?"flex-start":o.includes("right")?"flex-end":"center"},animate:"animate",custom:{placement:o},exit:"exit",initial:"initial",layout:!0,variants:s,onHoverEnd:p,onHoverStart:f,...i,children:M.jsx(Re.div,{className:"ui-notice__list__item__inner",__css:m,children:jn(r,{onClose:h})})})});hO.displayName="NoticeComponent";hO.__ui__="NoticeComponent";var tme={base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",xs:"0 0 0 1px rgba(0, 0, 0, 0.05)",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)","3xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25), 0 -25px 50px -12px rgba(0, 0, 0, 0.25)","dark-lg":"0px 0px 0px 1px rgba(0, 0, 0, 0.1), 0px 5px 10px rgba(0, 0, 0, 0.2), 0px 15px 40px rgba(0, 0, 0, 0.4)","dark-md":"0px 0px 0px 1px rgba(0, 0, 0, 0.1), 0px 5px 10px rgba(0, 0, 0, 0.2)","dark-sm":"0px 0px 0px 1px rgba(0, 0, 0, 0.1), 0px 1px 2px rgba(0, 0, 0, 0.2)",inline:"inset 0 0 0 3px rgb(0, 112, 240)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.06)",none:"none",outline:"0 0 0 3px rgb(0, 112, 240)"},v8={.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",4.5:"1.125rem",5:"1.25rem",5.5:"1.375rem",6:"1.5rem",6.5:"1.625rem",7:"1.75rem",7.5:"1.875rem",8:"2rem",9:"2.25rem",10:"2.5rem",11:"2.75rem",12:"3rem",13:"3.25rem",14:"3.5rem",15:"3.75rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",68:"17rem",72:"18rem",76:"19rem",80:"20rem",84:"21rem",88:"22rem",92:"23rem",96:"24rem",px:"1px"},nme={...v8,full:"100%",max:"max-content",min:"min-content","9xs":"1rem","8xs":"1.5rem","7xs":"2rem","6xs":"3rem","5xs":"4.5rem","4xs":"6rem","3xs":"7.5rem","2xs":"10rem",xs:"15rem",sm:"20rem",md:"24rem",lg:"28rem",xl:"32rem","2xl":"36rem","3xl":"42rem","4xl":"48rem","5xl":"56rem","6xl":"64rem","7xl":"72rem","8xl":"80rem","9xl":"90rem"},rme={duration:{"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"},easing:{"ease-in":"cubic-bezier(0.4, 0, 1, 1)","ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)","ease-out":"cubic-bezier(0, 0, 0.2, 1)"},property:{background:"background-color, background-image, background-position",colors:"background-color, border-color, color, fill, stroke",common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",dimensions:"width, height",position:"left, right, top, bottom"}},ome={yamcha:1,kurillin:9,nappa:99,guldo:100,jeice:110,burter:120,recoome:130,ginyu:140,dodoria:150,zarbon:160,freeza:9996,vegeta:9997,sonGoku:9998,beerus:9999},sme={"2xs":"0.625rem",xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2rem","5xl":"2.25rem","6xl":"3rem","7xl":"3.75rem","8xl":"4.5rem","9xl":"6rem"},ime={hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},ame={body:'-apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", "", YuGothic, "YuGothic M", "Hiragino Kaku Gothic ProN", Meiryo, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", "", YuGothic, "YuGothic M", "Hiragino Kaku Gothic ProN", Meiryo, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace'},lme={},ume={tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},cme={base:1.5,normal:"normal",shorter:1.25,short:1.375,tall:1.625,taller:2,none:1,3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},dme={base:"0.25rem",sm:"0.125rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px",none:"0"},fme={},pme={sm:"4px",md:"8px",lg:"12px",xl:"16px","2xl":"24px"},hme={},mme={sm:"30em",md:"48em",lg:"61em",xl:"80em","2xl":"90em"},gme={black:"#141414",white:"#fbfbfb",border:["#dcdcde","#434248"],current:"currentColor",focus:"#0070F0",blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)",950:"rgba(0, 0, 0, 0.96)"},whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)",950:"rgba(255, 255, 255, 0.96)"},amber:{50:"#fdf0d8",100:"#fde8c4",200:"#fbd593",300:"#f9c367",400:"#f7b23b",500:"#f59f0a",600:"#ce8509",700:"#a26907",800:"#764c05",900:"#4e3303",950:"#362302"},blue:{50:"#e2edfd",100:"#cfe0fc",200:"#adcbfa",300:"#8bb5f8",400:"#659cf6",500:"#4387f4",600:"#186bf2",700:"#0c59d4",800:"#0a47a9",900:"#07357d",950:"#062c6a"},cyan:{50:"#cef6fd",100:"#b0f1fd",200:"#7ee8fb",300:"#4de0f9",400:"#16d6f8",500:"#07b6d5",600:"#0590a8",700:"#046e81",800:"#034854",900:"#012228",950:"#011114"},emerald:{50:"#d0fbed",100:"#b4f8e2",200:"#80f4cd",300:"#4defb9",400:"#19eba5",500:"#10b77f",600:"#0d9165",700:"#096748",800:"#06422e",900:"#021710",950:"#000503"},flashy:{50:"#fdedf5",100:"#fbdaeb",200:"#f7b5d6",300:"#f390c2",400:"#ef6bad",500:"#ec4699",600:"#e82185",700:"#c6156e",800:"#a21159",900:"#780d42",950:"#660b38"},fuchsia:{50:"#f9e3fd",100:"#f5d0fb",200:"#eeaff8",300:"#e78af5",400:"#e069f2",500:"#d948ef",600:"#d01eeb",700:"#b112ca",800:"#900ea4",900:"#6b0b7a",950:"#5b0967"},gray:{50:"#dedfe3",100:"#d3d5da",200:"#b7bbc3",300:"#9ea3ae",400:"#828997",500:"#6b7280",600:"#565c67",700:"#434851",800:"#2e3138",900:"#1c1e21",950:"#101113"},green:{50:"#cff7de",100:"#b5f2cb",200:"#85eaaa",300:"#51e186",400:"#23d163",500:"#1ba14c",600:"#16833e",700:"#126932",800:"#0d4e25",900:"#083017",950:"#062311"},indigo:{50:"#e8e8fd",100:"#d9dafc",200:"#bdbef9",300:"#9c9ef6",400:"#8082f4",500:"#6467f2",600:"#3a3dee",700:"#1417e6",800:"#1114c0",900:"#0d0f96",950:"#0b0d83"},lime:{50:"#e7facc",100:"#ddf7b5",200:"#c7f287",300:"#b2ee59",400:"#9de92b",500:"#82cb15",600:"#6ba611",700:"#507d0d",800:"#385809",900:"#1e2e05",950:"#121c03"},neutral:{50:"#dedede",100:"#d4d4d4",200:"#bababa",300:"#a3a3a3",400:"#8a8a8a",500:"#737373",600:"#5c5c5c",700:"#474747",800:"#303030",900:"#1c1c1c",950:"#0f0f0f"},orange:{50:"#fef0e6",100:"#fee4d2",200:"#fdc7a1",300:"#fbac74",400:"#fa9247",500:"#f97415",600:"#e06106",700:"#b34d05",800:"#863a03",900:"#5e2902",950:"#461e02"},pink:{50:"#fde8ed",100:"#fcd9e3",200:"#f9b9ca",300:"#f693ad",400:"#f37295",500:"#f0517c",600:"#ec275c",700:"#d81347",800:"#ae0f39",900:"#880c2d",950:"#710a25"},purple:{50:"#f0e2fe",100:"#e9d3fd",200:"#d7b1fb",300:"#c994fa",400:"#b772f8",500:"#a855f7",600:"#9229f5",700:"#7e0bea",800:"#6609be",900:"#510797",950:"#44067f"},red:{50:"#fdeae8",100:"#fbd9d5",200:"#f6b2ac",300:"#f28c82",400:"#ee6a5d",500:"#ea4334",600:"#de2817",700:"#b42013",800:"#8a190f",900:"#66120b",950:"#530f09"},rose:{50:"#feecef",100:"#fdd8de",200:"#fbb2be",300:"#f88b9d",400:"#f6657d",500:"#f43e5c",600:"#f2183c",700:"#cf0c2d",800:"#a40a23",900:"#7d071b",950:"#650616"},sky:{50:"#ddf3fd",100:"#c5eafc",200:"#95d9f9",300:"#65c8f6",400:"#35b7f3",500:"#0da2e7",600:"#0b87c1",700:"#096995",800:"#064e6f",900:"#042f43",950:"#032230"},teal:{50:"#cdf9f4",100:"#b1f6ee",200:"#7ef1e3",300:"#51ecda",400:"#1ee6cf",500:"#14b8a5",600:"#108e80",700:"#0c6a5f",800:"#07403a",900:"#031c19",950:"#010504"},transparent:"transparent",violet:{50:"#eee7fe",100:"#e3d8fd",200:"#cbb6fb",300:"#b699fa",400:"#a17cf8",500:"#895af6",600:"#6d34f4",700:"#500ced",800:"#410ac2",900:"#34089b",950:"#2e0788"},yellow:{50:"#fef4d7",100:"#feefc3",200:"#fde290",300:"#fdd663",400:"#fcc931",500:"#fbbd04",600:"#ce9b03",700:"#a67d03",800:"#795b02",900:"#503d01",950:"#372a01"}},yme={animations:fme,blurs:pme,borders:hme,breakpoints:mme,colors:gme,fonts:ame,fontSizes:sme,fontWeights:ime,gradients:lme,letterSpacings:ume,lineHeights:cme,radii:dme,shadows:tme,sizes:nme,spaces:v8,transitions:rme,zIndices:ome},vme={},bme={"*":{boxSizing:"border-box"},"::-webkit-file-upload-button":{font:"inherit",WebkitAppearance:"button"},"::-webkit-search-cancel-button":{WebkitAppearance:"none"},"::before, ::after":{boxSizing:"inherit"},"[contenteditable]":{outline:"none"},"[hidden]":{display:"none !important"},"[type='checkbox']":{appearance:"checkbox",WebkitAppearance:"checkbox"},"[type='number']::-webkit-inner-spin-button, [type='number']::-webkit-outer-spin-button":{display:"none"},"[type='radio']":{appearance:"radio",WebkitAppearance:"radio"},"[type='search']":{outlineOffset:"-2px"},"[type='search']::-webkit-search-decoration":{WebkitAppearance:"none"},"[type='time']::-webkit-calendar-picker-indicator":{display:"none"},a:{backgroundColor:"transparent",color:"inherit",textDecoration:"none"},"abbr[title]":{borderBottom:"none",textDecoration:"underline dotted"},address:{fontStyle:"inherit"},"b, strong":{fontWeight:"bolder"},body:{margin:0},"button, [type='button'], [type='reset'], [type='submit']":{appearance:"none",cursor:"pointer",WebkitAppearance:"none"},"button, input":{overflow:"visible"},"button, input, optgroup, select, textarea":{appearance:"none",background:"transparent",border:0,borderRadius:0,color:"inherit",font:"inherit",margin:0,outline:0,padding:0,textAlign:"inherit",verticalAlign:"middle",WebkitAppearance:"none"},"button, select":{textTransform:"none"},"button::-moz-focus-inner, [type='button']::-moz-focus-inner, [type='reset']::-moz-focus-inner, [type='submit']::-moz-focus-inner":{borderStyle:"none",padding:0},"button:-moz-focusring, [type='button']:-moz-focusring, [type='reset']:-moz-focusring, [type='submit']:-moz-focusring":{outline:"1px dotted ButtonText"},"button[disabled], [type='button'][disabled], [type='reset'][disabled], [type='submit'][disabled]":{cursor:"default"},caption:{textAlign:"left"},"code, kbd, samp":{fontFamily:"monospace, monospace",fontSize:"inherit"},dd:{marginLeft:0},details:{display:"block"},dt:{fontWeight:"bold"},"embed, object, iframe":{border:0,verticalAlign:"bottom"},fieldset:{margin:0,minWidth:0,padding:0},"h1, h2, h3, h4, h5, h6":{fontSize:"inherit",fontWeight:"inherit",lineHeight:"inherit",margin:0},hr:{border:0,borderTop:"1px solid",boxSizing:"content-box",clear:"both",color:"inherit",height:0,margin:0,overflow:"visible"},html:{lineHeight:1.15,WebkitTapHighlightColor:"transparent",WebkitTextSizeAdjust:"100%"},img:{borderStyle:"none",verticalAlign:"bottom"},"label[for]":{cursor:"pointer"},cite:{fontStyle:"inherit"},legend:{color:"inherit",display:"table",maxWidth:"100%",padding:0,whiteSpace:"normal"},main:{display:"block"},option:{padding:0},"p, table, blockquote, address, pre, iframe, form, figure, dl":{margin:0},pre:{fontFamily:"monospace, monospace",fontSize:"inherit"},progress:{verticalAlign:"baseline"},"select::-ms-expand":{display:"none"},small:{fontSize:"80%"},sub:{bottom:"-0.25em"},"sub, sup":{fontSize:"75%",lineHeight:0,position:"relative",verticalAlign:"baseline"},summary:{display:"list-item"},sup:{top:"-0.5em"},table:{borderCollapse:"collapse",borderSpacing:0},"td, th":{padding:0,verticalAlign:"top"},template:{display:"none"},textarea:{overflow:"auto"},th:{fontWeight:"bold",textAlign:"left"},"ul, ol":{listStyle:"none",margin:0,padding:0}},xme={},wme={"*, *::before, *::after":{borderColor:"border",borderStyle:"solid",borderWidth:"0",wordWrap:"break-word"},"*::placeholder, *[data-placeholder]":{color:"blackAlpha.600"},body:{bg:["white","black"],color:["black","white"],fontFamily:"body",lineHeight:"base",overflowX:"hidden",transitionDuration:"normal",transitionProperty:"background-color"},_dark:{"*::placeholder, *[data-placeholder]":{color:"whiteAlpha.400"}}},Sme={baseStyle:{closeButton:{opacity:.5,rounded:"full",transitionDuration:"normal",transitionProperty:"common",_active:{opacity:1},_disabled:{opacity:.4},_focusVisible:{bg:"rgba(0, 0, 0, 0.14)",boxShadow:"outline"},_hover:{opacity:.8,_disabled:{cursor:"not-allowed",opacity:.4}}},container:{fontWeight:"medium",outline:0,rounded:"md",_focusVisible:{boxShadow:"outline"}},label:{overflow:"visible"}},variants:{outline:{container:({colorScheme:t="primary"})=>({boxShadow:"inset 0 0 0px 1px $color",color:"$color",vars:[{name:"color",token:"colors",value:[`${t}.600`,ye(t)?`${t}.300`:`${t}.500`]}]})},solid:{container:({colorScheme:t="primary"})=>({bg:ye(t)?[`${t}.50`,`${t}.700`]:[St(t)?`${t}.400`:`${t}.500`,`${t}.600`],color:[ye(t)||St(t)?"black":"white","white"]})},subtle:{container:({colorScheme:t="primary",colorMode:e,theme:n})=>({bg:[`${t}.50`,et(`${t}.300`,68)(n,e)],color:[`${t}.800`,ye(t)?`${t}.50`:`${t}.200`]})},surface:{container:({colorScheme:t="primary",colorMode:e,theme:n})=>({bg:[`${t}.50`,et(`${t}.300`,68)(n,e)],boxShadow:"inset 0 0 0px 1px $color",color:[`${t}.800`,ye(t)?`${t}.50`:`${t}.200`],vars:[{name:"color",token:"colors",value:[`${t}.100`,et(`${t}.300`,56)(n,e)]}]})}},sizes:{sm:{container:{fontSize:"xs",lineHeight:"$sizes.6",minH:"6",minW:"6",px:"2"}},md:{container:{fontSize:"sm",lineHeight:"$sizes.7",minH:"7",minW:"7",px:"2"}},lg:{container:{fontSize:"md",lineHeight:"$sizes.8",minH:"8",minW:"8",px:"3"}}},defaultProps:{colorScheme:"primary",size:"md",variant:"subtle"}},kme={},bu={baseStyle:{container:{},element:{color:["blackAlpha.600","whiteAlpha.700"]},field:{appearance:"none",minWidth:0,outline:0,position:"relative",transitionDuration:"normal",transitionProperty:"border-color, box-shadow, background-color, opacity",width:"100%",_disabled:{cursor:"not-allowed",opacity:.4}}},sizes:{xs:{addon:{fontSize:"xs",minH:"6",px:"2",rounded:"sm"},field:{fontSize:"xs",minH:"6",px:"2",rounded:"sm"}},sm:{addon:{fontSize:"sm",minH:"8",px:"2",rounded:"md"},field:{fontSize:"sm",minH:"8",px:"2",rounded:"md"}},md:{addon:{fontSize:"md",minH:"10",px:"3",rounded:"md"},field:{fontSize:"md",minH:"10",px:"3",rounded:"md"}},lg:{addon:{fontSize:"lg",minH:"12",px:"4",rounded:"md"},field:{fontSize:"lg",minH:"12",px:"4",rounded:"md"}},xl:{addon:{fontSize:"xl",minH:"14",px:"4",rounded:"lg"},field:{fontSize:"xl",minH:"14",px:"4",rounded:"lg"}}},variants:{filled:({colorMode:t,errorBorderColor:e=["danger.500","danger.400"],focusBorderColor:n="focus",theme:r})=>{const o=qe(n)?Ur(Ge(n[0],n[0])(r,t),Ge(n[1],n[1])(r,t))(t):Ge(n,n)(r,t),s=qe(e)?Ur(Ge(e[0],e[0])(r,t),Ge(e[1],e[1])(r,t))(t):Ge(e,e)(r,t);return{addon:{bg:["blackAlpha.300","whiteAlpha.300"],border:"2px solid transparent"},field:{bg:["blackAlpha.50","whiteAlpha.50"],border:"2px solid",borderColor:"transparent",_active:{bg:"transparent",borderColor:o,boxShadow:`0 0 0 1px ${o}`},_focusVisible:{bg:"transparent",borderColor:o,boxShadow:`0 0 0 1px ${o}`},_hover:{bg:["blackAlpha.100","whiteAlpha.100"]},_invalid:{borderColor:s,boxShadow:`0 0 0 1px ${s}`},_readOnly:{boxShadow:"none !important",userSelect:"all"}}}},flushed:({colorMode:t,errorBorderColor:e=["danger.500","danger.400"],focusBorderColor:n="focus",theme:r})=>{const o=qe(n)?Ur(Ge(n[0],n[0])(r,t),Ge(n[1],n[1])(r,t))(t):Ge(n,n)(r,t),s=qe(e)?Ur(Ge(e[0],e[0])(r,t),Ge(e[1],e[1])(r,t))(t):Ge(e,e)(r,t);return{addon:{bg:"transparent",borderBottom:"1px solid",borderColor:"inherit",rounded:"0"},field:{bg:"transparent",borderBottom:"1px solid",borderColor:"inherit",px:"0",rounded:"0",_active:{borderColor:[o,o],boxShadow:`0px 1px 0px 0px ${o}`},_focusVisible:{borderColor:[o,o],boxShadow:`0px 1px 0px 0px ${o}`},_hover:{borderColor:["blackAlpha.500","whiteAlpha.400"]},_invalid:{borderColor:[s,s],boxShadow:`0px 1px 0px 0px ${s}`},_readOnly:{boxShadow:"none !important",userSelect:"all"}}}},outline:({colorMode:t,errorBorderColor:e=["danger.500","danger.400"],focusBorderColor:n="focus",theme:r})=>{const o=qe(n)?Ur(Ge(n[0],n[0])(r,t),Ge(n[1],n[1])(r,t))(t):Ge(n,n)(r,t),s=qe(e)?Ur(Ge(e[0],e[0])(r,t),Ge(e[1],e[1])(r,t))(t):Ge(e,e)(r,t);return{addon:{bg:["blackAlpha.300","whiteAlpha.300"],border:"1px solid",borderColor:["inherit","whiteAlpha.50"]},field:{bg:"inherit",border:"1px solid",borderColor:"inherit",_active:{borderColor:[o,o],boxShadow:`0 0 0 1px ${o}`},_focusVisible:{borderColor:[o,o],boxShadow:`0 0 0 1px ${o}`,zIndex:"yamcha"},_hover:{borderColor:["blackAlpha.500","whiteAlpha.400"]},_invalid:{borderColor:[s,s],boxShadow:`0 0 0 1px ${s}`},_readOnly:{boxShadow:"none !important",userSelect:"all"}}}},unstyled:{addon:{bg:"transparent",minH:"auto",px:"0"},field:{bg:"transparent",minH:"auto",px:"0"}}},defaultProps:{size:"md",variant:"outline"}},$me=Vw(sae(bu,"field"),{baseStyle:{lineHeight:"short",py:"2",verticalAlign:"top"},sizes:{xs:{minH:"20",py:"2"},sm:{minH:"20",py:"2"},md:{minH:"20",py:"2"},lg:{minH:"20",py:"3"}},variants:{unstyled:{h:"auto",px:"0",py:"0"}}})(),Cme={baseStyle:{cursor:"pointer",rounded:"md",transitionDuration:"slower",transitionProperty:"common",_disabled:{boxShadow:"none",cursor:"not-allowed",opacity:.4},_readOnly:{cursor:"default",_ripple:{display:"none"}}},variants:{outline:({colorScheme:t="gray",colorMode:e,theme:n})=>({border:"1px solid",borderColor:ye(t)?[`${t}.50`,`${t}.700`]:[St(t)?`${t}.400`:`${t}.500`,`${t}.600`],color:ye(t)?["blackAlpha.800","whiteAlpha.700"]:[`${t}.600`,`${t}.500`],_focusVisible:{boxShadow:"outline",_invalid:{borderColor:"transparent"}},_hover:{bg:[`${t}.50`,pr(`${t}.600`,.12)(n,e)]},_selected:{bg:ye(t)?[`${t}.50`,`${t}.700`]:[St(t)?`${t}.400`:`${t}.500`,`${t}.600`],color:[ye(t)||St(t)?"black":"white","white"]}}),solid:({colorScheme:t="gray",colorMode:e,theme:n})=>({_focusVisible:{borderColor:"transparent",boxShadow:"outline"},_hover:{bg:[`${t}.50`,et(`${t}.300`,68)(n,e)]},_selected:{bg:ye(t)?[`${t}.50`,`${t}.700`]:[St(t)?`${t}.400`:`${t}.500`,`${t}.600`],color:[ye(t)||St(t)?"black":"white","white"]}}),subtle:({colorScheme:t="gray",colorMode:e,theme:n})=>({_focusVisible:{borderColor:"transparent",boxShadow:"outline"},_hover:{bg:[`${t}.50`,et(`${t}.300`,68)(n,e)]},_selected:{bg:[`${t}.100`,et(`${t}.300`,56)(n,e)]}}),unstyled:{bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:0,p:0,_ripple:{display:"none"}}},sizes:{xs:{fontSize:"xs",lineHeight:"$sizes.6",minBoxSize:6},sm:{fontSize:"sm",lineHeight:"$sizes.8",minBoxSize:8},md:{fontSize:"md",lineHeight:"$sizes.10",minBoxSize:10},lg:{fontSize:"lg",lineHeight:"$sizes.12",minBoxSize:12}},defaultProps:{colorScheme:"gray",size:"md",variant:"subtle"}},Tme={baseStyle:{bg:["white","black"],border:"1px solid",borderColor:["blackAlpha.200","whiteAlpha.100"],boxShadow:["md","dark-md"],color:"inherit",fontSize:"sm",fontWeight:"medium",maxW:"xs",px:"sm",py:"0.5",rounded:"md",zIndex:"dodoria"}},b8=Gt(bu,{baseStyle:{container:{},field:{"& > option, optgroup":{bg:["white","black"]},cursor:"pointer",pb:"px",pr:"8",_focus:{zIndex:"unset"},_readOnly:{pointerEvents:"none"}},icon:{color:["blackAlpha.600","whiteAlpha.700"],outline:0,py:"2",rounded:"md",w:"6",_disabled:{opacity:.4}}},sizes:{xs:{icon:{fontSize:"lg",insetEnd:"1",pt:"2"}},sm:{icon:{fontSize:"xl",insetEnd:"1.5"}},md:{icon:{fontSize:"xl",insetEnd:"2"}},lg:{icon:{fontSize:"2xl",insetEnd:"2"}},xl:{icon:{fontSize:"3xl",insetEnd:"3"}}}})({omit:["addon","element"]}),aS={baseStyle:{button:{transitionDuration:"normal",transitionProperty:"common"},command:{opacity:.6},content:{bg:["white","black"],border:"1px solid",borderColor:["blackAlpha.200","whiteAlpha.100"],boxShadow:["lg","dark-lg"],color:"inherit",minW:"xs",rounded:"md",zIndex:"guldo"},divider:{borderBottomWidth:"1px",borderColor:"inherit",my:"2"},group:{},groupLabel:{color:["blackAlpha.700","whiteAlpha.600"],fontSize:"sm",fontWeight:"semibold",px:"3",py:"1.5"},icon:{color:["blackAlpha.600","whiteAlpha.700"]},item:{cursor:"pointer",px:"3",py:"1.5",transitionDuration:"ultra-fast",transitionProperty:"background",transitionTimingFunction:"ease-in",_active:{bg:["blackAlpha.50","whiteAlpha.50"],_disabled:{bg:["white","black"]}},_disabled:{cursor:"not-allowed",opacity:.4},_focus:{bg:["blackAlpha.50","whiteAlpha.50"]}},list:{outline:"none",py:"2"}}},mO=Gt(b8,aS,{baseStyle:{content:{w:"100%"},footer:{},header:{},inner:{},item:{_active:{bg:["blackAlpha.200","whiteAlpha.200"]},_hover:{bg:["blackAlpha.100","whiteAlpha.100"],_disabled:{bg:["white","black"]}}},itemIcon:{},list:{maxH:"xs",overflowY:"auto"}}})({omit:["button","command"]}),gO=Gt(mO,{baseStyle:{clearIcon:{pointerEvents:"auto",transitionDuration:"normal",transitionProperty:"common",_disabled:{opacity:.4,pointerEvents:"none"},_focusVisible:{boxShadow:"outline"},_hover:{opacity:.8},_readOnly:{pointerEvents:"none"}}}})(),yy=Gt(bu,gO,{baseStyle:{container:{},content:{minW:"auto",p:"2",w:"auto"},field:{cursor:"text",pb:"px",_focus:{zIndex:"unset"},_notAllowed:{cursor:"pointer"},_readOnly:{pointerEvents:"none"}}},sizes:{xs:{icon:{fontSize:"sm",pt:"2"}},sm:{icon:{fontSize:"lg"}}}})({omit:["addon","element","group","groupLabel","header","footer","list","item","itemIcon"]}),_me=Gt(yy)(),Ime={baseStyle:{w:"100%"},defaultProps:{offsetX:0,offsetY:8,reverse:!0}},Nme={baseStyle:{position:"fixed",zIndex:"fallback(jeice, 110)"},defaultProps:{placement:"right"}},Eme={baseStyle:{container:{},helperMessage:{color:["blackAlpha.700","whiteAlpha.600"],fontSize:"sm"},icon:{h:"3.5",marginEnd:"1",vars:[{name:"increase",token:"colors",value:"success.400"},{name:"decrease",token:"colors",value:"danger.400"}],verticalAlign:"middle",w:"3.5"},label:{color:["blackAlpha.700","whiteAlpha.600"],fontWeight:"medium"},number:({colorScheme:t})=>({color:t?[`${t}.500`,`${t}.600`]:["blackAlpha.800","whiteAlpha.700"],fontFeatureSettings:'"pnum"',fontSize:"5xl",fontVariantNumeric:"proportional-nums",fontWeight:"extrabold",verticalAlign:"baseline"})},defaultProps:{}},Ame={baseStyle:({colorScheme:t="primary"})=>({description:{color:["blackAlpha.700","whiteAlpha.600"]},icon:{flexShrink:0},number:{},separator:{"&[data-status=complete]":{bg:[`${t}.500`,`${t}.400`]},bg:"border",flex:1,transitionDuration:"slow",transitionProperty:"common",_horizontal:{h:.5,ms:2,w:"100%"},_vertical:{h:"100%",position:"absolute",w:.5}},status:{"&[data-status=active]":{borderColor:[`${t}.500`,`${t}.400`],borderWidth:"2px"},"&[data-status=complete]":{bg:[`${t}.500`,`${t}.400`],color:["white","black"]},"&[data-status=incomplete]":{borderWidth:"2px"},alignItems:"center",display:"flex",flexShrink:0,justifyContent:"center",rounded:"full",transitionDuration:"slow",transitionProperty:"common"},step:{"&:last-of-type:not([data-stretch])":{flex:"initial"},display:"flex",flex:1,flexShrink:0,gap:2,position:"relative",_horizontal:{alignItems:"center"}},stepper:{display:"flex",justifyContent:"space-between",w:"100%",_horizontal:{alignItems:"center",flexDirection:"row",gap:4},_vertical:{alignItems:"flex-start",flexDirection:"column",gap:0}},title:{fontWeight:"medium"}}),sizes:{sm:({theme:t})=>({description:{fontSize:"xs"},icon:{h:4,w:4},number:{fontSize:"sm"},separator:{insetStart:`calc(${Be(t,"sizes.6")} / 2 - 1px)`,maxHeight:`calc(100% - ${Be(t,"sizes.6")} - 8px)`,top:`calc(${Be(t,"sizes.6")} + 4px)`},status:{h:6,w:6},title:{fontSize:"sm"}}),md:({theme:t})=>({description:{fontSize:"sn"},icon:{h:5,w:5},number:{fontSize:"md"},separator:{insetStart:`calc(${Be(t,"sizes.8")} / 2 - 1px)`,maxHeight:`calc(100% - ${Be(t,"sizes.8")} - 8px)`,top:`calc(${Be(t,"sizes.8")} + 4px)`},status:{h:8,w:8},title:{fontSize:"md"}}),lg:({theme:t})=>({description:{fontSize:"md"},icon:{h:6,w:6},number:{fontSize:"lg"},separator:{insetStart:`calc(${Be(t,"sizes.10")} / 2 - 1px)`,maxHeight:`calc(100% - ${Be(t,"sizes.10")} - 8px)`,top:`calc(${Be(t,"sizes.10")} + 4px)`},status:{h:10,w:10},title:{fontSize:"lg"}})},defaultProps:{colorScheme:"primary",size:"md"}},Ome={baseStyle:{container:{_disabled:{cursor:"not-allowed",opacity:.4},_readOnly:{cursor:"auto"}},label:{userSelect:"none"},thumb:{bg:"white",rounded:"inherit"},track:{bg:["blackAlpha.400","whiteAlpha.300"],rounded:"full",transitionDuration:"fast",transitionProperty:"common",_checked:{justifyContent:"flex-end"},_focusVisible:{boxShadow:"outline"}}},sizes:{sm:({variant:t})=>({label:{fontSize:"sm"},thumb:{h:"3",w:"3"},track:{h:t==="thin"?"2":void 0,w:"6"}}),md:({variant:t})=>({label:{fontSize:"md"},thumb:{h:"4",w:"4"},track:{h:t==="thin"?"3":void 0,w:"8"}}),lg:({variant:t})=>({label:{fontSize:"lg"},thumb:{h:"5",w:"5"},track:{h:t==="thin"?"4":void 0,w:"10"}})},variants:{thin:({colorScheme:t="primary",colorMode:e,theme:n})=>({thumb:{boxShadow:"dark-md",_checked:{bg:[`${t}.500`,`${t}.600`]}},track:{_checked:{bg:[ye(t)?`${t}.50`:`${t}.100`,et(`${t}.300`,58)(n,e)]}}}),thick:({colorScheme:t="primary"})=>({track:{p:"1",_checked:{bg:[`${t}.500`,`${t}.600`]}}})},defaultProps:{colorScheme:"primary",size:"md",variant:"thick"}},Pme={baseStyle:{container:({orientation:t})=>({display:"flex",flexDirection:t==="vertical"?"row":"column"}),tab:({isFitted:t})=>({flex:t?1:void 0,transitionDuration:"normal",transitionProperty:"common",whiteSpace:"nowrap",_disabled:{cursor:"not-allowed",opacity:.4},_focusVisible:{boxShadow:"outline",zIndex:"yamcha"},_hover:{opacity:.7},_selected:{_hover:{opacity:1}}}),tabList:({align:t,orientation:e})=>({flexDirection:e==="vertical"?"column":"row",justifyContent:t==="center"?t:`flex-${t}`}),tabPanel:{p:"md"},tabPanels:{}},variants:{line:({colorScheme:t="primary"})=>({tab:{borderColor:"transparent",_horizontal:{borderBottomStyle:"solid",borderBottomWidth:"1px",mb:"-1px"},_ripple:{display:"none"},_selected:{borderColor:"currentColor",color:ye(t)?["blackAlpha.800","whiteAlpha.700"]:[`${t}.600`,`${t}.500`]},_vertical:{borderEndStyle:"solid",borderEndWidth:"1px",me:"-1px"}},tabList:{borderColor:"inherit",_horizontal:{borderBottomWidth:"1px"},_vertical:{borderEndWidth:"1px"}}}),rounded:({colorScheme:t="primary"})=>({tab:{borderRadius:"full",vars:[{name:"color",token:"colors",value:[`${t}.600`,`${t}.500`]}],_selected:{boxShadow:"inset 0 0 0px 1px $color",color:ye(t)?["blackAlpha.800","whiteAlpha.700"]:[`${t}.600`,`${t}.500`]}},tabList:{gap:"sm"}}),"rounded-solid":({colorScheme:t="primary"})=>({tab:{borderRadius:"full",_selected:{bg:ye(t)?[`${t}.50`,`${t}.700`]:[St(t)?`${t}.400`:`${t}.500`,`${t}.600`],color:[ye(t)||St(t)?"black":"white","white"]}},tabList:{gap:"sm"}}),"rounded-subtle":({colorScheme:t="primary",colorMode:e,theme:n})=>({tab:{borderRadius:"full",_selected:{bg:[`${t}.50`,et(`${t}.300`,68)(n,e)],color:[`${t}.800`,ye(t)?`${t}.50`:`${t}.200`]}},tabList:{gap:"sm"}}),sticky:({colorScheme:t="primary"})=>({tab:{borderColor:"transparent",_horizontal:{borderStyle:"solid",borderWidth:"1px",mb:"-2px",roundedTop:"md"},_ripple:{display:"none"},_selected:{borderColor:"inherit",color:ye(t)?["blackAlpha.800","whiteAlpha.700"]:[`${t}.600`,`${t}.500`],_horizontal:{borderBottomColor:["white","black"]},_vertical:{borderEndColor:["white","black"]}},_vertical:{borderStyle:"solid",borderWidth:"1px",me:"-2px",roundedLeft:"md"}},tabList:{borderColor:"inherit",_horizontal:{borderBottomWidth:"1px"},_vertical:{borderEndWidth:"1px"}}}),"sticky-solid":({colorScheme:t="primary"})=>({tab:{borderColor:"inherit",_horizontal:{borderStyle:"solid",borderWidth:"1px",mb:"-1px"},_notLast:{_horizontal:{borderEnd:"none"},_vertical:{borderBottom:"none"}},_selected:{bg:ye(t)?[`${t}.50`,`${t}.700`]:[St(t)?`${t}.400`:`${t}.500`,`${t}.600`],color:[ye(t)||St(t)?"black":"white","white"]},_vertical:{borderStyle:"solid",borderWidth:"1px",me:"-1px"}},tabList:{borderColor:"inherit",_horizontal:{borderBottomWidth:"1px"},_vertical:{borderEndWidth:"1px"}}}),"sticky-subtle":({colorScheme:t="primary",colorMode:e,theme:n})=>({tab:{borderColor:"inherit",_horizontal:{borderStyle:"solid",borderWidth:"1px",mb:"-1px"},_notLast:{_horizontal:{borderEnd:"none"},_vertical:{borderBottom:"none"}},_selected:{bg:[`${t}.50`,et(`${t}.300`,68)(n,e)],color:[`${t}.800`,ye(t)?`${t}.50`:`${t}.200`]},_vertical:{borderStyle:"solid",borderWidth:"1px",me:"-1px"}},tabList:{borderColor:"inherit",_horizontal:{borderBottomWidth:"1px"},_vertical:{borderEndWidth:"1px"}}}),unstyled:{tab:{_hover:{opacity:"inherit"},_ripple:{display:"none"}}}},sizes:{sm:{tab:{fontSize:"sm",px:3,py:1}},md:{tab:{fontSize:"md",px:4,py:2}},lg:{tab:{fontSize:"lg",px:5,py:3}}},defaultProps:{colorScheme:"primary",size:"md",variant:"line"}},Rme={baseStyle:({direction:t})=>({container:{},icon:{color:["blackAlpha.600","whiteAlpha.700"],rotate:t==="vertical"?"90deg":"0deg"},item:{},trigger:{}}),variants:{border:({direction:t})=>({icon:{bg:"border",p:"1",rounded:"full"},trigger:{bg:"border",...t==="vertical"?{h:"px"}:{w:"px"},_after:{content:"''",position:"absolute",...t==="vertical"?{left:"0",right:"0",transform:"translateY(-50%)"}:{bottom:"0",top:"0",transform:"translateX(-50%)"},...t==="vertical"?{h:"2"}:{w:"2"}},_focus:{outline:"none"},_focusVisible:{bg:"focus",outline:"none"}}}),spacer:({colorScheme:t="gray",colorMode:e,direction:n,theme:r})=>({icon:{transitionDuration:"slower",transitionProperty:"common",_active:{color:["transparent","transparent"]}},trigger:{...n==="vertical"?{p:"1"}:{p:"1"},_active:{_after:{bg:ye(t)?"border":`${t}.50`},_dark:{_after:{bg:ye(t)?"border":pr(`${t}.600`,.12)(r,e)}}},_after:{bg:"transparent",content:"''",display:"block",rounded:"full",transitionDuration:"slower",transitionProperty:"common",...n==="vertical"?{h:"2",w:"full"}:{h:"full",w:"2"}},_dark:{_after:{bg:"transparent"}},_focus:{outline:"none"},_focusVisible:{outline:"none",_after:{bg:ye(t)?"border":`${t}.100`},_dark:{_after:{bg:ye(t)?"border":pr(`${t}.600`,.24)(r,e)}}}}}),unstyled:({direction:t})=>({trigger:{_after:{content:"''",position:"absolute",...t==="vertical"?{left:"0",right:"0",transform:"translateY(-50%)"}:{bottom:"0",top:"0",transform:"translateX(-50%)"},...t==="vertical"?{h:"2"}:{w:"2"}}}})},defaultProps:{colorScheme:"gray",variant:"border"}},x8={baseStyle:{userSelect:"none",width:"fit-content",_disabled:{cursor:"not-allowed",opacity:.4},_readOnly:{cursor:"default"}},variants:{},sizes:{},defaultProps:{}},Dme=Vw(x8)(),Fme={baseStyle:{container:{cursor:"pointer",rounded:"md",w:"full",_disabled:{cursor:"not-allowed",opacity:.6},_readOnly:{cursor:"auto"}},inner:{rounded:"md"},overlay:{rounded:"md"},thumb:{borderColor:"whiteAlpha.950",borderWidth:"3px",boxShadow:["md","dark-md"],outline:0,rounded:"full",transitionDuration:"normal",transitionProperty:"transform",_active:{transform:"scale(1.15)"},_focusVisible:{boxShadow:["outline","outline"]}},track:{}},sizes:{sm:{container:{maxW:"xs"},thumb:{boxSize:"3"}},md:{container:{maxW:"sm"},thumb:{boxSize:"4"}},lg:{container:{maxW:"md"},thumb:{boxSize:"5"}},full:{container:{maxW:"full"},thumb:{boxSize:"5"}}},defaultProps:{size:"md"}},Mme={baseStyle:{w:"100%"},defaultProps:{reverse:!0,scale:.95}},Lme={baseStyle:{"@-moz-document url-prefix()":{scrollbarColor:"whiteAlpha.600 transparent",_dark:{scrollbarColor:"whiteAlpha.600 transparent"},_light:{scrollbarColor:"whiteAlpha.600 transparent"}},outline:0,_dark:{_scrollbarThumb:{bg:"whiteAlpha.600",bgClip:"padding-box",_nativeHover:{bg:"whiteAlpha.800",bgClip:"padding-box"}}},_focusVisible:{boxShadow:"inline"},_scrollbar:{h:"3",w:"3"},_scrollbarButton:{},_scrollbarCorner:{bg:"transparent"},_scrollbarThumb:{bg:"blackAlpha.600",bgClip:"padding-box",border:"3px solid transparent",rounded:"full",_nativeHover:{bg:"blackAlpha.800",bgClip:"padding-box"}},_scrollbarTrack:{bg:"transparent"}}},zme={baseStyle:{button:{color:["blackAlpha.800","whiteAlpha.800"],fontWeight:"medium",transitionDuration:"ultra-slow",transitionProperty:"common",whiteSpace:"nowrap",_disabled:{cursor:"not-allowed",opacity:.4},_focusVisible:{boxShadow:"outline"},_hover:{opacity:.7,_checked:{opacity:1}},_readOnly:{cursor:"default"}},container:{bg:["blackAlpha.100","whiteAlpha.100"],p:"1",_disabled:{cursor:"not-allowed"},_readOnly:{cursor:"default"}},cursor:{boxShadow:["md","dark-md"]}},variants:{basic:({colorScheme:t="gray"})=>({button:{rounded:"md",_checked:{color:[ye(t)||St(t)?"black":"white","white"]}},container:{rounded:"lg"},cursor:{bg:ye(t)?["white","black"]:[St(t)?`${t}.400`:`${t}.500`,`${t}.600`],color:[ye(t)||St(t)?"black":"white","white"],rounded:"md"}}),rounded:({colorScheme:t="gray"})=>({button:{rounded:"full",_checked:{color:[ye(t)||St(t)?"black":"white","white"]}},container:{rounded:"full"},cursor:{bg:ye(t)?["white","black"]:[St(t)?`${t}.400`:`${t}.500`,`${t}.600`],color:[ye(t)||St(t)?"black":"white","white"],rounded:"full"}})},sizes:{sm:{button:{fontSize:"sm",px:"2",py:"0.5"},container:{minW:"xs"}},md:{button:{fontSize:"md",px:"3",py:"1"},container:{minW:"sm"}},lg:{button:{fontSize:"md",px:"4",py:"1.5"},container:{minW:"md"}}},defaultProps:{size:"md",variant:"basic"}},Bme={baseStyle:{background:["blackAlpha.300","whiteAlpha.300"],borderColor:["blackAlpha.400","whiteAlpha.400"],borderRadius:"sm",opacity:.7},defaultProps:{endColor:["blackAlpha.400","whiteAlpha.400"],startColor:["blackAlpha.300","whiteAlpha.300"]}},jme={baseStyle:{filledTrack:({colorScheme:t="primary",filledTrackColor:e,hasStripe:n,isAnimation:r})=>(n=!r&&n,{bgImage:n?`linear-gradient(
            45deg,
            $color 25%,
            transparent 25%,
            transparent 50%,
            $color 50%,
            $color 75%,
            transparent 75%,
            transparent
          )`:r?`linear-gradient(
            to right,
            transparent 0%,
            $filledTrackColor 50%,
            transparent 100%
          )`:void 0,transitionDuration:"slow",transitionProperty:"common",vars:[{name:"color",token:"colors",value:["rgba(255, 255, 255, 0.15)","rgba(0,0,0,0.1)"]},{name:"filledTrackColor",token:"colors",value:e||[`${t}.500`,`${t}.600`]}],...n?{bgSize:"1rem 1rem"}:{},...r?{}:{bgColor:"$filledTrackColor"}}),track:{bg:"border"}},sizes:{xs:{track:{h:"1"}},sm:{track:{h:"2"}},md:{track:{h:"3"}},lg:{track:{h:"4"}}},defaultProps:{colorScheme:"primary",size:"md"}},Tp={baseStyle:{activeDot:{fill:["white","black"],strokeWidth:2},chart:{},container:{},cursor:{fill:["blackAlpha.50","whiteAlpha.50"],stroke:["blackAlpha.400","whiteAlpha.400"],strokeWidth:1},dot:{strokeWidth:2},grid:{stroke:["blackAlpha.400","whiteAlpha.400"],strokeWidth:1},legend:{display:"flex",flexWrap:"wrap",justifyContent:"flex-end"},legendItem:{alignItems:"center",color:["blackAlpha.800","whiteAlpha.700"],display:"flex",gap:"sm",rounded:"md",transitionDuration:"slower",transitionProperty:"common",_hover:{bg:["blackAlpha.50","whiteAlpha.100"]}},legendSwatch:{boxSize:"3",rounded:"full"},line:{},referenceLine:{fillOpacity:1,fontSize:"xs"},tooltip:{bg:["white","black"],border:"1px solid",borderColor:["blackAlpha.200","whiteAlpha.100"],boxShadow:["md","dark-md"],color:"inherit",display:"flex",flexDirection:"column",fontSize:"sm",fontWeight:"medium",gap:"sm",maxW:"xs",minW:"48",p:"3",rounded:"md",zIndex:"dodoria"},tooltipItem:{alignItems:"center",display:"flex",fontSize:"sm",gap:"sm"},tooltipLabel:{color:["blackAlpha.800","whiteAlpha.700"]},tooltipList:{display:"flex",flexDirection:"column",gap:"xs"},tooltipSwatch:{boxSize:"3",rounded:"full"},tooltipTitle:{fontSize:"md"},tooltipValue:{flex:1,textAlign:"end"},xAxis:{color:["blackAlpha.700","whiteAlpha.600"],fontSize:"xs"},xAxisLabel:{fontSize:12},yAxis:{color:["blackAlpha.700","whiteAlpha.600"],fontSize:"xs"},yAxisLabel:{fontSize:12}},sizes:{sm:({theme:t})=>({container:{h:"xs",w:"xl"},legend:{gap:"xs",mb:"md"},legendItem:{fontSize:"xs",lineHeight:Be(t,"sizes.6"),minH:"6",minW:"6",px:"2"}}),md:({theme:t})=>({container:{h:"sm",w:"3xl"},legend:{gap:"xs",mb:"md"},legendItem:{fontSize:"sm",lineHeight:Be(t,"sizes.7"),minH:"7",minW:"7",px:"3"}}),lg:({theme:t})=>({container:{h:"md",w:"5xl"},legend:{gap:"sm",mb:"md"},legendItem:{fontSize:"md",lineHeight:Be(t,"sizes.8"),minH:"8",minW:"8",px:"3"}}),full:({theme:t})=>({container:{h:"md",w:"full"},legend:{gap:"sm",mb:"md"},legendItem:{fontSize:"md",lineHeight:Be(t,"sizes.8"),minH:"8",minW:"8",px:"3"}})},variants:{},defaultProps:{size:"full"}},Vme=Gt(Tp,{baseStyle:{polarAngleAxis:{},polarAngleAxisTick:{"& > text":{fill:["blackAlpha.700","whiteAlpha.600"],fontSize:"xs"}},polarGrid:{stroke:["blackAlpha.400","whiteAlpha.400"],strokeWidth:1},polarRadiusAxis:{"& > line":{stroke:["blackAlpha.400","whiteAlpha.400"]}},polarRadiusAxisTick:{"& > text":{fill:["blackAlpha.700","whiteAlpha.600"],fontSize:"xs"}},radar:{}},sizes:{sm:{container:{w:"full"}},md:{container:{w:"full"}},lg:{container:{w:"full"}},full:{container:{w:"full"}}}})({omit:["line","grid"]}),Wme=Gt(Tp,{baseStyle:{background:{fill:"transparent"},cursor:{stroke:"none"},labelList:{fill:"white"},polarGrid:{stroke:["blackAlpha.400","whiteAlpha.400"],strokeWidth:1}},sizes:{}})({omit:["line","grid"]}),Ume={baseStyle:{container:{_disabled:{cursor:"not-allowed"},_readOnly:{cursor:"auto"}},icon:({colorScheme:t="primary"})=>({alignItems:"center",border:"2px solid",borderColor:"inherit",color:"white",display:"inline-flex",justifyContent:"center",rounded:"full",transitionDuration:"normal",transitionProperty:"box-shadow",_checked:{_before:{bg:[`${t}.500`,`${t}.600`],content:'""',display:"inline-block",rounded:"full"},_hover:{_before:{bg:[`${t}.600`,`${t}.700`]}},_disabled:{_before:{bg:["blackAlpha.400","whiteAlpha.300"]},_dark:{_before:{bg:"whiteAlpha.300"}}}},_disabled:{bg:["blackAlpha.200","whiteAlpha.100"]},_focusVisible:{boxShadow:"outline"},_invalid:{borderColor:["danger.500","danger.400"],_focusVisible:{borderColor:["inherit","inherit"]}}}),label:{userSelect:"none",_disabled:{opacity:.4}}},sizes:{sm:{icon:{boxSize:"3.5",_before:{boxSize:"1.5"}},label:{fontSize:"sm"}},md:{icon:{boxSize:"4",_before:{boxSize:"2"}},label:{fontSize:"md"}},lg:{icon:{boxSize:"5",_before:{boxSize:"3"}},label:{fontSize:"lg"}}},defaultProps:{colorScheme:"primary",size:"md"}},Gme=Gt(yy)(),w8={baseStyle:{container:({orientation:t})=>({cursor:"pointer",display:"inline-block",position:"relative",_disabled:{cursor:"not-allowed",opacity:.6},_readOnly:{cursor:"auto"},...t==="vertical"?{h:"100%"}:{w:"100%"}}),filledTrack:({colorScheme:t="primary"})=>({bg:[`${t}.500`,`${t}.400`],h:"inherit",w:"inherit"}),mark:{fontSize:"sm"},thumb:({colorMode:t,orientation:e,theme:n})=>({alignItems:"center",bg:"white",border:"1px solid",borderColor:"transparent",boxShadow:"base",display:"flex",justifyContent:"center",outline:0,position:"absolute",rounded:"full",transitionDuration:"normal",transitionProperty:"transform",zIndex:"yamcha",_disabled:{bg:[Na("black",72)(n,t),et("white",64)]},_focusVisible:{boxShadow:"outline"},...e==="vertical"?{left:"50%",transform:"translateX(-50%)",_active:{transform:"translateX(-50%) scale(1.15)"}}:{top:"50%",transform:"translateY(-50%)",_active:{transform:"translateY(-50%) scale(1.15)"}}}),track:{bg:"border",overflow:"hidden",rounded:"sm",_disabled:{bg:["blackAlpha.200","whiteAlpha.400"]}}},sizes:{sm:({orientation:t})=>({mark:t==="vertical"?{ml:"2"}:{mt:"2"},thumb:{boxSize:"2.5"},track:t==="vertical"?{w:"0.5"}:{h:"0.5"}}),md:({orientation:t})=>({mark:t==="vertical"?{ml:"3"}:{mt:"3"},thumb:{boxSize:"3.5"},track:t==="vertical"?{w:"1"}:{h:"1"}}),lg:({orientation:t})=>({mark:t==="vertical"?{ml:"4"}:{mt:"4"},thumb:{boxSize:"5"},track:t==="vertical"?{w:"1.5"}:{h:"1.5"}})},defaultProps:{colorScheme:"primary",size:"md"}},Hme=Gt(w8)(),qme={baseStyle:({colorScheme:t="yellow"})=>({container:{w:"max-content"},group:{position:"relative"},icon:{fill:"currentColor"},item:{color:["blackAlpha.300","whiteAlpha.300"],cursor:"pointer",outline:"none",rounded:"sm",_disabled:{cursor:"not-allowed",opacity:.4},_filled:{color:[`${t}.500`,`${t}.600`]},_focusVisible:{boxShadow:"outline"},_notLast:{left:0,position:"absolute",top:0},_readOnly:{cursor:"default"}}}),sizes:{xs:{icon:{fontSize:"md"}},sm:{icon:{fontSize:"lg"}},md:{icon:{fontSize:"xl"}},lg:{icon:{fontSize:"2xl"}},xl:{icon:{fontSize:"3xl"}}},defaultProps:{colorScheme:"yellow",size:"md"}},Kme={baseStyle:{container:{w:"100%"},item:{h:"100%",w:"100%",_selected:{boxShadow:["md","dark-md"]}},trigger:{color:["blackAlpha.300","whiteAlpha.300"]}},sizes:{sm:{item:{p:"sm",rounded:"base"}},md:{item:{p:"md",rounded:"md"}},normal:{item:{p:"normal",rounded:"lg"}},lg:{item:{p:"lg",rounded:"xl"}}},variants:{elevated:{item:{bg:["white","black"],boxShadow:["base","dark-md"]}},outline:{item:{bg:["white","black"],borderWidth:"1px"}},unstyled:{item:{p:0,rounded:0,_selected:{boxShadow:"unset"}}}},defaultProps:{size:"md",variant:"outline"}},Xme=Gt(bu,{baseStyle:{stepper:{borderColor:"inherit",borderStartWidth:"1px",borderStyle:"solid",color:["blackAlpha.600","whiteAlpha.700"],_active:{bg:["blackAlpha.200","whiteAlpha.200"]},_disabled:{cursor:"not-allowed",opacity:.4},_hover:{bg:["blackAlpha.100","whiteAlpha.100"]},_last:{borderColor:"inherit",borderStartWidth:"1px",borderTopWidth:"1px",mt:"-1px"},_readOnly:{cursor:"auto"}}},sizes:{xs:{stepper:{fontSize:"xs",_first:{borderTopEndRadius:"sm"},_last:{borderBottomEndRadius:"sm"}}},sm:{stepper:{fontSize:"sm",_first:{borderTopEndRadius:"md"},_last:{borderBottomEndRadius:"md"}}},md:{stepper:{fontSize:"md",_first:{borderTopEndRadius:"md"},_last:{borderBottomEndRadius:"md"}}},lg:{stepper:{fontSize:"lg",_first:{borderTopEndRadius:"md"},_last:{borderBottomEndRadius:"md"}}}},variants:{flushed:{stepper:{bg:"transparent",border:"none",_active:{bg:"transparent",opacity:.7},_hover:{bg:"transparent",opacity:.8},_last:{border:"none"}}},unstyled:{stepper:{bg:"transparent",border:"none",_active:{bg:"transparent"},_hover:{bg:"transparent"},_last:{border:"none"}}}}})({omit:["addon"]}),Yme={baseStyle:{container:{_disabled:{cursor:"not-allowed"}},ellipsis:{border:"0",pointerEvents:"none"},first:{},inner:{},item:{color:["blackAlpha.600","whiteAlpha.700"],px:1,transitionDuration:"slower",transitionProperty:"common",_active:{bg:["blackAlpha.100","whiteAlpha.100"]},_disabled:{boxShadow:"none",cursor:"not-allowed",opacity:.4},_focus:{outline:"none"},_focusVisible:{boxShadow:"outline"},_hover:{bg:["blackAlpha.50","whiteAlpha.50"],_disabled:{bg:["initial","initial"]}},_selected:{cursor:"default",pointerEvents:"none"}},last:{},next:{},prev:{}},variants:{ghost:({colorScheme:t="primary",colorMode:e,theme:n})=>({item:{_hover:{bg:[`${t}.50`,pr(`${t}.600`,.12)(n,e)]},_selected:{bg:ye(t)?void 0:"transparent",color:ye(t)?["blackAlpha.800","whiteAlpha.700"]:[`${t}.600`,`${t}.500`],fontWeight:"semibold"}}}),outline:({colorScheme:t="primary"})=>({item:{border:"1px solid",borderColor:"border",_selected:{bg:"transparent",borderColor:[`${t}.600`,`${t}.500`],color:ye(t)?["blackAlpha.800","whiteAlpha.700"]:[`${t}.600`,`${t}.500`]}}}),solid:({colorScheme:t="primary"})=>({item:{border:"1px solid",borderColor:"border",vars:[{name:"bg",token:"colors",value:ye(t)?[`${t}.50`,`${t}.700`]:[St(t)?`${t}.400`:`${t}.500`,`${t}.600`]}],_selected:{bg:"$bg",borderColor:"$bg",color:[ye(t)||St(t)?"black":"white","white"]}}}),subtle:({colorScheme:t="primary",colorMode:e,theme:n})=>({item:{_selected:{bg:[`${t}.50`,et(`${t}.300`,68)(n,e)],color:[`${t}.800`,ye(t)?`${t}.50`:`${t}.200`]}}}),surface:({colorScheme:t="primary",colorMode:e,theme:n})=>({item:{border:"1px solid",borderColor:"border",_selected:{bg:[`${t}.50`,et(`${t}.300`,68)(n,e)],borderColor:[`${t}.100`,et(`${t}.300`,56)(n,e)],color:[`${t}.800`,ye(t)?`${t}.50`:`${t}.200`]}}}),unstyled:{inner:{gap:0},item:{bg:"none",color:"inherit",minH:"auto",minW:"auto"},_ripple:{display:"none"}}},sizes:{xs:{inner:{gap:"xs"},item:{fontSize:"xs",minH:6,minW:6,rounded:"sm"}},sm:{inner:{gap:"xs"},item:{fontSize:"sm",minH:8,minW:8,rounded:"md"}},md:{inner:{gap:"sm"},item:{fontSize:"md",minH:10,minW:10,rounded:"md"}},lg:{inner:{gap:"sm"},item:{fontSize:"lg",minH:12,minW:12,rounded:"md"}},xl:{inner:{gap:"md"},item:{fontSize:"xl",minH:14,minW:14,rounded:"lg"}}},defaultProps:{colorScheme:"primary",size:"sm",variant:"solid"}},S8={baseStyle:{caption:{color:["blackAlpha.700","whiteAlpha.600"],fontFamily:"heading",fontWeight:"medium",textAlign:"center"},container:{w:"100%"},table:{borderCollapse:"collapse",fontVariantNumeric:"lining-nums tabular-nums",h:"100%",w:"100%"},td:{verticalAlign:"top"},th:{color:["blackAlpha.700","whiteAlpha.600"],fontFamily:"heading",fontWeight:"semibold",letterSpacing:"wider",textTransform:"uppercase",verticalAlign:"middle"},tr:{_disabled:{cursor:"not-allowed",opacity:.4,_hover:{bg:["initial","initial"]}}}},sizes:{sm:{caption:{fontSize:"xs",mt:1,px:2,py:1},container:{gap:2},td:{fontSize:"xs",lineHeight:5,px:2,py:1},th:{fontSize:"xs",lineHeight:5,px:2,py:1}},md:{caption:{fontSize:"sm",mt:2,px:3,py:2},container:{gap:4},td:{fontSize:"sm",lineHeight:5,px:3,py:2},th:{fontSize:"sm",lineHeight:5,px:3,py:2}},lg:{caption:{mt:3,px:4,py:3},container:{gap:6},td:{lineHeight:6,px:4,py:3},th:{lineHeight:6,px:4,py:3}},xl:{caption:{fontSize:"lg",mt:4,px:6,py:4},container:{gap:8},td:{fontSize:"lg",lineHeight:6,px:6,py:4},th:{fontSize:"lg",lineHeight:6,px:6,py:4}}},variants:{simple:({colorScheme:t="gray",colorMode:e,highlightOnHover:n,highlightOnSelected:r,theme:o,withBorder:s,withColumnBorders:i})=>({table:{...s?{borderWidth:"1px"}:{}},tbody:{tr:{...r?{_selected:{bg:[ye(t)?Na(`${t}.50`,72)(o,e):Na(`${t}.50`,64)(o,e),pr(`${t}.300`,.04)(o,e)]}}:{},...n?{cursor:"pointer",transitionDuration:"slow",transitionProperty:"common",_hover:{bg:[pr(`${t}.400`,.08)(o,e),pr(`${t}.300`,.12)(o,e)]}}:{}}},td:{"&[data-is-numeric=true]":{textAlign:"end"},borderBottomWidth:"1px",...i?{_notLast:{borderRightWidth:"1px"}}:{}},tfoot:{tr:{_last:{th:{borderBottomWidth:0}}}},th:{"&[data-is-numeric=true]":{textAlign:"end"},borderBottomWidth:"1px",...i?{_notLast:{borderRightWidth:"1px"}}:{}}}),striped:({colorScheme:t="gray",colorMode:e,highlightOnHover:n,theme:r,withBorder:o,withColumnBorders:s})=>({table:{...o?{borderWidth:"1px"}:{}},tbody:{tr:{_odd:{bg:[ye(t)?Na(`${t}.50`,72)(r,e):Na(`${t}.50`,64)(r,e),pr(`${t}.300`,.04)(r,e)]},...n?{cursor:"pointer",transitionDuration:"slow",transitionProperty:"common",_hover:{bg:[pr(`${t}.400`,.08)(r,e),pr(`${t}.300`,.12)(r,e)]}}:{}}},td:{"&[data-is-numeric=true]":{textAlign:"end"},borderBottomWidth:"1px",...s?{_notLast:{borderRightWidth:"1px"}}:{}},tfoot:{tr:{_last:{th:{borderBottomWidth:0}}}},th:{"&[data-is-numeric=true]":{textAlign:"end"},borderBottomWidth:"1px",...s?{_notLast:{borderRightWidth:"1px"}}:{}}}),unstyled:{}},defaultProps:{colorScheme:"gray",size:"md",variant:"simple"}},k8=Gt(S8,{baseStyle:{sortIcon:{},td:{outline:"none",transitionDuration:"normal",transitionProperty:"common",_focusVisible:{boxShadow:"inline"}},th:{outline:"none",transitionDuration:"normal",transitionProperty:"common",_focusVisible:{boxShadow:"inline"}}},sizes:{sm:{sortIcon:{right:2}},md:{sortIcon:{right:3}},lg:{sortIcon:{right:4}},xl:{sortIcon:{right:6}}}})(),Zme=Gt(k8,{baseStyle:{pagingControl:{gridTemplateColumns:"1fr 5fr 1fr"}},sizes:{sm:{pagingControl:{gap:2}},md:{pagingControl:{gap:4}},lg:{pagingControl:{gap:6}},xl:{pagingControl:{gap:8}}}})(),Qme=Gt(bu,{baseStyle:{container:{gap:"sm"},field:{textAlign:"center"}},sizes:{xs:{field:{boxSize:"6",fontSize:"xs",rounded:"sm"}},sm:{field:{boxSize:"8",fontSize:"sm",rounded:"md"}},md:{field:{boxSize:"10",fontSize:"md",rounded:"md"}},lg:{field:{boxSize:"12",fontSize:"lg",rounded:"md"}}},variants:{unstyled:{field:{h:"auto"}}}})({omit:["addon","sizes"]}),Jme={baseStyle:{body:{gap:"sm",my:"sm",px:"sm"},closeButton:{right:"2",top:"2"},container:{bg:["white","black"],borderColor:"$border",borderWidth:"1px",boxShadow:["lg","dark-lg"],color:"inherit",rounded:"md",vars:[{name:"border",token:"colors",value:["blackAlpha.200","whiteAlpha.100"]}],zIndex:"guldo",_focusVisible:{boxShadow:"outline",outline:0}},footer:{borderColor:"$border",borderTopWidth:"1px",gap:"sm",p:"sm"},header:{borderBottomWidth:"1px",borderColor:"$border",fontWeight:"semibold",gap:"sm",p:"sm"}}},ege={baseStyle:{px:"1",py:"1"},variants:{outline:({colorScheme:t="gray",colorMode:e,theme:n})=>{const r=Ur(Ge(`${t}.500`)(n,e),Ge(ye(t)?`${t}.100`:`${t}.400`)(n,e))(e);return{boxShadow:`inset 0 0 0px 1px ${r}`,color:r}},solid:({colorScheme:t="gray",colorMode:e,theme:n})=>({bg:[Na(`${t}.600`,24)(n,e),et(`${t}.600`,16)(n,e)],color:"white"}),subtle:({colorScheme:t="gray",colorMode:e,theme:n})=>({bg:[ye(t)?`${t}.50`:`${t}.100`,et(`${t}.300`,58)(n,e)],color:[`${t}.800`,ye(t)?`${t}.50`:`${t}.200`]}),"text-accent":({colorScheme:t="gray"})=>({color:[`${t}.500`,ye(t)?`${t}.100`:`${t}.400`],p:0}),unstyled:{p:0}},defaultProps:{colorScheme:"secondary",variant:"subtle"}},tge={baseStyle:{"*:first-of-type":{mt:"0 !important"},a:{color:"link",textDecoration:"none"},blockquote:{borderLeft:"0.25em solid",borderLeftColor:"border",color:["blackAlpha.700","whiteAlpha.600"],px:"1em"},"blockquote>:last-child":{mb:0},"code:not(pre > *)":{bg:["blackAlpha.200","whiteAlpha.300"],fontFamily:"mono",fontSize:"85%",m:0,px:"0.4em",py:"0.2em",rounded:"6px"},h1:{borderBottom:"1px solid",borderBottomColor:"border",fontSize:"2em",pb:".3em"},"h1, h2, h3, h4, h5, h6":{fontWeight:"semibold",lineHeight:"1.25",mb:"16px",mt:"24px"},h2:{borderBottom:"1px solid",borderBottomColor:"border",fontSize:"1.5em",pb:".3em"},h3:{fontSize:"1.25em"},h4:{fontSize:"1em"},h5:{fontSize:"0.875em"},h6:{fontSize:"0.85em"},hr:{bg:"border",border:0,h:"0.25em",my:"24px",p:0},img:{boxSizing:"content-box",maxW:"100%"},"li + li":{mt:"0.25em"},"p, blockquote, ul, ol, dl, table, pre, details":{mb:"16px",mt:"0px"},pre:{fontSize:"92.5%",lineHeight:1.45,mt:"16px",rounded:"6px"},strong:{fontWeight:"semibold"},table:{display:"block",maxW:"100%",overflow:"auto",w:"max-content"},th:{fontWeight:"semibold"},"th, td":{border:"1px solid",borderColor:"border",px:"13px",py:"6px"},tr:{borderTop:"1px solid",borderTopColor:"border"},ul:{listStyleType:"disc",pl:"2em"},w:"full"}},nge=Gt(yy)(),rge=Gt(gO)(),oge=Gt(yy)(),sge={baseStyle:{container:{},trigger:{}},defaultProps:{}},ige={baseStyle:{bg:["blackAlpha.50","whiteAlpha.50"],borderWidth:"1px",fontFamily:"mono",fontSize:"0.8em",fontWeight:"bold",lineHeight:"shorter",px:"0.4em",py:"0.2em",rounded:"md",whiteSpace:"nowrap"}},age={baseStyle:{container:{},overlay:{outline:0,_focusVisible:{_before:{boxShadow:"outline"}}}}},lge={baseStyle:{color:"link",cursor:"pointer",outline:"none",textDecoration:"none",transitionDuration:"fast",transitionProperty:"common",transitionTimingFunction:"ease-out",_focusVisible:{boxShadow:"outline"},_hover:{textDecoration:"underline"}}},uge={baseStyle:{container:{},icon:{display:"inline-block",me:"2",verticalAlign:"middle"},item:{}}},cge={baseStyle:({colorScheme:t})=>({color:[`${t}.500`,`${t}.600`]}),defaultProps:{colorScheme:"primary",size:"1em",variant:"oval"}},dge={baseStyle:{container:{position:"relative",userSelect:"none",_disabled:{cursor:"not-allowed"},_readOnly:{cursor:"default"}},flipIdent:{backfaceVisibility:"hidden",position:"absolute",top:0},from:{},to:{}},variants:{},sizes:{},defaultProps:{}},fge={baseStyle:{fontFamily:"heading",fontWeight:"bold"},sizes:{xs:{fontSize:"sm"},sm:{fontSize:"md"},md:{fontSize:"xl"},lg:{fontSize:{base:"3xl",sm:"2xl"}},xl:{fontSize:{base:"4xl",sm:"3xl"}},"2xl":{fontSize:{base:"5xl",sm:"4xl"}},"3xl":{fontSize:{base:"6xl",sm:"5xl"}},"4xl":{fontSize:{base:"7xl",sm:"6xl"}}},defaultProps:{size:"xl"}},pge={baseStyle:{color:"currentColor",display:"inline-block",flexShrink:0,h:"1em",lineHeight:"1em",w:"1em"}},hge={},mge={baseStyle:({withBorder:t})=>({alignItems:"center",display:"flex",h:"fit-content",justifyContent:"center",outline:0,rounded:"full",w:"fit-content",whiteSpace:"nowrap",zIndex:"kurillin",...t?{borderColor:["white","black"],borderWidth:"0.2em"}:{}}),sizes:{sm:{fontSize:"xs",lineHeight:1.6,minH:2,minW:2,px:1},md:{fontSize:"sm",lineHeight:1.5,minH:3,minW:3,px:1.5},lg:{fontSize:"md",lineHeight:1.4,minH:4,minW:4,px:2}},variants:{solid:({colorScheme:t="primary"})=>({bg:[`${t}.500`,`${t}.600`],color:"white",vars:[{name:"ping",token:"colors",value:[`${t}.300`,`${t}.400`]}]}),subtle:({colorScheme:t="primary",colorMode:e,theme:n})=>({bg:[ye(t)?`${t}.50`:`${t}.100`,et(`${t}.300`,58)(n,e)],color:[`${t}.800`,ye(t)?`${t}.50`:`${t}.200`],vars:[{name:"ping",token:"colors",value:["blackAlpha.400","whiteAlpha.500"]}]})},defaultProps:{colorScheme:"primary",size:"md",variant:"solid"}},yO={baseStyle:{body:{flex:"1",gap:"md",my:"md",px:"md"},closeButton:{right:"3",top:"3"},container:{bg:["white","black"],boxShadow:["lg","dark-lg"],color:"inherit",rounded:"md",w:"100%",zIndex:"recoome"},footer:{gap:"md",pb:"md",px:"md"},header:{fontSize:"xl",fontWeight:"semibold",gap:"md",pt:"md",px:"md"},overlay:{bg:"blackAlpha.600",zIndex:"burter"}},sizes:{xs:{container:{maxW:"xs"}},sm:{container:{maxW:"sm"}},md:{container:{maxW:"md"}},lg:{container:{maxW:"lg"}},xl:{container:{maxW:"xl"}},"2xl":{container:{maxW:"2xl"}},"3xl":{container:{maxW:"3xl"}},"4xl":{container:{maxW:"4xl"}},"5xl":{container:{maxW:"5xl"}},"6xl":{container:{maxW:"6xl"}},full:{container:{minH:"100dvh",minW:"100vw",rounded:0}}},defaultProps:{size:"md"}},gge=Gt(yO,{baseStyle:{body:{overflow:"auto"},container:({isFullHeight:t,placement:e})=>({...t?{height:"100dvh",rounded:0}:{},[`rounded${oL(e)}`]:0}),dragBar:({placement:t})=>({[`margin${oL(toe(t))}`]:"md",...t==="top"||t==="bottom"?{minH:"2",mx:"auto",w:"3xs"}:{h:"3xs",minW:"2",my:"auto"},bg:["blackAlpha.100","whiteAlpha.100"],rounded:"full"}),inner:{}},sizes:{xs:{container:{maxW:"xs"}},sm:{container:{maxW:"md"}},md:{container:{maxW:"lg"}},lg:{container:{maxW:"2xl"}},xl:{container:{maxW:"4xl"}},full:{container:{minH:"100dvh",minW:"100vw",rounded:0}}},defaultProps:{size:"md"}})({omit:["sizes"]}),yge={baseStyle:({colorMode:t,theme:e})=>({container:{bg:["blackAlpha.50","whiteAlpha.50"],color:["blackAlpha.700","whiteAlpha.600"],outline:0,overflow:"hidden",p:"md",rounded:"md",transitionDuration:"normal",transitionProperty:"common",w:"100%",_accept:{bg:["success.50",pr("success.400",.12)(e,t)],borderColor:["success.500","success.400"]},_disabled:{cursor:"not-allowed",opacity:.4},_hover:{bg:["blackAlpha.100","whiteAlpha.100"],cursor:"pointer"},_loading:{bg:["blackAlpha.100","whiteAlpha.100"],cursor:"not-allowed"},_reject:{bg:["danger.50",pr("danger.400",.12)(e,t)],borderColor:["danger.500","danger.400"]}},overlay:{bg:["whiteAlpha.600","blackAlpha.600"],zIndex:"kurillin"}}),sizes:{xs:{container:{h:"xs"}},sm:{container:{h:"sm"}},md:{container:{h:"md"}},lg:{container:{h:"lg"}},full:{container:{h:"full"}}},variants:{dashed:({colorMode:t,errorBorderColor:e=["danger.500","danger.400"],focusBorderColor:n="focus",theme:r})=>{const o=qe(n)?Ur(Ge(n[0],n[0])(r,t),Ge(n[1],n[1])(r,t))(t):Ge(n,n)(r,t),s=qe(e)?Ur(Ge(e[0],e[0])(r,t),Ge(e[1],e[1])(r,t))(t):Ge(e,e)(r,t);return{container:{borderStyle:"dashed",borderWidth:"1px",_focus:{borderColor:o,boxShadow:`0 0 0 1px ${o}`,zIndex:"yamcha"},_focusVisible:{borderColor:o,boxShadow:`0 0 0 1px ${o}`,zIndex:"yamcha"},_invalid:{borderColor:s,boxShadow:`0 0 0 1px ${s}`}}}},solid:({colorMode:t,errorBorderColor:e=["danger.500","danger.400"],focusBorderColor:n="focus",theme:r})=>{const o=qe(n)?Ur(Ge(n[0],n[0])(r,t),Ge(n[1],n[1])(r,t))(t):Ge(n,n)(r,t),s=qe(e)?Ur(Ge(e[0],e[0])(r,t),Ge(e[1],e[1])(r,t))(t):Ge(e,e)(r,t);return{container:{borderStyle:"solid",borderWidth:"1px",_focus:{borderColor:o,boxShadow:`0 0 0 1px ${o}`,zIndex:"yamcha"},_focusVisible:{borderColor:o,boxShadow:`0 0 0 1px ${o}`,zIndex:"yamcha"},_invalid:{borderColor:s,boxShadow:`0 0 0 1px ${s}`}}}},unstyled:{container:{bg:"transparent",color:"inherit",h:"auto",rounded:"inherit",_accept:{bg:"transparent",borderColor:"inherit"},_hover:{bg:"transparent",cursor:"inherit"},_loading:{bg:"transparent",cursor:"auto"},_reject:{bg:"transparent",borderColor:"inherit"}},overlay:{bg:"transparent"}}},defaultProps:{size:"sm",variant:"dashed"}},vge={baseStyle:{container:{w:"full"},input:({colorMode:t,errorBorderColor:e=["danger.500","danger.400"],focusBorderColor:n="focus",theme:r})=>{const o=qe(n)?Ur(Ge(n[0],n[0])(r,t),Ge(n[1],n[1])(r,t))(t):Ge(n,n)(r,t),s=qe(e)?Ur(Ge(e[0],e[0])(r,t),Ge(e[1],e[1])(r,t))(t):Ge(e,e)(r,t);return{p:"1",rounded:"md",transitionDuration:"normal",transitionProperty:"common",w:"full",_focus:{boxShadow:`0px 0px 0px 1px ${o}`,zIndex:"yamcha"},_focusVisible:{boxShadow:`0px 0px 0px 1px ${o}`,zIndex:"yamcha"},_invalid:{boxShadow:`0px 0px 0px 1px ${s}`},_placeholder:{opacity:.6}}},preview:{p:"1",rounded:"md",transitionDuration:"normal",transitionProperty:"common",whiteSpace:"pre-line"},textarea:({colorMode:t,errorBorderColor:e=["danger.500","danger.400"],focusBorderColor:n="focus",theme:r})=>{const o=qe(n)?Ur(Ge(n[0],n[0])(r,t),Ge(n[1],n[1])(r,t))(t):Ge(n,n)(r,t),s=qe(e)?Ur(Ge(e[0],e[0])(r,t),Ge(e[1],e[1])(r,t))(t):Ge(e,e)(r,t);return{boxSizing:"content-box",h:"1lh",p:"1",rounded:"md",transitionDuration:"normal",transitionProperty:"common",w:"full",_focus:{boxShadow:`0px 0px 0px 1px ${o}`,zIndex:"yamcha"},_focusVisible:{boxShadow:`0px 0px 0px 1px ${o}`,zIndex:"yamcha"},_invalid:{boxShadow:`0px 0px 0px 1px ${s}`},_placeholder:{opacity:.6}}}}},bge={baseStyle:{fontStyle:"italic"}},xge={baseStyle:{w:"100%"}},$8={baseStyle:{container:{position:"relative",w:"100%"},errorMessage:{color:["danger.500","danger.400"],display:"block",fontSize:"sm",mt:"2"},helperMessage:{color:["blackAlpha.700","whiteAlpha.600"],display:"block",fontSize:"sm",mt:"2"},label:{fontSize:"md",fontWeight:"medium",mb:"2",me:"3",opacity:1,transitionDuration:"normal",transitionProperty:"common",_disabled:{opacity:.4}},requiredIndicator:{color:["danger.500","danger.400"],ms:"1"}}},wge=Gt($8,{baseStyle:{legend:{display:"block",fontSize:"md",fontWeight:"medium",mb:"2",me:"3",opacity:1,transitionDuration:"normal",transitionProperty:"common",_disabled:{opacity:.4}}}})({omit:["label"]}),vO={baseStyle:{cursor:"pointer",fontWeight:"semibold",transitionDuration:"slower",transitionProperty:"common",_disabled:{boxShadow:"none",cursor:"not-allowed",opacity:.4},_focus:{outline:"none"},_hover:{_disabled:{bg:["initial","initial"]}},_readOnly:{cursor:"default",_ripple:{display:"none"}}},variants:{ghost:({colorScheme:t="gray",colorMode:e,errorBorderColor:n=["danger.500","danger.400"],theme:r})=>({bg:"transparent",color:ye(t)?["blackAlpha.800","whiteAlpha.700"]:[`${t}.600`,`${t}.500`],vars:[{name:"errorBorderColor",token:"colors",value:n}],_focusVisible:{borderColor:"transparent",boxShadow:"outline"},_hover:{bg:[`${t}.50`,pr(`${t}.600`,.12)(r,e)]},_invalid:{border:"1px solid",borderColor:"$errorBorderColor",boxShadow:"0 0 0 1px $errorBorderColor"}}),link:({colorScheme:t="gray"})=>({color:[`${t}.600`,`${t}.500`],height:"auto",lineHeight:"normal",minW:"auto",padding:0,verticalAlign:"baseline",_active:{color:[`${t}.700`,`${t}.600`],_disabled:{color:[`${t}.600`,`${t}.500`]}},_focusVisible:{boxShadow:"outline"},_hover:{textDecoration:"underline",_disabled:{textDecoration:"none"}},_ripple:{display:"none"}}),outline:({colorScheme:t="gray",colorMode:e,errorBorderColor:n=["danger.500","danger.400"],theme:r})=>({bg:"transparent",border:"1px solid",borderColor:[`${t}.600`,`${t}.500`],color:ye(t)?["blackAlpha.800","whiteAlpha.700"]:[`${t}.600`,`${t}.500`],vars:[{name:"errorBorderColor",token:"colors",value:n}],_focusVisible:{boxShadow:"outline",_invalid:{borderColor:"transparent"}},_hover:{bg:[`${t}.50`,pr(`${t}.600`,.12)(r,e)]},_invalid:{borderColor:["$errorBorderColor","$errorBorderColor"],boxShadow:"0 0 0 1px $errorBorderColor"}}),solid:({colorScheme:t="gray",errorBorderColor:e=["danger.500","danger.400"]})=>({bg:ye(t)?[`${t}.50`,`${t}.700`]:[St(t)?`${t}.400`:`${t}.500`,`${t}.600`],color:[ye(t)||St(t)?"black":"white","white"],vars:[{name:"errorBorderColor",token:"colors",value:e}],_focusVisible:{borderColor:"transparent",boxShadow:"outline"},_hover:{bg:ye(t)?[`${t}.100`,`${t}.800`]:[St(t)?`${t}.500`:`${t}.600`,`${t}.700`],_disabled:{bg:ye(t)?[`${t}.50`,`${t}.700`]:[St(t)?`${t}.400`:`${t}.500`,`${t}.600`]}},_invalid:{border:"1px solid",borderColor:"$errorBorderColor",boxShadow:"0 0 0 1px $errorBorderColor"}}),subtle:({colorScheme:t="gray",colorMode:e,errorBorderColor:n=["danger.500","danger.400"],theme:r})=>({bg:[`${t}.50`,et(`${t}.300`,68)(r,e)],color:[`${t}.800`,ye(t)?`${t}.50`:`${t}.200`],vars:[{name:"errorBorderColor",token:"colors",value:n}],_focusVisible:{borderColor:"transparent",boxShadow:"outline"},_hover:{bg:[`${t}.100`,et(`${t}.300`,56)(r,e)],_disabled:{bg:[`${t}.50`,et(`${t}.300`,68)(r,e)]}},_invalid:{border:"1px solid",borderColor:"$errorBorderColor",boxShadow:"0 0 0 1px $errorBorderColor"}}),surface:({colorScheme:t="gray",colorMode:e,errorBorderColor:n=["danger.500","danger.400"],theme:r})=>({bg:[`${t}.50`,et(`${t}.300`,68)(r,e)],border:"1px solid",borderColor:[`${t}.100`,et(`${t}.300`,56)(r,e)],color:[`${t}.800`,ye(t)?`${t}.50`:`${t}.200`],vars:[{name:"errorBorderColor",token:"colors",value:n}],_focusVisible:{borderColor:"transparent",boxShadow:"outline"},_hover:{bg:[`${t}.100`,et(`${t}.300`,56)(r,e)],_disabled:{bg:[`${t}.50`,et(`${t}.300`,68)(r,e)]}},_invalid:{border:"1px solid",borderColor:"$errorBorderColor",boxShadow:"0 0 0 1px $errorBorderColor"}}),unstyled:{bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:0,p:0,_ripple:{display:"none"}}},sizes:{xs:{fontSize:"xs",h:6,lineHeight:"$sizes.6",minW:6,px:2,rounded:"sm"},sm:{fontSize:"sm",h:8,lineHeight:"$sizes.8",minW:8,px:3,rounded:"md"},md:{fontSize:"md",h:10,lineHeight:"$sizes.10",minW:10,px:4,rounded:"md"},lg:{fontSize:"lg",h:12,lineHeight:"$sizes.12",minW:12,px:6,rounded:"md"},xl:{fontSize:"xl",h:14,lineHeight:"$sizes.14",minW:14,px:8,rounded:"lg"},"2xl":{fontSize:"xl",h:16,lineHeight:"$sizes.16",minW:16,px:10,rounded:"lg"}},defaultProps:{colorScheme:"gray",size:"md",variant:"solid"}},Sge=Vw(vO)(),kge=Gt(bu)(),$ge={baseStyle:{alphaSlider:{},body:{},channel:{},channelLabel:{color:["blackAlpha.700","whiteAlpha.600"],fontWeight:"medium"},channels:{},container:{w:"full"},eyeDropper:{borderColor:"border",color:["blackAlpha.600","whiteAlpha.700"],_hover:{borderColor:["blackAlpha.500","whiteAlpha.400"],_disabled:{borderColor:"inherit"}}},hueSlider:{},result:{},saturationSlider:{maxW:"full"},sliders:{flex:"1"},swatch:{_disabled:{cursor:"not-allowed",opacity:.6},_readOnly:{cursor:"auto"}},swatches:{},swatchesLabel:{color:["blackAlpha.700","whiteAlpha.600"],fontWeight:"medium"}},sizes:{sm:{body:{gap:"xs"},channelLabel:{fontSize:"xs"},channels:{gap:"xs"},container:{gap:"sm",w:"xs"},eyeDropper:{boxSize:"7",fontSize:"xs"},result:{boxSize:"7"},sliders:{gap:"xs"},swatches:{gap:"xs"},swatchesLabel:{fontSize:"xs"}},md:{body:{gap:"sm"},channelLabel:{fontSize:"sm",mb:"xs"},channels:{gap:"sm"},container:{gap:"sm",w:"sm"},eyeDropper:{boxSize:"10"},result:{boxSize:"10"},sliders:{gap:"sm"},swatches:{gap:"sm"},swatchesLabel:{fontSize:"sm",mb:"xs"}},lg:{body:{gap:"sm"},channelLabel:{fontSize:"md",mb:"xs"},channels:{gap:"sm"},container:{gap:"md",w:"md"},eyeDropper:{boxSize:"12",fontSize:"xl"},result:{boxSize:"12"},sliders:{gap:"sm"},swatches:{gap:"sm"},swatchesLabel:{fontSize:"md",mb:"xs"}},full:{body:{gap:"sm"},channelLabel:{fontSize:"md",mb:"xs"},channels:{gap:"sm"},container:{gap:"md",w:"full"},eyeDropper:{boxSize:"12",fontSize:"xl"},result:{boxSize:"12"},sliders:{gap:"sm"},swatches:{gap:"sm"},swatchesLabel:{fontSize:"md",mb:"xs"}}},defaultProps:{size:"md"}},Cge={baseStyle:{container:{},overlay:{boxSize:"full"}},sizes:{xs:{container:{boxSize:"6",rounded:"sm"},overlay:{rounded:"sm"}},sm:{container:{boxSize:"8",rounded:"md"},overlay:{rounded:"md"}},md:{container:{boxSize:"10",rounded:"md"},overlay:{rounded:"md"}},lg:{container:{boxSize:"12",rounded:"md"},overlay:{rounded:"md"}}},variants:{basic:{},rounded:{container:{rounded:"full"},overlay:{rounded:"full"}}},defaultProps:{size:"sm",variant:"basic"}},Tge={baseStyle:{display:"flex",flexDirection:"column",gap:{base:"lg",sm:"md"},p:{base:"lg",sm:"md"},w:"100%"}},_ge=Gt(aS,{baseStyle:{trigger:{}}})(),Ige=Gt(yO)(),Nge={baseStyle:{borderColor:"border"},variants:{dashed:{borderStyle:"dashed"},dotted:{borderStyle:"dotted"},solid:{borderStyle:"solid"}},defaultProps:{variant:"solid"}},C8=Gt(Tp,{baseStyle:{activeShape:{},cell:{},inactiveShape:{},label:{fill:"currentColor",fillOpacity:1},labelLine:{stroke:"currentColor"},pie:{}},sizes:{sm:({theme:t,withLabels:e,withLegend:n})=>({container:{h:Ui.add(Be(t,"sizes.3xs"),Be(t,"sizes.1")),w:n?"full":Ui.add(Be(t,"sizes.3xs"),e?Be(t,"sizes.16"):"0px")},label:{fontSize:"xs"}}),md:({theme:t,withLabels:e,withLegend:n})=>({container:{h:"2xs",w:n?"full":Ui.add(Be(t,"sizes.2xs"),e?Be(t,"sizes.16"):"0px")},label:{fontSize:"sm"}}),lg:({theme:t,withLabels:e,withLegend:n})=>({container:{h:"xs",w:n?"full":Ui.add(Be(t,"sizes.xs"),e?Be(t,"sizes.16"):"0px")},label:{fontSize:"md"}})},defaultProps:{size:"md"}})({omit:["line","grid","sizes.full"]}),Ege=Gt(C8,{baseStyle:{label:{}}})(),Age={baseStyle:{body:{flex:"1"},container:{},footer:{},header:{}},sizes:{sm:{body:{gap:"sm",px:"sm",py:"sm"},container:{rounded:"base"},footer:{gap:"sm",pb:"sm",px:"sm"},header:{gap:"sm",pt:"sm",px:"sm"}},md:{body:{gap:"md",px:"md",py:"md"},container:{rounded:"md"},footer:{gap:"md",pb:"md",px:"md"},header:{gap:"md",pt:"md",px:"md"}},normal:{body:{gap:"normal",px:"normal",py:"normal"},container:{rounded:"lg"},footer:{gap:"normal",pb:"normal",px:"normal"},header:{gap:"normal",pt:"normal",px:"normal"}},lg:{body:{gap:"lg",px:"lg",py:"lg"},container:{rounded:"xl"},footer:{gap:"lg",pb:"lg",px:"lg"},header:{gap:"lg",pt:"lg",px:"lg"}}},variants:{elevated:{container:{boxShadow:["md","dark-md"]}},outline:{container:{borderWidth:"1px"}},solid:({colorScheme:t="primary",colorMode:e,theme:n})=>({container:{bg:[Na(`${t}.600`,16)(n,e),et(`${t}.600`,16)(n,e)],color:"white"}}),subtle:({colorScheme:t="primary",colorMode:e,theme:n})=>({container:{bg:[`${t}.100`,et(`${t}.300`,58)(n,e)]}}),unstyled:{body:{p:0},container:{rounded:0},footer:{p:0},header:{p:0}}},defaultProps:{colorScheme:"primary",size:"md",variant:"elevated"}},Oge={baseStyle:{container:{w:"100%"},control:{},indicator:({orientation:t})=>({bg:["whiteAlpha.400","blackAlpha.400"],rounded:"full",transitionDuration:"slower",transitionProperty:"common",_active:{bg:["whiteAlpha.600","blackAlpha.600"]},_focusVisible:{boxShadow:"outline"},_hover:{bg:["whiteAlpha.500","blackAlpha.500"]},_selected:{bg:["whiteAlpha.700","blackAlpha.700"]},...t==="vertical"?{h:"8",right:"4"}:{bottom:"4",w:"8"}}),indicators:({orientation:t})=>({gap:"md",...t==="vertical"?{h:"100%",py:"4",right:"4",top:"50%",transform:"translateY(-50%)"}:{bottom:"4",h:"2",left:"50%",px:"4",transform:"translateX(-50%)",w:"100%"}}),inner:{},next:({orientation:t})=>({...t==="vertical"?{bottom:"4",left:"50%",transform:"translateX(-50%)"}:{right:"4",top:"50%",transform:"translateY(-50%)"}}),prev:({orientation:t})=>({...t==="vertical"?{left:"50%",top:"4",transform:"translateX(-50%)"}:{left:"4",top:"50%",transform:"translateY(-50%)"}}),slide:{}},sizes:{sm:{indicators:({orientation:t})=>({...t==="vertical"?{w:"1.5"}:{h:"1.5"}}),inner:{h:"sm"}},md:{indicators:({orientation:t})=>({...t==="vertical"?{w:"1.5"}:{h:"1.5"}}),inner:{h:"md"}},lg:{indicators:({orientation:t})=>({...t==="vertical"?{w:"2"}:{h:"2"}}),inner:{h:"lg"}},xl:{indicators:({orientation:t})=>({...t==="vertical"?{w:"2"}:{h:"2"}}),inner:{h:"xl"}}},defaultProps:{size:"md"}},Pge={baseStyle:{container:{_disabled:{cursor:"not-allowed"},_readOnly:{cursor:"auto"}},icon:({colorScheme:t="primary"})=>({border:"2px solid",borderColor:"inherit",color:["white","black"],transitionDuration:"normal",transitionProperty:"box-shadow",_checked:{bg:`${t}.500`,borderColor:`${t}.500`,color:["white","black"],_hover:{bg:`${t}.600`,borderColor:`${t}.600`},_disabled:{bg:["blackAlpha.400","whiteAlpha.300"],borderColor:["transparent","transparent"]}},_disabled:{bg:["blackAlpha.200","whiteAlpha.100"],borderColor:["transparent","transparent"]},_focusVisible:{boxShadow:"outline"},_indeterminate:{bg:`${t}.500`,borderColor:`${t}.500`,color:["white","black"]},_invalid:{borderColor:["danger.500","danger.400"],_focusVisible:{borderColor:"inherit",_checked:{borderColor:`${t}.500`}}}}),label:{userSelect:"none",_disabled:{opacity:.4}}},sizes:{sm:{icon:{boxSize:"3.5",fontSize:"2xs",rounded:"base"},label:{fontSize:"sm"}},md:{icon:{boxSize:"4",fontSize:"2xs",rounded:"base"},label:{fontSize:"md"}},lg:{icon:{boxSize:"5",fontSize:"sm",rounded:"base"},label:{fontSize:"lg"}}},defaultProps:{colorScheme:"primary",size:"md"}},Rge={baseStyle:{display:"inline-block",position:"relative",verticalAlign:"middle"}},Dge=Vw(vO,{baseStyle:{rounded:"md",_active:{bg:["blackAlpha.200","whiteAlpha.200"]},_focusVisible:{boxShadow:"outline"},_hover:{bg:["blackAlpha.100","whiteAlpha.100"]}},sizes:{sm:{boxSize:6,fontSize:"2xs"},md:{boxSize:8,fontSize:"xs"},lg:{boxSize:10,fontSize:"md"}},defaultProps:{size:"md"}})({omit:["variants","sizes","defaultProps"]}),Fge={baseStyle:{alignItems:"center",display:"inline-flex",fontFamily:"mono",rounded:"md"},variants:{outline:({colorScheme:t="primary"})=>({boxShadow:"inset 0 0 0px 1px $color",color:"$color",vars:[{name:"color",token:"colors",value:[`${t}.600`,ye(t)?`${t}.300`:`${t}.500`]}]}),solid:({colorScheme:t="primary"})=>({bg:ye(t)?[`${t}.50`,`${t}.700`]:[St(t)?`${t}.400`:`${t}.500`,`${t}.600`],color:[ye(t)||St(t)?"black":"white","white"]}),subtle:({colorScheme:t="primary",colorMode:e,theme:n})=>({bg:[ye(t)?Na(`${t}.50`,36)(n,e):`${t}.50`,et(`${t}.300`,68)(n,e)],color:[`${t}.800`,ye(t)?`${t}.50`:`${t}.200`]}),surface:({colorScheme:t="primary",colorMode:e,theme:n})=>({bg:[ye(t)?Na(`${t}.50`,36)(n,e):`${t}.50`,et(`${t}.300`,68)(n,e)],boxShadow:"inset 0 0 0px 1px $color",color:[`${t}.800`,ye(t)?`${t}.50`:`${t}.200`],vars:[{name:"color",token:"colors",value:[`${t}.100`,et(`${t}.300`,56)(n,e)]}]})},sizes:{xs:{fontSize:"2xs",lineHeight:"$sizes.4",minH:"4",px:"1"},sm:{fontSize:"xs",lineHeight:"$sizes.5",minH:"5",px:"1.5"},md:{fontSize:"sm",lineHeight:"$sizes.6",minH:"6",px:"2"},lg:{fontSize:"sm",lineHeight:"$sizes.7",minH:"7",px:"2.5"}},defaultProps:{colorScheme:"gray",size:"sm",variant:"subtle"}},Mge={baseStyle:{w:"100%"},defaultProps:{animationOpacity:!0,endingHeight:"auto",startingHeight:0}},Lge=Gt(bu,aS,{baseStyle:{container:{},content:{minW:"auto",p:"2",w:"auto"},eyeDropper:{color:["blackAlpha.600","whiteAlpha.700"],fontSize:"lg",outline:0,pointerEvents:"auto",py:"1",rounded:"md",transitionDuration:"normal",transitionProperty:"common",w:"6",_disabled:{opacity:.4,pointerEvents:"none"},_focusVisible:{boxShadow:"outline"},_hover:{color:["blackAlpha.500","whiteAlpha.600"]}},field:{pb:"px",pr:"8",_focus:{zIndex:"unset"},_notAllowed:{cursor:"pointer"},_readOnly:{pointerEvents:"none"}},inner:{},swatch:{}},sizes:{xs:({withSwatch:t})=>({eyeDropper:{fontSize:"sm",insetEnd:"1"},field:{pl:t?"6":"2"},swatch:{boxSize:"4",insetStart:"1"}}),sm:({withSwatch:t})=>({eyeDropper:{insetEnd:"2"},field:{pl:t?"9":"2"},swatch:{boxSize:"5",insetStart:"2"}}),md:({withSwatch:t})=>({eyeDropper:{insetEnd:"2"},field:{pl:t?"10":"3"},swatch:{boxSize:"6",insetStart:"2"}}),lg:({withSwatch:t})=>({eyeDropper:{insetEnd:"2"},field:{pl:t?"12":"4"},swatch:{insetStart:"2"}})}})({omit:["addon","element","button","list","item","command","icon","divider","group","groupLabel"]}),zge=Gt(mO)(),Bge={baseStyle:{name:{},badge:{borderColor:["white","black"],borderWidth:"0.2em",rounded:"full"},container:({name:t,colorMode:e,theme:n})=>{const r=t?woe({string:t}):Ur("gray.200","gray.500")(e);return{bg:r,borderColor:["white","black"],color:Ioe(r)(n,e)?"white":"black",verticalAlign:"top",_loaded:{bg:"inherit"}}},excess:{bg:["blackAlpha.200","whiteAlpha.200"],borderColor:["white","black"]},group:{}},sizes:{"2xs":({theme:t})=>({name:{fontSize:`calc(${Be(t,"sizes.4")} / 2.5)`,lineHeight:Be(t,"sizes.16")},container:{fontSize:`calc(${Be(t,"sizes.4")} / 2.5)`,h:"4",w:"4"},excess:{fontSize:`calc(${Be(t,"sizes.4")} / 2.5)`,h:"4",lineHeight:Be(t,"sizes.16"),w:"4"}}),xs:({theme:t})=>({name:{fontSize:`calc(${Be(t,"sizes.6")} / 2.5)`,lineHeight:Be(t,"sizes.16")},container:{fontSize:`calc(${Be(t,"sizes.6")} / 2.5)`,h:"6",w:"6"},excess:{h:"6",w:"6"}}),sm:({theme:t})=>({name:{fontSize:`calc(${Be(t,"sizes.8")} / 2.5)`,lineHeight:Be(t,"sizes.16")},container:{fontSize:`calc(${Be(t,"sizes.8")} / 2.5)`,h:"8",w:"8"},excess:{h:"8",w:"8"}}),md:({theme:t})=>({name:{fontSize:`calc(${Be(t,"sizes.12")} / 2.5)`,lineHeight:Be(t,"sizes.16")},container:{fontSize:`calc(${Be(t,"sizes.12")} / 2.5)`,h:"12",w:"12"},excess:{h:"12",w:"12"}}),lg:({theme:t})=>({name:{fontSize:`calc(${Be(t,"sizes.16")} / 2.5)`,lineHeight:Be(t,"sizes.16")},container:{fontSize:`calc(${Be(t,"sizes.16")} / 2.5)`,h:"16",w:"16"},excess:{h:"16",w:"16"}}),xl:({theme:t})=>({name:{fontSize:`calc(${Be(t,"sizes.24")} / 2.5)`,lineHeight:Be(t,"sizes.16")},container:{fontSize:`calc(${Be(t,"sizes.24")} / 2.5)`,h:"24",w:"24"},excess:{h:"24",w:"24"}}),"2xl":({theme:t})=>({name:{fontSize:`calc(${Be(t,"sizes.32")} / 2.5)`,lineHeight:Be(t,"sizes.16")},container:{fontSize:`calc(${Be(t,"sizes.32")} / 2.5)`,h:"32",w:"32"},excess:{h:"32",w:"32"}})},defaultProps:{size:"md"}},jge={baseStyle:{fontSize:"xs",fontWeight:"bold",px:1,rounded:"sm",textTransform:"uppercase"},variants:{outline:({colorScheme:t="primary"})=>({boxShadow:"inset 0 0 0px 1px $color",color:"$color",vars:[{name:"color",token:"colors",value:[`${t}.600`,ye(t)?`${t}.300`:`${t}.500`]}]}),solid:({colorScheme:t="primary"})=>({bg:ye(t)?[`${t}.50`,`${t}.700`]:[St(t)?`${t}.400`:`${t}.500`,`${t}.600`],color:[ye(t)||St(t)?"black":"white","white"]}),subtle:({colorScheme:t="primary",colorMode:e,theme:n})=>({bg:[`${t}.50`,et(`${t}.300`,68)(n,e)],color:[`${t}.800`,ye(t)?`${t}.50`:`${t}.200`]}),surface:({colorScheme:t="primary",colorMode:e,theme:n})=>({bg:[`${t}.50`,et(`${t}.300`,68)(n,e)],boxShadow:"inset 0 0 0px 1px $color",color:[`${t}.800`,ye(t)?`${t}.50`:`${t}.200`],vars:[{name:"color",token:"colors",value:[`${t}.100`,et(`${t}.300`,56)(n,e)]}]})},defaultProps:{colorScheme:"primary",variant:"subtle"}},Vge=Gt(Tp,{baseStyle:{activeBar:{},background:{fill:"transparent"},bar:{},cursor:{strokeDasharray:"5 5"}}})({omit:["dot","activeDot"]}),Wge={baseStyle:({justify:t="start"})=>({caption:{color:["blackAlpha.700","whiteAlpha.600"],fontSize:"sm"},cite:{},container:{alignItems:t,display:"flex",flexDirection:"column",gap:"sm",position:"relative",textAlign:t},content:{},icon:{}}),variants:{plain:{container:{px:"md"}},solid:({colorScheme:t="gray"})=>({container:{borderStartColor:ye(t)?[`${t}.50`,`${t}.700`]:[`${t}.500`,`${t}.600`],borderStartWidth:"4px",px:"md"}}),subtle:({colorScheme:t,colorMode:e,theme:n})=>({container:{borderStartColor:[`${t}.50`,et(`${t}.300`,68)(n,e)],borderStartWidth:"4px",px:"md"}})},defaultProps:{colorScheme:"gray",variant:"subtle"}},Uge={baseStyle:{container:{},ellipsis:{},item:{},link:{"&:not([aria-current=page])":{cursor:"pointer",_focusVisible:{boxShadow:"outline"},_hover:{textDecoration:"underline"}},color:"inherit",outline:"none",textDecoration:"none",transitionDuration:"fast",transitionProperty:"common",transitionTimingFunction:"ease-out"},separator:{}}},Gge={baseStyle:{button:{_disabled:{boxShadow:"none",cursor:"not-allowed",opacity:.4,_focusVisible:{boxShadow:"0 0 0 3px rgba(125, 125, 125, 0.6)"}}},cell:{transitionDuration:"slower",transitionProperty:"common"},container:{gap:"md"},content:{},control:{color:["blackAlpha.500","whiteAlpha.500"],fontSize:"1.5em",_hidden:{opacity:0,pointerEvents:"none"}},date:{},day:{color:["blackAlpha.800","whiteAlpha.700"],_disabled:{cursor:"not-allowed",opacity:.4,_ripple:{display:"none"}},_focusVisible:{boxShadow:"outline"},_holiday:{color:["red.600","red.400"]},_outside:{color:["blackAlpha.500","whiteAlpha.500"]},_weekend:{color:["red.600","red.400"]}},header:{},label:{color:["blackAlpha.700","whiteAlpha.600"]},labelIcon:{color:["blackAlpha.500","whiteAlpha.500"],fontSize:"1.5em"},month:{gridTemplateColumns:"repeat(3, 1fr)"},next:{},prev:{},row:{},weekday:{alignItems:"center",color:["blackAlpha.700","whiteAlpha.600"],justifyContent:"center",userSelect:"none"},year:{gridTemplateColumns:"repeat(4, 1fr)"}},variants:{solid:({colorScheme:t="primary",colorMode:e,theme:n})=>({button:{_hover:{bg:["blackAlpha.50","whiteAlpha.50"],_disabled:{bg:["initial","initial"]}},_selected:{bg:ye(t)?[`${t}.100`,`${t}.700`]:[St(t)?`${t}.400`:`${t}.500`,`${t}.600`],color:[ye(t)||St(t)?"black":"white","white"]}},cell:{_between:{bg:[ye(t)?pr(`${t}.50`,.48)(n,e):`${t}.50`,et(`${t}.300`,72)(n,e)],_end:{roundedRight:"md"},_start:{roundedLeft:"md"}}},day:{_end:{roundedLeft:"0"},_hover:{bg:["blackAlpha.50","whiteAlpha.50"],_between:{bg:["initial","initial"]},_disabled:{bg:["initial","initial"]},_selected:{bg:ye(t)?[`${t}.100`,`${t}.700`]:[St(t)?`${t}.400`:`${t}.500`,`${t}.600`]}},_selected:{bg:ye(t)?[`${t}.100`,`${t}.700`]:[St(t)?`${t}.400`:`${t}.500`,`${t}.600`],borderColor:["transparent","transparent"],color:[ye(t)||St(t)?"black":"white","white"]},_start:{roundedRight:"0"},_today:{bg:["blackAlpha.100","whiteAlpha.100"],_between:{bg:["initial","initial"]}}}}),subtle:({colorScheme:t="primary",colorMode:e,theme:n})=>({button:{_hover:{bg:["blackAlpha.50","whiteAlpha.50"],_disabled:{bg:["initial","initial"]}},_selected:{bg:[`${t}.50`,et(`${t}.300`,68)(n,e)],color:[`${t}.800`,ye(t)?`${t}.50`:`${t}.200`]}},cell:{_between:{bg:[ye(t)?pr(`${t}.50`,.24)(n,e):pr(`${t}.50`,.48)(n,e),pr(`${t}.300`,.12)(n,e)],_end:{roundedRight:"md"},_start:{roundedLeft:"md"}}},day:{_end:{roundedLeft:"0"},_hover:{bg:["blackAlpha.50","whiteAlpha.50"],_between:{bg:["initial","initial"]},_disabled:{bg:["initial","initial"]},_selected:{bg:[`${t}.50`,et(`${t}.300`,68)(n,e)]}},_selected:{bg:[`${t}.50`,et(`${t}.300`,68)(n,e)],borderColor:["transparent","transparent"],color:[`${t}.800`,ye(t)?`${t}.50`:`${t}.200`]},_start:{roundedRight:"0"},_today:{bg:["blackAlpha.100","whiteAlpha.100"],_between:{bg:["initial","initial"]}}}}),unstyled:{button:{h:"auto",_active:{bg:"inherit"},_disabled:{boxShadow:"inherit",cursor:"inherit",opacity:"inherit",_focusVisible:{boxShadow:"inherit"}},_hover:{bg:"inherit"}},container:{fontSize:"inherit",gap:"inherit"},content:{w:"auto"},control:{fontSize:"inherit",h:"auto",w:"auto",_active:{bg:"inherit"},_hidden:{opacity:"inherit",pointerEvents:"inherit"},_hover:{bg:"inherit"}},day:{h:"auto",w:"auto",_active:{bg:"inherit"},_disabled:{boxShadow:"inherit",cursor:"inherit",opacity:"inherit",_focusVisible:{boxShadow:"inherit"}},_holiday:{color:"inherit"},_hover:{bg:"inherit"},_outside:{color:"inherit"},_weekend:{color:"inherit"}},label:{h:"auto",pointerEvents:"inherit",_active:{bg:"inherit",pointerEvents:"inherit"},_hover:{bg:"inherit"}},labelIcon:{color:"inherit"},weekday:{boxSize:"auto",color:"inherit",userSelect:"auto"}}},sizes:{sm:{button:{h:8},container:{fontSize:"xs"},content:{w:56},control:{boxSize:8},day:{boxSize:8},label:{h:8},weekday:{boxSize:8}},md:{button:{h:10},container:{fontSize:"sm"},content:{w:"17.5rem"},control:{boxSize:10},day:{boxSize:10},label:{h:10},weekday:{boxSize:10}},lg:{button:{h:12},container:{fontSize:"md"},content:{w:"21rem"},control:{boxSize:12},day:{boxSize:12},label:{h:12},weekday:{boxSize:12}},full:{button:{h:12},container:{fontSize:"md",w:"full"},content:{w:"full"},control:{boxSize:12},day:{h:12,w:"full"},label:{h:12},weekday:{h:12,w:"full"}}},defaultProps:{colorScheme:"primary",size:"md",variant:"solid"}},Hge={baseStyle:{button:{"&[aria-disabled=true]":{cursor:"default"},px:"4",py:"3",transitionDuration:"normal",transitionProperty:"common",_focusVisible:{boxShadow:"outline"},_nativeDisabled:{cursor:"not-allowed",opacity:.4}},container:{},icon:{color:["blackAlpha.600","whiteAlpha.700"],fontSize:"1.25em",ml:"auto"},item:{},panel:{pb:"3",px:"4"}},variants:{basic:{button:{"&:hover:not(:disabled):not([aria-disabled=true])":{bg:["blackAlpha.50","whiteAlpha.50"]}},item:{borderColor:"inherit",borderTopWidth:"1px",_last:{borderBottomWidth:"1px"}}},card:{button:{_hover:{"&:hover:not(:disabled):not([aria-disabled=true])":{bg:["blackAlpha.50","whiteAlpha.50"]},_expanded:{bg:"none"}}},item:{bg:["blackAlpha.50","whiteAlpha.50"],borderWidth:"1px",rounded:"md",_expanded:{bg:["white","black"]},_notFirst:{mt:"md"}}},unstyled:{}},defaultProps:{variant:"basic"}},qge={baseStyle:{container:{px:4,py:3,rounded:"md"},description:{lineHeight:5},icon:{boxSize:5,flexShrink:0,marginEnd:3},loading:{flexShrink:0,fontSize:"xl",marginEnd:3},title:{fontWeight:"bold",lineHeight:5,marginEnd:2}},variants:{basic:({colorScheme:t="primary"})=>({container:{bg:["white","black"],borderWidth:"1px"},icon:{color:[`${t}.500`,`${t}.400`]}}),"island-accent":({colorScheme:t="primary"})=>({container:{bg:["white","black"],borderWidth:"1px",pl:7,_before:{bg:[`${t}.500`,`${t}.400`],content:'""',h:"calc(100% - 1.5rem)",left:3,position:"absolute",rounded:"full",top:"50%",transform:"translateY(-50%)",w:1}},icon:{color:[`${t}.500`,`${t}.400`]}}),"left-accent":({colorScheme:t="primary",colorMode:e,theme:n})=>({container:{bg:[`${t}.50`,et(`${t}.300`,68)(n,e)],borderLeft:"0.25rem solid",borderLeftColor:[`${t}.500`,`${t}.400`],color:[`${t}.800`,ye(t)?`${t}.50`:`${t}.200`],pl:3,rounded:4}}),solid:({colorScheme:t="primary"})=>({container:{bg:[`${t}.500`,`${t}.600`],color:"white"}}),subtle:({colorScheme:t="primary",colorMode:e,theme:n})=>({container:{bg:[`${t}.50`,et(`${t}.300`,68)(n,e)],color:[`${t}.800`,ye(t)?`${t}.50`:`${t}.200`]}}),surface:({colorScheme:t="primary",colorMode:e,theme:n})=>({container:{bg:[`${t}.50`,et(`${t}.300`,68)(n,e)],border:"1px solid",borderColor:[`${t}.100`,et(`${t}.300`,56)(n,e)],color:[`${t}.800`,ye(t)?`${t}.50`:`${t}.200`]}}),"top-accent":({colorScheme:t="primary",colorMode:e,theme:n})=>({container:{bg:[`${t}.50`,et(`${t}.300`,68)(n,e)],borderTop:"0.25rem solid",borderTopColor:[`${t}.500`,`${t}.400`],color:[`${t}.800`,ye(t)?`${t}.50`:`${t}.200`],pt:3,rounded:4}})},defaultProps:{colorScheme:"primary",variant:"basic"}},T8={baseStyle:{container:{cursor:"pointer",rounded:"full",w:"100%",_disabled:{cursor:"not-allowed",opacity:.6},_readOnly:{cursor:"auto"}},overlay:{rounded:"full"},thumb:{borderColor:"whiteAlpha.950",borderWidth:"3px",boxShadow:["md","dark-md"],outline:0,rounded:"full",transitionDuration:"normal",transitionProperty:"transform",_active:{transform:"scale(1.15)"},_focusVisible:{boxShadow:["outline","outline"]}},track:{}},sizes:{sm:{container:{h:"3"},thumb:{boxSize:"3"}},md:{container:{h:"4"},thumb:{boxSize:"4"}},lg:{container:{h:"5"},thumb:{boxSize:"5"}}},defaultProps:{size:"md"}},Kge=Gt(T8)(),Xge=Gt(Tp,{baseStyle:{area:{}}})({omit:["line"]}),Yge={Accordion:Hge,Airy:x8,Alert:qge,AlphaSlider:Kge,AreaChart:Xge,Autocomplete:zge,Avatar:Bge,Badge:jge,BarChart:Vge,Blockquote:Wge,Breadcrumb:Uge,Button:vO,Calendar:Gge,Card:Age,Carousel:Oge,Checkbox:Pge,CircleProgress:Rge,CloseButton:Dge,Code:Fge,Collapse:Mge,ColorPicker:Lge,ColorSelector:$ge,ColorSwatch:Cge,Container:Tge,ContextMenu:_ge,DatePicker:yy,Dialog:Ige,Divider:Nge,DonutChart:Ege,Drawer:gge,Dropzone:yge,Editable:vge,Em:bge,Fade:xge,Fieldset:wge,FileButton:Sge,FileInput:kge,Flip:dge,FormControl:$8,Heading:fge,HueSlider:T8,Icon:pge,Image:hge,Indicator:mge,InfiniteScrollArea:sge,Input:bu,Kbd:ige,LineChart:Tp,Link:lge,LinkBox:age,List:uge,Loading:cge,Mark:ege,Markdown:tge,Menu:aS,Modal:yO,MonthPicker:nge,MultiAutocomplete:rge,MultiDatePicker:oge,MultiSelect:gO,NativeSelect:b8,NativeTable:S8,NumberInput:Xme,Pagination:Yme,PagingTable:Zme,PieChart:C8,PinInput:Qme,Popover:Jme,Progress:jme,RadarChart:Vme,RadialChart:Wme,Radio:Ume,RangeDatePicker:Gme,RangeSlider:Hme,Rating:qme,Reorder:Kme,Resizable:Rme,Rotate:Dme,SaturationSlider:Fme,ScaleFade:Mme,ScrollArea:Lme,SegmentedControl:zme,Select:mO,Skeleton:Bme,Slide:Nme,SlideFade:Ime,Slider:w8,Stat:Eme,Stepper:Ame,Switch:Ome,Table:k8,Tabs:Pme,Tag:Sme,Text:kme,Textarea:$me,Toggle:Cme,Tooltip:Tme,YearPicker:_me},Zge={breakpoint:{direction:"down",identifier:"@media screen"},initialColorMode:"light",initialThemeScheme:"base",var:{prefix:"ui"}},Qge={colors:{danger:"red.500",info:"blue.500",link:"blue.500",muted:["#656565","#b3b3b3"],primary:"blue.500",secondary:"violet.500",success:"green.500",warning:"orange.500"},colorSchemes:{danger:"red",info:"blue",link:"blue",primary:"blue",secondary:"violet",success:"green",warning:"orange"},spaces:{xs:"1",sm:"2",md:"4",normal:"6",lg:"8",xl:"12","2xl":"16","3xl":"24","4xl":"32"}},Jge={components:Yge,semantics:Qge,styles:{globalStyle:wme,layerStyles:vme,resetStyle:bme,textStyles:xme},...yme},eye=Zge,tye=({children:t,colorModeManager:e,colorModeStorageKey:n,config:r=eye,disableEnvironment:o,disableGlobalStyle:s,disableResetStyle:i,environment:a,theme:l=Jge,themeSchemeManager:u,themeSchemeStorageKey:c})=>{var d;return M.jsx(Q6,{disabled:o,environment:a,children:M.jsx(aae,{config:r,storageKey:c,theme:l,themeSchemeManager:u,children:M.jsx(Xie,{colorModeManager:e,config:r,storageKey:n,children:M.jsx(Hde,{...(d=r.motion)==null?void 0:d.config,children:M.jsxs(qH,{...r.loading,children:[i?null:M.jsx(uae,{}),s?null:M.jsx(cae,{}),t,M.jsx(Jhe,{...r.notice})]})})})})})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nye=1e-7,rye=1e-4;class _8{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class bO{refCount(e){return xo("refCount")}incRef(e){return xo("incRef")}timerAvailable(){return!0}time(e){return xo("time")}read(e){return xo("read")}readSync(e){return xo("readSync")}readToGPU(e,n){return xo("readToGPU")}numDataIds(){return xo("numDataIds")}disposeData(e,n){return xo("disposeData")}write(e,n,r){return xo("write")}move(e,n,r,o,s){return xo("move")}createTensorFromGPUData(e,n,r){return xo("createTensorFromGPUData")}memory(){return xo("memory")}floatPrecision(){return xo("floatPrecision")}epsilon(){return this.floatPrecision()===32?nye:rye}dispose(){return xo("dispose")}}function xo(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oye(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,Cd(t,e,n)}function Ec(t,e,n){return Math.max(t,Math.min(e,n))}function xO(t){return t%2===0?t:t+1}function Cd(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function sye(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function A(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function Wo(t,e,n=""){A(ct(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function _p(t){A(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function ne(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function iye(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==null&&e[n]!==null&&t[n]!==e[n])return!1;return!0}function ct(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Lf(t){return t%1===0}function lI(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function uf(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function bz(t,e=o=>0,n,r){return new Promise((o,s)=>{let i=0;const a=()=>{if(t()){o();return}i++;const l=e(i);if(n!=null&&i>=n){s();return}r!=null?r(a,l):setTimeout(a,l)};a()})}function I8(t,e){let n=1,r=-1;for(let s=0;s<t.length;++s)if(t[s]>=0)n*=t[s];else if(t[s]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${s}`);r=s}else if(t[s]<0)throw Error(`Shapes can not be < 0. Found ${t[s]} at dim ${s}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const o=t.slice();return o[r]=e/n,o}function rt(t,e){const n=e.length;return t=t==null?e.map((r,o)=>o):[].concat(t),A(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),A(t.every(r=>Lf(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function xu(t,e){const n=[],r=[],o=e!=null&&Array.isArray(e)&&e.length===0,s=e==null||o?null:rt(e,t).sort();let i=0;for(let a=0;a<t.length;++a){if(s!=null){if(s[i]===a&&t[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(s[i]==null||s[i]>a)&&t[a]===1&&(n.push(t[a]),r.push(a)),s[i]<=a&&i++}t[a]!==1&&(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}}function yr(t,e){return _n(t,e)}function _n(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function aye(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function lye(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function N8(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function Px(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function uye(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function vy(t){return typeof t=="string"||t instanceof String}function cye(t){return typeof t=="boolean"}function uI(t){return typeof t=="number"}function Ip(t){return Array.isArray(t)?Ip(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":uI(t)?"float32":vy(t)?"string":cye(t)?"bool":"float32"}function cI(t){return!!(t&&t.constructor&&t.call&&t.apply)}function dI(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function Fe(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function E8(t,e,n,r=!1){const o=new Array;if(e.length===1){const s=e[0]*(r?2:1);for(let i=0;i<s;i++)o[i]=n[t+i]}else{const s=e[0],i=e.slice(1),a=i.reduce((l,u)=>l*u)*(r?2:1);for(let l=0;l<s;l++)o[l]=E8(t+l*a,i,n,r)}return o}function zs(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((o,s)=>o*s)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return E8(0,t,e,n)}function dye(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function wO(t,e){const n=Rr(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function Rr(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function A8(t,e){const n=t.reduce((r,o)=>r*o,1);if(e==null||e==="float32")return zs(t,new Float32Array(n));if(e==="int32")return zs(t,new Int32Array(n));if(e==="bool")return zs(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function fs(t){t.forEach(e=>{A(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function ra(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let o=0;o<t.length-1;++o)r+=n[o]*t[o];return r}function Np(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let o=0;o<r.length-1;++o)r[o]=Math.floor(t/n[o]),t-=r[o]*n[o];return r[r.length-1]=t,r}function Ac(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xz="tfjsflags";class fye{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=pye,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(J().getBool("IS_TEST")||J().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const o=this.urlFlags[e];J().getBool("IS_TEST")||J().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${o}.`),this.set(e,o)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(Ac(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);xz in e&&e[xz].split(",").forEach(r=>{const[o,s]=r.split(":");this.urlFlags[o]=mye(o,s)})}}function pye(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(hye(e,r[0],r[1]),r.join("="))),e}function hye(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function mye(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function J(){return O8}let O8=null;function gye(t){O8=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let KC;function P8(){if(KC==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");KC=t}return KC}function yye(){const t=P8();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function SO(t,e){const n=yye();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const lS="Abs",by="Acos",xy="Acosh",Ep="Add",uS="AddN",kO="All",$O="Any",cS="ArgMax",dS="ArgMin",wy="Asin",Sy="Asinh",ky="Atan",$y="Atanh",Cy="Atan2",fS="AvgPool",CO="AvgPoolGrad",pS="AvgPool3D",TO="AvgPool3DGrad",hS="BatchMatMul",mS="BatchToSpaceND",_O="Bincount",gS="BitwiseAnd",vye="BroadcastTo",IO="BroadcastArgs",Ty="Cast",_y="Ceil",Iy="ClipByValue",NO="Complex",yS="ComplexAbs",vS="Concat",bS="Conv2D",EO="Conv2DBackpropFilter",xS="Conv2DBackpropInput",wS="Conv3D",AO="Conv3DBackpropFilterV2",OO="Conv3DBackpropInputV2",Ny="Cos",Ey="Cosh",PO="Cumprod",SS="Cumsum",RO="CropAndResize",DO="DenseBincount",FO="DepthToSpace",kS="DepthwiseConv2dNative",MO="DepthwiseConv2dNativeBackpropFilter",LO="DepthwiseConv2dNativeBackpropInput",zO="Diag",$S="Dilation2D",fI="Dilation2DBackpropInput",pI="Dilation2DBackpropFilter",bye="Draw",Ay="RealDiv",BO="Einsum",Oy="Elu",jO="EluGrad",Py="Erf",CS="Equal",Ry="Exp",TS="ExpandDims",Dy="Expm1",VO="FFT",WO="Fill",UO="FlipLeftRight",Fy="Floor",My="FloorDiv",_S="FusedBatchNorm",IS="GatherV2",GO="GatherNd",NS="Greater",Ly="GreaterEqual",zy="Identity",HO="IFFT",qO="Imag",By="IsFinite",jy="IsInf",Vy="IsNan",ES="LeakyRelu",AS="Less",OS="LessEqual",KO="LinSpace",Wy="Log",Uy="Log1p",PS="LogicalAnd",RS="LogicalNot",DS="LogicalOr",xye="LogSoftmax",FS="LRN",XO="LRNGrad",MS="Max",Gy="Maximum",LS="MaxPool",YO="MaxPoolGrad",zS="MaxPool3D",ZO="MaxPool3DGrad",QO="MaxPoolWithArgmax",BS="Mean",jS="Min",Hy="Minimum",VS="MirrorPad",qy="Mod",JO="Multinomial",Ky="Multiply",WS="Neg",US="NotEqual",eP="NonMaxSuppressionV3",tP="NonMaxSuppressionV4",nP="NonMaxSuppressionV5",GS="OnesLike",HS="OneHot",qS="Pack",KS="PadV2",Xy="Pow",XS="Prelu",YS="Prod",rP="RaggedGather",oP="RaggedRange",sP="RaggedTensorToTensor",iP="Range",aP="Real",Yy="Reciprocal",Zy="Relu",ZS="Reshape",QS="ResizeNearestNeighbor",lP="ResizeNearestNeighborGrad",JS="ResizeBilinear",uP="ResizeBilinearGrad",Qy="Relu6",ek="Reverse",Jy="Round",e0="Rsqrt",cP="ScatterNd",dP="TensorScatterUpdate",fP="SearchSorted",tk="Select",t0="Selu",nk="Slice",n0="Sin",r0="Sinh",o0="Sign",s0="Sigmoid",i0="Softplus",a0="Sqrt",rk="Sum",ok="SpaceToBatchND",sk="SplitV",ik="Softmax",pP="SparseFillEmptyRows",hP="SparseReshape",mP="SparseSegmentMean",gP="SparseSegmentSum",yP="SparseToDense",l0="SquaredDifference",vP="Square",ak="StaticRegexReplace",bP="StridedSlice",xP="StringNGrams",wP="StringSplit",SP="StringToHashBucketFast",u0="Sub",c0="Tan",d0="Tanh",f0="Tile",kP="TopK",$P="Transform",cf="Transpose",CP="Unique",lk="Unpack",uk="UnsortedSegmentSum",ck="ZerosLike",p0="Step",wye="FromPixels",TP="RotateWithOffset",Rx="_FusedMatMul",Dx="FusedConv2D",Fx="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zo(...t){J().getBool("IS_TEST")||J().getBool("PROD")||console.warn(...t)}function Sye(...t){J().getBool("IS_TEST")||J().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mx=SO("kernelRegistry",()=>new Map),hI=SO("gradRegistry",()=>new Map);function wz(t,e){const n=D8(t,e);return Mx.get(n)}function Sz(t){return hI.get(t)}function kz(t){const e=Mx.entries(),n=[];for(;;){const{done:r,value:o}=e.next();if(r)break;const[s,i]=o,[a]=s.split("_");a===t&&n.push(i)}return n}function R8(t){const{kernelName:e,backendName:n}=t,r=D8(e,n);Mx.has(r)&&Zo(`The kernel '${e}' for backend '${n}' is already registered`),Mx.set(r,t)}function kye(t){const{kernelName:e}=t;hI.has(e)&&J().getBool("DEBUG")&&Zo(`Overriding the gradient for '${e}'`),hI.set(e,t)}function D8(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F8(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var M8=Jt,Ns=null;try{Ns=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Jt(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}Jt.prototype.__isLong__;Object.defineProperty(Jt.prototype,"__isLong__",{value:!0});function Uo(t){return(t&&t.__isLong__)===!0}Jt.isLong=Uo;var $z={},Cz={};function Zc(t,e){var n,r,o;return e?(t>>>=0,(o=0<=t&&t<256)&&(r=Cz[t],r)?r:(n=en(t,(t|0)<0?-1:0,!0),o&&(Cz[t]=n),n)):(t|=0,(o=-128<=t&&t<128)&&(r=$z[t],r)?r:(n=en(t,t<0?-1:0,!1),o&&($z[t]=n),n))}Jt.fromInt=Zc;function Es(t,e){if(isNaN(t))return e?ic:As;if(e){if(t<0)return ic;if(t>=L8)return j8}else{if(t<=-_z)return To;if(t+1>=_z)return B8}return t<0?Es(-t,e).neg():en(t%zf|0,t/zf|0,e)}Jt.fromNumber=Es;function en(t,e,n){return new Jt(t,e,n)}Jt.fromBits=en;var Lx=Math.pow;function _P(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return As;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return _P(t.substring(1),e,n).neg();for(var o=Es(Lx(n,8)),s=As,i=0;i<t.length;i+=8){var a=Math.min(8,t.length-i),l=parseInt(t.substring(i,i+a),n);if(a<8){var u=Es(Lx(n,a));s=s.mul(u).add(Es(l))}else s=s.mul(o),s=s.add(Es(l))}return s.unsigned=e,s}Jt.fromString=_P;function Ti(t,e){return typeof t=="number"?Es(t,e):typeof t=="string"?_P(t,e):en(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}Jt.fromValue=Ti;var Tz=65536,$ye=1<<24,zf=Tz*Tz,L8=zf*zf,_z=L8/2,Iz=Zc($ye),As=Zc(0);Jt.ZERO=As;var ic=Zc(0,!0);Jt.UZERO=ic;var Kd=Zc(1);Jt.ONE=Kd;var z8=Zc(1,!0);Jt.UONE=z8;var mI=Zc(-1);Jt.NEG_ONE=mI;var B8=en(-1,2147483647,!1);Jt.MAX_VALUE=B8;var j8=en(-1,-1,!0);Jt.MAX_UNSIGNED_VALUE=j8;var To=en(0,-2147483648,!1);Jt.MIN_VALUE=To;var ve=Jt.prototype;ve.toInt=function(){return this.unsigned?this.low>>>0:this.low};ve.toNumber=function(){return this.unsigned?(this.high>>>0)*zf+(this.low>>>0):this.high*zf+(this.low>>>0)};ve.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(To)){var n=Es(e),r=this.div(n),o=r.mul(n).sub(this);return r.toString(e)+o.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var s=Es(Lx(e,6),this.unsigned),i=this,a="";;){var l=i.div(s),u=i.sub(l.mul(s)).toInt()>>>0,c=u.toString(e);if(i=l,i.isZero())return c+a;for(;c.length<6;)c="0"+c;a=""+c+a}};ve.getHighBits=function(){return this.high};ve.getHighBitsUnsigned=function(){return this.high>>>0};ve.getLowBits=function(){return this.low};ve.getLowBitsUnsigned=function(){return this.low>>>0};ve.getNumBitsAbs=function(){if(this.isNegative())return this.eq(To)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};ve.isZero=function(){return this.high===0&&this.low===0};ve.eqz=ve.isZero;ve.isNegative=function(){return!this.unsigned&&this.high<0};ve.isPositive=function(){return this.unsigned||this.high>=0};ve.isOdd=function(){return(this.low&1)===1};ve.isEven=function(){return(this.low&1)===0};ve.equals=function(e){return Uo(e)||(e=Ti(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};ve.eq=ve.equals;ve.notEquals=function(e){return!this.eq(e)};ve.neq=ve.notEquals;ve.ne=ve.notEquals;ve.lessThan=function(e){return this.comp(e)<0};ve.lt=ve.lessThan;ve.lessThanOrEqual=function(e){return this.comp(e)<=0};ve.lte=ve.lessThanOrEqual;ve.le=ve.lessThanOrEqual;ve.greaterThan=function(e){return this.comp(e)>0};ve.gt=ve.greaterThan;ve.greaterThanOrEqual=function(e){return this.comp(e)>=0};ve.gte=ve.greaterThanOrEqual;ve.ge=ve.greaterThanOrEqual;ve.compare=function(e){if(Uo(e)||(e=Ti(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};ve.comp=ve.compare;ve.negate=function(){return!this.unsigned&&this.eq(To)?To:this.not().add(Kd)};ve.neg=ve.negate;ve.add=function(e){Uo(e)||(e=Ti(e));var n=this.high>>>16,r=this.high&65535,o=this.low>>>16,s=this.low&65535,i=e.high>>>16,a=e.high&65535,l=e.low>>>16,u=e.low&65535,c=0,d=0,f=0,p=0;return p+=s+u,f+=p>>>16,p&=65535,f+=o+l,d+=f>>>16,f&=65535,d+=r+a,c+=d>>>16,d&=65535,c+=n+i,c&=65535,en(f<<16|p,c<<16|d,this.unsigned)};ve.subtract=function(e){return Uo(e)||(e=Ti(e)),this.add(e.neg())};ve.sub=ve.subtract;ve.multiply=function(e){if(this.isZero())return As;if(Uo(e)||(e=Ti(e)),Ns){var n=Ns.mul(this.low,this.high,e.low,e.high);return en(n,Ns.get_high(),this.unsigned)}if(e.isZero())return As;if(this.eq(To))return e.isOdd()?To:As;if(e.eq(To))return this.isOdd()?To:As;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(Iz)&&e.lt(Iz))return Es(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,o=this.high&65535,s=this.low>>>16,i=this.low&65535,a=e.high>>>16,l=e.high&65535,u=e.low>>>16,c=e.low&65535,d=0,f=0,p=0,h=0;return h+=i*c,p+=h>>>16,h&=65535,p+=s*c,f+=p>>>16,p&=65535,p+=i*u,f+=p>>>16,p&=65535,f+=o*c,d+=f>>>16,f&=65535,f+=s*u,d+=f>>>16,f&=65535,f+=i*l,d+=f>>>16,f&=65535,d+=r*c+o*u+s*l+i*a,d&=65535,en(p<<16|h,d<<16|f,this.unsigned)};ve.mul=ve.multiply;ve.divide=function(e){if(Uo(e)||(e=Ti(e)),e.isZero())throw Error("division by zero");if(Ns){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?Ns.div_u:Ns.div_s)(this.low,this.high,e.low,e.high);return en(n,Ns.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?ic:As;var r,o,s;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return ic;if(e.gt(this.shru(1)))return z8;s=ic}else{if(this.eq(To)){if(e.eq(Kd)||e.eq(mI))return To;if(e.eq(To))return Kd;var i=this.shr(1);return r=i.div(e).shl(1),r.eq(As)?e.isNegative()?Kd:mI:(o=this.sub(e.mul(r)),s=r.add(o.div(e)),s)}else if(e.eq(To))return this.unsigned?ic:As;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=As}for(o=this;o.gte(e);){r=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:Lx(2,a-48),u=Es(r),c=u.mul(e);c.isNegative()||c.gt(o);)r-=l,u=Es(r,this.unsigned),c=u.mul(e);u.isZero()&&(u=Kd),s=s.add(u),o=o.sub(c)}return s};ve.div=ve.divide;ve.modulo=function(e){if(Uo(e)||(e=Ti(e)),Ns){var n=(this.unsigned?Ns.rem_u:Ns.rem_s)(this.low,this.high,e.low,e.high);return en(n,Ns.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};ve.mod=ve.modulo;ve.rem=ve.modulo;ve.not=function(){return en(~this.low,~this.high,this.unsigned)};ve.and=function(e){return Uo(e)||(e=Ti(e)),en(this.low&e.low,this.high&e.high,this.unsigned)};ve.or=function(e){return Uo(e)||(e=Ti(e)),en(this.low|e.low,this.high|e.high,this.unsigned)};ve.xor=function(e){return Uo(e)||(e=Ti(e)),en(this.low^e.low,this.high^e.high,this.unsigned)};ve.shiftLeft=function(e){return Uo(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?en(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):en(0,this.low<<e-32,this.unsigned)};ve.shl=ve.shiftLeft;ve.shiftRight=function(e){return Uo(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?en(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):en(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};ve.shr=ve.shiftRight;ve.shiftRightUnsigned=function(e){if(Uo(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var r=this.low;return en(r>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?en(n,0,this.unsigned):en(n>>>e-32,0,this.unsigned)};ve.shru=ve.shiftRightUnsigned;ve.shr_u=ve.shiftRightUnsigned;ve.toSigned=function(){return this.unsigned?en(this.low,this.high,!1):this};ve.toUnsigned=function(){return this.unsigned?this:en(this.low,this.high,!0)};ve.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};ve.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};ve.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};Jt.fromBytes=function(e,n,r){return r?Jt.fromBytesLE(e,n):Jt.fromBytesBE(e,n)};Jt.fromBytesLE=function(e,n){return new Jt(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};Jt.fromBytesBE=function(e,n){return new Jt(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};const V8=Dt(M8),Cye=t5({__proto__:null,default:V8},[M8]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zu=V8||Cye;function dk(t){return Zu.fromString(t,!0,16)}const W8=dk("c3a5c85c97cb3127"),qu=dk("b492b66fbe98f273"),Gr=dk("9ae16a3b2f90404f");function gI(t){return t.xor(t.shru(47))}function U8(t,e,n){const r=t.slice(e,e+n);return Zu.fromBytes(Array.from(r),!0,!0)}function qt(t,e){return U8(t,e,8)}function Nz(t,e){return U8(t,e,4)}function er(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function Gl(t,e,n=dk("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let o=e.xor(r).mul(n);return o=o.xor(o.shru(47)),o=o.mul(n),o}function Tye(t,e,n,r,o,s){o=o.add(t),s=er(s.add(o).add(r),21);const i=o;return o=o.add(e),o=o.add(n),s=s.add(er(o,44)),[o.add(r),s.add(i)]}function Pv(t,e,n,r){return Tye(qt(t,e),qt(t,e+8),qt(t,e+16),qt(t,e+24),n,r)}function _ye(t,e=t.length){if(e>=8){const n=Gr.add(e*2),r=qt(t,0).add(Gr),o=qt(t,e-8),s=er(o,37).mul(n).add(r),i=er(r,25).add(o).mul(n);return Gl(s,i,n)}if(e>=4){const n=Gr.add(e*2),r=Nz(t,0);return Gl(r.shl(3).add(e),Nz(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],o=t[e-1],s=n+(r<<8),i=e+(o<<2);return gI(Gr.mul(s).xor(W8.mul(i))).mul(Gr)}return Gr}function Iye(t,e=t.length){const n=Gr.add(e*2),r=qt(t,0).mul(qu),o=qt(t,8),s=qt(t,e-8).mul(n),i=qt(t,e-16).mul(Gr);return Gl(er(r.add(o),43).add(er(s,30)).add(i),r.add(er(o.add(Gr),18)).add(s),n)}function Nye(t,e=t.length){const n=Gr.add(e*2),r=qt(t,0).mul(Gr),o=qt(t,8),s=qt(t,e-8).mul(n),i=qt(t,e-16).mul(Gr),a=er(r.add(o),43).add(er(s,30)).add(i),l=Gl(a,r.add(er(o.add(Gr),18)).add(s),n),u=qt(t,16).mul(n),c=qt(t,24),d=a.add(qt(t,e-32)).mul(n),f=l.add(qt(t,e-24)).mul(n);return Gl(er(u.add(c),43).add(er(d,30)).add(f),u.add(er(c.add(r),18)).add(d),n)}function Eye(t,e=t.length){const n=Zu.fromNumber(81,!0);if(e<=32)return e<=16?_ye(t,e):Iye(t,e);if(e<=64)return Nye(t,e);let r=n,o=n.mul(qu).add(113),s=gI(o.mul(Gr).add(113)).mul(Gr),i=[Zu.UZERO,Zu.UZERO],a=[Zu.UZERO,Zu.UZERO];r=r.mul(Gr).add(qt(t,0));let l=0;const u=(e-1>>6)*64,c=u+(e-1&63)-63;do r=er(r.add(o).add(i[0]).add(qt(t,l+8)),37).mul(qu),o=er(o.add(i[1]).add(qt(t,l+48)),42).mul(qu),r=r.xor(a[1]),o=o.add(i[0]).add(qt(t,l+40)),s=er(s.add(a[0]),33).mul(qu),i=Pv(t,l,i[1].mul(qu),r.add(a[0])),a=Pv(t,l+32,s.add(a[1]),o.add(qt(t,l+16))),[s,r]=[r,s],l+=64;while(l!==u);const d=qu.add(s.and(255).shl(1));return l=c,a[0]=a[0].add(e-1&63),i[0]=i[0].add(a[0]),a[0]=a[0].add(i[0]),r=er(r.add(o).add(i[0]).add(qt(t,l+8)),37).mul(d),o=er(o.add(i[1]).add(qt(t,l+48)),42).mul(d),r=r.xor(a[1].mul(9)),o=o.add(i[0].mul(9).add(qt(t,l+40))),s=er(s.add(a[0]),33).mul(d),i=Pv(t,l,i[1].mul(d),r.add(a[0])),a=Pv(t,l+32,s.add(a[1]),o.add(qt(t,l+16))),[s,r]=[r,s],Gl(Gl(i[0],a[0],d).add(gI(o).mul(W8)).add(s),Gl(i[1],a[1],d).add(r),d)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wu(t,e){return e==="string"?Hl(t):Qc([t],e)}function Aye(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function Qc(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=ou(t)),J().getBool("DEBUG")&&aye(t,e),Aye(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function oo(){return J().platform.now()}function Oye(t,e){return J().platform.fetch(t,e)}function Hl(t,e="utf-8"){return e=e||"utf-8",J().platform.encode(t,e)}function ru(t,e="utf-8"){return e=e||"utf-8",J().platform.decode(t,e)}function Hs(t){return J().platform.isTypedArray!=null?J().platform.isTypedArray(t):F8(t)}function ou(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||Ac(t)||t==null||Hs(t)&&n)e.push(t);else if(Array.isArray(t)||Hs(t))for(let r=0;r<t.length;++r)ou(t[r],e,n);else{let r=-1;for(const o of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(o)&&(r=Math.max(r,Number(o)));for(let o=0;o<=r;o++)ou(t[o],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pye{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new Dye)}profileKernel(e,n,r){let o;const s=()=>{o=r()};let i;const a=oo();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(s);else{s();for(const u of o)u.dataSync();i=Promise.resolve({kernelMs:oo()-a})}if(J().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let u=0;u<o.length;u++){const c=o[u];c.data().then(d=>{Rye(d,c.dtype,e)})}return{kernelName:e,outputs:o,inputs:n,timeMs:i.then(u=>u.kernelMs),extraInfo:i.then(u=>u.getExtraProfileInfo!=null?u.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:o,inputs:s,extraInfo:i}=e;r.forEach(a=>{Promise.all([a.data(),o,i]).then(l=>{this.logger.logKernelProfile(n,a,l[0],l[1],s,l[2])})})}}function Rye(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const o=t[r];if(isNaN(o)||!isFinite(o))return console.warn(`Found ${o} in the result of '${n}'`),!0}return!1}class Dye{logKernelProfile(e,n,r,o,s,i){const a=typeof o=="number"?uf(`${o}ms`,9):o.error,l=uf(e,25),u=n.rank,c=n.size,d=uf(n.shape.toString(),14);let f="";for(const p in s){const h=s[p];if(h!=null){const m=h.shape||n.shape,g=m.length;f+=`${p}: ${g}D ${g>0?m:""} `}}console.log(`%c${l}	%c${a}	%c${u}D ${d}	%c${c}	%c${f}	%c${i}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fye(t,e,n){const r={},o={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const u=t[l],c=u.inputs;for(const d in c){const f=c[d];let p=!1;for(let h=0;h<e.length;h++)if(r[f.id]){u.outputs.forEach(m=>r[m.id]=!0),p=!0,o[u.id]=!0;break}if(p)break}}const s={};s[n.id]=!0;const i={};for(let l=t.length-1;l>=0;l--){const u=t[l],c=u.inputs;for(let d=0;d<u.outputs.length;d++)if(s[u.outputs[d].id]){for(const f in c)s[c[f].id]=!0,i[u.id]=!0;break}}const a=[];for(let l=0;l<t.length;l++){const u=t[l];if(o[u.id]&&i[u.id]){const c={};for(const f in u.inputs){const p=u.inputs[f];r[p.id]&&(c[f]=p)}const d=Object.assign({},u);d.inputs=c,d.outputs=u.outputs,a.push(d)}}return a}function Mye(t,e,n,r){for(let o=e.length-1;o>=0;o--){const s=e[o],i=[];if(s.outputs.forEach(l=>{const u=t[l.id];u!=null?i.push(u):i.push(null)}),s.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${s.kernelName}.`);const a=s.gradient(i);for(const l in s.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);const u=n(()=>a[l]());if(u.dtype!=="float32")throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${u.dtype}'`);const c=s.inputs[l];if(!ct(u.shape,c.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input '${l}' has shape '${u.shape}', which does not match the shape of the input '${c.shape}'`);if(t[c.id]==null)t[c.id]=u;else{const d=t[c.id];t[c.id]=r(d,u),d.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ez=20,xh=3,XC=7;function Lye(t,e,n,r){const o=Fe(e),s=zye(t,e,n,o),i=e.length,a=Ob(t,e,n,o,s),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${i}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(a.map(u=>"    "+u).join(`
`)),l.join(`
`)}function zye(t,e,n,r){const o=ne(e),s=r[r.length-1],i=new Array(s).fill(0),a=e.length,l=n==="complex64"?Gh(t):t;if(a>1)for(let u=0;u<o/s;u++){const c=u*s;for(let d=0;d<s;d++)i[d]=Math.max(i[d],Uh(l[c+d],0,n).length)}return i}function Uh(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(XC))} + ${parseFloat(t[1].toFixed(XC))}j`:vy(t)?r=`'${t}'`:n==="bool"?r=G8(t):r=parseFloat(t.toFixed(XC)).toString(),uf(r,e)}function G8(t){return t===0?"false":"true"}function Ob(t,e,n,r,o,s=!0){const i=n==="complex64"?2:1,a=e[0],l=e.length;if(l===0){if(n==="complex64"){const m=Gh(t);return[Uh(m[0],0,n)]}return n==="bool"?[G8(t[0])]:[t[0].toString()]}if(l===1){if(a>Ez){const g=xh*i;let y=Array.from(t.slice(0,g)),v=Array.from(t.slice((a-xh)*i,a*i));return n==="complex64"&&(y=Gh(y),v=Gh(v)),["["+y.map((b,x)=>Uh(b,o[x],n)).join(", ")+", ..., "+v.map((b,x)=>Uh(b,o[a-xh+x],n)).join(", ")+"]"]}return["["+(n==="complex64"?Gh(t):Array.from(t)).map((g,y)=>Uh(g,o[y],n)).join(", ")+"]"]}const u=e.slice(1),c=r.slice(1),d=r[0]*i,f=[];if(a>Ez){for(let m=0;m<xh;m++){const g=m*d,y=g+d;f.push(...Ob(t.slice(g,y),u,n,c,o,!1))}f.push("...");for(let m=a-xh;m<a;m++){const g=m*d,y=g+d;f.push(...Ob(t.slice(g,y),u,n,c,o,m===a-1))}}else for(let m=0;m<a;m++){const g=m*d,y=g+d;f.push(...Ob(t.slice(g,y),u,n,c,o,m===a-1))}const p=l===2?",":"";f[0]="["+(a>0?f[0]+p:"");for(let m=1;m<f.length-1;m++)f[m]=" "+f[m]+p;let h=`,
`;for(let m=2;m<l;m++)h+=`
`;return f[f.length-1]=" "+f[f.length-1]+"]"+(s?"":h),f}function Gh(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Un{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=ne(e),r!=null){const o=r.length;A(o===this.size,()=>`Length of values '${o}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||_n(n,this.size),this.strides=Fe(e)}set(e,...n){n.length===0&&(n=[0]),A(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const o of e){if(o<0||o>=this.shape[n]){const s=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(s)}n++}let r=e[e.length-1];for(let o=0;o<e.length-1;++o)r+=this.strides[o]*e[o];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return ui().makeTensor(this.values,this.shape,this.dtype)}}let ui=null,Td=null;function Bye(t){ui=t}function jye(t){Td=t}class fn{constructor(e,n,r,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=ne(e),this.strides=Fe(e),this.dataId=r,this.id=o,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Td.buffer(this.shape,this.dtype,e)}bufferSync(){return Td.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return zs(this.shape,e,this.dtype==="complex64")}arraySync(){return zs(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=ui().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>ru(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),ui().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=ui().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>ru(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await ui().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),ui().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Td.print(this,e)}clone(){return this.throwIfDisposed(),Td.clone(this)}toString(e=!1){const n=this.dataSync();return Lye(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Td.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),ui().makeVariable(this,e,n,r)}}Object.defineProperty(fn,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function re(){return SO("Tensor",()=>fn)}re();class zx extends fn{constructor(e,n,r,o){super(e.shape,e.dtype,e.dataId,o),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!ct(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);ui().disposeTensor(this),this.dataId=e.dataId,ui().incRef(this,null)}dispose(){ui().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(zx,Symbol.hasInstance,{value:t=>t instanceof fn&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Az;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(Az||(Az={}));var yI;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(yI||(yI={}));var vI;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(vI||(vI={}));var bI;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(bI||(bI={}));var xI;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(xI||(xI={}));const Vye={float32:bI,int32:yI,bool:vI,complex64:xI};function Fo(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return Vye[t][e]}function IP(t){return Fo(t,"int32")}function H8(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function q8(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kn(t,e){if(t.dtype===e.dtype)return[t,e];const n=Fo(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function Wye(t,e){A(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function K8(t){const e=[];return X8(t,e,new Set),e}function X8(t,e,n){if(t==null)return;if(t instanceof fn){e.push(t);return}if(!Uye(t))return;const r=t;for(const o in r){const s=r[o];n.has(s)||(n.add(s),X8(s,e,n))}}function Uye(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YC(t){return t.kernelName!=null}class Oz{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class Bf{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Oz}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(Zo(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new Pye(this.backendInstance),!0}setupRegisteredKernels(){kz(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){kz(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof bO)&&typeof r.then=="function"){const o=++this.pendingBackendInitId,s=r.then(i=>o<this.pendingBackendInitId?!1:(this.registry[e]=i,this.pendingBackendInit=null,!0)).catch(i=>(o<this.pendingBackendInitId||(this.pendingBackendInit=null,Zo(`Initialization of backend ${e} failed`),Zo(i.stack||i.message)),!1));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return Zo(`Initialization of backend ${e} failed`),Zo(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:o,asyncInit:s}=this.initializeBackend(r);if(s||o)return{name:r,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),o=r.backend,s=this.readSync(n),i=o.refCount(n);o.disposeData(n,!0),r.backend=e,e.move(n,s,r.shape,r.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let o;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(o),()=>(o=n(),o instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),o))}scopedRun(e,n,r){e();try{const o=r();return n(),o}catch(o){throw n(),o}}nextTensorId(){return Bf.nextTensorId++}nextVariableId(){return Bf.nextVariableId++}clone(e){const n=U.runKernel(zy,{x:e}),r={x:e},o=i=>({x:()=>{const a="float32",l={x:i},u={dtype:a};return U.runKernel(Ty,l,u)}}),s=[];return this.addTapeNode(this.state.activeScope.name,r,[n],o,s,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(wz(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const o=this.backend.numDataIds();let s=0;r.forEach(l=>{s+=l.dtype==="complex64"?3:1});const i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=o-n-s-i;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const o=this.isTapeOn(),s=this.state.numBytes,i=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let a;this.backendName==null&&this.backend;let l;const u=YC(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(YC(e)){const{kernelName:h,inputs:m,attrs:g}=e;this.backendName==null&&this.backend;const y=wz(h,this.backendName);A(y!=null,()=>`Cannot find registered kernel '${h}' for backend '${this.backendName}'`),a=()=>{const v=this.backend.numDataIds();l=y.kernelFunc({inputs:m,attrs:g,backend:this.backend});const b=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(h,v,b);const x=b.map(w=>w.rank!=null?w:this.makeTensorFromTensorInfo(w));if(o){const w=this.getTensorsForGradient(h,m,x);r=this.saveTensorsForBackwardMode(w)}return x}}else{const{forwardFunc:h}=e,m=g=>{o&&(r=g.map(y=>this.keep(this.clone(y))))};a=()=>{const g=this.backend.numDataIds();l=this.tidy(()=>h(this.backend,m));const y=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,g,y),y}}const{inputs:c,attrs:d}=e,f=YC(e)?null:e.backwardsFunc;let p;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=a():(p=this.profiler.profileKernel(u,c,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(p),n=p.outputs)}),o&&this.addTapeNode(u,c,n,f,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-i,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(h=>c[h]!=null?c[h].shape:null),outputShapes:n.map(h=>h.shape),kernelTimeMs:p.timeMs,extraInfo:p.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const o=Sz(e);if(o!=null){const s=o.inputsToSave||[],i=o.outputsToSave||[];let a;o.saveAllInputs?(A(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(n).map(u=>n[u])):a=s.map(u=>n[u]);const l=r.filter((u,c)=>i[c]);return a.concat(l)}return[]}makeTensor(e,n,r,o){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",o=o||this.backend;let s=e;r==="string"&&vy(e[0])&&(s=e.map(l=>Hl(l)));const i=o.write(s,n,r),a=new fn(n,r,i,this.nextTensorId());if(this.trackTensor(a,o),r==="string"){const l=this.state.tensorInfo.get(i),u=uye(s);this.state.numBytes+=u-l.bytes,l.bytes=u}return a}makeTensorFromDataId(e,n,r,o){r=r||"float32";const s={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(s,o)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:o,dtype:s}=e,i=new fn(o,s,r,this.nextTensorId());return this.trackTensor(i,n),i}makeVariable(e,n=!0,r,o){r=r||this.nextVariableId().toString(),o!=null&&o!==e.dtype&&(e=e.cast(o));const s=new zx(e,n,r,this.nextTensorId());if(this.state.registeredVariables[s.name]!=null)throw new Error(`Variable with name ${s.name} was already registered`);return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*Px(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof zx||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*Px(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(o=>o.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const o of this.state.activeProfile.kernels)o.kernelTimeMs=await o.kernelTimeMs,o.extraInfo=await o.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,o,s,i){const a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:s},l=Sz(e);l!=null&&(o=l.gradFunc),o!=null&&(a.gradient=u=>(u=u.map((c,d)=>{if(c==null){const f=r[d],p=Rr(f.size,f.dtype);return this.makeTensor(p,f.shape,f.dtype)}return c}),o(u.length>1?u:u[0],s,i))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=K8(e),r=new Set(n.map(s=>s.id));for(let s=0;s<this.state.activeScope.track.length;s++){const i=this.state.activeScope.track[s];!i.kept&&!r.has(i.id)&&i.dispose()}const o=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(s=>{!s.kept&&s.scopeId===o.id&&this.track(s)})}gradients(e,n,r,o=!1){if(A(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const s=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));A(s instanceof fn,()=>"The result y returned by f() must be a tensor.");const i=Fye(this.state.activeTape,n,s);if(!o&&i.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const a={};a[s.id]=r??Gye(s.shape),Mye(a,i,u=>this.tidy(u),Hye);const l=n.map(u=>a[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(const c of u.saved)c.dispose()}),this.state.activeTape=null),{value:s,grads:l}})}customGrad(e){return A(cI(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{A(n.every(a=>a instanceof fn),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const o={};n.forEach((a,l)=>{o[l]=a});const s=(a,l)=>(r=e(...n,l),A(r.value instanceof fn,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),A(cI(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),i=(a,l)=>{const u=r.gradFunc(a,l),c=Array.isArray(u)?u:[u];A(c.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),A(c.every(f=>f instanceof fn),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return c.forEach((f,p)=>{d[p]=()=>f}),d};return this.runKernelFunc({forwardFunc:s,backwardsFunc:i,inputs:o})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=oo(),r=await this.backend.time(e);return r.wallMs=oo()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Oz;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Bf.nextTensorId=0;Bf.nextVariableId=0;function Gye(t){const e=wO(ne(t),"float32");return U.makeTensor(e,t,"float32")}function Y8(){const t=P8();if(t._tfengine==null){const e=new fye(t);t._tfengine=new Bf(e)}return gye(t._tfengine.ENV),Bye(()=>t._tfengine),t._tfengine}const U=Y8();function Hye(t,e){const n={a:t,b:e};return U.runKernel(Ep,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qye(){return typeof navigator<"u"&&navigator!=null}function Z8(t){if(t||qye()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function Q8(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fo=J();fo.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});fo.registerFlag("IS_BROWSER",()=>Q8());fo.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");fo.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));fo.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));fo.registerFlag("PROD",()=>!1);fo.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>fo.getBool("DEBUG"));fo.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);fo.registerFlag("IS_TEST",()=>!1);fo.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>fo.getBool("DEBUG"));fo.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);fo.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);fo.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Su(t,e){let n=t;if(Hs(t))return e==="string"?[]:[t.length];if(H8(t)){const o=t.channels||"RGBA";return[t.height,t.width*o.length]}else if(q8(t))return[t.buffer.size/(e==null?4:Px(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||Hs(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&J().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&J8(t,r,[]),r}function J8(t,e,n){if(n=n||[],!Array.isArray(t)&&!Hs(t)){A(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}A(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),A(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let o=0;o<t.length;++o)J8(t[o],r,n.concat(o))}function Pz(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function P(t,e,n,r="numeric"){if(t instanceof re())return Pz(r,t.dtype,e,n),t;let o=Ip(t);if(o!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),Pz(r,o,e,n),t==null||!Hs(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const s=Su(t,o);!Hs(t)&&!Array.isArray(t)&&(t=[t]);const a=o!=="string"?Qc(t,o):ou(t,[],!0);return U.makeTensor(a,s,o)}function Bx(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((s,i)=>P(s,`${e}[${i}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e9="__op";function V(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+e9;const o=(...s)=>{U.startScope(n);try{const i=r(...s);return Ac(i)&&console.error("Cannot return a Promise inside of tidy."),U.endScope(i),i}catch(i){throw U.endScope(null),i}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kye(t,e){const n=P(t,"real","complex"),r=P(e,"imag","complex");Wo(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const o={real:n,imag:r};return U.runKernel(NO,o)}const su=V({complex_:Kye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ku(t,e,n,r){if(r==null)r=Ip(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(q8(t)||H8(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return U.backend.createTensorFromGPUData(t,e||n,r)}if(!Hs(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){fs(e);const o=ne(e),s=ne(n);A(o===s,()=>`Based on the provided shape, [${e}], the tensor should have ${o} values but has ${s}`);for(let i=0;i<n.length;++i){const a=n[i],l=i===n.length-1?a!==ne(e.slice(i)):!0;A(n[i]===e[i]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!Hs(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?Qc(t,r):ou(t,[],!0),U.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bi(t,e,n){const r=Su(t,n);return ku(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oc={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class _i{static join(e){return new _i(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>Hs(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const o=e[r];r!==e.length-1&&o.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const s=n+o.byteLength;this.shards.push({buffer:o,start:n,end:s}),n=s}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const o=n-e,s=new ArrayBuffer(o),i=new Uint8Array(s);let a=0;for(let l=r;l<this.shards.length;l++){const u=this.shards[l],d=e+a-u.start,f=a,h=Math.min(n,u.end)-u.start,m=new Uint8Array(u.buffer,d,h-d);if(i.set(m,f),a+=m.length,n<u.end)break}return s}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(o){return e<o.start?-1:e>=o.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=Xye(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function Xye(t,e){let n=0,r=t.length;for(;n<=r;){const o=Math.floor((r-n)/2)+n,s=e(t[o]);if(s===0)return o;s<0?r=o:n=o+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Di(){return U}function Rz(){return U.memory()}function Z(t,e){return U.tidy(t,e)}function nt(t){K8(t).forEach(n=>n.dispose())}function rr(t){return U.keep(t)}function Yye(){return U.backendName}function t9(t,e,n=1){return U.registerBackend(t,e,n)}function n9(){return U.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iu=4;async function wI(t,e){const n=[],r=[],o=Array.isArray(t)?t.map(i=>i.name):Object.keys(t);for(let i=0;i<o.length;++i){const a=o[i],l=Array.isArray(t)?t[i].tensor:t[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);const u={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const c=new Promise(async d=>{const f=await l.bytes(),p=f.reduce((g,y)=>g+y.length,0)+iu*f.length,h=new Uint8Array(p);let m=0;for(let g=0;g<f.length;g++){const y=f[g],v=new Uint8Array(new Uint32Array([y.length]).buffer);h.set(v,m),m+=iu,h.set(y,m),m+=y.length}d(h)});r.push(c)}else r.push(l.data());e!=null&&(u.group=e),n.push(u)}const s=await Promise.all(r);return{data:Jye(s),specs:n}}function r9(t,e){const n=new _i(t),r={};let o=0;for(const s of e){const i=Zye(s,(a,l)=>n.slice(o+a,o+l));r[s.name]=o9(s,n.slice(o,o+i)),o+=i}return r}function Zye(t,e){const n=ne(t.shape);let r;if("quantization"in t){const o=t.quantization;r=Oc[o.dtype]}else if(t.dtype==="string"){let o=0;for(let s=0;s<n;s++)o+=iu+new Uint32Array(e(o,o+iu))[0];return o}else r=Oc[t.dtype];return n*r}async function Qye(t,e){const n=ne(t.shape);let r;if("quantization"in t){const o=t.quantization;r=Oc[o.dtype]}else if(t.dtype==="string"){let o=0;for(let s=0;s<n;s++)o+=iu+new Uint32Array(await e(o,o+iu))[0];return o}else r=Oc[t.dtype];return n*r}function o9(t,e){const n=t.name,r=t.dtype,o=t.shape,s=ne(o);let i,a=0;if("quantization"in t){const l=t.quantization;if(l.dtype==="uint8"||l.dtype==="uint16"){if(!("min"in l&&"scale"in l))throw new Error(`Weight ${t.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else if(l.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${t.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const u=Oc[l.dtype],c=l.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(r==="float32")if(l.dtype==="uint8"||l.dtype==="uint16"){i=new Float32Array(c.length);for(let d=0;d<c.length;d++){const f=c[d];i[d]=f*l.scale+l.min}}else if(l.dtype==="float16")i=s0e()(c);else throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);else if(r==="int32"){if(l.dtype!=="uint8"&&l.dtype!=="uint16")throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);i=new Int32Array(c.length);for(let d=0;d<c.length;d++){const f=c[d];i[d]=Math.round(f*l.scale+l.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=s*u}else if(r==="string"){const l=ne(t.shape);i=[];for(let u=0;u<l;u++){const c=new Uint32Array(e.slice(a,a+iu))[0];a+=iu;const d=new Uint8Array(e.slice(a,a+c));i.push(d),a+=c}}else{const l=Oc[r];if(r==="float32")i=new Float32Array(e);else if(r==="int32")i=new Int32Array(e);else if(r==="bool")i=new Uint8Array(e);else if(r==="complex64"){i=new Float32Array(e);const u=new Float32Array(i.length/2),c=new Float32Array(i.length/2);for(let h=0;h<u.length;h++)u[h]=i[h*2],c[h]=i[h*2+1];const d=bi(u,o,"float32"),f=bi(c,o,"float32"),p=su(d,f);return d.dispose(),f.dispose(),p}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=s*l}return bi(i,o,r)}async function Dz(t,e,n){let r=new Uint8Array(e);for(;r.byteLength<n;){const{done:o,value:s}=await t.read();if(o&&s==null){const a=n-r.byteLength;throw new Error(`Reader is done but ${a} bytes are still expected`)}const i=new Uint8Array(r.length+s.byteLength);i.set(r,0),i.set(new Uint8Array(s),r.length),r=i}return r.buffer}async function s9(t,e){const n={},r=t.getReader();let o=new ArrayBuffer(0);for(const s of e){const i=await Qye(s,async(u,c)=>(o=await Dz(r,o,c),o.slice(u,c)));o=await Dz(r,o,i);const a=o.slice(0,i);o=o.slice(i);const l=o9(s,a);if(n[s.name]=l,Yye()==="webgpu"){const u=n9();"uploadToGPU"in u&&ne(l.shape)>=J().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&u.uploadToGPU(l.dataId)}}return n}function Jye(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(s=>{if(e+=s.byteLength,n.push(s.byteLength===s.buffer.byteLength?s:new s.constructor(s)),!(s instanceof Float32Array||s instanceof Int32Array||s instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${s.constructor.name}`)});const r=new Uint8Array(e);let o=0;return n.forEach(s=>{r.set(new Uint8Array(s.buffer),o),o+=s.byteLength}),r.buffer}const NP=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function Fz(t){return NP?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function e0e(t){if(NP)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,o=e.length;r<o;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function t0e(t){if(NP){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function i9(t){return _i.join(t)}function Mz(t){const e="/";for(t=t.trim();t.endsWith(e);)t=t.slice(0,t.length-1);const n=t.split(e);return n[n.length-1]}function a9(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function l9(t,e,n){const r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(r.initializerSignature=t.initializerSignature),r}async function EP(t,e){let n,r;return t.weightsManifest!=null&&([n,r]=await e(t.weightsManifest)),l9(t,n,r)}function h0(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:Fz(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:Fz(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new _i(t.weightData).byteLength}}function SI(t){const e=[];for(const n of t)e.push(...n.weights);return e}function n0e(){const t=n=>{let r=n<<13,o=0;for(;!(r&8388608);)o-=8388608,r<<=1;return r&=-8388609,o+=947912704,r|o},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function r0e(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function o0e(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function s0e(){const t=n0e(),e=r0e(),n=o0e();return r=>{const o=new ArrayBuffer(4*r.length),s=new Uint32Array(o);for(let i=0;i<r.length;i++){const a=r[i],l=t[n[a>>10]+(a&1023)]+e[a>>10];s[i]=l}return new Float32Array(o)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cn{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return cn.instance==null&&(cn.instance=new cn),cn.instance}static registerSaveRouter(e){cn.getInstance().saveRouters.push(e)}static registerLoadRouter(e){cn.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return cn.getHandlers(e,"save")}static getLoadHandlers(e,n){return cn.getHandlers(e,"load",n)}static getHandlers(e,n,r){const o=[];return(n==="load"?cn.getInstance().loadRouters:cn.getInstance().saveRouters).forEach(i=>{const a=i(e,r);a!==null&&o.push(a)}),o}}const i0e=t=>cn.registerSaveRouter(t),a0e=t=>cn.registerLoadRouter(t),u9=t=>cn.getSaveHandlers(t),l0e=(t,e)=>cn.getLoadHandlers(t,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kI="tensorflowjs",$I=1,ac="models_store",Ol="model_info_store";function c9(){if(!J().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function CI(t){const e=t.result;e.createObjectStore(ac,{keyPath:"modelPath"}),e.createObjectStore(Ol,{keyPath:"modelPath"})}class Pc{constructor(e){if(this.indexedDB=c9(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,o)=>{const s=this.indexedDB.open(kI,$I);s.onupgradeneeded=()=>CI(s),s.onsuccess=()=>{const i=s.result;if(n==null){const a=i.transaction(ac,"readonly"),u=a.objectStore(ac).get(this.modelPath);u.onsuccess=()=>{if(u.result==null)return i.close(),o(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(u.result.modelArtifacts)},u.onerror=c=>(i.close(),o(u.error)),a.oncomplete=()=>i.close()}else{n.weightData=_i.join(n.weightData);const a=h0(n),l=i.transaction(Ol,"readwrite");let u=l.objectStore(Ol),c;try{c=u.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(f){return o(f)}let d;c.onsuccess=()=>{d=i.transaction(ac,"readwrite");const f=d.objectStore(ac);let p;try{p=f.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:a})}catch(h){return o(h)}p.onsuccess=()=>r({modelArtifactsInfo:a}),p.onerror=h=>{u=l.objectStore(Ol);const m=u.delete(this.modelPath);m.onsuccess=()=>(i.close(),o(p.error)),m.onerror=g=>(i.close(),o(p.error))}},c.onerror=f=>(i.close(),o(c.error)),l.oncomplete=()=>{d==null?i.close():d.oncomplete=()=>i.close()}}},s.onerror=i=>o(s.error)})}}Pc.URL_SCHEME="indexeddb://";const d9=t=>J().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Pc.URL_SCHEME)?u0e(t.slice(Pc.URL_SCHEME.length)):null;cn.registerSaveRouter(d9);cn.registerLoadRouter(d9);function u0e(t){return new Pc(t)}function c0e(t){return t.startsWith(Pc.URL_SCHEME)?t.slice(Pc.URL_SCHEME.length):t}class d0e{constructor(){this.indexedDB=c9()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(kI,$I);r.onupgradeneeded=()=>CI(r),r.onsuccess=()=>{const o=r.result,s=o.transaction(Ol,"readonly"),a=s.objectStore(Ol).getAll();a.onsuccess=()=>{const l={};for(const u of a.result)l[u.modelPath]=u.modelArtifactsInfo;e(l)},a.onerror=l=>(o.close(),n(a.error)),s.oncomplete=()=>o.close()},r.onerror=o=>n(r.error)})}async removeModel(e){return e=c0e(e),new Promise((n,r)=>{const o=this.indexedDB.open(kI,$I);o.onupgradeneeded=()=>CI(o),o.onsuccess=()=>{const s=o.result,i=s.transaction(Ol,"readwrite"),a=i.objectStore(Ol),l=a.get(e);let u;l.onsuccess=()=>{if(l.result==null)return s.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const c=a.delete(e),d=()=>{u=s.transaction(ac,"readwrite");const p=u.objectStore(ac).delete(e);p.onsuccess=()=>n(l.result.modelArtifactsInfo),p.onerror=h=>r(l.error)};c.onsuccess=d,c.onerror=f=>(d(),s.close(),r(l.error))}},l.onerror=c=>(s.close(),r(l.error)),i.oncomplete=()=>{u==null?s.close():u.oncomplete=()=>s.close()}},o.onerror=s=>r(o.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ta="/",_d="tensorflowjs_models",f9="info",f0e="model_topology",p0e="weight_specs",h0e="weight_data",m0e="model_metadata";function p9(t){return{info:[_d,t,f9].join(Ta),topology:[_d,t,f0e].join(Ta),weightSpecs:[_d,t,p0e].join(Ta),weightData:[_d,t,h0e].join(Ta),modelMetadata:[_d,t,m0e].join(Ta)}}function h9(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function g0e(t){const e=t.split(Ta);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(Ta)}function y0e(t){return t.startsWith(Rc.URL_SCHEME)?t.slice(Rc.URL_SCHEME.length):t}class Rc{constructor(e){if(!J().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=p9(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),o=h0(e),s=_i.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(o)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,e0e(s));const i={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),{modelArtifactsInfo:o}}catch{throw h9(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${o.modelTopologyBytes}, weightSpecsBytes=${o.weightSpecsBytes}, weightDataBytes=${o.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const o=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(o==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=o;const s=this.LS.getItem(this.keys.modelMetadata);if(s!=null){const a=JSON.parse(s);n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,a.signature!=null&&(n.signature=a.signature),a.userDefinedMetadata!=null&&(n.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(n.modelInitializer=a.modelInitializer),a.initializerSignature!=null&&(n.initializerSignature=a.initializerSignature),a.trainingConfig!=null&&(n.trainingConfig=a.trainingConfig)}const i=this.LS.getItem(this.keys.weightData);if(i==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=t0e(i),n}}Rc.URL_SCHEME="localstorage://";const m9=t=>J().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Rc.URL_SCHEME)?v0e(t.slice(Rc.URL_SCHEME.length)):null;cn.registerSaveRouter(m9);cn.registerLoadRouter(m9);function v0e(t){return new Rc(t)}class b0e{constructor(){A(J().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),A(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=_d+Ta,r=Ta+f9;for(let o=0;o<this.LS.length;++o){const s=this.LS.key(o);if(s.startsWith(n)&&s.endsWith(r)){const i=g0e(s);e[i]=JSON.parse(this.LS.getItem(s))}}return e}async removeModel(e){e=y0e(e);const n=p9(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return h9(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const df="://";class Vr{constructor(){this.managers={}}static getInstance(){return Vr.instance==null&&(Vr.instance=new Vr),Vr.instance}static registerManager(e,n){A(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(df)&&(e=e.slice(0,e.indexOf(df))),A(e.length>0,()=>"scheme must not be an empty string.");const r=Vr.getInstance();A(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=Vr.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(Vr.getInstance().managers)}}function Pb(t){if(t.indexOf(df)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Vr.getSchemes().join(",")}`);return{scheme:t.split(df)[0],path:t.split(df)[1]}}async function g9(t,e,n=!1){A(t!==e,()=>`Old path and new path are the same: '${t}'`);const r=cn.getLoadHandlers(t);A(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),A(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);const o=r[0],s=cn.getSaveHandlers(e);A(s.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),A(s.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const i=s[0],a=Pb(t).scheme,l=Pb(t).path,u=a===Pb(t).scheme,c=await o.load();n&&u&&await Vr.getManager(a).removeModel(l);const d=await i.save(c);return n&&!u&&await Vr.getManager(a).removeModel(l),d.modelArtifactsInfo}async function x0e(){const t=Vr.getSchemes(),e={};for(const n of t){const r=await Vr.getManager(n).listModels();for(const o in r){const s=n+df+o;e[s]=r[o]}}return e}async function w0e(t){const e=Pb(t);return Vr.getManager(e.scheme).removeModel(e.path)}async function S0e(t,e){return g9(t,e,!1)}async function k0e(t,e){return g9(t,e,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $0e{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!J().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const o=this.functionRefs[r.data.index];o(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return F8(e)}}if(J().get("IS_BROWSER")){J().setPlatform("browser",new $0e);try{Vr.registerManager(Rc.URL_SCHEME,new b0e)}catch{}try{Vr.registerManager(Pc.URL_SCHEME,new d0e)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C0e={importFetch:()=>require("node-fetch")};let ZC;class T0e{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return J().global.fetch!=null?J().global.fetch(e,n):(ZC==null&&(ZC=C0e.importFetch()),ZC(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}J().get("IS_NODE")&&!J().get("IS_BROWSER")&&J().setPlatform("node",new T0e);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qe(t,e="float32",n){return e=e||"float32",fs(t),new Un(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _0e(t,e){const n=P(t,"x","cast");if(!lye(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},o={dtype:e};return U.runKernel(Ty,r,o)}const be=V({cast_:_0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I0e(t){const n={x:P(t,"x","clone","string_or_numeric")};return U.runKernel(zy,n)}const ja=V({clone_:I0e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y9(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Y8();const N0e={buffer:Qe,cast:be,clone:ja,print:y9};jye(N0e);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E0e(t,e){let n=P(t,"a","add"),r=P(e,"b","add");[n,r]=kn(n,r);const o={a:n,b:r};return U.runKernel(Ep,o)}const ue=V({add_:E0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A0e(t,e){let n=P(t,"a","floorDiv"),r=P(e,"b","floorDiv");[n,r]=kn(n,r);const o={a:n,b:r};return U.runKernel(My,o)}const AP=V({floorDiv_:A0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O0e(t,e){let n=P(t,"a","div"),r=P(e,"b","div");if([n,r]=kn(n,r),n.dtype==="int32"&&r.dtype==="int32")return AP(n,r);const o={a:n,b:r},s={};return U.runKernel(Ay,o,s)}const Oe=V({div_:O0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P0e(t,e){let n=P(t,"a","mul"),r=P(e,"b","mul");[n,r]=kn(n,r);const o={a:n,b:r};return U.runKernel(Ky,o)}const W=V({mul_:P0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R0e(t){const e=P(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return U.runKernel(yS,n)}else{const n={x:e};return U.runKernel(lS,n)}}const Mn=V({abs_:R0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D0e(t){const n={x:P(t,"x","acos")};return U.runKernel(by,n)}const v9=V({acos_:D0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F0e(t){const n={x:P(t,"x","acosh")};return U.runKernel(xy,n)}const b9=V({acosh_:F0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M0e(t){A(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),A(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);const e=t.map((o,s)=>P(o,`tensors${s}`,"addN")),n=e[0];e.forEach(o=>{if(o.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(o=>{if(!ct(o.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=e;return U.runKernel(uS,r)}const L0e=V({addN_:M0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z0e(t,e=null,n=!1){const o={x:P(t,"x","all","bool")},s={axis:e,keepDims:n};return U.runKernel(kO,o,s)}const OP=V({all_:z0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B0e(t,e=null,n=!1){const o={x:P(t,"x","any","bool")},s={axis:e,keepDims:n};return U.runKernel($O,o,s)}const jx=V({any_:B0e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j0e(t,e=0){const r={x:P(t,"x","argMax")},o={axis:e};return U.runKernel(cS,r,o)}const jf=V({argMax_:j0e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V0e(t,e=0){const r={x:P(t,"x","argMin")},o={axis:e};return U.runKernel(dS,r,o)}const x9=V({argMin_:V0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W0e(t){const n={x:P(t,"x","asin")};return U.runKernel(wy,n)}const w9=V({asin_:W0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U0e(t){const n={x:P(t,"x","asinh")};return U.runKernel(Sy,n)}const S9=V({asinh_:U0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G0e(t){const n={x:P(t,"x","atan")};return U.runKernel(ky,n)}const k9=V({atan_:G0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H0e(t,e){let n=P(t,"a","atan2"),r=P(e,"b","atan2");[n,r]=kn(n,r);const o={a:n,b:r};return U.runKernel(Cy,o)}const $9=V({atan2_:H0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q0e(t){const n={x:P(t,"x","atanh")};return U.runKernel($y,n)}const C9=V({atanh_:q0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m0(t,e,n,r,o="NHWC",s){const i=t[3],a=[...e,i],l=fl(o);return ir(t,a,n,s,r,null,null,l)}function Ys(t,e,n,r,o,s,i="channelsLast"){const[a,l]=eg(e);let u;if(i==="channelsLast")u=[a,l,t[3],t[3]];else if(i==="channelsFirst")u=[a,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${i}`);return ir(t,u,n,r,o,s,!1,i)}function dl(t,e,n,r,o,s,i="NDHWC"){const[a,l,u]=TI(e);let c,d;if(i==="NDHWC")d="channelsLast",c=[a,l,u,t[4],t[4]];else if(i==="NCDHW")d="channelsFirst",c=[a,l,u,t[1],t[1]];else throw new Error(`Unknown dataFormat ${i}`);return $u(t,c,n,r,o,!1,d,s)}function ir(t,e,n,r,o,s,i=!1,a="channelsLast"){let[l,u,c,d]=[-1,-1,-1,-1];if(a==="channelsLast")[l,u,c,d]=t;else if(a==="channelsFirst")[l,d,u,c]=t;else throw new Error(`Unknown dataFormat ${a}`);const[f,p,,h]=e,[m,g]=eg(n),[y,v]=eg(r),b=ff(f,y),x=ff(p,v),{padInfo:w,outHeight:S,outWidth:k}=Y0e(o,u,c,m,g,b,x,s,a),$=i?h*d:h;let C;return a==="channelsFirst"?C=[l,$,S,k]:a==="channelsLast"&&(C=[l,S,k,$]),{batchSize:l,dataFormat:a,inHeight:u,inWidth:c,inChannels:d,outHeight:S,outWidth:k,outChannels:$,padInfo:w,strideHeight:m,strideWidth:g,filterHeight:f,filterWidth:p,effectiveFilterHeight:b,effectiveFilterWidth:x,dilationHeight:y,dilationWidth:v,inShape:t,outShape:C,filterShape:e}}function $u(t,e,n,r,o,s=!1,i="channelsLast",a){let[l,u,c,d,f]=[-1,-1,-1,-1,-1];if(i==="channelsLast")[l,u,c,d,f]=t;else if(i==="channelsFirst")[l,f,u,c,d]=t;else throw new Error(`Unknown dataFormat ${i}`);const[p,h,m,,g]=e,[y,v,b]=TI(n),[x,w,S]=TI(r),k=ff(p,x),$=ff(h,w),C=ff(m,S),{padInfo:I,outDepth:E,outHeight:O,outWidth:R}=Z0e(o,u,c,d,y,v,b,k,$,C,a),z=s?g*f:g;let L;return i==="channelsFirst"?L=[l,z,E,O,R]:i==="channelsLast"&&(L=[l,E,O,R,z]),{batchSize:l,dataFormat:i,inDepth:u,inHeight:c,inWidth:d,inChannels:f,outDepth:E,outHeight:O,outWidth:R,outChannels:z,padInfo:I,strideDepth:y,strideHeight:v,strideWidth:b,filterDepth:p,filterHeight:h,filterWidth:m,effectiveFilterDepth:k,effectiveFilterHeight:$,effectiveFilterWidth:C,dilationDepth:x,dilationHeight:w,dilationWidth:S,inShape:t,outShape:L,filterShape:e}}function K0e(t,e,n,r,o){r==null&&(r=PP(t,e,n));const s=t[0],i=t[1],a=tg((s-e+2*r)/n+1,o),l=tg((i-e+2*r)/n+1,o);return[a,l]}function X0e(t,e,n,r,o,s){o==null&&(o=PP(t,e[0],r[0]));const i=[0,0,0,n];for(let a=0;a<3;a++)t[a]+2*o>=e[a]&&(i[a]=tg((t[a]-e[a]+2*o)/r[a]+1,s));return i}function PP(t,e,n,r=1){const o=ff(e,r);return Math.floor((t[0]*(n-1)-n+o)/2)}function eg(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function TI(t){return typeof t=="number"?[t,t,t]:t}function ff(t,e){return e<=1?t:t+(t-1)*(e-1)}function Y0e(t,e,n,r,o,s,i,a,l){let u,c,d;if(typeof t=="number"){u={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const p=K0e([e,n],s,r,t,a);c=p[0],d=p[1]}else if(t==="same"){c=Math.ceil(e/r),d=Math.ceil(n/o);const f=Math.max(0,(c-1)*r+s-e),p=Math.max(0,(d-1)*o+i-n),h=Math.floor(f/2),m=f-h,g=Math.floor(p/2),y=p-g;u={top:h,bottom:m,left:g,right:y,type:"SAME"}}else if(t==="valid")u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-s+1)/r),d=Math.ceil((n-i+1)/o);else if(typeof t=="object"){const f=l==="channelsLast"?t[1][0]:t[2][0],p=l==="channelsLast"?t[1][1]:t[2][1],h=l==="channelsLast"?t[2][0]:t[3][0],m=l==="channelsLast"?t[2][1]:t[3][1];u={top:f,bottom:p,left:h,right:m,type:f===0&&p===0&&h===0&&m===0?"VALID":"EXPLICIT"},c=tg((e-s+f+p)/r+1,a),d=tg((n-i+h+m)/o+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:u,outHeight:c,outWidth:d}}function Z0e(t,e,n,r,o,s,i,a,l,u,c){let d,f,p,h;if(t==="valid"&&(t=0),typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const g=X0e([e,n,r,1],[a,l,u],1,[o,s,i],t,c);f=g[0],p=g[1],h=g[2]}else if(t==="same"){f=Math.ceil(e/o),p=Math.ceil(n/s),h=Math.ceil(r/i);const m=(f-1)*o+a-e,g=(p-1)*s+l-n,y=(h-1)*i+u-r,v=Math.floor(m/2),b=m-v,x=Math.floor(g/2),w=g-x,S=Math.floor(y/2),k=y-S;d={top:x,bottom:w,left:S,right:k,front:v,back:b,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:f,outHeight:p,outWidth:h}}function tg(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function au(t){const[e,n,r]=eg(t);return e===1&&n===1&&r===1}function xr(t,e){return au(t)||au(e)}function Dc(t){return eg(t).every(e=>e>0)}function fl(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function eo(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")A(Lf(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(o=>{A(Lf(o),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${o}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q0e(t,e){const r={x:P(t,"x","reshape","string_or_numeric")},o={shape:e};return U.runKernel(ZS,r,o)}const H=V({reshape_:Q0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J0e(t,e,n,r,o){const s=P(t,"x","avgPool","float32"),i=1;A(xr(n,i),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);let a=s,l=!1;s.rank===3&&(l=!0,a=H(s,[1,s.shape[0],s.shape[1],s.shape[2]])),A(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),eo("avgPool",r,o);const u={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:o};let d=U.runKernel(fS,u,c);return d=be(d,s.dtype),l?H(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const fk=V({avgPool_:J0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eve(t,e,n,r,o,s="NDHWC"){const i=P(t,"x","avgPool3d","float32");let a=i,l=!1;i.rank===4&&(l=!0,a=H(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),A(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),A(s==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),A(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),eo("avgPool3d",r,o);const u={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:o,dataFormat:s};let d=U.runKernel(pS,u,c);return d=be(d,a.dtype),l?H(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const T9=V({avgPool3d_:eve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tve(t,e=0){A(t.length>=1,()=>"Pass at least one tensor to concat");const n=Bx(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(s=>{if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${s.dtype}. `)}),n.length===1)return ja(n[0]);const r=n,o={axis:e};return U.runKernel(vS,r,o)}const Dn=V({concat_:tve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nve(t,e,n=!1,r=!1){let o=P(t,"a","matMul"),s=P(e,"b","matMul");[o,s]=kn(o,s);const i={a:o,b:s},a={transposeA:n,transposeB:r};return U.runKernel(hS,i,a)}const tt=V({matMul_:nve});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rve(t){const n={x:P(t,"x","sigmoid","float32")};return U.runKernel(s0,n)}const oa=V({sigmoid_:rve});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ove(t,e,n){const r=P(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const o={x:r},s={begin:e,size:n};return U.runKernel(nk,o,s)}const ft=V({slice_:ove});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sve(t){const n={x:P(t,"x","tanh","float32")};return U.runKernel(d0,n)}const Fc=V({tanh_:sve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ive(t,e,n,r,o,s){const i=P(t,"forgetBias","basicLSTMCell"),a=P(e,"lstmKernel","basicLSTMCell"),l=P(n,"lstmBias","basicLSTMCell"),u=P(r,"data","basicLSTMCell"),c=P(o,"c","basicLSTMCell"),d=P(s,"h","basicLSTMCell"),f=Dn([u,d],1),p=tt(f,a),h=ue(p,l),m=h.shape[0],g=h.shape[1]/4,y=[m,g],v=ft(h,[0,0],y),b=ft(h,[0,g],y),x=ft(h,[0,g*2],y),w=ft(h,[0,g*3],y),S=ue(W(oa(v),Fc(b)),W(c,oa(ue(i,x)))),k=W(Fc(S),oa(w));return[S,k]}const ave=V({basicLSTMCell_:ive});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lve(t,e,n){const r=P(t,"x","batchToSpaceND"),o=e.reduce((a,l)=>a*l);A(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),A(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),A(r.shape[0]%o===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${o}`);const s={x:r},i={blockShape:e,crops:n};return U.runKernel(mS,s,i)}const pk=V({batchToSpaceND_:lve});function uve(t){let e;return t.rank===0||t.rank===1?e=H(t,[1,1,1,t.size]):t.rank===2?e=H(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=H(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cve(t,e,n,r,o,s){s==null&&(s=.001);const i=P(t,"x","batchNorm"),a=P(e,"mean","batchNorm"),l=P(n,"variance","batchNorm");let u;o!=null&&(u=P(o,"scale","batchNorm"));let c;r!=null&&(c=P(r,"offset","batchNorm")),A(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),A(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),A(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const f={x:uve(i),scale:u,offset:c,mean:a,variance:l},p={varianceEpsilon:s},h=U.runKernel(_S,f,p);return H(h,i.shape)}const g0=V({batchNorm_:cve});function dve(t,e,n,r,o,s){const i=P(t,"x","batchNorm"),a=P(e,"mean","batchNorm"),l=P(n,"variance","batchNorm");let u;o!=null&&(u=P(o,"scale","batchNorm"));let c;return r!=null&&(c=P(r,"offset","batchNorm")),A(i.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${i.rank}.`),A(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),A(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),u!=null&&A(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`),c!=null&&A(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),g0(i,a,l,c,u,s)}const _9=V({batchNorm2d_:dve});function fve(t,e,n,r,o,s){const i=P(t,"x","batchNorm"),a=P(e,"mean","batchNorm"),l=P(n,"variance","batchNorm");let u;o!=null&&(u=P(o,"scale","batchNorm"));let c;return r!=null&&(c=P(r,"offset","batchNorm")),A(i.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${i.rank}.`),A(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),A(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),u!=null&&A(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`),c!=null&&A(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),g0(i,a,l,c,u,s)}const I9=V({batchNorm3d_:fve});function pve(t,e,n,r,o,s){const i=P(t,"x","batchNorm"),a=P(e,"mean","batchNorm"),l=P(n,"variance","batchNorm");let u;o!=null&&(u=P(o,"scale","batchNorm"));let c;return r!=null&&(c=P(r,"offset","batchNorm")),A(i.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${i.rank}.`),A(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),A(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),u!=null&&A(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`),c!=null&&A(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),g0(i,a,l,c,u,s)}const N9=V({batchNorm4d_:pve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hve(t,e,n){const r=P(t,"x","bincount"),o=P(e,"weights","bincount");A(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),A(n>=0,()=>`size must be non-negative, but got ${n}.`),A(o.size===r.size||o.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${o.shape}.`);const s={x:r,weights:o},i={size:n};return U.runKernel(_O,s,i)}const E9=V({bincount_:hve});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mve(t,e){const n=P(t,"x","bitwiseAnd"),r=P(e,"y","bitwiseAnd");if(!ct(n.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${r.shape}`);if(n.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${r.dtype}`);const o={a:n,b:r};return U.runKernel(gS,o)}const gve=V({bitwiseAnd_:mve});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yve(t,e){const n=P(t,"s0","broadcastArgs","int32"),r=P(e,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const o={s0:n,s1:r};return U.runKernel(IO,o)}const vve=V({broadcastArgs_:yve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bve(t,e){let n=P(t,"broadcastTo","x");const r=n.shape;if(fs(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const u=n.shape.slice();for(;u.length<e.length;)u.unshift(1);n=H(n,u)}const o=n.shape,s=Array.from(e);for(let u=e.length-1;u>=0;u--)if(o[u]===e[u])s[u]=1;else if(n.shape[u]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(s.map((u,c)=>u>1?c:-1).filter(u=>u>=0).length===0)return ja(n);const a={x:n},l={reps:s};return U.runKernel(f0,a,l)}const pf=V({broadcastTo_:bve});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xve(t){const n={x:P(t,"x","ceil","float32")};return U.runKernel(_y,n)}const A9=V({ceil_:xve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ap(t,e,n){fs(t),n=n||Ip(e);const r={shape:t,value:e,dtype:n};return U.runKernel(WO,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wve(t,e,n){const r=P(t,"x","clipByValue");if(A(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return Ap(r.shape,e,r.dtype);const o={x:r},s={clipValueMin:e,clipValueMax:n};return U.runKernel(Iy,o,s)}const Mo=V({clipByValue_:wve});function Sve(t){return Dn(t,0)}const O9=V({concat1d_:Sve});function kve(t,e){return Dn(t,e)}const P9=V({concat2d_:kve});function $ve(t,e){return Dn(t,e)}const R9=V({concat3d_:$ve});function Cve(t,e){return Dn(t,e)}const D9=V({concat4d_:Cve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tve(t,e,n,r,o="NHWC",s=[1,1],i){const a=P(t,"x","conv2d","float32"),l=P(e,"filter","conv2d","float32");let u=a,c=!1;a.rank===3&&(c=!0,u=H(a,[1,a.shape[0],a.shape[1],a.shape[2]])),A(u.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),A(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),eo("conv2d",r,i);const d=o==="NHWC"?u.shape[3]:u.shape[1];A(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),A(xr(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),A(Dc(s),()=>"Error in conv2D: Dilated rates should be larger than 0."),A(Dc(n),()=>"Error in conv2D: Strides should be larger than 0.");const f={x:u,filter:l},p={strides:n,pad:r,dataFormat:o,dilations:s,dimRoundingMode:i},h=U.runKernel(bS,f,p);return c?H(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const lu=V({conv2d_:Tve});function _ve(t,e,n,r,o="NWC",s=1,i){const a=P(t,"x","conv1d"),l=P(e,"filter","conv1d");let u=a,c=!1;a.rank===2&&(c=!0,u=H(a,[1,a.shape[0],a.shape[1]])),A(u.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),A(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),eo("conv1d",r,i),A(u.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`),A(xr(n,s),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${s}'`),A(Dc(s),()=>"Error in conv1D: Dilated rates should be larger than 0."),A(Dc(n),()=>"Error in conv1D: Stride should be larger than 0."),A(o==="NWC",()=>`Error in conv1d: got dataFormat of ${o} but only NWC is currently supported.`);const d=H(l,[1,l.shape[0],l.shape[1],l.shape[2]]),f=H(u,[u.shape[0],1,u.shape[1],u.shape[2]]),g=lu(f,d,[1,n],r,"NHWC",[1,s],i);return c?H(g,[g.shape[2],g.shape[3]]):H(g,[g.shape[0],g.shape[2],g.shape[3]])}const RP=V({conv1d_:_ve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ive(t,e,n,r,o,s="NHWC",i){A(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,l=e,u=!1;e.rank===3&&(u=!0,l=H(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,t[0],t[1],t[2]]),A(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),A(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),A(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const c=s==="NHWC"?a[3]:a[1],d=s==="NHWC"?l.shape[3]:l.shape[1];A(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`),A(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),eo("conv2dDerInput",o,i);const f={dy:l,filter:n},p={strides:r,pad:o,dataFormat:s,dimRoundingMode:i,inputShape:a},h=U.runKernel(xS,f,p);return u?H(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const DP=V({conv2DBackpropInput_:Ive});function Nve(t,e,n,r,o,s){const i=P(t,"x","conv2dTranspose"),a=P(e,"filter","conv2dTranspose");return DP(n,i,a,r,o,"NHWC",s)}const FP=V({conv2dTranspose_:Nve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eve(t,e,n,r,o="NDHWC",s=[1,1,1]){const i=P(t,"x","conv3d"),a=P(e,"filter","conv3d");let l=i,u=!1;i.rank===4&&(u=!0,l=H(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),A(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),A(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),A(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),A(xr(n,s),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),A(o==="NDHWC",()=>`Error in conv3d: got dataFormat of ${o} but only NDHWC is currently supported.`),A(Dc(s),()=>"Error in conv3D: Dilated rates should be larger than 0."),A(Dc(n),()=>"Error in conv3D: Strides should be larger than 0.");const c={x:l,filter:a},d={strides:n,pad:r,dataFormat:o,dilations:s},f=U.runKernel(wS,c,d);return u?H(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const F9=V({conv3d_:Eve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ave(t,e,n,r,o){A(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let s=t,i=e,a=!1;e.rank===4&&(a=!0,i=H(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),s=[1,t[0],t[1],t[2],t[3]]);const l=s[4],u=i.shape[4];A(s.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${s.length}.`),A(i.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${i.rank}`),A(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),A(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),A(u===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`);const c={dy:i,filter:n},d={pad:o,strides:r,inputShape:s},f=U.runKernel(OO,c,d);return a?H(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const M9=V({conv3DBackpropInput_:Ave});function Ove(t,e,n,r,o){const s=P(t,"x","conv3dTranspose"),i=P(e,"filter","conv3dTranspose");return M9(n,s,i,r,o)}const L9=V({conv3dTranspose_:Ove});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pve(t){const n={x:P(t,"x","cos","float32")};return U.runKernel(Ny,n)}const hk=V({cos_:Pve});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rve(t){const n={x:P(t,"x","cosh","float32")};return U.runKernel(Ey,n)}const MP=V({cosh_:Rve});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dve(t,e=0,n=!1,r=!1){const s={x:P(t,"x","cumprod")},i={axis:e,exclusive:n,reverse:r};return U.runKernel(PO,s,i)}const Vx=V({cumprod_:Dve});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fve(t,e=0,n=!1,r=!1){const s={x:P(t,"x","cumsum")},i={axis:e,exclusive:n,reverse:r};return U.runKernel(SS,s,i)}const LP=V({cumsum_:Fve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mve(t,e,n,r=!1){const o=P(t,"x","denseBincount"),s=P(e,"weights","denseBincount");A(o.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${o.dtype}`),A(o.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${o.rank}.`),A(n>=0,()=>`size must be non-negative, but got ${n}.`),A(s.size===o.size||s.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${o.shape}, weights shape: ${s.shape}.`);const i={x:o,weights:s},a={size:n,binaryOutput:r};return U.runKernel(DO,i,a)}const _I=V({denseBincount_:Mve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lve(t,e,n="NHWC"){const r=P(t,"x","depthToSpace","float32"),o=n==="NHWC"?r.shape[1]:r.shape[2],s=n==="NHWC"?r.shape[2]:r.shape[3],i=n==="NHWC"?r.shape[3]:r.shape[1];A(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),A(o*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${o} and ${e}  for depthToSpace with input shape
    ${r.shape}`),A(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e} for depthToSpace with input shape
        ${r.shape}`),A(i%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${i} for depthToSpace with input shape ${r.shape}`);const a={x:r},l={blockSize:e,dataFormat:n};return U.runKernel(FO,a,l)}const z9=V({depthToSpace_:Lve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zve(t,e,n,r,o="NHWC",s=[1,1],i){const a=P(t,"x","depthwiseConv2d","float32"),l=P(e,"filter","depthwiseConv2d","float32");let u=a,c=!1;a.rank===3&&(c=!0,u=H(a,[1,a.shape[0],a.shape[1],a.shape[2]])),A(u.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),A(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const d=o==="NHWC"?u.shape[3]:u.shape[1];A(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),eo("depthwiseConv2d",r,i);const f={x:u,filter:l},p={strides:n,pad:r,dataFormat:o,dilations:s,dimRoundingMode:i},h=U.runKernel(kS,f,p);return c?H(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const y0=V({depthwiseConv2d_:zve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bve(t){const n={x:P(t,"x","diag")};return U.runKernel(zO,n)}const jve=V({diag_:Bve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vve(t,e,n,r,o=[1,1],s="NHWC"){const i=P(t,"x","dilation2d"),a=P(e,"filter","dilation2d");A(i.rank===3||i.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${i.rank}.`),A(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),A(s==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${s}`);let l=i,u=!1;i.rank===3&&(l=H(i,[1,i.shape[0],i.shape[1],i.shape[2]]),u=!0),A(l.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${a.shape[2]}`);const c={x:l,filter:a},d={strides:n,pad:r,dilations:o},f=U.runKernel($S,c,d);return u?H(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const B9=V({dilation2d_:Vve});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vf(t,e){const n=t.length,r=[];for(let o=0;o<n;o++){const s=n-1-o,i=t[s]||1;(e[e.length-1-o]||1)>1&&i===1&&r.unshift(s)}return r}function Kn(t,e){const n=[];for(let r=0;r<e.length;r++){const o=t[t.length-r-1],s=e.length-r-1,i=e[s];(o==null||o===1&&i>1)&&n.unshift(s)}return n}function Xe(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let o=0;o<n;o++){let s=t[t.length-o-1];s==null&&(s=1);let i=e[e.length-o-1];if(i==null&&(i=1),s===1)r[n-o-1]=i;else if(i===1)r[n-o-1]=s;else if(s!==i){const a=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(a)}else r[n-o-1]=s}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wve(t,e){let n=P(t,"a","equal","string_or_numeric"),r=P(e,"b","equal","string_or_numeric");[n,r]=kn(n,r),Xe(n.shape,r.shape);const o={a:n,b:r};return U.runKernel(CS,o)}const Si=V({equal_:Wve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uve(t,e,n){const r=P(e,"a","where"),o=P(n,"b","where"),s=P(t,"condition","where","bool"),i=Xe(Xe(s.shape,r.shape),o.shape),a=pf(s,i),l=pf(r,i),u=pf(o,i),c={condition:a,t:l,e:u};return U.runKernel(tk,c)}const Or=V({where_:Uve});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gve(t){const n={x:P(t,"x","zerosLike")};return U.runKernel(ck,n)}const ht=V({zerosLike_:Gve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hve(t,e){let n=P(t,"a","div"),r=P(e,"b","div");[n,r]=kn(n,r);const o=Oe(n,r),s=ht(o),i=Si(r,s);return Or(i,s,o)}const j9=V({divNoNan_:Hve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qve(t,e){const n=P(t,"t1","dot"),r=P(e,"t2","dot");A((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const o=n.rank===1?n.size:n.shape[1],s=r.rank===1?r.size:r.shape[0];if(A(o===s,()=>`Error in dot: inner dimensions of inputs must match, but got ${o} and ${s}.`),n.rank===1&&r.rank===1){const i=H(n,[1,-1]),a=H(r,[-1,1]),l=tt(i,a);return H(l,[])}else if(n.rank===1&&r.rank===2){const i=H(n,[1,-1]),a=H(r,[r.shape[0],r.shape[1]]),l=tt(i,a);return H(l,[l.size])}else if(n.rank===2&&r.rank===1){const i=H(r,[-1,1]),a=tt(n,i);return H(a,[a.size])}else{const i=H(r,[r.shape[0],r.shape[1]]);return tt(n,i)}}const V9=V({dot_:qve});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kve(t,...e){const n=e.map((o,s)=>P(o,`tensors${s}`,"einsum")),r={equation:t};return U.runKernel(BO,n,r)}const Id=V({einsum_:Kve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xve(t){const n={x:P(t,"x","elu","float32")};return U.runKernel(Oy,n)}const v0=V({elu_:Xve});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yve(t,e){const n=P(t,"x","ensureShape","string_or_numeric");if(!iye(n.shape,e))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${e}`);return t}const Zve=V({ensureShape_:Yve});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qve(t){let e=P(t,"x","erf");A(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=be(e,"float32"));const n={x:e};return U.runKernel(Py,n)}const zP=V({erf_:Qve});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BP(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function W9(t,e,n){const r=t.length+e.length,o=[];let s=0,i=0;for(let a=0;a<r;a++)n.indexOf(a)===-1?o.push(t[s++]):o.push(e[i++]);return o}function ar(t,e){const n=[],r=t.length;for(let s=0;s<r;s++)e.indexOf(s)===-1&&n.push(t[s]);const o=e.map(s=>t[s]);return[n,o]}function In(t,e){const n=e.map(r=>1);return W9(t,n,e)}function wr(t,e,n){A(BP(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function gn(t,e){if(BP(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function Cu(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function Nn(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jve(t,e=null,n=!1){const o={x:P(t,"x","max")},s={reductionIndices:e,keepDims:n};return U.runKernel(MS,o,s)}const Bs=V({max_:Jve});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ebe(t,e=null,n=!1){const o={x:P(t,"x","min")},s={axis:e,keepDims:n};return U.runKernel(jS,o,s)}const ng=V({min_:ebe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tbe(t,e){let n=P(t,"base","pow"),r=P(e,"exp","pow");[n,r]=kn(n,r);const o={a:n,b:r};return U.runKernel(Xy,o)}const Ja=V({pow_:tbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Me(t,e){if((Hs(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Hs(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return ku(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nbe(t){const n={x:P(t,"x","sqrt","float32")};return U.runKernel(a0,n)}const vr=V({sqrt_:nbe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rbe(t){const e=P(t,"x","square"),n={};return U.runKernel("Square",{x:e},n)}const Wt=V({square_:rbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function obe(t,e=null,n=!1){let r=P(t,"x","sum");r.dtype==="bool"&&(r=be(r,"int32"));const o={x:r},s={axis:e,keepDims:n};return U.runKernel(rk,o,s)}const Ie=V({sum_:obe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sbe(t,e="euclidean",n=null,r=!1){t=P(t,"x","norm");const o=U9(t,e,n);let s=o.shape;if(r){const i=rt(n,t.shape);s=In(o.shape,i)}return H(o,s)}function U9(t,e,n=null){if(t.rank===0)return Mn(t);if(t.rank!==1&&n===null)return U9(H(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return Ie(Mn(t),n);if(e===1/0)return Bs(Mn(t),n);if(e===-1/0)return ng(Mn(t),n);if(e==="euclidean"||e===2)return vr(Ie(Ja(Mn(t),Me(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return Bs(Ie(Mn(t),n[0]),n[1]-1);if(e===1/0)return Bs(Ie(Mn(t),n[1]),n[0]);if(e===-1/0)return ng(Ie(Mn(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return vr(Ie(Wt(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const b0=V({norm_:sbe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ibe(t,e=null,n=!1){return b0(t,"euclidean",e,n)}const G9=V({euclideanNorm_:ibe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function abe(t){const n={x:P(t,"x","exp")};return U.runKernel(Ry,n)}const Lo=V({exp_:abe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lbe(t,e=0){const n=P(t,"x","expandDims","string_or_numeric");A(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},o={dim:e};return U.runKernel(TS,r,o)}const Hr=V({expandDims_:lbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ube(t){const n={x:P(t,"x","expm1")};return U.runKernel(Dy,n)}const H9=V({expm1_:ube});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cbe(t,e){const n=P(t,"x","tile","string_or_numeric");A(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},o={reps:e};return U.runKernel(f0,r,o)}const Os=V({tile_:cbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dbe(t,e,n,r="float32"){e==null&&(e=t);const o=Qe([t,e],r),s=t<=e?t:e;for(let a=0;a<s;++a)o.set(1,a,a);const i=H(o.toTensor(),[t,e]);if(n==null)return i;if(n.length===1)return Os(Hr(i,0),[n[0],1,1]);if(n.length===2)return Os(Hr(Hr(i,0),0),[n[0],n[1],1,1]);if(n.length===3)return Os(Hr(Hr(Hr(i,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const jP=V({eye_:dbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fbe(t){const n={x:P(t,"x","floor","float32")};return U.runKernel(Fy,n)}const x0=V({floor_:fbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pbe(t,e,n=0,r=0){const o=P(t,"x","gather"),s=P(e,"indices","gather","int32"),i={x:o,indices:s},a={axis:n,batchDims:r};return U.runKernel(IS,i,a)}const w0=V({gather_:pbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hbe(t,e){let n=P(t,"a","greater","string_or_numeric"),r=P(e,"b","greater","string_or_numeric");[n,r]=kn(n,r),Xe(n.shape,r.shape);const o={a:n,b:r};return U.runKernel(NS,o)}const Go=V({greater_:hbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mbe(t,e){let n=P(t,"a","greaterEqual","string_or_numeric"),r=P(e,"b","greaterEqual","string_or_numeric");[n,r]=kn(n,r),Xe(n.shape,r.shape);const o={a:n,b:r};return U.runKernel(Ly,o)}const Tu=V({greaterEqual_:mbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gbe(t){const n={input:P(t,"input","imag")};return U.runKernel(qO,n)}const mk=V({imag_:gbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ybe(t){const n={x:P(t,"x","isFinite")};return U.runKernel(By,n)}const q9=V({isFinite_:ybe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vbe(t){const n={x:P(t,"x","isInf")};return U.runKernel(jy,n)}const K9=V({isInf_:vbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bbe(t){const n={x:P(t,"x","isNaN")};return U.runKernel(Vy,n)}const X9=V({isNaN_:bbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xbe(t,e=.2){const r={x:P(t,"x","leakyRelu")},o={alpha:e};return U.runKernel(ES,r,o)}const gk=V({leakyRelu_:xbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wbe(t,e){let n=P(t,"a","less","string_or_numeric"),r=P(e,"b","less","string_or_numeric");[n,r]=kn(n,r),Xe(n.shape,r.shape);const o={a:n,b:r};return U.runKernel(AS,o)}const rg=V({less_:wbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sbe(t,e){let n=P(t,"a","lessEqual","string_or_numeric"),r=P(e,"b","lessEqual","string_or_numeric");[n,r]=kn(n,r),Xe(n.shape,r.shape);const o={a:n,b:r};return U.runKernel(OS,o)}const Jc=V({lessEqual_:Sbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kbe(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:t,stop:e,num:n};return U.runKernel(KO,{},r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $be(t,e=5,n=1,r=1,o=.5){const s=P(t,"x","localResponseNormalization");A(s.rank===4||s.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${s.rank}.`),A(Lf(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let i=s,a=!1;s.rank===3&&(a=!0,i=H(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const l={x:i},u={depthRadius:e,bias:n,alpha:r,beta:o},c=U.runKernel(FS,l,u);return a?H(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const Y9=V({localResponseNormalization_:$be});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cbe(t){const n={x:P(t,"x","log","float32")};return U.runKernel(Wy,n)}const as=V({log_:Cbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tbe(t){const n={x:P(t,"x","log1p")};return U.runKernel(Uy,n)}const yk=V({log1p_:Tbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _be(t,e){A(cI(t),()=>"The f passed in variableGrads(f) must be a function"),A(e==null||Array.isArray(e)&&e.every(u=>u instanceof zx),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const u in U.registeredVariables)e.push(U.registeredVariables[u])}const r=n?e.filter(u=>!u.trainable):null,o=e.length;e=e.filter(u=>u.trainable),A(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${o} variables is trainable.`);const s=!0,{value:i,grads:a}=U.gradients(t,e,null,s);A(a.some(u=>u!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),A(i.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${i.rank} tensor`);const l={};return e.forEach((u,c)=>{a[c]!=null&&(l[u.name]=a[c])}),r!=null&&r.forEach(u=>l[u.name]=null),{value:i,grads:l}}function el(t){return U.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ibe(t){const n={x:P(t,"x","neg")};return U.runKernel(WS,n)}const tn=V({neg_:Ibe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nbe(t){const n={x:P(t,"x","softplus")};return U.runKernel(i0,n)}const Op=V({softplus_:Nbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ebe(t){const e=P(t,"x","logSigmoid");return el(r=>({value:tn(Op(tn(r))),gradFunc:i=>W(i,oa(tn(r)))}))(e)}const Z9=V({logSigmoid_:Ebe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Abe(t,e){let n=P(t,"a","sub"),r=P(e,"b","sub");[n,r]=kn(n,r);const o={a:n,b:r};return U.runKernel(u0,o)}const ke=V({sub_:Abe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Obe(t,e=-1){const n=P(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return el((o,s)=>{const a=Bs(o,e,!0),l=ke(o,a),u=ke(be(l,"float32"),as(Ie(Lo(l),e,!0)));return s([u]),{value:u,gradFunc:(d,f)=>{const[p]=f,h=!0,m=Lo(p);return ke(d,W(Ie(d,e,h),m))}}})(n)}const VP=V({logSoftmax_:Obe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pbe(t,e=null,n=!1){const r=P(t,"x","logSumExp"),o=rt(e,r.shape),s=Bs(r,o,!0),i=ke(r,s),a=Lo(i),l=Ie(a,o),u=as(l),c=ue(H(s,u.shape),u);if(n){const d=In(c.shape,o);return H(c,d)}return c}const vk=V({logSumExp_:Pbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rbe(t,e){const n=P(t,"a","logicalAnd","bool"),r=P(e,"b","logicalAnd","bool");Xe(n.shape,r.shape);const o={a:n,b:r};return U.runKernel(PS,o)}const da=V({logicalAnd_:Rbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dbe(t){const n={x:P(t,"x","logicalNot","bool")};return U.runKernel(RS,n)}const bk=V({logicalNot_:Dbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fbe(t,e){const n=P(t,"a","logicalOr","bool"),r=P(e,"b","logicalOr","bool");Xe(n.shape,r.shape);const o={a:n,b:r};return U.runKernel(DS,o)}const WP=V({logicalOr_:Fbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mbe(t,e){const n=P(t,"a","logicalXor","bool"),r=P(e,"b","logicalXor","bool");return Xe(n.shape,r.shape),da(WP(t,e),bk(da(t,e)))}const Q9=V({logicalXor_:Mbe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rv=2147483648;function Lbe(t,e,n="left"){const r=P(t,"sortedSequence","searchSorted"),o=P(e,"values","searchSorted"),s=r.shape[r.shape.length-1],i=o.shape[o.shape.length-1],a=H(r,[-1,s]),l=H(o,[-1,i]);if(a.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(a.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(ne(l.shape)>=Rv)throw new Error(`values tensor size must less than ${Rv}`);if(a.shape[1]>=Rv)throw new Error(`trailing dim_size must less than ${Rv} for int32 output type, was ${a.shape[1]}`);const u={sortedSequence:a,values:l},c={side:n};return U.runKernel(fP,u,c)}const UP=V({searchSorted_:Lbe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zbe(t,e){return UP(t,e,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bbe(t,e,n,r,o){const s=P(t,"x","maxPool"),i=1;let a=s,l=!1;s.rank===3&&(l=!0,a=H(s,[1,s.shape[0],s.shape[1],s.shape[2]])),A(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),A(xr(n,i),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),eo("maxPool",r,o);const u={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:o},d=U.runKernel(LS,u,c);return l?H(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const xk=V({maxPool_:Bbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jbe(t,e=[1,1,1],n,r,o,s="NDHWC"){const i=P(t,"x","maxPool3d");let a=i,l=!1;i.rank===4&&(l=!0,a=H(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),A(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),A(s==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),eo("maxPool3d",r,o);const u={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:o,dataFormat:s},d=U.runKernel(zS,u,c);return l?H(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const J9=V({maxPool3d_:jbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vbe(t,e,n,r,o=!1){const i={x:P(t,"x","maxPoolWithArgmax")},a={filterSize:e,strides:n,pad:r,includeBatchInIndex:o},l=U.runKernel(QO,i,a);return{result:l[0],indexes:l[1]}}const Wbe=V({maxPoolWithArgmax_:Vbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ube(t,e){let n=P(t,"a","maximum"),r=P(e,"b","maximum");[n,r]=kn(n,r),n.dtype==="bool"&&(n=be(n,"int32"),r=be(r,"int32")),Xe(n.shape,r.shape);const o={a:n,b:r};return U.runKernel(Gy,o)}const pl=V({maximum_:Ube});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gbe(t,e=null,n=!1){const o={x:P(t,"x","mean")},s={axis:e,keepDims:n};return U.runKernel(BS,o,s)}const bn=V({mean_:Gbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bn(t,e="float32"){if(fs(t),e==="complex64"){const r=Bn(t,"float32"),o=Bn(t,"float32");return su(r,o)}const n=Rr(ne(t),e);return U.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _o(t,e="float32"){if(fs(t),e==="complex64"){const r=_o(t,"float32"),o=Bn(t,"float32");return su(r,o)}const n=wO(ne(t),e);return U.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hbe(t,e,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(t===void 0)return[];let r=P(t,"x","meshgrid",t instanceof fn?t.dtype:"float32");if(e===void 0)return[r];let o=P(e,"y","meshgrid",e instanceof fn?e.dtype:"float32");const s=ne(r.shape),i=ne(o.shape);return n==="xy"?(r=H(r,[1,-1]),o=H(o,[-1,1]),[tt(_o([i,1],r.dtype),r),tt(o,_o([1,s],o.dtype))]):(r=H(r,[-1,1]),o=H(o,[1,-1]),[tt(r,_o([1,i],r.dtype)),tt(_o([s,1],o.dtype),o)])}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qbe(t,e){let n=P(t,"a","minimum"),r=P(e,"b","minimum");[n,r]=kn(n,r),n.dtype==="bool"&&(n=be(n,"int32"),r=be(r,"int32")),Xe(n.shape,r.shape);const o={a:n,b:r};return U.runKernel(Hy,o)}const Mc=V({minimum_:qbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kbe(t,e,n){A(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=P(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");A(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const o=n==="reflect"?1:0;for(let a=0;a<r.rank;a++)A(e[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),A(e[a][0]>=0&&e[a][0]<=r.shape[a]-o&&e[a][1]>=0&&e[a][1]<=r.shape[a]-o,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-o} or less than 0 for input of shape ${r.shape}`);const s={paddings:e,mode:n},i={x:r};return U.runKernel(VS,i,s)}const eq=V({mirrorPad_:Kbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xbe(t,e){let n=P(t,"a","mod"),r=P(e,"b","mod");[n,r]=kn(n,r);const o={a:n,b:r};return U.runKernel(qy,o)}const tq=V({mod_:Xbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ybe(t,e=null,n=!1){t=P(t,"x","moments");const r=rt(e,t.shape),o=bn(t,r,n);let s=o.shape;n||(s=In(o.shape,r));const i=Wt(ke(be(t,"float32"),H(o,s))),a=bn(i,r,n);return{mean:o,variance:a}}const wk=V({moments_:Ybe});function Zbe(t,e,n,r){const o=P(e,"data","multiRNNCell"),s=Bx(n,"c","multiRNNCell"),i=Bx(r,"h","multiRNNCell");let a=o;const l=[];for(let d=0;d<t.length;d++){const f=t[d](a,s[d],i[d]);l.push(f[0]),l.push(f[1]),a=f[1]}const u=[],c=[];for(let d=0;d<l.length;d+=2)u.push(l[d]),c.push(l[d+1]);return[u,c]}const Qbe=V({multiRNNCell_:Zbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jbe(t,e,n,r=!1){const o=P(t,"logits","multinomial"),s=o.size,i=o.rank;if(s<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${s}.`);if(i>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${i}`);n=n||Math.random();const l={logits:i===1?H(o,[1,-1]):o},u={numSamples:e,seed:n,normalized:r},c=U.runKernel(JO,l,u);return i===1?H(c,[c.size]):c}const exe=V({multinomial_:Jbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function txe(t,e){let n=P(t,"a","notEqual","string_or_numeric"),r=P(e,"b","notEqual","string_or_numeric");[n,r]=kn(n,r),Xe(n.shape,r.shape);const o={a:n,b:r};return U.runKernel(US,o)}const Wf=V({notEqual_:txe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nxe(t,e,n=1,r=0,o="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const i={indices:P(t,"indices","oneHot","int32")},a={dtype:o,depth:e,onValue:n,offValue:r};return U.runKernel(HS,i,a)}const GP=V({oneHot_:nxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rxe(t){const n={x:P(t,"x","onesLike")};return U.runKernel(GS,n)}const ls=V({onesLike_:rxe});function oxe(t,e){const n=P(t,"v1","outerProduct"),r=P(e,"v2","outerProduct");A(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);const o=H(n,[-1,1]),s=H(r,[1,-1]);return tt(o,s)}const sxe=V({outerProduct_:oxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ixe(t,e,n=0){const r=P(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const o={paddings:e,constantValue:n},s={x:r};return U.runKernel(KS,s,o)}const _u=V({pad_:ixe});function axe(t,e,n=0){return A(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),_u(t,[e],n)}const lxe=V({pad1d_:axe});function uxe(t,e,n=0){return A(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),_u(t,e,n)}const cxe=V({pad2d_:uxe});function dxe(t,e,n=0){return A(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),_u(t,e,n)}const fxe=V({pad3d_:dxe});function pxe(t,e,n=0){return A(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),_u(t,e,n)}const hxe=V({pad4d_:pxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mxe(t,e,n){const r=P(t,"x","spaceToBatchND");A(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),A(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),A(r.shape.reduce((i,a,l)=>l>0&&l<=e.length?i&&(a+n[l-1][0]+n[l-1][1])%e[l-1]===0:i,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const o={x:r},s={blockShape:e,paddings:n};return U.runKernel(ok,o,s)}const Sk=V({spaceToBatchND_:mxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gxe(t,e,n,r,o,s,i){o==null&&(o=[1,1]),s==null&&(s=1),r===0&&(r="valid");const a=P(t,"x","maxPool");let l=a,u=!1;a.rank===3&&(u=!0,l=H(a,[1,a.shape[0],a.shape[1],a.shape[2]])),A(xr(s,o),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${s} and dilations '${o}'`);const c=Ys(l.shape,e,s,o,r),d=[c.dilationHeight,c.dilationWidth];let f;r==="same"?f=vxe([c.filterHeight,c.filterWidth],d):f=[[0,0],[0,0]];const p=d[0]===1&&d[1]===1,[h,m]=yxe([c.inHeight,c.inWidth],d,f),g=p?r:"valid",y=p?l:Sk(l,d,h),b=(n==="avg"?()=>fk(y,e,s,g,i):()=>xk(y,e,s,g,i))(),x=p?b:pk(b,d,m);return u?H(x,[x.shape[1],x.shape[2],x.shape[3]]):x}function yxe(t,e,n){const r=n.map(c=>c[0]),o=n.map(c=>c[1]),s=t.concat(r,o),i=e.map((c,d)=>(c-s[d]%c)%c),a=o.map((c,d)=>c+i[d]),l=e.map((c,d)=>[r[d],a[d]]),u=e.map((c,d)=>[0,i[d]]);return[l,u]}function vxe(t,e){const r=t.map((i,a)=>i+(i-1)*(e[a]-1)).map(i=>i-1),o=r.map(i=>Math.floor(i/2)),s=r.map((i,a)=>i-o[a]);return r.map((i,a)=>[o[a],s[a]])}const nq=V({pool_:gxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bxe(t,e){const n=P(t,"x","prelu"),r=P(e,"alpha","prelu"),o={x:n,alpha:r};return U.runKernel(XS,o)}const kk=V({prelu_:bxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xxe(t,e=null,n=!1){let r=P(t,"x","prod");r.dtype==="bool"&&(r=be(r,"int32"));const o={x:r},s={axis:e,keepDims:n};return U.runKernel(YS,o,s)}const rq=V({prod_:xxe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wxe(t,e,n,r){const o=t.map((c,d)=>P(c,`tensors${d}`,"raggedGather","int32")),s=P(e,"paramsDenseValues","raggedGather"),i=P(n,"indices","raggedGather","int32"),a={paramsNestedSplits:o,paramsDenseValues:s,indices:i},l={outputRaggedRank:r},u=U.runKernel(rP,a,l);return{outputNestedSplits:u.slice(0,u.length-1),outputDenseValues:u[u.length-1]}}const Sxe=V({raggedGather_:wxe});/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kxe(t,e,n){const r=P(t,"starts","raggedRange"),o=P(e,"limits","raggedRange",r.dtype),s=P(n,"deltas","raggedRange",r.dtype),i={starts:r,limits:o,deltas:s},a=U.runKernel(oP,i);return{rtNestedSplits:a[0],rtDenseValues:a[1]}}const $xe=V({raggedRange_:kxe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cxe(t,e,n,r,o){const s=P(t,"shape","raggedTensorToTensor","int32"),i=P(e,"values","raggedTensorToTensor"),a=P(n,"defaultValue","raggedTensorToTensor",i.dtype),l=r.map((d,f)=>P(d,`tensors${f}`,"raggedTensorToTensor","int32")),u={shape:s,values:i,defaultValue:a,rowPartitionTensors:l},c={rowPartitionTypes:o};return U.runKernel(sP,u,c)}const Txe=V({raggedTensorToTensor_:Cxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _xe(t,e,n){fs(t);const r=ne(t);let o=null;if(n==null||n==="float32")o=new Float32Array(r);else if(n==="int32")o=new Int32Array(r);else if(n==="bool")o=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let s=0;s<r;s++)o[s]=e();return U.makeTensor(o,t,n)}const Ixe=V({rand_:_xe});var HP={exports:{}};HP.exports;(function(t){(function(e,n,r){function o(l){var u=this,c=a();u.next=function(){var d=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=d-(u.c=d|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function s(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function i(l,u){var c=new o(l),d=u&&u.state,f=c.next;return f.int32=function(){return c.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,d&&(typeof d=="object"&&s(d,c),f.state=function(){return s(c,{})}),f}function a(){var l=4022871197,u=function(c){c=String(c);for(var d=0;d<c.length;d++){l+=c.charCodeAt(d);var f=.02519603282416938*l;l=f>>>0,f-=l,f*=l,l=f>>>0,f-=l,l+=f*4294967296}return(l>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=i:this.alea=i})(pi,t)})(HP);var Nxe=HP.exports,qP={exports:{}};qP.exports;(function(t){(function(e,n,r){function o(a){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function s(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function i(a,l){var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,p=(u.next()>>>0)/4294967296,h=(f+p)/(1<<21);while(h===0);return h},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&s(c,u),d.state=function(){return s(u,{})}),d}n&&n.exports?n.exports=i:this.xor128=i})(pi,t)})(qP);var Exe=qP.exports,KP={exports:{}};KP.exports;(function(t){(function(e,n,r){function o(a){var l=this,u="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function s(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function i(a,l){var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,p=(u.next()>>>0)/4294967296,h=(f+p)/(1<<21);while(h===0);return h},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&s(c,u),d.state=function(){return s(u,{})}),d}n&&n.exports?n.exports=i:this.xorwow=i})(pi,t)})(KP);var Axe=KP.exports,XP={exports:{}};XP.exports;(function(t){(function(e,n,r){function o(a){var l=this;l.next=function(){var c=l.x,d=l.i,f,p;return f=c[d],f^=f>>>7,p=f^f<<24,f=c[d+1&7],p^=f^f>>>10,f=c[d+3&7],p^=f^f>>>3,f=c[d+4&7],p^=f^f<<7,f=c[d+7&7],f=f^f<<13,p^=f^f<<9,c[d]=p,l.i=d+1&7,p};function u(c,d){var f,p=[];if(d===(d|0))p[0]=d;else for(d=""+d,f=0;f<d.length;++f)p[f&7]=p[f&7]<<15^d.charCodeAt(f)+p[f+1&7]<<13;for(;p.length<8;)p.push(0);for(f=0;f<8&&p[f]===0;++f);for(f==8?p[7]=-1:p[f],c.x=p,c.i=0,f=256;f>0;--f)c.next()}u(l,a)}function s(a,l){return l.x=a.x.slice(),l.i=a.i,l}function i(a,l){a==null&&(a=+new Date);var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,p=(u.next()>>>0)/4294967296,h=(f+p)/(1<<21);while(h===0);return h},d.int32=u.next,d.quick=d,c&&(c.x&&s(c,u),d.state=function(){return s(u,{})}),d}n&&n.exports?n.exports=i:this.xorshift7=i})(pi,t)})(XP);var Oxe=XP.exports,YP={exports:{}};YP.exports;(function(t){(function(e,n,r){function o(a){var l=this;l.next=function(){var c=l.w,d=l.X,f=l.i,p,h;return l.w=c=c+1640531527|0,h=d[f+34&127],p=d[f=f+1&127],h^=h<<13,p^=p<<17,h^=h>>>15,p^=p>>>12,h=d[f]=h^p,l.i=f,h+(c^c>>>16)|0};function u(c,d){var f,p,h,m,g,y=[],v=128;for(d===(d|0)?(p=d,d=null):(d=d+"\0",p=0,v=Math.max(v,d.length)),h=0,m=-32;m<v;++m)d&&(p^=d.charCodeAt((m+32)%d.length)),m===0&&(g=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,m>=0&&(g=g+1640531527|0,f=y[m&127]^=p+g,h=f==0?h+1:0);for(h>=128&&(y[(d&&d.length||0)&127]=-1),h=127,m=4*128;m>0;--m)p=y[h+34&127],f=y[h=h+1&127],p^=p<<13,f^=f<<17,p^=p>>>15,f^=f>>>12,y[h]=p^f;c.w=g,c.X=y,c.i=h}u(l,a)}function s(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function i(a,l){a==null&&(a=+new Date);var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,p=(u.next()>>>0)/4294967296,h=(f+p)/(1<<21);while(h===0);return h},d.int32=u.next,d.quick=d,c&&(c.X&&s(c,u),d.state=function(){return s(u,{})}),d}n&&n.exports?n.exports=i:this.xor4096=i})(pi,t)})(YP);var Pxe=YP.exports,ZP={exports:{}};ZP.exports;(function(t){(function(e,n,r){function o(a){var l=this,u="";l.next=function(){var d=l.b,f=l.c,p=l.d,h=l.a;return d=d<<25^d>>>7^f,f=f-p|0,p=p<<24^p>>>8^h,h=h-d|0,l.b=d=d<<20^d>>>12^f,l.c=f=f-p|0,l.d=p<<16^f>>>16^h,l.a=h-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):u+=a;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function s(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function i(a,l){var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,p=(u.next()>>>0)/4294967296,h=(f+p)/(1<<21);while(h===0);return h},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&s(c,u),d.state=function(){return s(u,{})}),d}n&&n.exports?n.exports=i:this.tychei=i})(pi,t)})(ZP);var Rxe=ZP.exports,oq={exports:{}};const Dxe={},Fxe=Object.freeze(Object.defineProperty({__proto__:null,default:Dxe},Symbol.toStringTag,{value:"Module"})),Mxe=wte(Fxe);(function(t){(function(e,n,r){var o=256,s=6,i=52,a="random",l=r.pow(o,s),u=r.pow(2,i),c=u*2,d=o-1,f;function p(x,w,S){var k=[];w=w==!0?{entropy:!0}:w||{};var $=y(g(w.entropy?[x,b(n)]:x??v(),3),k),C=new h(k),I=function(){for(var E=C.g(s),O=l,R=0;E<u;)E=(E+R)*o,O*=o,R=C.g(1);for(;E>=c;)E/=2,O/=2,R>>>=1;return(E+R)/O};return I.int32=function(){return C.g(4)|0},I.quick=function(){return C.g(4)/4294967296},I.double=I,y(b(C.S),n),(w.pass||S||function(E,O,R,z){return z&&(z.S&&m(z,C),E.state=function(){return m(C,{})}),R?(r[a]=E,O):E})(I,$,"global"in w?w.global:this==r,w.state)}function h(x){var w,S=x.length,k=this,$=0,C=k.i=k.j=0,I=k.S=[];for(S||(x=[S++]);$<o;)I[$]=$++;for($=0;$<o;$++)I[$]=I[C=d&C+x[$%S]+(w=I[$])],I[C]=w;(k.g=function(E){for(var O,R=0,z=k.i,L=k.j,B=k.S;E--;)O=B[z=d&z+1],R=R*o+B[d&(B[z]=B[L=d&L+O])+(B[L]=O)];return k.i=z,k.j=L,R})(o)}function m(x,w){return w.i=x.i,w.j=x.j,w.S=x.S.slice(),w}function g(x,w){var S=[],k=typeof x,$;if(w&&k=="object")for($ in x)try{S.push(g(x[$],w-1))}catch{}return S.length?S:k=="string"?x:x+"\0"}function y(x,w){for(var S=x+"",k,$=0;$<S.length;)w[d&$]=d&(k^=w[d&$]*19)+S.charCodeAt($++);return b(w)}function v(){try{var x;return f&&(x=f.randomBytes)?x=x(o):(x=new Uint8Array(o),(e.crypto||e.msCrypto).getRandomValues(x)),b(x)}catch{var w=e.navigator,S=w&&w.plugins;return[+new Date,e,S,e.screen,b(n)]}}function b(x){return String.fromCharCode.apply(0,x)}if(y(r.random(),n),t.exports){t.exports=p;try{f=Mxe}catch{}}else r["seed"+a]=p})(typeof self<"u"?self:pi,[],Math)})(oq);var Lxe=oq.exports,zxe=Nxe,Bxe=Exe,jxe=Axe,Vxe=Oxe,Wxe=Pxe,Uxe=Rxe,ed=Lxe;ed.alea=zxe;ed.xor128=Bxe;ed.xorwow=jxe;ed.xorshift7=Vxe;ed.xor4096=Wxe;ed.tychei=Uxe;var $k=ed;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QP{constructor(e,n,r,o,s){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const i=s||Math.random();this.random=$k.alea(i.toString())}nextValue(){if(!isNaN(this.nextVal)){const o=this.nextVal;return this.nextVal=NaN,o}let e,n,r=!1;for(;!r;){let o,s,i;do o=2*this.random()-1,s=2*this.random()-1,i=o*o+s*s;while(i>=1||i===0);const a=Math.sqrt(-2*Math.log(i)/i);e=this.mean+this.stdDev*o*a,n=this.mean+this.stdDev*s*a,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class Gxe{constructor(e,n,r,o){this.alpha=e,this.beta=1/n,this.dtype=r;const s=o||Math.random();this.randu=$k.alea(s.toString()),this.randn=new QP(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,n,r,o,s,i;for(;;){do o=this.randn.nextValue(),i=1+this.c*o;while(i<=0);if(i*=i*i,e=o*o,n=1-.331*e*e,r=.5*e+this.d*(1-i+Math.log(i)),s=this.randu(),s<n||Math.log(s)<r)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class Hxe{constructor(e=0,n=1,r,o){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,o==null&&(o=Math.random()),typeof o=="number"&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=$k.alea(o)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qxe(t,e,n=1,r="float32",o){if(fs(t),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const s=new Gxe(e,n,r,o),i=Qe(t,r);for(let a=0;a<i.values.length;a++)i.values[a]=s.nextValue();return i.toTensor()}const Kxe=V({randomGamma_:qxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xxe(t,e=0,n=1,r,o){if(fs(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const s=new QP(e,n,r,!1,o),i=Qe(t,r);for(let a=0;a<i.values.length;a++)i.values[a]=s.nextValue();return i.toTensor()}const JP=V({randomNormal_:Xxe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yxe(t,e,n){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return JP(t,0,1,e,n)}const Zxe=V({randomStandardNormal_:Yxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qxe(t,e=0,n=1,r="float32",o){fs(t);const s=Qe(t,r),i=new Hxe(e,n,null,o);for(let a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}const td=V({randomUniform_:Qxe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jxe(t,e,n,r){return td(t,e,n,"int32",r)}const e1e=V({randomUniformInt_:Jxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uf(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const o={start:t,stop:e,step:n,dtype:r};return U.runKernel(iP,{},o)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t1e(t){const n={input:P(t,"input","real")};return U.runKernel(aP,n)}const og=V({real_:t1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n1e(t){const n={x:P(t,"x","reciprocal")};return U.runKernel(Yy,n)}const sq=V({reciprocal_:n1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r1e(t){const n={x:P(t,"x","relu")};return U.runKernel(Zy,n)}const ma=V({relu_:r1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o1e(t){const n={x:P(t,"x","relu6")};return U.runKernel(Qy,n)}const eR=V({relu6_:o1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s1e(t,e){const r={x:P(t,"x","reverse")},o={dims:e};return U.runKernel(ek,r,o)}const qs=V({reverse_:s1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i1e(t){const e=P(t,"x","reverse");return A(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),qs(e,0)}const a1e=V({reverse1d_:i1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l1e(t,e){const n=P(t,"x","reverse");return A(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),qs(n,e)}const u1e=V({reverse2d_:l1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c1e(t,e){const n=P(t,"x","reverse");return A(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),qs(n,e)}const d1e=V({reverse3d_:c1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f1e(t,e){const n=P(t,"x","reverse");return A(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),qs(n,e)}const p1e=V({reverse4d_:f1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h1e(t){const n={x:P(t,"x","round")};return U.runKernel(Jy,n)}const tR=V({round_:h1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m1e(t){const n={x:P(t,"x","rsqrt","float32")};return U.runKernel(e0,n)}const nR=V({rsqrt_:m1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g1e(t){const n={x:P(t,"x","selu")};return U.runKernel(t0,n)}const rR=V({selu_:g1e});function y1e(t,e,n,r,o,s=[1,1],i="NHWC"){const a=P(t,"x","separableConv2d"),l=P(e,"depthwiseFilter","separableConv2d"),u=P(n,"pointwiseFilter","separableConv2d");let c=a,d=!1;if(a.rank===3&&(d=!0,c=H(a,[1,a.shape[0],a.shape[1],a.shape[2]])),i==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");A(c.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),A(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),A(u.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),A(u.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),A(u.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);const f=l.shape[2],p=l.shape[3];A(u.shape[2]===f*p,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${f*p}, but got ${u.shape[2]}.`);const h=y0(c,l,r,o,i,s),g=lu(h,u,1,"valid",i);return d?H(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const oR=V({separableConv2d_:y1e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function v1e(t,e){const n=P(t,"x","setdiff1d"),r=P(e,"y","setdiff1d");A(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),A(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),A(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const o=await n.data(),s=await r.data(),i=new Set(s);let a=0;for(let c=0;c<o.length;c++)i.has(o[c])||a++;const l=new Un([a],n.dtype),u=new Un([a],"int32");for(let c=0,d=0;c<o.length;c++)i.has(o[c])||(l.values[d]=o[c],u.values[d]=c,d++);return[l.toTensor(),u.toTensor()]}const b1e=v1e;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x1e(t){const n={x:P(t,"x","sign")};return U.runKernel(o0,n)}const iq=V({sign_:x1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w1e(t){const n={x:P(t,"x","sin","float32")};return U.runKernel(n0,n)}const sR=V({sin_:w1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S1e(t){const n={x:P(t,"x","sinh")};return U.runKernel(r0,n)}const iR=V({sinh_:S1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k1e(t,e,n){const r=P(t,"x","slice1d");return A(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),ft(r,[e],[n])}const Ck=V({slice1d_:k1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $1e(t,e,n){const r=P(t,"x","slice2d");return A(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),ft(r,e,n)}const aR=V({slice2d_:$1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C1e(t,e,n){const r=P(t,"x","slice3d");return A(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),ft(r,e,n)}const Tk=V({slice3d_:C1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T1e(t,e,n){const r=P(t,"x","slice4d");return A(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),ft(r,e,n)}const sg=V({slice4d_:T1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _1e(t,e=-1){const n=P(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},o={dim:e};return U.runKernel(ik,r,o)}const _k=V({softmax_:_1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I1e(t){A(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return U.runKernel(VO,e)}const Ik=V({fft_:I1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N1e(t){A(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return U.runKernel(HO,e)}const ig=V({ifft_:N1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E1e(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const o=H(t,[n,e]);r=ig(o)}else{const o=[n,2*(e-1)],s=H(og(t),[n,e]),i=H(mk(t),[n,e]),a=qs(ft(s,[0,1],[n,e-2]),1),l=W(qs(ft(i,[0,1],[n,e-2]),1),Me(-1)),u=Dn([s,a],1),c=Dn([i,l],1),d=H(su(u,c),[o[0],o[1]]);r=ig(d)}if(r=og(r),t.rank===3&&t.shape[0]!==0){const o=r,s=t.shape[0];r=H(r,[s,r.shape[0]/s,r.shape[1]]),o.dispose()}return r}const lR=V({irfft_:E1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A1e(t,e,n=0){const o={x:P(t,"x","split")},s={numOrSizeSplits:e,axis:n};return U.runKernel(sk,o,s)}const Ro=V({split_:A1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O1e(t,e){A(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let o;if(e!=null&&e<n){const h=t.shape.map(g=>0),m=t.shape.map(g=>g);m[t.shape.length-1]=e,o=ft(t,h,m),n=e}else if(e!=null&&e>n){const h=t.shape.map(m=>m);h[t.shape.length-1]=e-n,o=Dn([t,Bn(h)],t.shape.length-1),n=e}else o=t;const s=ht(o),i=H(su(o,s),[r,n]),a=Ik(i),l=Math.floor(n/2)+1,u=og(a),c=mk(a),d=Ro(u,[l,n-l],u.shape.length-1),f=Ro(c,[l,n-l],c.shape.length-1),p=o.shape.slice();return p[o.shape.length-1]=l,H(su(d[0],f[0]),p)}const Nk=V({rfft_:O1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P1e(t,e){let n=P(t,"a","squaredDifference"),r=P(e,"b","squaredDifference");[n,r]=kn(n,r),Xe(n.shape,r.shape);const o={a:n,b:r},s={};return U.runKernel(l0,o,s)}const uR=V({squaredDifference_:P1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R1e(t,e){const n=P(t,"x","squeeze","string_or_numeric");return H(n,xu(n.shape,e).newShape)}const nd=V({squeeze_:R1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D1e(t,e=0){const n=Bx(t,"tensors","stack","string_or_numeric");A(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&A(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,o={axis:e};return U.runKernel(qS,r,o)}const zo=V({stack_:D1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F1e(t,e=0){const r={x:P(t,"x","step")},o={alpha:e};return U.runKernel(p0,r,o)}const Pp=V({step_:F1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M1e(t,e,n,r,o=0,s=0,i=0,a=0,l=0){const c={x:P(t,"x","stridedSlice","string_or_numeric")},d={begin:e,end:n,strides:r,beginMask:o,endMask:s,ellipsisMask:i,newAxisMask:a,shrinkAxisMask:l};return U.runKernel(bP,c,d)}const aq=V({stridedSlice_:M1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L1e(t){const n={x:P(t,"x","tan","float32")};return U.runKernel(c0,n)}const lq=V({tan_:L1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nr(t,e){_p(t);const n=Su(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return ku(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yc(t,e,n){if(_p(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=Su(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return ku(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z1e(t,e,n){if(_p(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=Su(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return ku(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B1e(t,e,n){if(_p(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=Su(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return ku(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j1e(t,e,n){if(_p(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=Su(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return ku(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V1e(t,e,n){if(_p(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=Su(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,ku(t,e,r,n)}function uq(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,o=e.rank>1?e.rank-1:1,s=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${o}.`;if(n.rank<o)throw new Error(s+` update.rank < ${o}. `);if(t.length<r+(n.rank-o))throw new Error(s+` Output shape length < ${r+(n.rank-o)}`);if(n.rank!==o+t.length-r)throw new Error(s+` update.rank != ${o+t.length-r}`);for(let i=0;i<o;++i)if(n.shape[i]!==e.shape[i])throw new Error(s+` updates.shape[${i}] (${n.shape[i]}) != indices.shape[${i}] (${e.shape[i]}).`);for(let i=0;i<n.rank-o;++i)if(n.shape[i+o]!==t[i+r])throw new Error(s+` updates.shape[${i+o}] (${n.shape[i+o]}) != shape[${i+o}] (${t[i+o]})`)}function cR(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}uq(n,e,t)}function rd(t,e,n){const r=e.shape.length,o=r>1?e.shape[r-1]:1,s=n.length;let i=1;for(let d=o;d<s;++d)i*=n[d];const a=o<1?1:o,l=ne(e.shape)/a,u=[...Fe(n.slice(0,o)),1],c=ne(n);return{sliceRank:o,numUpdates:l,sliceSize:i,strides:u,outputSize:c}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W1e(t,e,n){const r=P(t,"tensor","tensorScatterupdate"),o=P(e,"indices","tensorScatterupdate","int32"),s=P(n,"updates","tensorScatterupdate");if(cR(s,o,r.shape),r.dtype!==s.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${s.dtype}.`);const i={tensor:r,indices:o,updates:s},a={};return U.runKernel(dP,i,a)}const U1e=V({tensorScatterUpdate_:W1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G1e(t,e=1,n=!0){const r=P(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const o=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>o)throw new Error(`'k' passed to topk() must be <= the last dimension (${o}) but got ${e}`);const s={x:r},i={k:e,sorted:n},[a,l]=U.runKernel(kP,s,i);return{values:a,indices:l}}const cq=V({topk_:G1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H1e(t,e=0,n=1,r,o){if(fs(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const s=new QP(e,n,r,!0,o),i=Qe(t,r);for(let a=0;a<i.values.length;a++)i.values[a]=s.nextValue();return i.toTensor()}const dR=V({truncatedNormal_:H1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q1e(t,e=0){const n=P(t,"x","unique","string_or_numeric");A(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},o={axis:e},[s,i]=U.runKernel(CP,r,o);return{values:s,indices:i}}const dq=V({unique_:q1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K1e(t,e,n){const r=P(t,"x","unsortedSegmentSum"),o=P(e,"segmentIds","unsortedSegmentSum","int32");A(Lf(n),()=>"numSegments must be of dtype int");const s={x:r,segmentIds:o},i={numSegments:n};return U.runKernel(uk,s,i)}const fR=V({unsortedSegmentSum_:K1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X1e(t,e=0){const n=P(t,"x","unstack","string_or_numeric");A(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},o={axis:e};return U.runKernel(lk,r,o)}const Ks=V({unstack_:X1e});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y1e(t,e){return UP(t,e,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fq(t,e=!0,n,r){return U.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pR(t,e){const n=[];for(let s=0;s<e.length;s++)e[s]&&n.push(s);const r=Qe(t,"int32"),o=Qe([n.length,t.length],"int32");for(let s=0;s<n.length;s++){const i=r.indexToLoc(n[s]),a=s*t.length;o.values.set(i,a)}return o.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Z1e(t){const e=P(t,"condition","whereAsync","bool"),n=await e.data(),r=pR(e.shape,n);return t!==e&&e.dispose(),r}const pq=Z1e;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Q1e(t,e,n){const r=P(t,"tensor","boolMask"),o=P(e,"mask","boolMask","bool"),s=n??0,i=o.rank,a=r.shape;A(i>0,()=>"mask cannot be scalar"),Wo(a.slice(s,s+i),o.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let m=s;m<s+i;m++)l*=a[m];const u=a.slice(0,s).concat([l],a.slice(s+i)),c=H(r,u),d=H(o,[-1]),f=await pq(d),p=nd(f,[1]),h=w0(c,p,s);return t!==r&&r.dispose(),e!==o&&o.dispose(),p.dispose(),c.dispose(),d.dispose(),f.dispose(),h}const J1e=Q1e;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ewe(t,e,n){const r=P(t,"x","transpose");if(e==null&&(e=r.shape.map((i,a)=>a).reverse()),A(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(i=>{A(i>=0&&i<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const o={x:r},s={perm:e};return r.dtype==="complex64"?Z(()=>{let i=og(r),a=mk(r);return i=U.runKernel(cf,{x:i},s),a=U.runKernel(cf,{x:a},s),n&&(a=tn(a)),su(i,a)}):U.runKernel(cf,o,s)}const pt=V({transpose_:ewe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function twe(t,e,n,r,o=!0){const s=P(t,"v","movingAverage"),i=P(e,"x","movingAverage"),a=P(n,"decay","movingAverage");Wye(s,i),A(ct(s.shape,i.shape),()=>"Shape mismatch in v and x");const l=Me(1),u=ke(l,a);let c=W(ke(i,s),u);if(o){A(r!=null,()=>"When using zeroDebias: true, step is required.");const d=P(r,"step","movingAverage");c=Oe(c,ke(l,Ja(a,d)))}return ue(s,c)}const nwe=V({movingAverage_:twe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rwe(t,e,n){fs(n);const r=P(t,"indices","scatterND","int32"),o=P(e,"updates","scatterND");cR(o,r,n);const s={indices:r,updates:o},i={shape:n};return U.runKernel(cP,s,i)}const owe=V({scatterND_:rwe});function swe(t,e,n,r){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);const o=t.rank>0?t.shape[0]:1,s=t.rank>1?t.shape[1]:1;if(n.length!==s)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${s}.`);const i=e.size;if(!(e.rank===0||e.rank===1&&i===o))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${o}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iwe(t,e,n,r=0){fs(n);const o=P(t,"sparseIndices","sparseToDense","int32"),s=P(e,"sparseValues","sparseToDense","string_or_numeric"),i=P(r,"defaultValue","sparseToDense",s.dtype);swe(o,s,n,i);const a={sparseIndices:o,sparseValues:s,defaultValue:i},l={outputShape:n};return U.runKernel(yP,a,l)}const awe=V({sparseToDense_:iwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lwe(t,e){const n=P(e,"indices","gatherND","int32"),o={params:P(t,"x","gatherND","string_or_numeric"),indices:n};return U.runKernel(GO,o)}const uwe=V({gatherND_:lwe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cwe(t,e){if(e==null)return t.shape.slice();if(ct(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dwe(t,e,n,r){const o=P(t,"x","dropout");if(A(o.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${o.dtype} tensor instead.`),A(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof fn?o.clone():o;const s=cwe(o,n),i=1-e,a=Oe(x0(ue(td(s,0,1,"float32",r),i)),i);return W(o,a)}const hq=V({dropout_:dwe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mq(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function hR(t,e,n){const r=1-t%2,o=new Float32Array(t);for(let s=0;s<t;++s){const i=2*Math.PI*s/(t+r-1);o[s]=e-n*Math.cos(i)}return Nr(o,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function fwe(t,e,n=1){const r=P(t,"predictions","inTopK"),o=P(e,"targets","inTopK");A(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),A(r.rank-1===o.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${o.rank}`),Wo(r.shape.slice(0,r.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const s=r.shape[r.shape.length-1];A(n>0&&n<=s,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${s}), but got ${n}`);const i=await r.data(),a=await o.data(),[l,u]=[i.length/s,s],c=yr("bool",l);for(let d=0;d<l;d++){const f=d*u,p=i.subarray(f,f+u),h=[];for(let m=0;m<p.length;m++)h.push({value:p[m],index:m});h.sort((m,g)=>g.value-m.value),c[d]=0;for(let m=0;m<n;m++)if(h[m].index===a[d]){c[d]=1;break}}return t!==r&&r.dispose(),e!==o&&o.dispose(),bi(c,o.shape,"bool")}const pwe=fwe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hwe(t,e,n,r,o,s="NHWC",i){let a=t;t.rank===3&&(a=H(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=H(e,[1,e.shape[0],e.shape[1],e.shape[2]])),A(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),A(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),A(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const u=s==="NHWC"?a.shape[3]:a.shape[1],c=s==="NHWC"?l.shape[3]:l.shape[1];A(u===n[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`),A(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`),eo("conv2dDerFilter",o,i);const d={x:a,dy:l},f={strides:r,pad:o,dataFormat:s,dimRoundingMode:i,filterShape:n};return U.runKernel(EO,d,f)}const mR=V({conv2DBackpropFilter_:hwe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ek(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return W(t,Pp(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function Ak(t,e){let n=e;const r=Kn(t.shape,e.shape);return r.length>0&&(n=Ie(n,r)),H(n,t.shape)}function Ok(t,e,n,r){if(e==="linear")return t;if(e==="relu")return ma(t);if(e==="elu")return v0(t);if(e==="relu6")return eR(t);if(e==="prelu")return kk(t,n);if(e==="leakyrelu")return gk(t,r);if(e==="sigmoid")return oa(t);throw new Error(`Unknown fused activation ${e}.`)}const Pk=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mwe({x:t,filter:e,strides:n,pad:r,dataFormat:o="NHWC",dilations:s=[1,1],dimRoundingMode:i,bias:a,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(l=l||"linear",Pk(U.state.gradientDepth,l)===!1){A(o==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${o} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let S=lu(t,e,n,r,o,s,i);return a!=null&&(S=ue(S,a)),Ok(S,l,u,c)}const d=P(t,"x","conv2d","float32"),f=P(e,"filter","conv2d","float32");let p=d,h=!1;d.rank===3&&(h=!0,p=H(d,[1,d.shape[0],d.shape[1],d.shape[2]])),A(p.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${p.rank}.`),A(f.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${f.rank}.`),eo("fused conv2d",r,i);const m=o==="NHWC"?p.shape[3]:p.shape[1];A(f.shape[2]===m,()=>`Error in conv2d: depth of input (${m}) must match input depth for filter ${f.shape[2]}.`),A(xr(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);const g=ir(p.shape,f.shape,n,s,r,i);let y;a!=null&&(y=P(a,"bias","fused conv2d"),[y]=kn(y,d),o==="NHWC"?Xe(g.outShape,y.shape):(A(y.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${y.shape.length}.`),A(y.shape.length===0||y.shape[0]===g.outChannels||y.shape[0]===1,()=>`Error in fused conv2d: bias shape (${y.shape}) is not compatible with the number of output channels (${g.outChannels})`)));let v;if(u!=null){const S=u.shape;if(A(S.length<=1||S.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${S.length}.`),S.length===1)A(S[0]===1||S[0]===g.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${S}) is not compatible with the number of output channels (${g.outChannels}).`);else if(S.length===3)try{Xe(S,g.outShape)}catch{const $=`Error in fused conv2d: PReLU activation weights (${S}) is not compatible with the output shape of the conv2d (${g.outShape}).`;throw Error($)}v=P(u,"prelu weights","fused conv2d")}const b=(S,k)=>{A(o==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${o} but only NHWC is currently supported.`);const[$,C,I,E]=k,O=Ek(S,I,l);A(au(s),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);const R=DP(C.shape,O,$,n,r),z=mR(C,O,$.shape,n,r),L=[R,z];if(E!=null){const B=Ak(E,O);L.push(B)}return L},x={x:p,filter:f,bias:y,preluActivationWeights:v},w={strides:n,pad:r,dataFormat:o,dilations:s,dimRoundingMode:i,activation:l,leakyreluAlpha:c};return a==null?el((k,$,C)=>{let I=U.runKernel(Dx,x,w);return C([$,k,I]),h&&(I=H(I,[I.shape[1],I.shape[2],I.shape[3]])),{value:I,gradFunc:b}})(p,f):el((k,$,C,I)=>{let E=U.runKernel(Dx,x,w);return I([$,k,E,C]),h&&(E=H(E,[E.shape[1],E.shape[2],E.shape[3]])),{value:E,gradFunc:b}})(p,f,y)}const gq=V({fusedConv2d_:mwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gwe(t,e,n,r,o,s=[1,1],i){let a=t;t.rank===3&&(a=H(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=H(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={x:a,dy:l},c={strides:r,pad:o,dimRoundingMode:i,dilations:s,filterShape:n};return U.runKernel(MO,u,c)}const yq=V({depthwiseConv2dNativeBackpropFilter_:gwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ywe(t,e,n,r,o,s=[1,1],i){let a=e,l=!1;e.rank===3&&(l=!0,a=H(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={dy:a,filter:n},c={strides:r,pad:o,dimRoundingMode:i,dilations:s,inputShape:t},d=U.runKernel(LO,u,c);return l?H(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const vq=V({depthwiseConv2dNativeBackpropInput_:ywe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vwe({x:t,filter:e,strides:n,pad:r,dataFormat:o="NHWC",dilations:s=[1,1],dimRoundingMode:i,bias:a,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(Pk(U.state.gradientDepth,l)===!1){let w=y0(t,e,n,r,o,s,i);return a!=null&&(w=ue(w,a)),Ok(w,l,u,c)}const d=P(t,"x","depthwiseConv2d","float32"),f=P(e,"filter","depthwiseConv2d","float32");let p=d,h=!1;d.rank===3&&(h=!0,p=H(d,[1,d.shape[0],d.shape[1],d.shape[2]])),A(p.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${p.rank}.`),A(f.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${f.rank}.`),A(p.shape[3]===f.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${p.shape[3]}) must match the inChannels dimension in filter ${f.shape[2]}.`),s==null&&(s=[1,1]),A(xr(n,s),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),eo("fused depthwiseConv2d",r,i);const m=ir(p.shape,f.shape,n,s,r,i,!0);let g;a!=null&&(g=P(a,"bias","fused conv2d"),[g]=kn(g,d),Xe(m.outShape,g.shape));let y;u!=null&&(y=P(u,"prelu weights","fused depthwiseConv2d"));const v=(w,S)=>{A(au(s),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`);const[k,$,C,I]=S,E=Ek(w,C,l),O=vq($.shape,E,k,n,r,s,i),R=yq($,E,k.shape,n,r,s,i);if(I!=null){const z=Ak(g,E);return[O,R,z]}return[O,R]},b={x:p,filter:f,bias:g,preluActivationWeights:y},x={strides:n,pad:r,dataFormat:o,dilations:s,dimRoundingMode:i,activation:l,leakyreluAlpha:c};return a==null?el((S,k,$)=>{let C=U.runKernel(Fx,b,x);return $([k,S,C]),h&&(C=H(C,[C.shape[1],C.shape[2],C.shape[3]])),{value:C,gradFunc:v}})(p,f):el((S,k,$,C)=>{let I=U.runKernel(Fx,b,x);return C([k,S,I,$]),h&&(I=H(I,[I.shape[1],I.shape[2],I.shape[3]])),{value:I,gradFunc:v}})(p,f,g)}const bwe=V({fusedDepthwiseConv2d_:vwe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xwe({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:o,activation:s="linear",preluActivationWeights:i,leakyreluAlpha:a=.2}){if(Pk(U.state.gradientDepth,s)===!1){let E=tt(t,e,n,r);return o!=null&&(E=ue(E,o)),Ok(E,s,i,a)}let l=P(t,"a","fused matMul"),u=P(e,"b","fused matMul");[l,u]=kn(l,u);const c=n?l.shape[l.rank-2]:l.shape[l.rank-1],d=r?u.shape[u.rank-1]:u.shape[u.rank-2],f=n?l.shape[l.rank-1]:l.shape[l.rank-2],p=r?u.shape[u.rank-2]:u.shape[u.rank-1],h=l.shape.slice(0,-2),m=u.shape.slice(0,-2),g=ne(h),y=ne(m);A(c===d,()=>`Error in fused matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${l.shape} and ${u.shape} and transposeA=${n} and transposeB=${r} must match.`);const b=Xe(l.shape.slice(0,-2),u.shape.slice(0,-2)).concat([f,p]),x=n?H(l,[g,c,f]):H(l,[g,f,c]),w=r?H(u,[y,p,d]):H(u,[y,d,p]);let S;o!=null&&(S=P(o,"bias","fused matMul"),[S]=kn(S,l),Xe(b,S.shape));let k;i!=null&&(k=P(i,"prelu weights","fused matMul"));const $=(E,O)=>{const[R,z,L,B]=O,D=Ek(H(E,L.shape),L,s);let F,j;if(!n&&!r?(F=tt(D,z,!1,!0),j=tt(R,D,!0,!1)):!n&&r?(F=tt(D,z,!1,!1),j=tt(D,R,!0,!1)):n&&!r?(F=tt(z,D,!1,!0),j=tt(R,D,!1,!1)):(F=tt(z,D,!0,!0),j=tt(D,R,!0,!0)),o!=null){const G=Ak(B,D);return[F,j,G]}else return[F,j]},C={a:x,b:w,bias:S,preluActivationWeights:k},I={transposeA:n,transposeB:r,activation:s,leakyreluAlpha:a};return o==null?el((O,R,z)=>{const L=U.runKernel(Rx,C,I);return z([O,R,L]),{value:H(L,b),gradFunc:$}})(x,w):el((O,R,z,L)=>{const B=U.runKernel(Rx,C,I);return L([O,R,B,z]),{value:H(B,b),gradFunc:$}})(x,w,S)}const II=V({fusedMatMul_:xwe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wwe=Object.freeze(Object.defineProperty({__proto__:null,conv2d:gq,depthwiseConv2d:bwe,matMul:II},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Swe(t){return hR(t,.54,.46)}const kwe=V({hammingWindow_:Swe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $we(t){return hR(t,.5,.5)}const bq=V({hannWindow_:$we});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cwe(t,e,n,r=!1,o=0){let s=0;const i=[];for(;s+e<=t.size;)i.push(ft(t,s,e)),s+=n;if(r)for(;s<t.size;){const a=s+e-t.size,l=Dn([ft(t,s,e-a),Ap([a],o)]);i.push(l),s+=n}return i.length===0?yc([],[0,e]):H(Dn(i),[i.length,e])}const xq=V({frame_:Cwe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Twe(t,e,n,r,o=bq){r==null&&(r=mq(e));const s=xq(t,e,n),i=W(s,o(e));return Nk(i,r)}const _we=V({stft_:Twe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iwe(t,e,n,r,o="bilinear",s=0){const i=P(t,"image","cropAndResize"),a=P(e,"boxes","cropAndResize","float32"),l=P(n,"boxInd","cropAndResize","int32"),u=a.shape[0];A(i.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${i.rank}.`),A(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${a.shape}.`),A(l.rank===1&&l.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${a.shape}.`),A(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),A(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),A(o==="bilinear"||o==="nearest",()=>`method must be bilinear or nearest, but was ${o}`);const c={image:i,boxes:a,boxInd:l},d={method:o,extrapolationValue:s,cropSize:r};return U.runKernel(RO,c,d)}const Nwe=V({cropAndResize_:Iwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ewe(t){const e=P(t,"image","flipLeftRight","float32");A(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return U.runKernel(UO,n,{})}const Awe=V({flipLeftRight_:Ewe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Owe(t){const e=P(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];A(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),A(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const o=new Array(e.rank);return o.fill(1,0,n),o[n]=3,Os(e,o)}const Pwe=V({grayscaleToRGB_:Owe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rwe(t){const e=P(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];A(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),A(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const o=e.dtype,s=be(e,"float32"),i=Nr([.2989,.587,.114]);let a;switch(e.rank){case 2:a=Id("ij,j->i",s,i);break;case 3:a=Id("ijk,k->ij",s,i);break;case 4:a=Id("ijkl,l->ijk",s,i);break;case 5:a=Id("ijklm,m->ijkl",s,i);break;case 6:a=Id("ijklmn,n->ijklm",s,i);break;default:throw new Error("Not a valid tensor rank.")}return a=Hr(a,-1),be(a,o)}const Dwe=V({rgbToGrayscale_:Rwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fwe(t,e,n=0,r=.5){const o=P(t,"image","rotateWithOffset","float32");A(o.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${o.rank}.`);const s={image:o},i={radians:e,fillValue:n,center:r};return U.runKernel(TP,s,i)}const Mwe=V({rotateWithOffset_:Fwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rp(t,e,n,r,o,s){r==null&&(r=.5),o==null&&(o=Number.NEGATIVE_INFINITY),s==null&&(s=0);const i=t.shape[0];return n=Math.min(n,i),A(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),A(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),A(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),A(e.rank===1,()=>"scores must be a 1D tensor"),A(e.shape[0]===i,()=>`scores has incompatible shape with boxes. Expected ${i}, but was ${e.shape[0]}`),A(0<=s&&s<=1,()=>`softNmsSigma must be in [0, 1], but was '${s}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lwe(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY){const s=P(t,"boxes","nonMaxSuppression","float32"),i=P(e,"scores","nonMaxSuppression","float32"),a=Rp(s,i,n,r,o);n=a.maxOutputSize,r=a.iouThreshold,o=a.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:o};return U.runKernel(eP,{boxes:s,scores:i},l)}const zwe=V({nonMaxSuppression_:Lwe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bwe(t,e,n){const r=jwe(t,e,n),o=r<0?-(r+1):r;t.splice(o,0,e)}function jwe(t,e,n){return Wwe(t,e,n||Vwe)}function Vwe(t,e){return t>e?1:t<e?-1:0}function Wwe(t,e,n){let r=0,o=t.length,s=0,i=!1;for(;r<o;){s=r+(o-r>>>1);const a=n(e,t[s]);a>0?r=s+1:(o=s,i=!a)}return i?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gR(t,e,n,r,o){return bR(t,e,n,r,o,0)}function yR(t,e,n,r,o,s){return bR(t,e,n,r,o,0,!1,s,!0)}function vR(t,e,n,r,o,s){return bR(t,e,n,r,o,s,!0)}function bR(t,e,n,r,o,s,i=!1,a=!1,l=!1){const u=[];for(let g=0;g<e.length;g++)e[g]>o&&u.push({score:e[g],boxIndex:g,suppressBeginIndex:0});u.sort(Lz);const c=s>0?-.5/s:0,d=[],f=[];for(;d.length<n&&u.length>0;){const g=u.pop(),{score:y,boxIndex:v,suppressBeginIndex:b}=g;if(y<o)break;let x=!1;for(let w=d.length-1;w>=b;--w){const S=Uwe(t,v,d[w]);if(S>=r){x=!0;break}if(g.score=g.score*Gwe(r,c,S),g.score<=o)break}g.suppressBeginIndex=d.length,x||(g.score===y?(d.push(v),f.push(g.score)):g.score>o&&Bwe(u,g,Lz))}const p=d.length,h=n-p;a&&h>0&&(d.push(...new Array(h).fill(0)),f.push(...new Array(h).fill(0)));const m={selectedIndices:d};return i&&(m.selectedScores=f),l&&(m.validOutputs=p),m}function Uwe(t,e,n){const r=t.subarray(e*4,e*4+4),o=t.subarray(n*4,n*4+4),s=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(o[0],o[2]),c=Math.min(o[1],o[3]),d=Math.max(o[0],o[2]),f=Math.max(o[1],o[3]),p=(a-s)*(l-i),h=(d-u)*(f-c);if(p<=0||h<=0)return 0;const m=Math.max(s,u),g=Math.max(i,c),y=Math.min(a,d),v=Math.min(l,f),b=Math.max(y-m,0)*Math.max(v-g,0);return b/(p+h-b)}function Gwe(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function Lz(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Hwe(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY){const s=P(t,"boxes","nonMaxSuppressionAsync"),i=P(e,"scores","nonMaxSuppressionAsync"),a=Rp(s,i,n,r,o);n=a.maxOutputSize,r=a.iouThreshold,o=a.scoreThreshold;const l=await Promise.all([s.data(),i.data()]),u=l[0],c=l[1],{selectedIndices:d}=gR(u,c,n,r,o);return s!==t&&s.dispose(),i!==e&&i.dispose(),Nr(d,"int32")}const qwe=Hwe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kwe(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY,s=0){const i=P(t,"boxes","nonMaxSuppression"),a=P(e,"scores","nonMaxSuppression"),l=Rp(i,a,n,r,o,s);n=l.maxOutputSize,r=l.iouThreshold,o=l.scoreThreshold,s=l.softNmsSigma;const u={boxes:i,scores:a},c={maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:s},d=U.runKernel(nP,u,c);return{selectedIndices:d[0],selectedScores:d[1]}}const Xwe=V({nonMaxSuppressionWithScore_:Kwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Ywe(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY,s=0){const i=P(t,"boxes","nonMaxSuppressionAsync"),a=P(e,"scores","nonMaxSuppressionAsync"),l=Rp(i,a,n,r,o,s);n=l.maxOutputSize,r=l.iouThreshold,o=l.scoreThreshold,s=l.softNmsSigma;const u=await Promise.all([i.data(),a.data()]),c=u[0],d=u[1],{selectedIndices:f,selectedScores:p}=vR(c,d,n,r,o,s);return i!==t&&i.dispose(),a!==e&&a.dispose(),{selectedIndices:Nr(f,"int32"),selectedScores:Nr(p)}}const Zwe=Ywe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qwe(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY,s=!1){const i=P(t,"boxes","nonMaxSuppression"),a=P(e,"scores","nonMaxSuppression"),l=Rp(i,a,n,r,o,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,f={boxes:i,scores:a},p={maxOutputSize:u,iouThreshold:c,scoreThreshold:d,padToMaxOutputSize:s},h=U.runKernel(tP,f,p);return{selectedIndices:h[0],validOutputs:h[1]}}const Jwe=V({nonMaxSuppressionPadded_:Qwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function eSe(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY,s=!1){const i=P(t,"boxes","nonMaxSuppressionAsync"),a=P(e,"scores","nonMaxSuppressionAsync"),l=Rp(i,a,n,r,o,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,[f,p]=await Promise.all([i.data(),a.data()]),{selectedIndices:h,validOutputs:m}=yR(f,p,u,c,d,s);return i!==t&&i.dispose(),a!==e&&a.dispose(),{selectedIndices:Nr(h,"int32"),validOutputs:Me(m,"int32")}}const tSe=eSe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nSe(t,e,n=!1,r=!1){const o=P(t,"images","resizeBilinear");A(o.rank===3||o.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${o.rank}.`),A(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),A(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let s=o,i=!1;o.rank===3&&(i=!0,s=H(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const a={images:s},l={alignCorners:n,halfPixelCenters:r,size:e},u=U.runKernel(JS,a,l);return i?H(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const wq=V({resizeBilinear_:nSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rSe(t,e,n=!1,r=!1){const o=P(t,"images","resizeNearestNeighbor");A(o.rank===3||o.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${o.rank}.`),A(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),A(o.dtype==="float32"||o.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),A(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let s=o,i=!1;o.rank===3&&(i=!0,s=H(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const a={images:s},l={alignCorners:n,halfPixelCenters:r,size:e},u=U.runKernel(QS,a,l);return i?H(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const Sq=V({resizeNearestNeighbor_:rSe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oSe(t,e="binary",n=!1,r=.5){const o=P(t,"image","threshold"),s=.2989,i=.587,a=.114,l=o.shape[0]*o.shape[1];let u=W(Nr([r]),255),c,d,f,p;if(A(o.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${o.rank}.`),A(o.shape[2]===3||o.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${o.shape[2]}.`),A(o.dtype==="int32"||o.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${o.dtype}.`),A(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),o.shape[2]===3){[c,d,f]=Ro(o,[1,1,1],-1);const g=W(c,s),y=W(d,i),v=W(f,a);p=ue(ue(g,y),v)}else p=t;if(e==="otsu"){const g=E9(be(tR(p),"int32"),bi([]),256);u=sSe(g,l)}const h=n?Jc(p,u):Go(p,u);return be(W(h,255),"int32")}function sSe(t,e){let n=Nr([-1]),r=Nr([0]),o=Nr([0]),s,i,a,l,u,c;for(let d=0;d<t.size-1;d++){s=ft(t,0,d+1),i=ft(t,d+1),u=Oe(Ie(s),e),c=Oe(Ie(i),e);const f=Ie(W(s,Uf(0,s.size)));a=Oe(f,Ie(s));const p=Ap(i.shape,s.size),h=ue(Uf(0,i.size),p),m=W(i,h);l=Oe(Ie(m),Ie(i));const g=ke(a,l),y=ke(a,l),v=W(u,c);o=W(W(v,g),y);const b=Go(o,r);r=Or(b,o,r),n=Or(b,Nr([d]),n)}return n}const iSe=V({threshold_:oSe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aSe(t,e,n="nearest",r="constant",o=0,s){const i=P(t,"image","transform","float32"),a=P(e,"transforms","transform","float32");A(i.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${i.rank}.`),A(a.rank===2&&(a.shape[0]===i.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),A(s==null||s.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${s}.`);const l={image:i,transforms:a},u={interpolation:n,fillMode:r,fillValue:o,outputShape:s};return U.runKernel($P,l,u)}const lSe=V({transform_:aSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uSe(t,e,n){const r=P(t,"a","bandPart");A(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const o=r.shape,[s,i]=r.shape.slice(-2);let a,l;typeof e=="number"?(A(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),A(e<=s,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${s}).`),a=P(e<0?s:e,"numLower","bandPart")):(A(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=Or(rg(e,0),s,Mc(e,s))),typeof n=="number"?(A(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),A(n<=i,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${i}).`),l=P(n<0?i:n,"numUpper","bandPart")):(A(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=Or(rg(n,0),i,Mc(n,i)));const u=H(Uf(0,s,1,"int32"),[-1,1]),c=Uf(0,i,1,"int32"),d=ke(u,c),f=da(Jc(d,a),Tu(d,tn(l))),p=Bn([s,i],r.dtype);return H(zo(Ks(H(r,[-1,s,i])).map(h=>Or(f,h,p))),o)}const cSe=V({bandPart_:uSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dSe(t){let e;if(Array.isArray(t)){e=!1,A(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const o=t[0].shape[0];for(let s=1;s<t.length;++s)A(t[s].shape[0]===o,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[s].shape[0]} vs. ${o})`)}else e=!0,t=Ro(t,t.shape[0],0).map(o=>nd(o,[0]));A(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let o=0;o<t.length;++o)n.push(U.tidy(()=>{let s=r[o];if(o>0)for(let i=0;i<o;++i){const a=W(Ie(W(n[i],s)),n[i]);s=ke(s,a)}return Oe(s,b0(s,"euclidean"))}));return e?zo(n,0):n}const fSe=V({gramSchmidt_:dSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pSe(t,e=!1){if(A(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return zz(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,u)=>l*u),r=Ks(H(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),o=[],s=[];r.forEach(l=>{const[u,c]=zz(l,e);o.push(u),s.push(c)});const i=H(zo(o,0),t.shape),a=H(zo(s,0),t.shape);return[i,a]}}function zz(t,e=!1){return U.tidy(()=>{A(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let o=jP(n),s=ja(t);const i=yc([[1]],[1,1]);let a=ja(i);const l=n>=r?r:n;for(let u=0;u<l;++u){const c=s,d=a,f=o;[a,s,o]=U.tidy(()=>{const p=ft(s,[u,u],[n-u,1]),h=b0(p),m=ft(s,[u,u],[1,1]),g=Or(Go(m,0),yc([[-1]]),yc([[1]])),y=ke(m,W(g,h)),v=Oe(p,y);v.shape[0]===1?a=ja(i):a=Dn([i,ft(v,[1,0],[v.shape[0]-1,v.shape[1]])],0);const b=tn(Oe(tt(g,y),h)),x=ft(s,[u,0],[n-u,r]),w=W(b,a),S=pt(a);if(u===0)s=ke(x,tt(w,tt(S,x)));else{const C=ke(x,tt(w,tt(S,x)));s=Dn([ft(s,[0,0],[u,r]),C],0)}const k=pt(w),$=ft(o,[0,u],[n,o.shape[1]-u]);if(u===0)o=ke($,tt(tt($,a),k));else{const C=ke($,tt(tt($,a),k));o=Dn([ft(o,[0,0],[n,u]),C],1)}return[a,s,o]}),nt([c,d,f])}return!e&&n>r&&(o=ft(o,[0,0],[n,r]),s=ft(s,[0,0],[r,r])),[o,s]})}const hSe=V({qr_:pSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var io;(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(io||(io={}));function mSe(t,e,n=io.SUM_BY_NONZERO_WEIGHTS){const r=P(t,"losses","computeWeightedLoss");let o=null;e!=null&&(o=P(e,"weights","computeWeightedLoss"));const s=o==null?r:W(r,o);if(n===io.NONE)return s;if(n===io.SUM)return Ie(s);if(n===io.MEAN){if(o==null)return bn(s);{const i=r.size/o.size,a=Oe(Ie(s),Ie(o));return i>1?Oe(a,Me(i)):a}}if(n===io.SUM_BY_NONZERO_WEIGHTS){if(o==null)return Oe(Ie(s),Me(r.size));{const i=W(o,_o(r.shape)),a=be(Ie(Wf(i,Me(0))),"float32");return Oe(Ie(s),a)}}throw Error(`Unknown reduction: ${n}`)}const hl=V({computeWeightedLoss_:mSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gSe(t,e,n,r=io.SUM_BY_NONZERO_WEIGHTS){const o=P(t,"labels","absoluteDifference"),s=P(e,"predictions","absoluteDifference");let i=null;n!=null&&(i=P(n,"weights","absoluteDifference")),Wo(o.shape,s.shape,"Error in absoluteDifference: ");const a=Mn(ke(o,s));return hl(a,i,r)}const ySe=V({absoluteDifference_:gSe});function vSe(t,e,n,r,o=io.SUM_BY_NONZERO_WEIGHTS){const s=P(t,"labels","cosineDistance"),i=P(e,"predictions","cosineDistance");let a=null;r!=null&&(a=P(r,"weights","cosineDistance")),Wo(s.shape,i.shape,"Error in cosineDistance: ");const l=Me(1),u=ke(l,Ie(W(s,i),n,!0));return hl(u,a,o)}const bSe=V({cosineDistance_:vSe});function xSe(t,e,n,r=io.SUM_BY_NONZERO_WEIGHTS){let o=P(t,"labels","hingeLoss");const s=P(e,"predictions","hingeLoss");let i=null;n!=null&&(i=P(n,"weights","hingeLoss")),Wo(o.shape,s.shape,"Error in hingeLoss: ");const a=Me(1);o=ke(W(Me(2),o),a);const l=ma(ke(a,W(o,s)));return hl(l,i,r)}const wSe=V({hingeLoss_:xSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SSe(t,e,n,r=1,o=io.SUM_BY_NONZERO_WEIGHTS){const s=P(t,"labels","huberLoss"),i=P(e,"predictions","huberLoss");let a=null;n!=null&&(a=P(n,"weights","huberLoss")),Wo(s.shape,i.shape,"Error in huberLoss: ");const l=Me(r),u=Mn(ke(i,s)),c=Mc(u,l),d=ke(u,c),f=ue(W(Me(.5),Wt(c)),W(l,d));return hl(f,a,o)}const kSe=V({huberLoss_:SSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Se(t,e,n,r=1e-7,o=io.SUM_BY_NONZERO_WEIGHTS){const s=P(t,"labels","logLoss"),i=P(e,"predictions","logLoss");let a=null;n!=null&&(a=P(n,"weights","logLoss")),Wo(s.shape,i.shape,"Error in logLoss: ");const l=Me(1),u=Me(r),c=tn(W(s,as(ue(i,u)))),d=W(ke(l,s),as(ue(ke(l,i),u))),f=ke(c,d);return hl(f,a,o)}const CSe=V({logLoss_:$Se});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TSe(t,e,n,r=io.SUM_BY_NONZERO_WEIGHTS){const o=P(t,"labels","meanSquaredError"),s=P(e,"predictions","meanSquaredError");let i=null;n!=null&&(i=P(n,"weights","meanSquaredError")),Wo(o.shape,s.shape,"Error in meanSquaredError: ");const a=uR(o,s);return hl(a,i,r)}const _Se=V({meanSquaredError_:TSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ISe(t,e){const n=P(t,"labels","sigmoidCrossEntropyWithLogits"),r=P(e,"logits","sigmoidCrossEntropyWithLogits");Wo(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const o=ma(r),s=W(r,n),i=yk(Lo(tn(Mn(r))));return ue(ke(o,s),i)}function NSe(t,e,n,r=0,o=io.SUM_BY_NONZERO_WEIGHTS){let s=P(t,"multiClassLabels","sigmoidCrossEntropy");const i=P(e,"logits","sigmoidCrossEntropy");let a=null;if(n!=null&&(a=P(n,"weights","sigmoidCrossEntropy")),Wo(s.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){const u=Me(r),c=Me(1),d=Me(.5);s=ue(W(s,ke(c,u)),W(d,u))}const l=ISe(s,i);return hl(l,a,o)}const ESe=V({sigmoidCrossEntropy_:NSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ASe(t,e,n=-1){if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${n}`);return el((o,s,i)=>{const l=vk(s,[n],!0),u=ke(be(s,"float32"),l);i([o,u]);const c=tn(W(u,o));return{value:Ie(c,[n]),gradFunc:(p,h)=>{const[m,g]=h,y=In(p.shape,[n]);return[W(H(p,y),ke(be(m,"float32"),Lo(g))),W(H(p,y),ke(Lo(g),be(m,"float32")))]}}})(t,e)}function OSe(t,e,n,r=0,o=io.SUM_BY_NONZERO_WEIGHTS){let s=P(t,"onehotLabels","softmaxCrossEntropy");const i=P(e,"logits","softmaxCrossEntropy");let a=null;if(n!=null&&(a=P(n,"weights","softmaxCrossEntropy")),Wo(s.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){const u=Me(r),c=Me(1),d=Me(s.shape[1]);s=ue(W(s,ke(c,u)),Oe(u,d))}const l=ASe(s,i);return hl(l,a,o)}const PSe=V({softmaxCrossEntropy_:OSe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RSe(t,e,n,r){const o=P(t,"indices","sparseFillEmptyRows","int32"),s=P(e,"values","sparseFillEmptyRows"),i=P(n,"denseShape","sparseFillEmptyRows","int32"),a=P(r,"defaultValue","sparseFillEmptyRows",s.dtype);if(o.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${o.shape}`);if(s.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${s.shape}`);if(i.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${i.shape}`);if(a.rank!==0)throw new Error(`Default value should be a scalar but received shape ${a.shape}`);const l={indices:o,values:s,denseShape:i,defaultValue:a},u=U.runKernel(pP,l);return{outputIndices:u[0],outputValues:u[1],emptyRowIndicator:u[2],reverseIndexMap:u[3]}}const DSe=V({sparseFillEmptyRows_:RSe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FSe(t,e,n){const r=P(t,"inputIndices","sparseReshape","int32"),o=P(e,"inputShape","sparseReshape","int32"),s=P(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(o.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${o.shape}`);if(s.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${s.shape}`);const i={inputIndices:r,inputShape:o,newShape:s},a=U.runKernel(hP,i);return{outputIndices:a[0],outputShape:a[1]}}const MSe=V({sparseReshape_:FSe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LSe(t,e,n){const r=P(t,"data","sparseSegmentMean"),o=P(e,"indices","sparseSegmentMean","int32"),s=P(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${o.shape}`);if(s.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${s.shape}`);const i={data:r,indices:o,segmentIds:s};return U.runKernel(mP,i)}const zSe=V({sparseSegmentMean_:LSe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BSe(t,e,n){const r=P(t,"data","sparseSegmentSum"),o=P(e,"indices","sparseSegmentSum","int32"),s=P(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${o.shape}`);if(s.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${s.shape}`);const i={data:r,indices:o,segmentIds:s};return U.runKernel(gP,i)}const jSe=V({sparseSegmentSum_:BSe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VSe(t,e,n,r,o,s,i,a){const l=P(t,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);const u=P(e,"dataSplits","stringNGrams");if(u.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const c={separator:n,nGramWidths:r,leftPad:o,rightPad:s,padWidth:i,preserveShortSequences:a},d={data:l,dataSplits:u},f=U.runKernel(xP,d,c);return{nGrams:f[0],nGramsSplits:f[1]}}const WSe=V({stringNGrams_:VSe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function USe(t,e,n=!0){const r=P(t,"input","stringSplit","string"),o=P(e,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(o.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${o.shape}`);const s={skipEmpty:n},i={input:r,delimiter:o},a=U.runKernel(wP,i,s);return{indices:a[0],values:a[1],shape:a[2]}}const GSe=V({stringSplit_:USe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HSe(t,e){const n=P(t,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const o={input:n};return U.runKernel(SP,o,r)}const qSe=V({stringToHashBucketFast_:HSe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KSe(t,e,n,r=!0){const o=P(t,"input","staticRegexReplace","string"),s={pattern:e,rewrite:n,replaceGlobal:r};return U.runKernel(ak,{x:o},s)}const XSe=V({staticRegexReplace_:KSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YSe={fft:Ik,ifft:ig,rfft:Nk,irfft:lR},ZSe={hammingWindow:kwe,hannWindow:bq,frame:xq,stft:_we},qi={flipLeftRight:Awe,grayscaleToRGB:Pwe,resizeNearestNeighbor:Sq,resizeBilinear:wq,rgbToGrayscale:Dwe,rotateWithOffset:Mwe,cropAndResize:Nwe,nonMaxSuppression:zwe,nonMaxSuppressionAsync:qwe,nonMaxSuppressionWithScore:Xwe,nonMaxSuppressionWithScoreAsync:Zwe,nonMaxSuppressionPadded:Jwe,nonMaxSuppressionPaddedAsync:tSe,threshold:iSe,transform:lSe},xR={bandPart:cSe,gramSchmidt:fSe,qr:hSe},QSe={absoluteDifference:ySe,computeWeightedLoss:hl,cosineDistance:bSe,hingeLoss:wSe,huberLoss:kSe,logLoss:CSe,meanSquaredError:_Se,sigmoidCrossEntropy:ESe,softmaxCrossEntropy:PSe},JSe={sparseFillEmptyRows:DSe,sparseReshape:MSe,sparseSegmentMean:zSe,sparseSegmentSum:jSe},eke={stringNGrams:WSe,stringSplit:GSe,stringToHashBucketFast:qSe,staticRegexReplace:XSe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tke=new Map,nke=new Map;class Dp{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class _s{constructor(){this.classNameMap={}}static getMap(){return _s.instance==null&&(_s.instance=new _s),_s.instance}static register(e){_s.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function ce(t,e,n){A(t.className!=null,()=>"Class being registered does not have the static className property defined."),A(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),A(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,o=e+">"+r;return _s.register(t),tke.set(o,t),nke.set(t,o),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Iu extends Dp{minimize(e,n=!1,r){const{value:o,grads:s}=this.computeGradients(e,r);if(r!=null){const i=r.map(a=>({name:a.name,tensor:s[a.name]}));this.applyGradients(i)}else this.applyGradients(s);return nt(s),n?o:(o.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return _be(e,n)}dispose(){this.iterations_!=null&&nt(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Me(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(Iu,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kq extends Iu{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=U.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{const s=U.registeredVariables[r],i=!1;this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${r}/accum_grad`,variable:Z(()=>ht(s).variable(i))}),this.accumulatedUpdates[o]==null&&(this.accumulatedUpdates[o]={originalName:`${r}/accum_var`,variable:Z(()=>ht(s).variable(i))});const a=Array.isArray(e)?e[o].tensor:e[r];if(a==null)return;const l=this.accumulatedGrads[o].variable,u=this.accumulatedUpdates[o].variable;Z(()=>{const c=ue(W(l,this.rho),W(Wt(a),1-this.rho)),d=W(Oe(vr(ue(u,this.epsilon)),vr(ue(l,this.epsilon))),a),f=ue(W(u,this.rho),W(Wt(d),1-this.rho));l.assign(c),u.assign(f);const p=ue(W(d,-this.learningRate),s);s.assign(p)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(nt(this.accumulatedGrads.map(e=>e.variable)),nt(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $q extends Iu{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{const s=U.registeredVariables[r];this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${r}/accumulator`,variable:Z(()=>Ap(s.shape,this.initialAccumulatorValue).variable(!1))});const i=Array.isArray(e)?e[o].tensor:e[r];if(i==null)return;const a=this.accumulatedGrads[o].variable;Z(()=>{const l=ue(a,Wt(i));a.assign(l);const u=ue(W(Oe(i,vr(ue(l,U.backend.epsilon()))),-this.learningRate),s);s.assign(u)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&nt(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cq extends Iu{static get className(){return"Adam"}constructor(e,n,r,o=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=o,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Z(()=>{this.accBeta1=Me(n).variable(),this.accBeta2=Me(r).variable()}),o==null&&(this.epsilon=U.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Z(()=>{const r=ke(1,this.accBeta1),o=ke(1,this.accBeta2);n.forEach((s,i)=>{const a=U.registeredVariables[s],l=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${s}/m`,variable:Z(()=>ht(a).variable(l))}),this.accumulatedSecondMoment[i]==null&&(this.accumulatedSecondMoment[i]={originalName:`${s}/v`,variable:Z(()=>ht(a).variable(l))});const u=Array.isArray(e)?e[i].tensor:e[s];if(u==null)return;const c=this.accumulatedFirstMoment[i].variable,d=this.accumulatedSecondMoment[i].variable,f=ue(W(c,this.beta1),W(u,1-this.beta1)),p=ue(W(d,this.beta2),W(Wt(u),1-this.beta2)),h=Oe(f,r),m=Oe(p,o);c.assign(f),d.assign(p);const g=ue(W(Oe(h,ue(vr(m),this.epsilon)),-this.learningRate),a);a.assign(g)}),this.accBeta1.assign(W(this.accBeta1,this.beta1)),this.accBeta2.assign(W(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&nt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&nt(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),Z(()=>{this.accBeta1.assign(Ja(this.beta1,this.iterations_+1)),this.accBeta2.assign(Ja(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Tq extends Iu{static get className(){return"Adamax"}constructor(e,n,r,o=null,s=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=o,this.decay=s,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Z(()=>{this.iteration=Me(0).variable(),this.accBeta1=Me(n).variable()}),o==null&&(this.epsilon=U.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Z(()=>{const r=ke(1,this.accBeta1),o=Oe(-this.learningRate,ue(W(this.iteration,this.decay),1));n.forEach((s,i)=>{const a=U.registeredVariables[s],l=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${s}/m`,variable:ht(a).variable(l)}),this.accumulatedWeightedInfNorm[i]==null&&(this.accumulatedWeightedInfNorm[i]={originalName:`${s}/v`,variable:ht(a).variable(l)});const u=Array.isArray(e)?e[i].tensor:e[s];if(u==null)return;const c=this.accumulatedFirstMoment[i].variable,d=this.accumulatedWeightedInfNorm[i].variable,f=ue(W(c,this.beta1),W(u,1-this.beta1)),p=W(d,this.beta2),h=Mn(u),m=pl(p,h);c.assign(f),d.assign(m);const g=ue(W(Oe(o,r),Oe(f,ue(m,this.epsilon))),a);a.assign(g)}),this.iteration.assign(ue(this.iteration,1)),this.accBeta1.assign(W(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&nt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&nt(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wR extends Iu{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{const s=Array.isArray(e)?e[o].tensor:e[r];if(s==null)return;const i=U.registeredVariables[r];Z(()=>{const a=ue(W(this.c,s),i);i.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=rr(Me(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _q extends wR{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=Me(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{const s=U.registeredVariables[r];this.accumulations[o]==null&&(this.accumulations[o]={originalName:`${r}/momentum`,variable:Z(()=>ht(s).variable(!1))});const i=this.accumulations[o].variable,a=Array.isArray(e)?e[o].tensor:e[r];a!=null&&Z(()=>{let l;const u=ue(W(this.m,i),a);this.useNesterov?l=ue(W(this.c,ue(a,W(u,this.m))),s):l=ue(W(this.c,u),s),i.assign(u),s.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&nt(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Iq extends Iu{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,o=null,s=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=o,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=s,o==null&&(this.epsilon=U.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{const s=U.registeredVariables[r],i=!1;this.accumulatedMeanSquares[o]==null&&(this.accumulatedMeanSquares[o]={originalName:`${r}/rms`,variable:Z(()=>ht(s).variable(i))}),this.accumulatedMoments[o]==null&&(this.accumulatedMoments[o]={originalName:`${r}/momentum`,variable:Z(()=>ht(s).variable(i))}),this.accumulatedMeanGrads[o]==null&&this.centered&&(this.accumulatedMeanGrads[o]={originalName:`${r}/mg`,variable:Z(()=>ht(s).variable(i))});const a=Array.isArray(e)?e[o].tensor:e[r];if(a==null)return;const l=this.accumulatedMeanSquares[o].variable,u=this.accumulatedMoments[o].variable;Z(()=>{const c=ue(W(l,this.decay),W(Wt(a),1-this.decay));if(this.centered){const d=this.accumulatedMeanGrads[o].variable,f=ue(W(d,this.decay),W(a,1-this.decay)),p=Oe(W(a,this.learningRate),vr(ke(c,ue(Wt(f),this.epsilon)))),h=ue(W(u,this.momentum),p);l.assign(c),d.assign(f),u.assign(h);const m=ke(s,h);s.assign(m)}else{const d=ue(W(l,this.decay),W(Wt(a),1-this.decay)),f=ue(W(u,this.momentum),Oe(W(a,this.learningRate),vr(ue(d,this.epsilon))));l.assign(d),u.assign(f);const p=ke(s,f);s.assign(p)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&nt(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&nt(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&nt(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rke=[kq,$q,Cq,Tq,_q,Iq,wR];function oke(){for(const t of rke)ce(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ske="model",ike=".json",ake=".weights.bin";function Bz(t){return new Promise(e=>setTimeout(e)).then(t)}class Lc{constructor(e){if(!J().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(Lc.URL_SCHEME)&&(e=e.slice(Lc.URL_SCHEME.length)),(e==null||e.length===0)&&(e=ske),this.modelJsonFileName=e+ike,this.weightDataFileName=e+ake}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=_i.join(e.weightData),r=window.URL.createObjectURL(new Blob([n],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const o=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],s=a9(e,o),i=window.URL.createObjectURL(new Blob([JSON.stringify(s)],{type:"application/json"})),a=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(a.download=this.modelJsonFileName,a.href=i,await Bz(()=>a.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const l=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;l.download=this.weightDataFileName,l.href=r,await Bz(()=>l.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:h0(e)}}}}Lc.URL_SCHEME="downloads://";class lke{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,n)=>{const r=new FileReader;r.onload=o=>{const s=JSON.parse(o.target.result),i=s.modelTopology;if(i==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(s.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:i});return}const l=EP(s,u=>this.loadWeights(u));e(l)},r.onerror=o=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(e){const n=[],r=[];for(const i of e)n.push(...i.weights),r.push(...i.paths);const o=this.checkManifestAndWeightFiles(e),s=r.map(i=>this.loadWeightsFile(i,o[i]));return Promise.all(s).then(i=>[n,i])}loadWeightsFile(e,n){return new Promise((r,o)=>{const s=new FileReader;s.onload=i=>{const a=i.target.result;r(a)},s.onerror=i=>o(`Failed to weights data from file of path '${e}'.`),s.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(e){const n=[],r=this.weightsFiles.map(s=>Mz(s.name)),o={};for(const s of e)s.paths.forEach(i=>{const a=Mz(i);if(n.indexOf(a)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${a}'`);if(n.push(a),r.indexOf(a)===-1)throw new Error(`Weight file with basename '${a}' is not provided.`);o[i]=this.weightsFiles[r.indexOf(a)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return o}}const uke=t=>J().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Lc.URL_SCHEME)?cke(t.slice(Lc.URL_SCHEME.length)):null;cn.registerSaveRouter(uke);function cke(t="model"){return new Lc(t)}function dke(t){return new lke(t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jz(t,e,n,r){i(t),n=n??0,r=r??1,a(n,r);let o=0;const s=l=>(l.then(u=>{const c=n+ ++o/t.length*(r-n);return e(c),u}),l);function i(l){A(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function a(l,u){A(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),A(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${u}`),A(u>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${u}`)}return Promise.all(t.map(s))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Nq(t,e){e==null&&(e={});const n=e.fetchFunc==null?J().platform.fetch:e.fetchFunc,r=t.map(d=>n(d,e.requestInit,{isBinary:!0})),a=(e.onProgress==null?await Promise.all(r):await jz(r,e.onProgress,0,.5)).map(d=>d.arrayBuffer());return e.onProgress==null?await Promise.all(a):await jz(a,e.onProgress,.5,1)}function fke(t,e){var n;const r=e.fetchFunc==null?J().platform.fetch:e.fetchFunc;let o=0,s;return(n=e.onProgress)===null||n===void 0||n.call(e,0),new ReadableStream({pull:async i=>{for(var a;o<t.length;){s||(s=(await r(t[o],e.requestInit,{isBinary:!0})).body.getReader());const{done:l,value:u}=await s.read();if(l){o++,s=void 0,(a=e.onProgress)===null||a===void 0||a.call(e,o/t.length);continue}i.enqueue(u);return}i.close()}})}async function pke(t,e="",n,r){return Eq(i=>Nq(i,{requestInit:r}))(t,e,n)}function Eq(t){return async(e,n="",r)=>{const o=e.map(()=>!1),s={},i=r!=null?r.map(()=>!1):[],a=[];if(e.forEach((p,h)=>{let m=0;p.weights.forEach(g=>{const y="quantization"in g?g.quantization.dtype:g.dtype,v=Oc[y]*ne(g.shape),b=()=>{o[h]=!0,s[h]==null&&(s[h]=[]),s[h].push({manifestEntry:g,groupOffset:m,sizeBytes:v})};r!=null?r.forEach((x,w)=>{x===g.name&&(b(),i[w]=!0)}):b(),a.push(g.name),m+=v})}),!i.every(p=>p)){const p=r.filter((h,m)=>!i[m]);throw new Error(`Could not find weights in manifest with names: ${p.join(", ")}. 
Manifest JSON has weights with names: ${a.join(", ")}.`)}const l=o.reduce((p,h,m)=>(h&&p.push(m),p),[]),u=[];l.forEach(p=>{e[p].paths.forEach(h=>{const m=n+(n.endsWith("/")?"":"/")+h;u.push(m)})});const c=await t(u),d={};let f=0;return l.forEach(p=>{const h=e[p].paths.length,m=new _i(c.slice(f,f+h));s[p].forEach(y=>{const v=m.slice(y.groupOffset,y.groupOffset+y.sizeBytes),b=r9(v,[y.manifestEntry]);for(const x in b)d[x]=b[x]}),f+=h}),d}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hke="application/octet-stream",mke="application/json";class SR{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(A(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=J().platform.fetch,A(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&A(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{},this.loadOptions=n}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],o=a9(e,r);if(n.body.append("model.json",new Blob([JSON.stringify(o)],{type:mke}),"model.json"),e.weightData!=null){const i=_i.join(e.weightData);n.body.append("model.weights.bin",new Blob([i],{type:hke}),"model.weights.bin")}const s=await this.fetch(this.path,n);if(s.ok)return{modelArtifactsInfo:h0(e),responses:[s]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${s.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let i=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?i+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":i+=" Please make sure the server is serving valid JSON for this request.",new Error(i)}const r=n.modelTopology,o=n.weightsManifest;if(r==null&&o==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return n}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const e=await this.loadModelJSON();return EP(e,n=>this.loadWeights(n))}async loadStream(){const e=await this.loadModelJSON(),n=await this.getWeightUrls(e.weightsManifest),r=SI(e.weightsManifest),o=()=>fke(n,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:r,getWeightStream:o})}async getWeightUrls(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,o]=gke(n),s=this.weightPathPrefix||r,i=[],a=[];for(const l of e)for(const u of l.paths)this.weightUrlConverter!=null?a.push(this.weightUrlConverter(u)):i.push(s+u+o);return this.weightUrlConverter&&i.push(...await Promise.all(a)),i}async loadWeights(e){const n=await this.getWeightUrls(e),r=SI(e),o=await Nq(n,this.loadOptions);return[r,o]}}SR.URL_SCHEME_REGEX=/^https?:\/\//;function gke(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),o=n>e?t.substring(n):"";return[r+"/",o]}function NI(t){return t.match(SR.URL_SCHEME_REGEX)!=null}const Aq=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>NI(r)):n=NI(t),n)return kR(t,e)}return null};cn.registerSaveRouter(Aq);cn.registerLoadRouter(Aq);function kR(t,e){return new SR(t,e)}function yke(t,e){return kR(t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QC{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class Oq{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class vke{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=n=>Promise.resolve(e.save(n)))}}function bke(t,e,n,r){const o=arguments;return new vke(Pq(...o))}function Pq(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new QC(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new QC({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new QC({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))}function xke(t){return new Oq(t)}function wke(t){return new Oq(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rq=Object.freeze(Object.defineProperty({__proto__:null,CompositeArrayBuffer:_i,browserFiles:dke,browserHTTPRequest:yke,concatenateArrayBuffers:i9,copyModel:S0e,decodeWeights:r9,decodeWeightsStream:s9,encodeWeights:wI,fromMemory:bke,fromMemorySync:Pq,getLoadHandlers:l0e,getModelArtifactsForJSON:EP,getModelArtifactsForJSONSync:l9,getModelArtifactsInfoForJSON:h0,getSaveHandlers:u9,getWeightSpecs:SI,http:kR,isHTTPScheme:NI,listModels:x0e,loadWeights:pke,moveModel:k0e,registerLoadRouter:a0e,registerSaveRouter:i0e,removeModel:w0e,weightsLoaderFactory:Eq,withSaveHandler:xke,withSaveHandlerSync:wke},Symbol.toStringTag,{value:"Module"}));function $R(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(ne(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const o=e.shape,s=o[o.length-1];let i=1;for(let d=0;d<o.length-1;++d)i*=o[d];const a=t.shape,l=o.slice();l.pop();let u=1;for(let d=s;d<n;++d)u*=a[d],l.push(a[d]);const c=[...Fe(t.shape).map(d=>d/u),1].slice(0,s);return[l,i,u,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EI=-2,Ske=-1;function CR(t,e,n){const r=t.shape.length;A(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),A(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let o=0;o<r;++o)A(e[o]+n[o]<=t.shape[o],()=>`Error in slice${r}D: begin[${o}] + size[${o}] (${e[o]+n[o]}) would overflow input.shape[${o}] (${t.shape[o]})`)}function kke(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function TR(t,e,n){const r=[];for(let o=0;o<t.length;o++)r[o]=Math.ceil((e[o]-t[o])/n[o]);return r}function Dq(t,e,n,r){const o=[...t];for(let s=o.length;s<r.length;s++)o.push(1);for(let s=0;s<n;s++)s===0?o[e]=1:(o.splice(e,0,1),o.pop());return o}function Fq(t,e,n){return n<=t?n:n-(e-1)}function Mq(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function $ke(t,e,n,r,o,s,i,a,l){const u=t.length;let c=new Array(u),d=new Array(u),f=new Array(u);if(e.length&&n>0){const p=e[0],h=n+1;c=Lq(i,p,h,r,t),d=zq(a,p,h,o,t),f=Dq(s,p,h,t)}else for(let p=0;p<u;p++)c[p]=jq(i,r,s,t,p,l),d[p]=Vq(a,o,s,t,p,l),f[p]=Bq(s,p,l);return{begin:c,end:d,strides:f}}function Lq(t,e,n,r,o){const s=[...o],i=Mq(n,e);for(let a=0;a<s.length;a++)if(i.indexOf(a)>-1)s[a]=0;else{const l=Fq(e,n,a);let u=r[l];t&1<<l&&(u=0),s[a]=u}return s}function zq(t,e,n,r,o){const s=[...o],i=Mq(n,e);for(let a=0;a<s.length;a++)if(i.indexOf(a)>-1)s[a]=Number.MAX_SAFE_INTEGER;else{const l=Fq(e,n,a);let u=r[l];t&1<<l&&(u=Number.MAX_SAFE_INTEGER),s[a]=u}for(let a=0;a<s.length;a++){const l=o[a];s[a]<0&&(s[a]+=l),s[a]=Ec(0,s[a],o[a])}return s}function Bq(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function jq(t,e,n,r,o,s){let i=e[o];const a=n[o]||1;(t&1<<o||s&1<<o||i==null)&&(a>0?i=Number.MIN_SAFE_INTEGER:i=Number.MAX_SAFE_INTEGER);const l=r[o];return i<0&&(i+=l),i=Ec(0,i,l-1),i}function Vq(t,e,n,r,o,s){let i=e[o];const a=n[o]||1;(t&1<<o||s&1<<o||i==null)&&(a>0?i=Number.MAX_SAFE_INTEGER:i=Number.MIN_SAFE_INTEGER);const l=r[o];return i<0&&(i+=l),a>0?i=Ec(0,i,l):i=Ec(-1,i,l-1),i}function _R(t,e,n){let r=n.length;for(let o=0;o<n.length;o++)if(n[o]>1){r=o;break}for(let o=r+1;o<n.length;o++)if(e[o]>0||n[o]!==t[o])return!1;return!0}function IR(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function Rk(t,e,n){let r;const o=t.shape.length;typeof e=="number"?r=[e,...new Array(o-1).fill(0)]:e.length<o?r=e.concat(new Array(o-e.length).fill(0)):r=e.slice(),r.forEach(i=>{A(i!==-1,()=>"slice() does not support negative begin indexing.")});let s;return n==null?s=new Array(o).fill(-1):typeof n=="number"?s=[n,...new Array(o-1).fill(-1)]:n.length<o?s=n.concat(new Array(o-n.length).fill(-1)):s=n,s=s.map((i,a)=>i>=0?i:(A(i===-1,()=>`Negative size values should be exactly -1 but got ${i} for the slice() size at index ${a}.`),t.shape[a]-r[a])),[r,s]}function NR(t,e,n,r,o,s,i,a,l){let u;if(r==null?(u=new Array(e.length),u.fill(1)):u=r,i!=null&&i&i-1)throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const d={dims:u.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:u.slice(),beginMask:o,endMask:s,ellipsisMask:i,newAxisMask:a,shrinkAxisMask:l};for(let b=0;b<d.dims;b++)c&&1<<b&a&&d.numAddAxisAfterEllipsis++,1<<b&i&&(c=!0);c||(d.ellipsisMask|=1<<d.dims,d.dims++);const f={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};Cke(d,f);let p=!0,h=!0,m=!0;const g=[],y=[];for(let b=0;b<t.length;++b){if(f.strides[b]===0)throw Error(`strides[${b}] must be non-zero`);const x=!!(f.shrinkAxisMask&1<<b),w=t[b];if(w===-1){g.push(x?1:-1);continue}const S=[f.beginMask&1<<b,f.endMask&1<<b],k=[f.strides[b]>0?0:-1,f.strides[b]>0?w:w-1];if(x&&f.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&f.strides[b]===1;const $=!!(f.beginMask&1<<b&&f.endMask&1<<b);if(f.beginValid&&f.endValid){if(x){const O=f.begin[b]<0?w+f.begin[b]:f.begin[b];if(f.begin[b]=O,f.end[b]=f.begin[b]+1,O<0||O>=w)throw Error(`slice index ${f.begin[b]} of dimension ${b} out of bounds.`)}else f.begin[b]=Vz(f.begin[b],0,f.strides[b],w,S,k),f.end[b]=Vz(f.end[b],1,f.strides[b],w,S,k);const E=f.strides[b]===1&&f.begin[b]===0&&f.end[b]===w;p=p&&E,h=h&&(b===0&&f.strides[b]===1||E)}else p=p&&f.strides[b]===1&&$,h=h&&(b===0&&f.strides[b]===1||$);let C,I=!1;if(f.beginValid&&f.endValid?(C=f.end[b]-f.begin[b],I=!0):x?(C=1,I=!0):$&&w>=0&&(f.strides[b]<0?C=-w:C=w,I=!0),I){let E;C===0||C<0!=f.strides[b]<0?E=0:E=Math.trunc(C/f.strides[b])+(C%f.strides[b]!==0?1:0),g.push(E)}else g.push(-1)}for(let b=0;b<f.finalShapeGatherIndices.length;++b){const x=f.finalShapeGatherIndices[b];x>=0?y.push(g[x]):x===EI&&y.push(1)}return{finalShapeSparse:y.filter((b,x)=>f.finalShapeGatherIndices[x]!==EI),finalShape:y,isIdentity:p,sliceDim0:h,isSimpleSlice:m,begin:f.begin,end:f.end,strides:f.strides}}function Cke(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const o=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<o;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(EI),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(Ske),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function Vz(t,e,n,r,o,s){if(o[e])return n>0?s[e]:s[e+1&1];{const i=t<0?r+t:t;return i<s[0]?s[0]:i>s[1]?s[1]:i}}const Tke=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:CR,computeFlatOffset:IR,computeOutShape:TR,getNormalizedAxes:$ke,isSliceContinous:_R,maskToAxes:kke,parseSliceParams:Rk,sliceInfo:NR,startForAxis:jq,startIndicesWithElidedDims:Lq,stopForAxis:Vq,stopIndicesWithElidedDims:zq,stridesForAxis:Bq,stridesWithElidedDims:Dq},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _ke{static sgd(e){return new wR(e)}static momentum(e,n,r=!1){return new _q(e,n,r)}static rmsprop(e,n=.9,r=0,o=null,s=!1){return new Iq(e,n,r,o,s)}static adam(e=.001,n=.9,r=.999,o=null){return new Cq(e,n,r,o)}static adadelta(e=.001,n=.95,r=null){return new kq(e,n,r)}static adamax(e=.002,n=.9,r=.999,o=null,s=0){return new Tq(e,n,r,o,s)}static adagrad(e,n=.1){return new $q(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vd=_ke;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ike=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function Wq(){return new Promise(t=>Ike(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ER(t,e){const n=t[0].length;t.forEach((o,s)=>{A(o.length===n,()=>`Error in concat${n}D: rank of tensors[${s}] must be the same as the rank of the rest (${n})`)}),A(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((o,s)=>{for(let i=0;i<n;i++)A(i===e||o[i]===r[i],()=>`Error in concat${n}D: Shape of tensors[${s}] (${o}) does not match the shape of the rest (${r}) along the non-concatenated axis ${s}.`)})}function sa(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ci;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(ci||(ci={}));function Uq(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let o=1;o<n.length;++o){const s=n[o],i=r[r.length-n.length+o],a=r[i];if(s>=0)if(a>=0){if(a!==s)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${o+t}] = ${s} but shape[${o+t}] = ${a}`)}else r[i]=s}return r}function Gq(t){const e={FIRST_DIM_SIZE:ci.FIRST_DIM_SIZE,VALUE_ROWIDS:ci.VALUE_ROWIDS,ROW_LENGTHS:ci.ROW_LENGTHS,ROW_SPLITS:ci.ROW_SPLITS,ROW_LIMITS:ci.ROW_LIMITS,ROW_STARTS:ci.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function Hq(t){return t.length===0?0:t[0]===ci.FIRST_DIM_SIZE?t.length-1:t.length}function qq(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let o=0;o<Math.min(n,r-1);++o){const s=t[o],i=e[o+1];if(s>=0&&i>=0&&s!==1&&s!==i)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${o-t.length}] = ${s} but ragged tensor input.flatValues.shape[${o-t.length}] = ${i}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AR=30;function Dk(t){return t<=AR?t:dI(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OR(t,e,n){const r=n*(typeof t=="number"?t:t[0]),o=e*(typeof t=="number"?t:t[1]);return[r,o]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S0(t,e,n,r=!0){let o=[];if(r)o=o.concat(e.slice(0)),o.push(t[0]/n),o=o.concat(t.slice(1));else{o=o.concat(t[0]);const s=e.length;for(let i=0;i<s;++i)o=o.concat([t[i+1]/e[i],e[i]]);o=o.concat(t.slice(s+1))}return o}function k0(t,e,n=!0){const r=[];if(n){r.push(e);for(let o=e+1;o<t;++o)o<=2*e?(r.push(o),r.push(o-(e+1))):r.push(o)}else{const o=[],s=[];for(let i=1;i<t;++i)i>=e*2+1||i%2===1?s.push(i):o.push(i);r.push(...o),r.push(0),r.push(...s)}return r}function $0(t,e,n,r=!0){const o=[];r?o.push(t[0]/n):o.push(t[0]*n);for(let s=1;s<t.length;++s)s<=e.length?r?o.push(e[s-1]*t[s]):o.push(t[s]/e[s-1]):o.push(t[s]);return o}function PR(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function RR(t,e,n){const r=t.slice(0,1);for(let o=0;o<n;++o)r.push(t[o+1]-e[o][0]-e[o][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fk=1.7580993408473768,Mk=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DR=.3275911,FR=.254829592,MR=-.284496736,LR=1.421413741,zR=-1.453152027,BR=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tl(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function Kq(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function Xq(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let o=0;o<t.length;o+=4)n[Math.floor(o/4)]=t[o],r[Math.floor(o/4)]=t[o+1];return{real:n,imag:r}}function Yq(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let o=2;o<t.length;o+=4)n[Math.floor(o/4)]=t[o],r[Math.floor(o/4)]=t[o+1];return{real:n,imag:r}}function jR(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function Zq(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function Qq(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let o=0;o<Math.ceil(t/2);o++){const s=(e?2:-2)*Math.PI*(o/t);n[o]=Math.cos(s),r[o]=Math.sin(s)}return{real:n,imag:r}}function Jq(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),o=Math.cos(r),s=Math.sin(r);return{real:o,imag:s}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JC="->",Nke=/->/g,Wz=",",Uz="...";function VR(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(Nke,"").length)/JC.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${JC}").`);const[r,o]=t.split(JC);A(r.indexOf(Uz)===-1,()=>`The ellipsis notation ("${Uz}") is not supported yet.`);const s=r.split(Wz),i=s.length;if(e!==i)throw new Error(`Expected ${i} input tensors, received ${e}`);if(i>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let f=0;f<o.length;++f){const p=o[f];if(!s.some(h=>h.indexOf(p)!==-1))throw new Error(`Output subscripts contain the label ${p} not present in the input subscripts.`);a.indexOf(p)===-1&&a.push(p)}for(let f=0;f<r.length;++f){const p=r[f];a.indexOf(p)===-1&&p!==Wz&&a.push(p)}const l=new Array(s.length);for(let f=0;f<i;++f){if(new Set(s[f].split("")).size!==s[f].length)throw new Error(`Found duplicate axes in input component ${s[f]}. Support for duplicate axes in input is not implemented yet.`);l[f]=[];for(let p=0;p<s[f].length;++p)l[f].push(a.indexOf(s[f][p]))}const u=a.length,c=o.length,d=[];for(let f=c;f<u;++f)d.push(f);return{allDims:a,summedDims:d,idDims:l}}function WR(t,e){let n=new Array(t);n.fill(-1);for(let o=0;o<e.length;++o)n[e[o]]=o;const r=[];for(let o=0;o<t;++o)n[o]===-1&&r.push(o);return n=n.filter(o=>o!==-1),{permutationIndices:n,expandDims:r}}function UR(t,e,n){const r=new Array(t);for(let o=0;o<n.length;++o){const s=n[o].shape;for(let i=0;i<e[o].length;++i)r[e[o][i]]===void 0?r[e[o][i]]=s[i]:A(r[e[o][i]]===s[i],()=>`Expected dimension ${r[e[o][i]]} at axis ${i} of input shaped ${JSON.stringify(s)}, but got dimension ${s[i]}`)}}function GR(t,e){const n=t,r=[];let o=0;t.length===0&&n.push(-1),o=t.length+1;for(let i=0;i<o;++i)r.push([]);const s=[];for(let i=0;i<n.length;++i){const a=n[i],l=Eke(e,a);for(const u of l)s.indexOf(u)===-1&&(r[i].push(u),s.push(u))}return{path:n,steps:r}}function HR(t){return t.every((e,n)=>e===n)}function Eke(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function qR(t,e,n=0){let r=[];if(typeof e=="number")A(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const o=e.reduce((i,a)=>(a===-1&&(i+=1),i),0);A(o<=1,()=>"There should be only one negative value in split array.");const s=e.indexOf(-1);if(s!==-1){const i=e.reduce((a,l)=>l>0?a+l:a);e[s]=t.shape[n]-i}A(t.shape[n]===e.reduce((i,a)=>i+a),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eK(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function tK(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function nK(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rK(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function oK(t,e){return`size ${t} must be non-negative, not ${e}`}function sK(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function iK(t,e){const n=ne(t),r=ne(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function aK(t,e){const n=ne(t),r=ne(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AI(){return"segment ids must be >= 0"}function lK(){return"segment ids are not increasing"}function uK(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function cK(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dK(t,e){let n=!1,r;for(t<=AR?(r=t,n=!0):r=dI(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=dI(t,r+1);return r}function fK(t,e,n){const r=[],o=t.length;for(let s=0;s<o;s++)s!==e?r.push(t[s]):r.push(n);return r}function KR(t,e,n,r){const o=e.shape.length,s=t.shape.length;if(r!==0&&(r<-o||r>o))throw new Error(`Expect batchDims in the range of [-${o}, ${o}], but got ${r}`);if(r<0&&(r+=o),r>s)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${s}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(t.shape[d]!==e.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${e.shape[d]}.`);const i=t.shape[n],a=[];let l=1,u=1,c=1;for(let d=0;d<r;++d)a.push(t.shape[d]),l*=t.shape[d];for(let d=r;d<n;d++)a.push(t.shape[d]),u*=t.shape[d];for(let d=r;d<o;d++)a.push(e.shape[d]);for(let d=n+1;d<s;d++)a.push(t.shape[d]),c*=t.shape[d];return{batchSize:l,sliceSize:c,outerSize:u,dimSize:i,outputShape:a}}const Ake=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:KR,computeOutShape:fK,segOpComputeOptimalWindowSize:dK},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nl(t){try{return t.map(e=>ru(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function pK(t){return t.map(e=>Hl(e))}const Oke=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:FR,ERF_A2:MR,ERF_A3:LR,ERF_A4:zR,ERF_A5:BR,ERF_P:DR,PARALLELIZE_THRESHOLD:AR,get RowPartitionType(){return ci},SELU_SCALE:Mk,SELU_SCALEALPHA:Fk,applyActivation:Ok,assertAndGetBroadcastShape:Xe,assertAxesAreInnerMostDims:wr,assertParamsConsistent:ER,assignToTypedArray:Zq,axesAreInnerMostDims:BP,calculateShapes:rd,checkEinsumDimSizes:UR,checkPadOnDimRoundingMode:eo,combineLocations:W9,combineRaggedTensorToTensorShapes:Uq,complexWithEvenIndex:Xq,complexWithOddIndex:Yq,computeConv2DInfo:ir,computeConv3DInfo:$u,computeDefaultPad:PP,computeDilation2DInfo:m0,computeOptimalWindowSize:Dk,computeOutAndReduceShapes:ar,computeOutShape:sa,computePool2DInfo:Ys,computePool3DInfo:dl,convertConv2DDataFormat:fl,decodeEinsumEquation:VR,eitherStridesOrDilationsAreOne:xr,expandShapeToKeepDim:In,exponent:Jq,exponents:Qq,fromStringArrayToUint8:pK,fromUint8ToStringArray:nl,getAxesPermutation:gn,getBroadcastDims:Vf,getComplexWithIndex:jR,getEinsumComputePath:GR,getEinsumPermutation:WR,getFusedBiasGradient:Ak,getFusedDyActivation:Ek,getImageCenter:OR,getInnerMostAxes:Nn,getPermuted:k0,getRaggedRank:Hq,getReductionAxes:Kn,getReshaped:S0,getReshapedPermuted:$0,getRowPartitionTypesHelper:Gq,getSliceBeginCoords:PR,getSliceSize:RR,getSparseFillEmptyRowsIndicesDenseShapeMismatch:eK,getSparseFillEmptyRowsNegativeIndexErrorMessage:tK,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:nK,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:sK,getSparseReshapeInputOutputMismatchErrorMessage:aK,getSparseReshapeInputOutputMultipleErrorMessage:iK,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:rK,getSparseReshapeNegativeOutputDimErrorMessage:oK,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:cK,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:AI,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:lK,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:uK,getUndoAxesPermutation:Cu,isIdentityPermutation:HR,log:Sye,mergeRealAndImagArrays:tl,prepareAndValidate:$R,prepareSplitSize:qR,segment_util:Ake,shouldFuse:Pk,slice_util:Tke,splitRealAndImagArrays:Kq,stridesOrDilationsArePositive:Dc,tupleValuesAreOne:au,upcastType:Fo,validateDefaultValueShape:qq,validateInput:cR,validateUpdateShape:uq,warn:Zo},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */oke();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hK={kernelName:lS,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(t,Pp(be(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pke={kernelName:by,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Wt(be(n,"float32")),o=vr(ke(Me(1),r));return tn(Oe(t,o))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rke={kernelName:xy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=vr(ke(Wt(be(n,"float32")),1));return Oe(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dke={kernelName:Ep,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=Xe(n.shape,r.shape);return{a:()=>{let a=t;const l=Kn(n.shape,o);return l.length>0&&(a=Ie(a,l)),H(a,n.shape)},b:()=>{let a=t;const l=Kn(r.shape,o);return l.length>0&&(a=Ie(a,l)),H(a,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fke={kernelName:uS,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,o)=>{n[o]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mke={kernelName:cS,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ht(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lke={kernelName:dS,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ht(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zke={kernelName:wy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(t,vr(ke(Me(1),Wt(be(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bke={kernelName:Sy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=vr(ue(Me(1),Wt(be(n,"float32"))));return Oe(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jke={kernelName:Cy,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=Xe(n.shape,r.shape);return{a:()=>{const a=ue(Wt(n),Wt(r));let l=W(t,Oe(r,a));const u=Kn(n.shape,o);return u.length>0&&(l=Ie(l,u)),H(l,n.shape)},b:()=>{const a=ue(Wt(n),Wt(r));let l=tn(W(t,Oe(n,a)));const u=Kn(r.shape,o);return u.length>0&&(l=Ie(l,u)),H(l,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vke={kernelName:ky,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(t,ue(Wt(be(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wke={kernelName:$y,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(t,ke(Me(1),Wt(be(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uke(t,e,n,r,o,s){const i=P(t,"dy","avgPool3dGrad"),a=P(e,"input","avgPool3dGrad");let l=i,u=a,c=!1;a.rank===4&&(c=!0,l=H(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),u=H(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),A(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),A(u.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${u.rank}.`),eo("avgPool3dGrad",o,s);const d={dy:l,input:u},f={filterSize:n,strides:r,pad:o,dimRoundingMode:s},p=U.runKernel(TO,d,f);return c?H(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const Gke=V({avgPool3dGrad_:Uke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hke={kernelName:pS,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:o,strides:s,pad:i,dimRoundingMode:a}=n;return{x:()=>Gke(t,r,o,s,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qke(t,e,n,r,o){const s=P(t,"dy","avgPoolGrad"),i=P(e,"input","avgPoolGrad");A(i.rank===s.rank,()=>`Rank of input (${i.rank}) does not match rank of dy (${s.rank})`);let a=i,l=s,u=!1;i.rank===3&&(u=!0,a=H(i,[1,i.shape[0],i.shape[1],i.shape[2]]),l=H(s,[1,s.shape[0],s.shape[1],s.shape[2]])),A(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),A(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);const c={dy:l,input:a},d={filterSize:n,strides:r,pad:o},f=U.runKernel(CO,c,d);return u?H(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const Kke=V({avgPoolGrad_:qke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xke={kernelName:fS,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:o,strides:s,pad:i}=n;return{x:()=>Kke(t,r,o,s,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yke={kernelName:hS,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,o]=e,{transposeA:s,transposeB:i}=n;return!s&&!i?{a:()=>tt(t,o,!1,!0),b:()=>tt(r,t,!0,!1)}:!s&&i?{a:()=>tt(t,o,!1,!1),b:()=>tt(t,r,!0,!1)}:s&&!i?{a:()=>tt(o,t,!1,!0),b:()=>tt(r,t,!1,!1)}:{a:()=>tt(o,t,!0,!0),b:()=>tt(t,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zke={kernelName:mS,gradFunc:(t,e,n)=>{const{blockShape:r,crops:o}=n;return{x:()=>Sk(t,r,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qke={kernelName:vye,gradFunc:(t,e,n)=>{const r=n,o=r.inputShape,s=r.shape,i=Array.from(s);for(let l=o.length-1;l>=0;l--)if(o[l]===s[l])i[l]=1;else if(o[l]!==1)throw new Error(`broadcastTo(): [${o}] cannot be broadcast to [${s}].`);const a=[];for(let l=0;l<i.length;l++)i[l]>1&&a.push(l);return{x:()=>Ie(t,a,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jke={kernelName:Ty,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e$e={kernelName:_y,gradFunc:t=>({x:()=>ht(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t$e={kernelName:Iy,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:o,clipValueMax:s}=n;return{x:()=>Or(da(Tu(r,o),Jc(r,s)),t,ht(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n$e={kernelName:yS,inputsToSave:["x"],gradFunc:hK.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r$e={kernelName:vS,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(l=>l.shape),{axis:o}=n,s=rt(o,e[0].shape)[0],i=r.map(l=>l[s]);return Ro(t,i,s).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o$e={kernelName:bS,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,o]=e,{dilations:s,strides:i,pad:a,dataFormat:l}=n;return A(au(s),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`),{x:()=>DP(r.shape,t,o,i,a,l),filter:()=>mR(r,t,o.shape,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s$e={kernelName:xS,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,o]=e,{strides:s,pad:i,dataFormat:a,dimRoundingMode:l}=n;return{dy:()=>lu(t,o,s,i,a,1,l),filter:()=>mR(t,r,o.shape,s,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i$e(t,e,n,r,o){let s=t;t.rank===4&&(s=H(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let i=e;i.rank===4&&(i=H(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),A(s.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${s.shape}.`),A(i.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${i.shape}.`),A(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),A(s.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${s.shape[4]}) must match input depth in filter (${n[3]}.`),A(i.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${i.shape[4]}) must match output depth for filter (${n[4]}).`);const a={x:s,dy:i},l={strides:r,pad:o,filterShape:n};return U.runKernel(AO,a,l)}const a$e=V({conv3DBackpropFilter_:i$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l$e={kernelName:wS,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:o,pad:s}=n;A(au(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[i,a]=e;return{x:()=>M9(i.shape,t,a,o,s),filter:()=>a$e(i,t,a.shape,o,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u$e={kernelName:Ny,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(tn(sR(be(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c$e={kernelName:Ey,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(iR(be(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d$e={kernelName:SS,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:o,exclusive:s,reverse:i}=n;return{x:()=>{const a=gn([o],r.rank);let l=LP(t,o,s,!i);return a!=null&&(l=pt(l,a)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f$e={kernelName:kS,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:o,pad:s,dimRoundingMode:i}=n,a=r??[1,1];A(au(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[l,u]=e;return A(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),A(u.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${u.rank}.`),A(l.shape[3]===u.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`),A(xr(o,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${o} and dilations '${a}'.`),eo("depthwiseConv2d",s,i),{x:()=>vq(l.shape,t,u,o,s,a,i),filter:()=>yq(l,t,u.shape,o,s,a,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p$e={kernelName:$S,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,o]=e,s={x:r,filter:o,dy:t},i={x:r,filter:o,dy:t};return{x:()=>U.runKernel(fI,s,n),filter:()=>U.runKernel(pI,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h$e={kernelName:Oy,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>U.runKernel(jO,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m$e={kernelName:Py,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=W(Lo(tn(Wt(n))),2/Math.sqrt(Math.PI));return{x:()=>W(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g$e={kernelName:Ry,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y$e={kernelName:TS,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>H(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v$e={kernelName:Dy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(t,Lo(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b$e={kernelName:Fy,gradFunc:t=>({x:()=>ht(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x$e={kernelName:My,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=Xe(n.shape,r.shape);return{a:()=>{const a=Oe(t,be(r,"float32")),l=Kn(n.shape,o);return l.length>0?H(Ie(a,l),n.shape):a},b:()=>{let a=W(t,be(n,"float32"));const l=Kn(r.shape,o);l.length>0&&(a=H(Ie(a,l),r.shape));const u=Wt(r);return tn(Oe(a,be(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w$e={kernelName:_S,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[o,s,i,a]=e,l=a??Me(1),u=Kn(s.shape,o.shape),c=[];if(s.rank===1){for(let x=0;x<o.shape.length-1;++x)c.push(o.shape[x]);c.push(1)}const d=ke(o,s),f=W(t,l),p=nR(ue(i,Me(r))),h=W(W(W(p,p),p),Me(-.5));return{x:()=>s.rank===1?H(W(W(t,Os(H(p,[1,1,1,s.shape[0]]),c)),l),o.shape):H(W(W(t,p),l),o.shape),mean:()=>{let x=W(W(p,Me(-1)),f);return s.rank===1&&(x=Ie(x,u)),H(x,s.shape)},variance:()=>{let x=W(W(h,d),f);return s.rank===1&&(x=Ie(x,u)),H(x,s.shape)},scale:()=>{const x=W(d,p);let w=W(t,x);return s.rank===1&&(w=Ie(w,u)),H(w,s.shape)},offset:()=>{let x=t;return s.rank===1&&(x=Ie(x,u)),H(x,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S$e={kernelName:IS,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,o]=e,{axis:s,batchDims:i}=n,a=rt(s,r.shape)[0],l=(u,c,d)=>()=>{const f=u.shape,p=c.size,h=f.slice(0,a),m=h.length,g=f.slice(s,f.length).slice(1),y=g.length,v=Gz(0,m),b=Gz(m+1,m+1+y),x=Hz([h,[p],g]),w=H(d,x),S=H(c,[p]),k=Hz([[m],v,b]),$=pt(w,k);let C=fR($,S,u.shape[a]);const I=Cu(k);return C=pt(C,I),C};if(i===1){const u=r.shape[0],c=r.split(u,0);return{x:()=>zo(c.map((p,h)=>l(p,o.slice(h,1),t.slice(h,1))())).reshape(r.shape),indices:()=>o}}else return{x:l(r,o,t),indices:()=>o}}};function Gz(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function Hz(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k$e={kernelName:Ly,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>ht(n),b:()=>ht(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $$e={kernelName:zy,gradFunc:t=>({x:()=>be(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C$e={kernelName:By,gradFunc:t=>({x:()=>ht(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T$e={kernelName:jy,gradFunc:t=>({x:()=>ht(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _$e={kernelName:Vy,gradFunc:t=>({x:()=>ht(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I$e={kernelName:ES,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:o}=n,s=Go(r,0);return{x:()=>Or(s,t,W(t,o))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N$e={kernelName:Uy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(t,ue(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E$e={kernelName:Wy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(t,be(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A$e={kernelName:xye,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:o}=n;return{logits:()=>{const i=Lo(r);return ke(t,W(Ie(t,o,!0),i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O$e(t,e,n,r=5,o=1,s=1,i=.5){const a={x:t,y:e,dy:n},l={depthRadius:r,bias:o,alpha:s,beta:i};return U.runKernel(XO,a,l)}const P$e=V({localResponseNormalizationBackprop_:O$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R$e={kernelName:FS,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,o]=e,{depthRadius:s,bias:i,alpha:a,beta:l}=n;return{x:()=>P$e(r,o,t,s,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mK(t,e,n,r){return e.rank<n.rank&&(e=H(e,In(e.shape,r))),t.rank<n.rank&&(t=H(t,In(t.shape,r))),{x:()=>W(t,be(Si(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qz={kernelName:MS,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:o}=r,s=e[0],i=e[1],a=rt(o,s.shape),l=mK(t,i,s,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D$e={kernelName:Gy,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>W(t,be(Tu(n,r),"float32")),b:()=>W(t,be(rg(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F$e(t,e,n,r,o,s,i){const a=P(t,"dy","maxPool3dGrad"),l=P(e,"input","maxPool3dGrad"),u=P(n,"output","maxPool3dGrad");let c=a,d=l,f=u,p=!1;l.rank===4&&(p=!0,c=H(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),d=H(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),f=H(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),A(c.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`),A(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),A(f.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${f.rank}.`),eo("maxPool3dGrad",s,i);const h={dy:c,input:d,output:f},m={filterSize:r,strides:o,pad:s,dimRoundingMode:i},g=U.runKernel(ZO,h,m);return p?H(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const M$e=V({maxPool3dGrad_:F$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L$e={kernelName:zS,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,o]=e,{filterSize:s,strides:i,pad:a,dimRoundingMode:l}=n;return{x:()=>M$e(t,r,o,s,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z$e(t,e,n,r,o,s,i){const a=P(t,"dy","maxPoolGrad"),l=P(e,"input","maxPoolGrad"),u=P(n,"output","maxPoolGrad");A(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),A(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),A(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),eo("maxPoolGrad",s,i);const c={dy:a,input:l,output:u},d={filterSize:r,strides:o,pad:s,dimRoundingMode:i};return U.runKernel(YO,c,d)}const B$e=V({maxPoolGrad_:z$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j$e={kernelName:LS,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,o]=e,{filterSize:s,strides:i,pad:a}=n;return{x:()=>B$e(t,r,o,s,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V$e={kernelName:BS,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:o}=n,s=rt(o,r.shape),a=ar(r.shape,s)[1],l=ne(a);return{x:()=>{const c=r.shape.slice();s.forEach(p=>{c[p]=1});const d=H(t,c);return Oe(W(d,_o(r.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W$e={kernelName:jS,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:o}=r,[s,i]=e,a=rt(o,s.shape),l=mK(t,i,s,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U$e={kernelName:Hy,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>W(t,be(Jc(n,r),"float32")),b:()=>W(t,be(Go(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G$e={kernelName:VS,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:o}=n,s=o.map(i=>i[0]);return{x:()=>ft(t,s,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H$e={kernelName:qy,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=Xe(n.shape,r.shape);return{a:()=>{const a=Kn(n.shape,o);return a.length>0?H(Ie(t,a),n.shape):t},b:()=>{const a=W(t,tn(x0(Oe(n,r)))),l=Kn(r.shape,o);return l.length>0?H(Ie(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q$e={kernelName:Ky,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=Xe(n.shape,r.shape);return{a:()=>{const a=W(t,be(r,"float32")),l=Kn(n.shape,o);return l.length>0?H(Ie(a,l),n.shape):a},b:()=>{const a=W(t,be(n,"float32")),l=Kn(r.shape,o);return l.length>0?H(Ie(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K$e={kernelName:WS,gradFunc:t=>({x:()=>tn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X$e={kernelName:HS,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>Bn(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y$e={kernelName:GS,gradFunc:t=>({x:()=>ht(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z$e={kernelName:qS,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return Ks(t,r).map(s=>()=>s)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kz={kernelName:KS,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:o}=n,s=o.map(i=>i[0]);return{x:()=>ft(t,s,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q$e={kernelName:Xy,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,o]=e,s=n,i=r,a=Xe(s.shape,i.shape);return{a:()=>{const c=be(i,"float32");let d=W(t,W(c,Ja(s,ke(c,Me(1)))));const f=Kn(s.shape,a);return f.length>0&&(d=Ie(d,f)),H(d,s.shape)},b:()=>{const c=Go(s,0),d=Or(c,as(s),ht(s));let f=W(t,W(o,d));const p=Kn(i.shape,a);return p.length>0&&(f=Ie(f,p)),H(f,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J$e={kernelName:XS,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,o=Go(n,0);return{x:()=>Or(o,t,W(t,r)),alpha:()=>{let s=Or(o,ht(t),W(t,n));const i=Kn(r.shape,t.shape);return i.length>0&&(s=Ie(s,i)),H(s,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eCe(t,e,n){const r=t.shape.slice();r[n]=1;const o=H(e,r),s=Vx(t,n,!0,!1),i=Vx(t,n,!0,!0),a=W(s,i);return W(o,a)}function tCe(t,e,n){const r=t.shape.length,o=r-n.length,s=gn(n,r);let i=t;s!=null&&(i=pt(t,s));const a=i.shape.slice(),u=a.splice(r-n.length,n.length).reduce((f,p)=>f*p,1);a.push(u);const c=i.reshape(a);let d=eCe(c,e,o);if(d=d.reshape(i.shape),s!=null){const f=Cu(s);d=pt(d,f)}return d}const nCe={kernelName:YS,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:o}=n;let s=[];return o==null?s=r.shape.map((i,a)=>a):typeof o=="number"?s=[o]:s=o,{x:()=>tCe(r,t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rCe={kernelName:Ay,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=Xe(n.shape,r.shape);return{a:()=>{const a=Oe(t,be(r,"float32")),l=Kn(n.shape,o);return l.length>0?H(Ie(a,l),n.shape):a},b:()=>{let a=W(t,be(n,"float32"));const l=Kn(r.shape,o);l.length>0&&(a=H(Ie(a,l),r.shape));const u=Wt(r);return tn(Oe(a,be(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oCe={kernelName:Yy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(t,tn(Wt(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sCe={kernelName:Qy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=W(Jc(n,6),Pp(n));return{x:()=>W(t,be(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iCe={kernelName:Zy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(t,be(Pp(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aCe={kernelName:ZS,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>H(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lCe={kernelName:JS,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,o={dy:t,images:r};return{images:()=>U.runKernel(uP,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uCe={kernelName:QS,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,o={dy:t,images:r};return{images:()=>U.runKernel(lP,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cCe={kernelName:ek,gradFunc:(t,e,n)=>{const{dims:r}=n,o=rt(r,t.shape);return{x:()=>qs(t,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dCe={kernelName:Jy,gradFunc:t=>({x:()=>ht(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fCe={kernelName:e0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>tn(Oe(t,W(Ja(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pCe={kernelName:tk,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>be(ht(n),"float32"),t:()=>W(t,be(n,t.dtype)),e:()=>W(t,be(bk(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hCe={kernelName:t0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Go(n,Me(0)),o=Me(Fk),s=Me(Mk),i=W(t,s),a=W(W(t,o),Lo(be(n,"float32")));return Or(r,i,a)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mCe={kernelName:s0,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(t,W(n,ke(Me(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gCe={kernelName:o0,gradFunc:t=>({x:()=>ht(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yCe={kernelName:n0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(hk(be(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vCe={kernelName:r0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(MP(be(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bCe={kernelName:nk,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:o,size:s}=n,i=r.shape,[a,l]=Rk(r,o,s),u=[];for(let c=0;c<t.rank;c++)u.push([a[c],i[c]-a[c]-l[c]]);return{x:()=>_u(t,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xCe={kernelName:ik,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:o}=n,s=!0,i=W(t,r);return{logits:()=>ke(i,W(Ie(i,[o],s),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wCe={kernelName:i0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(t,oa(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xz={kernelName:ok,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:o}=n;return{x:()=>pk(t,r,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yz={kernelName:sk,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>Dn(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SCe={kernelName:a0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(t,W(vr(be(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kCe={kernelName:vP,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(t,W(be(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ce={kernelName:l0,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=Me(2);return{a:()=>W(t,W(o,ke(n,r))),b:()=>W(t,W(o,ke(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CCe={kernelName:p0,gradFunc:t=>({x:()=>ht(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TCe={kernelName:u0,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=Xe(n.shape,r.shape);return{a:()=>{let a=t;const l=Kn(n.shape,o);return l.length>0&&(a=Ie(a,l)),H(a,n.shape)},b:()=>{let a=t;const l=Kn(r.shape,o);return l.length>0&&(a=Ie(a,l)),H(tn(a),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ce={kernelName:rk,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,o=r.shape.slice(),{axis:s}=n;rt(s,r.shape).forEach(u=>{o[u]=1});const a=H(t,o),l=W(a,_o(r.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ICe={kernelName:c0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(t,Wt(hk(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NCe={kernelName:d0,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(ke(Me(1),Wt(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ECe={kernelName:f0,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:o}=n;return{x:()=>{let i=ht(r);if(r.rank===1)for(let a=0;a<o[0];++a)i=ue(i,ft(t,[a*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)i=ue(i,ft(t,[a*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)for(let u=0;u<o[2];++u)i=ue(i,ft(t,[a*r.shape[0],l*r.shape[1],u*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)for(let u=0;u<o[2];++u)for(let c=0;c<o[3];++c)i=ue(i,ft(t,[a*r.shape[0],l*r.shape[1],u*r.shape[2],c*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return i}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ACe={kernelName:cf,gradFunc:(t,e,n)=>{const r=n,{perm:o}=r,s=Cu(o);return{x:()=>pt(t,s)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OCe={kernelName:lk,gradFunc:(t,e,n)=>{const r=n,{axis:o}=r;return{value:()=>zo(t,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PCe={kernelName:uk,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>RCe(t,n)}}};function RCe(t,e){const n=pl(e,ht(e)),r=w0(t,n);let o=Tu(e,Me(0,"int32"));const s=r.rank-o.rank;for(let a=0;a<s;++a)o=Hr(o,a+1);o=da(o,_o(r.shape,"bool"));const i=ht(r);return Or(o,r,i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DCe={kernelName:ck,gradFunc:t=>({x:()=>ht(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FCe=[hK,Pke,Rke,Dke,Fke,Mke,Lke,zke,Bke,jke,Vke,Wke,Hke,Xke,Yke,Zke,Qke,Jke,e$e,t$e,n$e,r$e,s$e,o$e,l$e,u$e,c$e,d$e,f$e,p$e,rCe,h$e,m$e,g$e,y$e,v$e,x$e,b$e,w$e,S$e,k$e,$$e,C$e,T$e,_$e,I$e,N$e,E$e,A$e,R$e,qz,qz,D$e,L$e,j$e,V$e,W$e,U$e,G$e,H$e,q$e,K$e,X$e,Y$e,Z$e,Kz,Kz,Q$e,J$e,nCe,oCe,sCe,iCe,aCe,lCe,uCe,cCe,dCe,fCe,pCe,hCe,mCe,gCe,yCe,vCe,bCe,xCe,wCe,Xz,Xz,Yz,Yz,SCe,$Ce,kCe,CCe,TCe,_Ce,ICe,NCe,ECe,ACe,OCe,PCe,DCe];for(const t of FCe)kye(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.abs=function(){return this.throwIfDisposed(),Mn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.acos=function(){return this.throwIfDisposed(),v9(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.acosh=function(){return this.throwIfDisposed(),b9(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.add=function(t){return this.throwIfDisposed(),ue(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.all=function(t,e){return this.throwIfDisposed(),OP(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.any=function(t,e){return this.throwIfDisposed(),jx(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.argMax=function(t){return this.throwIfDisposed(),jf(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.argMin=function(t){return this.throwIfDisposed(),x9(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.asScalar=function(){return this.throwIfDisposed(),A(this.size===1,()=>"The array must have only 1 element."),H(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.asType=function(t){return this.throwIfDisposed(),be(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.as1D=function(){return this.throwIfDisposed(),H(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.as2D=function(t,e){return this.throwIfDisposed(),H(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),H(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),H(this,[t,e,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.as5D=function(t,e,n,r,o){return this.throwIfDisposed(),H(this,[t,e,n,r,o])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.asin=function(){return this.throwIfDisposed(),w9(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.asinh=function(){return this.throwIfDisposed(),S9(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.atan=function(){return this.throwIfDisposed(),k9(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.atan2=function(t){return this.throwIfDisposed(),$9(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.atanh=function(){return this.throwIfDisposed(),C9(this)};re().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),fk(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),pk(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.batchNorm=function(t,e,n,r,o){return this.throwIfDisposed(),g0(this,t,e,n,r,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.broadcastTo=function(t){return this.throwIfDisposed(),pf(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.cast=function(t){return this.throwIfDisposed(),be(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.ceil=function(){return this.throwIfDisposed(),A9(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),Mo(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof fn&&(t=[t]),Dn([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.conv1d=function(t,e,n,r,o,s){return this.throwIfDisposed(),RP(this,t,e,n,r,o,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.conv2dTranspose=function(t,e,n,r,o){return this.throwIfDisposed(),FP(this,t,e,n,r,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.conv2d=function(t,e,n,r,o,s){return this.throwIfDisposed(),lu(this,t,e,n,r,o,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.cos=function(){return this.throwIfDisposed(),hk(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.cosh=function(){return this.throwIfDisposed(),MP(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),Vx(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),LP(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),z9(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.depthwiseConv2d=function(t,e,n,r,o,s){return this.throwIfDisposed(),y0(this,t,e,n,r,o,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.dilation2d=function(t,e,n,r,o){return this.throwIfDisposed(),B9(this,t,e,n,r,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.divNoNan=function(t){return this.throwIfDisposed(),j9(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.div=function(t){return this.throwIfDisposed(),Oe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.dot=function(t){return this.throwIfDisposed(),V9(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.elu=function(){return this.throwIfDisposed(),v0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.equal=function(t){return this.throwIfDisposed(),Si(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.erf=function(){return this.throwIfDisposed(),zP(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),G9(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.exp=function(){return this.throwIfDisposed(),Lo(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.expandDims=function(t){return this.throwIfDisposed(),Hr(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.expm1=function(){return this.throwIfDisposed(),H9(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.fft=function(){return this.throwIfDisposed(),Ik(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.flatten=function(){return this.throwIfDisposed(),H(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.floor=function(){return this.throwIfDisposed(),x0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.floorDiv=function(t){return this.throwIfDisposed(),AP(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.gather=function(t,e,n){return this.throwIfDisposed(),w0(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.greaterEqual=function(t){return this.throwIfDisposed(),Tu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.greater=function(t){return this.throwIfDisposed(),Go(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.ifft=function(){return this.throwIfDisposed(),ig(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.irfft=function(){return this.throwIfDisposed(),lR(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.isFinite=function(){return this.throwIfDisposed(),q9(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.isInf=function(){return this.throwIfDisposed(),K9(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.isNaN=function(){return this.throwIfDisposed(),X9(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.leakyRelu=function(t){return this.throwIfDisposed(),gk(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.lessEqual=function(t){return this.throwIfDisposed(),Jc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.less=function(t){return this.throwIfDisposed(),rg(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),Y9(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.logSigmoid=function(){return this.throwIfDisposed(),Z9(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.logSoftmax=function(t){return this.throwIfDisposed(),VP(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),vk(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.log=function(){return this.throwIfDisposed(),as(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.log1p=function(){return this.throwIfDisposed(),yk(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.logicalAnd=function(t){return this.throwIfDisposed(),da(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.logicalNot=function(){return this.throwIfDisposed(),bk(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.logicalOr=function(t){return this.throwIfDisposed(),WP(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.logicalXor=function(t){return this.throwIfDisposed(),Q9(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),tt(this,t,e,n)};re().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),xk(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.max=function(t,e){return this.throwIfDisposed(),Bs(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.maximum=function(t){return this.throwIfDisposed(),pl(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.mean=function(t,e){return this.throwIfDisposed(),bn(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.min=function(t,e){return this.throwIfDisposed(),ng(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.minimum=function(t){return this.throwIfDisposed(),Mc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),eq(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.mod=function(t){return this.throwIfDisposed(),tq(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.mul=function(t){return this.throwIfDisposed(),W(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.neg=function(){return this.throwIfDisposed(),tn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.norm=function(t,e,n){return this.throwIfDisposed(),b0(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.notEqual=function(t){return this.throwIfDisposed(),Wf(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),GP(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.onesLike=function(){return this.throwIfDisposed(),ls(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.pad=function(t,e){return this.throwIfDisposed(),_u(this,t,e)};re().prototype.pool=function(t,e,n,r,o,s){return this.throwIfDisposed(),nq(this,t,e,n,r,o,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.pow=function(t){return this.throwIfDisposed(),Ja(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.prelu=function(t){return this.throwIfDisposed(),kk(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.prod=function(t,e){return this.throwIfDisposed(),rq(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.reciprocal=function(){return this.throwIfDisposed(),sq(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.relu=function(){return this.throwIfDisposed(),ma(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.relu6=function(){return this.throwIfDisposed(),eR(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.reshapeAs=function(t){return this.throwIfDisposed(),H(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.reshape=function(t){return this.throwIfDisposed(),H(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),wq(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),Sq(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.reverse=function(t){return this.throwIfDisposed(),qs(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.rfft=function(){return this.throwIfDisposed(),Nk(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.round=function(){return this.throwIfDisposed(),tR(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.rsqrt=function(){return this.throwIfDisposed(),nR(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.selu=function(){return this.throwIfDisposed(),rR(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.separableConv2d=function(t,e,n,r,o,s){return this.throwIfDisposed(),oR(this,t,e,n,r,o,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.sigmoid=function(){return this.throwIfDisposed(),oa(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.sign=function(){return this.throwIfDisposed(),iq(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.sin=function(){return this.throwIfDisposed(),sR(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.sinh=function(){return this.throwIfDisposed(),iR(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.slice=function(t,e){return this.throwIfDisposed(),ft(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.softmax=function(t){return this.throwIfDisposed(),_k(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.softplus=function(){return this.throwIfDisposed(),Op(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),Sk(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.split=function(t,e){return this.throwIfDisposed(),Ro(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.sqrt=function(){return this.throwIfDisposed(),vr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.square=function(){return this.throwIfDisposed(),Wt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.squaredDifference=function(t){return this.throwIfDisposed(),uR(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.squeeze=function(t){return this.throwIfDisposed(),nd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof fn?[this,t]:[this,...t];return zo(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.step=function(t){return this.throwIfDisposed(),Pp(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.stridedSlice=function(t,e,n,r,o,s,i,a){return this.throwIfDisposed(),aq(this,t,e,n,r,o,s,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.sub=function(t){return this.throwIfDisposed(),ke(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.sum=function(t,e){return this.throwIfDisposed(),Ie(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.tan=function(){return this.throwIfDisposed(),lq(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.tanh=function(){return this.throwIfDisposed(),Fc(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.tile=function(t){return this.throwIfDisposed(),Os(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.toBool=function(){return this.throwIfDisposed(),be(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.toFloat=function(){return this.throwIfDisposed(),be(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.toInt=function(){return this.throwIfDisposed(),be(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.topk=function(t,e){return this.throwIfDisposed(),cq(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.transpose=function(t){return this.throwIfDisposed(),pt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.unique=function(t){return this.throwIfDisposed(),dq(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),fR(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.unstack=function(t){return this.throwIfDisposed(),Ks(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.where=function(t,e){return this.throwIfDisposed(),Or(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */re().prototype.zerosLike=function(){return this.throwIfDisposed(),ht(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class zi extends Error{constructor(e){super(e),Object.setPrototypeOf(this,zi.prototype)}}class Ps extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Ps.prototype)}}class q extends Error{constructor(e){super(e),Object.setPrototypeOf(this,q.prototype)}}class Ze extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Ze.prototype)}}class XR extends Error{constructor(e){super(e),Object.setPrototypeOf(this,XR.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class gK{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function zc(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function Bi(t,e){if(!t)throw new XR(e)}function Zz(t,e){let n=0;for(const r of t)r===e&&n++;return n}function so(t){return t.length===1?t[0]:t}function Nt(t){return Array.isArray(t)?t:[t]}function ka(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function Qu(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let gs={};function YR(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function OI(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>OI(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:OI(r))}}}function C0(t,e={},n={},r="object",o=!1){if(typeof t=="string"){const s=t;let i;if(s in n)i=n[s];else if(s in gs)i=gs[s];else if(i=e[s],i==null)throw new q(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return i}else{const s=t;if(s.className==null||s.config==null)throw new q(`${r}: Improper config format: ${JSON.stringify(s)}.
'className' and 'config' must set.`);const i=s.className;let a,l;if(i in n?[a,l]=n[i]:i in gs?[a,l]=gs.className:i in e&&([a,l]=e[i]),a==null)throw new q(`Unknown ${r}: ${i}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const u={};for(const p of Object.keys(gs))u[p]=gs[p];for(const p of Object.keys(n))u[p]=n[p];const c=s.config;c.customObjects=u;const d=Object.assign({},gs);for(const p of Object.keys(n))gs[p]=n[p];OI(s.config);const f=l(a,s.config,n,o);return gs=Object.assign({},d),f}else{const u=Object.assign({},gs);for(const d of Object.keys(n))gs[d]=n[d];const c=new a(s.config);return gs=Object.assign({},u),c}}}function MCe(t,e){return t<e?-1:t>e?1:0}function Dv(t,e){return-1*MCe(t,e)}function ql(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function LCe(t){if(t==null)throw new q(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function od(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new q(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function ZR(t,e,n=0,r=1/0){return Bi(n>=0),Bi(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(o=>typeof o===e)}function or(t,e){Array.isArray(t)?(A(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>or(n,`element ${r+1} of ${e}`))):A(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${yK(t)}.`)}function yK(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>yK(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function zCe(t,e,n){let r=n!=null?n():oo(),o;return(...i)=>{const a=n!=null?n():oo();return a-r<e||(r=a,o=t(...i)),o}}function vK(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let BCe=0;function bK(){return BCe++}const Fv={};function Lk(t=""){return t in Fv||(Fv[t]=0),Fv[t]+=1,t+Fv[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const jCe=["channelsFirst","channelsLast"],VCe=["nearest","bilinear"],WCe=["valid","same","causal"],UCe=["max","avg"],GCe=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const bd=new Map;function En(t){od(jCe,"DataFormat",t)}function HCe(t){od(VCe,"InterpolationFormat",t)}function ps(t){od(WCe,"PaddingMode",t)}function xK(t){od(UCe,"PoolMode",t)}const hm=[],Qz="/";function vc(t,e){hm.push(t);try{const n=e();return hm.pop(),n}catch(n){throw hm.pop(),n}}function qCe(){return hm.length===0?"":hm.join(Qz)+Qz}function wK(t){if(!kK(t))throw new Error("Not a valid tensor name: '"+t+"'");return qCe()+t}function SK(t){if(!kK(t))throw new Error("Not a valid tensor name: '"+t+"'");bd.has(t)||bd.set(t,0);const e=bd.get(t);if(bd.set(t,bd.get(t)+1),e>0){const n=`${t}_${e}`;return bd.set(n,1),n}else return t}const KCe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function kK(t){return!!t.match(KCe)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function XCe(t){return t===parseInt(t.toString(),10)}function Kl(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let o=e;o<n;++o)r*=t[o];return r}function Gf(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function uu(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function ki(t,e){if(e<t)throw new q(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let eT;function Vn(){return eT==null&&(eT=n9().epsilon()),eT}function $i(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ia(t,e){return be(t,e)}function T0(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),H(t,n)}function YCe(t,e){return Z(()=>{if(t.shape.length!==2)throw new q(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=T0(t,1);return PI(n,[1,e,1])})}function ZCe(t){const e=[Kl(t.shape)];return H(t,e)}function QCe(t){if(t.rank<=1)throw new q(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],Kl(t.shape,1)];return H(t,e)}function bc(t,e,n){return Z(()=>{switch(t.rank){case 1:return Ck(t,e,n);case 2:return aR(t,[e,0],[n,t.shape[1]]);case 3:return Tk(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return sg(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return ft(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return ft(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new q(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function tT(t,e,n){return Z(()=>{switch(t.rank){case 1:return Ck(t,e,n);case 2:return aR(t,[0,e],[t.shape[0],n]);case 3:return Tk(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return sg(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new q(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function Mv(t,e,n,r){return Z(()=>{switch(t.rank){case 1:return Ck(t,e,n);case 2:switch(r){case 1:return bc(t,e,n);case 2:return tT(t,e,n);default:throw new q(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return bc(t,e,n);case 2:return Tk(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return tT(t,e,n);default:throw new q(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return bc(t,e,n);case 2:return sg(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return sg(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return tT(t,e,n);default:throw new q(`The axis is not within the rank of the tensor ${r}`)}default:throw new q(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function QR(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),Dn(t,e)}function Jz(t,e){switch(t.rank){case 1:return O9([t,e]);case 2:return P9([t,e],0);case 3:return R9([t,e],0);case 4:return D9([t,e],0);default:throw new q(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function PI(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new q(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return Os(t,e)}function zk(t,e=0,n=1,r,o){return JP(t,e,n,r,o)}function aa(t,e,n,r){if(t.rank<2||e.rank<2)throw new Ze(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const o=t.shape.slice(-1)[0],s=e.shape.slice(-2)[0];if(o!==s)throw new Ze(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return II({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?RI(t.rank,r,$i()):null,activation:n});{const o=t.shape.slice(),s=o.pop();t=H(t,[-1,s]);const i=e.shape.slice(),a=i.pop(),l=i.pop(),u=[...i,a],c=Array.from({length:e.rank},(h,m)=>m===0?e.rank-2:m<=e.rank-2?m-1:m);e=H(pt(e,c),[l,-1]);const d=[...o,...u];return H(II({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?RI(t.rank,r,$i()):null,activation:n}),d)}}function $K(t,e,n){return Z(()=>(Array.isArray(e)?e=Nr(e,"int32"):e=be(e,"int32"),w0(t,e,n)))}function _0(t){return W(t,t)}function RI(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new q(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?H(e,[1,r[0],1,1,1]):H(e,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?H(e,[1,1,1,1,r[0]]):H(e,[1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?H(e,[1,r[0],1,1]):H(e,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?H(e,[1,1,1,r[0]]):H(e,[1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?H(e,[1,r[0],1]):H(e,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?H(e,[1,1,r[0]]):H(e,[1].concat(r))}else if(t<3)return e;throw new q(`Unsupported input rank by biasAdd: ${e.rank}`)}function Ii(t,e,n){return Z(()=>(n==null&&(n=$i()),En(n),ue(t,RI(t.rank,e,n))))}function JCe(t,e=1){if(e!==1)throw new Ze(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return v0(t)}function eTe(t){return Z(()=>Oe(t,ue(Mn(t),1)))}function CK(t,e,n,r){return Z(()=>hq(t,e,n,r))}function tTe(t){return Z(()=>{const e=ue(.5,W(.2,t));return Mo(e,0,1)})}function I0(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const nTe=["fanIn","fanOut","fanAvg"],rTe=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function oTe(t){od(nTe,"FanMode",t)}function sTe(t){od(rTe,"Distribution",t)}class Zs extends Dp{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class TK extends Zs{apply(e,n){return Bn(e,n)}}TK.className="Zeros";ce(TK);class JR extends Zs{apply(e,n){return _o(e,n)}}JR.className="Ones";ce(JR);class _K extends Zs{constructor(e){if(super(),typeof e!="object")throw new q(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new q(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return Z(()=>W(Me(this.value),_o(e,n)))}getConfig(){return{value:this.value}}}_K.className="Constant";ce(_K);class IK extends Zs{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return td(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}IK.className="RandomUniform";ce(IK);class NK extends Zs{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Ze(`randomNormal does not support dType ${n}.`);return zk(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}NK.className="RandomNormal";ce(NK);class EK extends Zs{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Ze(`truncatedNormal does not support dType ${n}.`);return dR(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}EK.className="TruncatedNormal";ce(EK);class AK extends Zs{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return Z(()=>{if(e.length!==2||e[0]!==e[1])throw new q("Identity matrix initializer can only be used for 2D square matrices.");return W(this.gain,jP(e[0]))})}getConfig(){return{gain:this.gain}}}AK.className="Identity";ce(AK);function iTe(t,e="channelsLast"){let n,r;if(En(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const o=Kl(t,2);n=t[1]*o,r=t[0]*o}else if(e==="channelsLast"){const o=Kl(t,0,t.length-2);n=t[t.length-2]*o,r=t[t.length-1]*o}}else{const o=Kl(t);n=Math.sqrt(o),r=Math.sqrt(o)}return[n,r]}class Bo extends Zs{constructor(e){if(super(),e.scale<0)throw new q(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,oTe(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,sTe(this.distribution),this.seed=e.seed}apply(e,n){const r=iTe(e),o=r[0],s=r[1];let i=this.scale;if(this.mode==="fanIn"?i/=Math.max(1,o):this.mode==="fanOut"?i/=Math.max(1,s):i/=Math.max(1,(o+s)/2),this.distribution==="normal"){const a=Math.sqrt(i);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Ze(`${this.getClassName()} does not support dType ${n}.`);return dR(e,0,a,n,this.seed)}else{const a=Math.sqrt(3*i);return td(e,-a,a,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}Bo.className="VarianceScaling";ce(Bo);class eD extends Bo{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Bo.className}}eD.className="GlorotUniform";ce(eD);class tD extends Bo{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Bo.className}}tD.className="GlorotNormal";ce(tD);class nD extends Bo{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Bo.className}}nD.className="HeNormal";ce(nD);class rD extends Bo{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Bo.className}}rD.className="HeUniform";ce(rD);class oD extends Bo{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Bo.className}}oD.className="LeCunNormal";ce(oD);class sD extends Bo{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Bo.className}}sD.className="LeCunUniform";ce(sD);class OK extends Zs{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return Z(()=>{if(e.length<2)throw new Ze("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=ne(e.slice(0,-1)),o=e[e.length-1],s=r*o;s>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${s}) elements: Slowness may result.`);const i=[Math.max(o,r),Math.min(o,r)],a=zk(i,0,1,n,this.seed),l=xR.qr(a,!1);let u=l[0];const d=l[1].flatten().stridedSlice([0],[Math.min(o,r)*Math.min(o,r)],[Math.min(o,r)+1]);return u=W(u,d.sign()),r<o&&(u=u.transpose()),W(Me(this.gain),u.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}OK.className="Orthogonal";ce(OK);const eB={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function tB(t,e={}){return C0(t,_s.getMap().classNameMap,e,"initializer")}function hn(t){return YR(t)}function ln(t){if(typeof t=="string"){const e=t in eB?eB[t]:t;if(e==="GlorotNormal")return new tD;if(e==="GlorotUniform")return new eD;if(e==="HeNormal")return new nD;if(e==="HeUniform")return new rD;if(e==="LeCunNormal")return new oD;if(e==="LeCunUniform")return new sD;{const n={};return n.className=e,n.config={},tB(n)}}else return t instanceof Zs?t:tB(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function DI(t){return Array.isArray(t)&&Array.isArray(t[0])}function Wx(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function je(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new q(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function bt(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new q(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ux(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,o)=>r*o);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const nB="Variable";class aTe{constructor(e,n="float32",r=nB,o=!0,s=null){this.dtype=n??"float32",this.shape=e.shape,this.id=bK(),r=r??nB,this.originalName=wK(r),this.name=SK(this.originalName),this.trainable_=o,this.constraint=s,this.val=fq(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),lTe(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function lTe(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function FI(t){return t.map(e=>e.read())}function iD(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Wn{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class fa{constructor(e,n,r,o,s,i,a){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=o,this.callArgs=s,this.outputTensorIndex=a,this.id=bK(),i!=null&&(this.originalName=wK(i),this.name=SK(this.originalName)),this.rank=n.length}}let uTe=0,Bk=class{constructor(e,n){this.callArgs=n,this.id=uTe++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},cTe=0,ot=class extends Dp{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=cTe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=ka(r)+"_"+Lk(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let s=null;e.batchSize!=null&&(s=e.batchSize),r=[s].concat(e.inputShape)}this.batchInputShape=r;let o=e.dtype;o==null&&(o=e.inputDType),o==null&&(o="float32"),this.dtype=o}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new Ps(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new q(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return so(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return so(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new zi(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new zi(`Layer ${this.name} is not connected, no input to return.`);return so(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new zi(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new zi(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return so(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=Nt(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=Nt(this.inputSpec);if(n.length!==r.length)throw new q(`Layer ${this.name} expects ${r.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let o=0;o<n.length;o++){const s=n[o],i=r[o];if(i==null)continue;const a=s.rank;if(i.ndim!=null&&a!==i.ndim)throw new q(`Input ${o} is incompatible with layer ${this.name}: expected ndim=${i.ndim}, found ndim=${a}`);if(i.maxNDim!=null&&a>i.maxNDim)throw new q(`Input ${o} is incompatible with layer ${this.name}: expected max_ndim=${i.maxNDim}, found ndim=${a}`);if(i.minNDim!=null&&a<i.minNDim)throw new q(`Input ${o} is incompatible with layer ${this.name}: expected min_ndim=${i.minNDim}, found ndim=${a}.`);if(i.dtype!=null&&s.dtype!==i.dtype)throw new q(`Input ${o} is incompatible with layer ${this.name} : expected dtype=${i.dtype}, found dtype=${s.dtype}.`);if(i.axes){const l=s.shape;for(const u in i.axes){const c=Number(u),d=i.axes[u],f=c>=0?l[c]:l[l.length+c];if(d!=null&&[d,null].indexOf(f)===-1)throw new q(`Input ${o} is incompatible with layer ${this.name}: expected axis ${c} of input shape to have value ${d} but got shape ${l}.`)}}if(i.shape!=null)for(let l=0;l<i.shape.length;++l){const u=i.shape[l],c=s.shape[l];if(u!=null&&c!=null&&u!==c)throw new q(`Input ${o} is incompatible with layer ${this.name}: expected shape=${i.shape}, found shape=${s.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=Nt(e),o=pTe(e),s=hTe(e);if(o===s)throw new q("Arguments to apply() must be all SymbolicTensors or all Tensors");return vc(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const i=[];for(const a of Nt(e))i.push(a.shape);this.build(so(i)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&s&&(this._refCount=1)}if(this.assertInputCompatibility(e),s){let i=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,i);const a=Nt(i),l=[];for(let u of a)r.indexOf(u)!==-1&&(u=u.clone()),l.push(u);if(i=so(l),this.activityRegularizer!=null)throw new Ze("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return i}else{const i=dTe(e),a=this.computeOutputShape(i);let l;const u=fTe(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?i[0]:i),a!=null&&a.length>0&&Array.isArray(a[0])?l=a.map((c,d)=>new fa(u,c,this,Nt(e),n,this.name,d)):l=new fa(u,a,this,Nt(e),n,this.name),this.addInboundNode(e,l,null,null,i,a,n),this._refCount++,this.activityRegularizer!=null)throw new Ze("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,o)=>{r!=null&&e[o]!=null&&e[o]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new zi(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new zi(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Ps(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return Ux(this.weights)}build(e){this.built=!0}getWeights(e=!1){return FI(e?this.trainableWeights:this.weights)}setWeights(e){Z(()=>{const n=this.weights;if(n.length!==e.length)throw new q(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],o=FI(n);for(let s=0;s<o.length;++s){const i=o[s],a=n[s],l=e[s];if(!ct(i.shape,l.shape))throw new q(`Layer weight shape ${i.shape} not compatible with provided weight shape ${l.shape}`);r.push([a,l])}iD(r)})}addWeight(e,n,r,o,s,i,a,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new q(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(o=l!=null?l():ln("zeros"));const u=o.apply(n,r),c=new aTe(u,r,e,i,a);return u.dispose(),s!=null&&this.addLoss(()=>s.apply(c.read())),i==null&&(i=!0),i?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=Nt(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,r){if(!this.supportsMasking)return;const o=this.computeMask(e,r),s=Nt(n),i=Nt(o);if(s.length!==i.length)throw new Error(`${this.name} outputs ${s.length} tensors but ${s.length} masks for those tensors`);for(let a=0;a<s.length;a++)s[a].kerasMask=i[a]}addInboundNode(e,n,r,o,s,i,a=null){const l=Nt(e);n=Nt(n),r=Nt(r),o=Nt(o),s=Wx(s),i=Wx(i);const u=[],c=[],d=[];for(const f of l)u.push(f.sourceLayer),c.push(f.nodeIndex),d.push(f.tensorIndex);new Bk({outboundLayer:this,inboundLayers:u,nodeIndices:c,tensorIndices:d,inputTensors:l,outputTensors:n,inputMasks:r,outputMasks:o,inputShapes:s,outputShapes:i},a);for(let f=0;f<n.length;f++)n[f].sourceLayer=this,n[f].nodeIndex=this.inboundNodes.length-1,n[f].tensorIndex=f}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}};function dTe(t){t=Nt(t);const e=[];for(const n of t)e.push(n.shape);return so(e)}function fTe(t){return"float32"}function PK(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const o=[];for(let s=0;s<r.inboundLayers.length;s++){const i=r.inputTensors[s],a=r.inboundLayers[s],l=r.nodeIndices[s],u=PK(i,a,l);for(const c of u)o.indexOf(c)===-1&&o.push(c)}return o}}}function pTe(t){let e=!0;for(const n of Nt(t))if(!(n instanceof fa)){e=!1;break}return e}function hTe(t){let e=!0;for(const n of Nt(t))if(n instanceof fa){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class N0 extends ot{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:Lk("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new q("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new q("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new q("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const o=new fa(this.dtype,this.batchInputShape,this,[],{},this.name);o.nodeIndex=0,o.tensorIndex=0,new Bk({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[o],outputTensors:[o],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new q(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}N0.className="InputLayer";ce(N0);function mTe(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new q("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new N0({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function gTe(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return be(e,t.dtype)}catch{throw new q(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class Pl{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof Pl)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=gTe(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new q(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof fa){if(this.id2Value[e.id]==null)throw new q(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new q(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof fa){if(this.id2Value[e.id]==null)throw new q(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new q(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&nt(this.id2Mask)}}const Gx=new gK,Hx=new gK;function yTe(t){Gx!=null&&Gx.setMaxEntries(t),Hx!=null&&Hx.setMaxEntries(t)}function Hh(t,e,n,r){const o=n==null?!1:n.training,s=Array.isArray(t),i=s?t:[t],a=i.map(h=>h.name),l=[],u=e.names();for(const h of a)u.indexOf(h)!==-1?l.push(e.getValue(h)):l.push(null);const c=a.join(",")+"|"+e.names().sort().join(",");let d=Gx.get(c),f;if(d==null){const h=vTe(i,e);d=h.sorted,f=h.recipientCounts,Gx.put(c,d),Hx.put(c,f)}f={},o||Object.assign(f,Hx.get(c));const p=new Pl(e);for(let h=0;h<d.length;++h){const m=d[h],g=m.sourceLayer;if(g instanceof N0)continue;const y=[],v=[],b=[];let x=!1;for(const C of m.inputs){const I=p.getValue(C),E=p.getMask(C);y.push(I),v.push(E),E!=null&&(x=!0),o||(f[C.name]--,f[C.name]===0&&!e.hasKey(C)&&a.indexOf(C.name)===-1&&!I.isDisposed&&C.sourceLayer.stateful!==!0&&b.push(I))}x&&(n=n||{},n.mask=v[0]);const w=Nt(g.apply(y,n));let S=null;g.supportsMasking&&(S=g.computeMask(y,v));const k=xTe(m),$=Array.isArray(k)?k:[k];for(let C=0;C<$.length;++C){p.hasKey($[C])||p.add($[C],w[C],Array.isArray(S)?S[0]:S);const I=a.indexOf($[C].name);I!==-1&&(l[I]=w[C])}o||nt(b)}return p.disposeMasks(),s?l:l[0]}function vTe(t,e){A(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const o=rB(t[0],e);n=o.sorted,r=o.recipientMap}else{const o=new Set;for(const s of t){const{sorted:i,recipientMap:a}=rB(s,e);for(const l of i)o.has(l.name)||(n.push(l),o.add(l.name));for(const l in a)r[l]==null&&(r[l]=new Set),a[l].forEach(u=>r[l].add(u))}}return{sorted:n,recipientCounts:bTe(r)}}function bTe(t){const e={};for(const n in t)e[n]=t[n].size;return e}function rB(t,e){const n=new Set,r=[],o={};for(const a of e.names())n.add(a);const s=[],i=[];for(s.push(t);s.length>0;){const a=s[s.length-1];if(n.has(a.name)){s.pop();continue}const l=i[i.length-1]===s.length-1;if(a.inputs.length===0||l)s.pop(),r.push(a),n.add(a.name),l&&i.pop();else{i.push(s.length-1);for(const u of a.inputs)o[u.name]==null&&(o[u.name]=new Set),o[u.name].add(a.name),!n.has(u.name)&&s.push(u)}}return{sorted:r,recipientMap:o}}function xTe(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const o of t.sourceLayer.inboundNodes[r].outputTensors)if(o.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wTe=J();wTe.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,yTe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function aD(t,e){return Z(()=>vr(Ie(W(t,t),e,!0)))}class E0 extends Dp{getConfig(){return{}}}class RK extends E0{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Z(()=>{const n=aD(e,this.axis),r=Mo(n,0,this.maxValue);return W(e,Oe(r,ue(Vn(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}RK.className="MaxNorm";ce(RK);class DK extends E0{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Z(()=>Oe(e,ue(Vn(),aD(e,this.axis))))}getConfig(){return{axis:this.axis}}}DK.className="UnitNorm";ce(DK);class FK extends E0{apply(e){return ma(e)}}FK.className="NonNeg";ce(FK);class MK extends E0{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Z(()=>{const n=aD(e,this.axis),r=ue(W(this.rate,Mo(n,this.minValue,this.maxValue)),W(1-this.rate,n));return W(e,Oe(r,ue(Vn(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}MK.className="MinMaxNorm";ce(MK);const oB={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Gn(t){return YR(t)}function sB(t,e={}){return C0(t,_s.getMap().classNameMap,e,"constraint")}function Hn(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in oB?oB[t]:t,config:{}};return sB(n)}else return t instanceof E0?t:sB(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function zu(t){if(t==null)return;const e=[],n=[],r=[];for(const o in t){const s=t[o];if(typeof s!="number"){const i=s;e.push(i.data()),n.push(o),r.push(i)}}if(e.length>0){const o=await Promise.all(e);for(let s=0;s<o.length;++s)t[n[s]]=o[s][0];nt(r)}}function LK(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var iB;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(iB||(iB={}));const STe=125;class ag{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class kTe{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class $Te extends ag{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const o in n){const s=n[o];if(typeof s=="number")this.totals.hasOwnProperty(o)||(this.totals[o]=0),this.totals[o]=this.totals[o]+s*r;else{let i;o in this.totals?i=this.totals[o]:this.totals[o]=0;const a=Z(()=>ue(this.totals[o],W(s,r)));this.totals[o]=a,i!=null&&i.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:Z(()=>{const o=W(Oe(1,this.seen),this.totals[r]);n[r]=o,this.totals[r].dispose(),rr(n[r])}))}}class CTe extends ag{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const s in this.history){const i=this.history[s];for(let a=0;a<i.length;++a)if(typeof i[a]!="number"){const l=i[a];e.push(l.data()),n.push(s),r.push(a)}}const o=await Promise.all(e);for(let s=0;s<o.length;++s)this.history[n[s]][r[s]].dispose(),this.history[n[s]][r[s]]=o[s][0]}}class TTe extends ag{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||Wq,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=STe),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");uI(this.yieldEvery)&&(this.maybeWait=zCe(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const o=[];this.yield!=null&&(await zu(r),o.push(this.yield(e,n,r))),o.push(this.nextFrameFunc()),await Promise.all(o)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await zu(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await zu(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await zu(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await zu(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):uI(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await zu(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await zu(e),await this.trainEnd(e))}}function zK(t,e){return t==null&&(t={}),t instanceof ag?[t]:Array.isArray(t)&&t[0]instanceof ag?t:Nt(t).map(r=>new TTe(r,e))}class Ss{constructor(){}static registerCallbackConstructor(e,n){A(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),Ss.checkForDuplicate(n),Ss.constructors[e]==null&&(Ss.constructors[e]=[]),Ss.constructors[e].push(n)}static checkForDuplicate(e){for(const n in Ss.constructors)Ss.constructors[+n].forEach(o=>{if(o===e)throw new q("Duplicate callback constructor.")})}static clear(){Ss.constructors={}}static createCallbacks(e){const n=[];for(const r in Ss.constructors){const o=+r;e>=o&&n.push(...Ss.constructors[o])}return n.map(r=>new r)}}Ss.constructors={};function BK(t,e,n,r,o,s,i,a,l){const u=new CTe,c=[new $Te,...Ss.createCallbacks(e)];t!=null&&c.push(...t),c.push(u);const d=new kTe(c);return d.setParams({epochs:n,initialEpoch:r,samples:o,steps:s,batchSize:i,verbose:e,doValidation:a,metrics:l}),{callbackList:d,history:u}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Va(t,e={},n=!1){return C0(t,_s.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function qx(t,e){return Z(()=>{t.dtype!=="float32"&&(t=be(t,"float32"));const n=Ie(_0(t),e,!0),r=Ap(n.shape,Vn()),o=vr(pl(n,r));return Oe(t,o)})}function jk(t,e){return Z(()=>bn(_0(ke(e,t)),-1))}function lD(t,e){return Z(()=>bn(Mn(ke(e,t)),-1))}function uD(t,e){return Z(()=>{const n=ke(t,e),r=Mo(Mn(t),Vn(),Number.MAX_VALUE),o=Mn(Oe(n,r));return W(100,bn(o,-1))})}function _Te(t,e){return Z(()=>{const n=Mo(e,Vn(),Number.MAX_VALUE),r=as(ue(1,n)),o=Mo(t,Vn(),Number.MAX_VALUE),s=as(ue(1,o));return bn(_0(ke(r,s)),-1)})}function ITe(t,e){return Z(()=>{const n=pl(0,ke(1,W(t,e)));return bn(_0(n),-1)})}function NTe(t,e){return Z(()=>{const n=pl(0,ke(1,W(t,e)));return bn(n,-1)})}function ETe(t,e){return Z(()=>{const n=Ie(W(t,e),-1),r=Bs(W(ke(1,t),e),-1);return pl(0,ue(1,ke(r,n)))})}function ATe(t,e){return Z(()=>{const n=Math.log(2),r=ke(e,t),o=ke(ue(r,Op(W(-2,r))),n);return bn(o,-1)})}function lg(t,e,n=!1){return Z(()=>{if(n)e=_k(e);else{const r=Ie(e,e.shape.length-1,!0);e=Oe(e,r)}return e=Mo(e,Vn(),1-Vn()),tn(Ie(W(be(t,"float32"),as(e)),e.shape.length-1))})}function Kx(t,e,n=!1){return Z(()=>{const r=be(x0(ZCe(t)),"int32");e=Mo(e,Vn(),1-Vn());const o=e.shape,s=H(GP(r,o[o.length-1]),o);return lg(s,e,n)})}function OTe(t,e){if(!ct(t.shape,e.shape))throw new q(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return Z(()=>{const n=ma(e),r=tn(Mn(e));return ue(ke(n,W(e,t)),yk(Lo(r)))})}function Vk(t,e){return Z(()=>{let n;return n=Mo(e,Vn(),1-Vn()),n=as(Oe(n,ke(1,n))),bn(OTe(t,n),-1)})}function PTe(t,e){return Z(()=>{const n=Mo(t,Vn(),1),r=Mo(e,Vn(),1);return Ie(W(t,as(Oe(n,r))),-1)})}function RTe(t,e){return Z(()=>{const n=as(ue(Vn(),e));return bn(ke(e,W(t,n)),-1)})}function jK(t,e){return Z(()=>{const n=qx(t,-1),r=qx(e,-1),o=W(n,r);return tn(Ie(o,-1))})}const Xx={meanSquaredError:jk,meanAbsoluteError:lD,meanAbsolutePercentageError:uD,meanSquaredLogarithmicError:_Te,squaredHinge:ITe,hinge:NTe,categoricalHinge:ETe,logcosh:ATe,categoricalCrossentropy:lg,sparseCategoricalCrossentropy:Kx,binaryCrossentropy:Vk,kullbackLeiblerDivergence:PTe,poisson:RTe,cosineProximity:jK};function nT(t){if(typeof t=="string"){if(t in Xx)return Xx[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new q(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function VK(t,e){return Z(()=>{const n=W(.5,ls(e)),r=ia(Go(e,n),t.dtype);return bn(Si(t,r),-1)})}function WK(t,e){return Z(()=>ia(Si(jf(t,-1),jf(e,-1)),"float32"))}function DTe(t,e){return Z(()=>be(Ie(da(Si(t,1),Si(e,1))),"float32"))}function FTe(t,e){return Z(()=>be(Ie(da(Si(t,0),Si(e,1))),"float32"))}function MTe(t,e){return Z(()=>{const n=DTe(t,e),r=FTe(t,e),o=ue(n,r);return be(Or(Go(o,0),Oe(n,o),0),"float32")})}function LTe(t,e){return Vk(t,e)}function zTe(t,e){return t.rank===e.rank&&(t=nd(t,[t.rank-1])),e=jf(e,-1),e.dtype!==t.dtype&&(e=be(e,t.dtype)),be(Si(t,e),"float32")}const BTe=jk,jTe=jk,VTe=lD,WTe=lD,UTe=uD,GTe=uD,UK=lg,HTe=jK,GK=Kx,Yx={binaryAccuracy:VK,categoricalAccuracy:WK,precision:MTe,categoricalCrossentropy:UK,sparseCategoricalCrossentropy:GK,mse:BTe,MSE:jTe,mae:VTe,MAE:WTe,mape:UTe,MAPE:GTe,cosine:HTe};function qTe(t){if(typeof t=="string"&&t in Yx)return Yx[t];if(typeof t!="string"&&t!=null)return t;throw new q(`Unknown metric ${t}`)}function Lv(t){if(Bi(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(Xx))if(Xx[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(Yx))if(Yx[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function KTe(t){const e={Adagrad:()=>vd.adagrad(.01),Adadelta:()=>vd.adadelta(1,.95,Vn()),Adam:()=>vd.adam(.001,.9,.999,Vn()),Adamax:()=>vd.adamax(.002,.9,.999,Vn(),0),RMSProp:()=>vd.rmsprop(.001,.9,0,Vn()),SGD:()=>vd.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new q(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const aB=1*1024*1024;function lB(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!MI(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>aB&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${aB}.`)}}function MI(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!MI(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!MI(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function XTe(t,e,n,r=console.log){const o=ZTe(t),s=["Layer (type)","Input Shape","Output shape","Param #"];o?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(c=>Math.floor(e*c)));let i;if(!o){s.push("Receives inputs"),i=[];for(const c in t.nodesByDepth)i.push(...t.nodesByDepth[c])}r("_".repeat(e)),Zx(s,n,r),r("=".repeat(e));const a=t.layers;for(let c=0;c<a.length;++c)o?QTe(a[c],n,r):JTe(a[c],n,i,r),r((c===a.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const l=YTe(t),u=Ux(t.nonTrainableWeights);r(`Total params: ${l+u}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${u}`),r("_".repeat(e))}function YTe(t){let e;return t.collectedTrainableWeights!=null?e=Ux(t.collectedTrainableWeights):e=Ux(t.trainableWeights),e}function ZTe(t){let e=!0;const n=[],r=[];for(const o in t.nodesByDepth)n.push(t.nodesByDepth[o]);for(const o of n){if(o.length>1||o.length===1&&o[0].inboundLayers.length>1){e=!1;break}r.push(...o)}if(e)for(const o of t.layers){let s=!1;for(const i of o.inboundNodes)if(r.indexOf(i)!==-1)if(s){e=!1;break}else s=!0;if(!e)break}return e}function Zx(t,e,n=console.log){let r="";for(let o=0;o<t.length;++o)o>0&&(r=r.slice(0,r.length-1)+" "),r+=t[o],r=r.slice(0,e[o]),r+=" ".repeat(e[o]-r.length);n(r)}function QTe(t,e,n){let r,o;try{o=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{o="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const s=t.name,i=t.getClassName(),a=[`${s} (${i})`,o,r,t.countParams().toString()];Zx(a,e,n)}function JTe(t,e,n,r){let o,s;try{s=t.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{s="multiple"}try{o=JSON.stringify(t.outputShape)}catch{o="multiple"}const i=[];for(const d of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(d)===-1))for(let f=0;f<d.inboundLayers.length;++f){const p=d.inboundLayers[f].name,h=d.nodeIndices[f],m=d.tensorIndices[f];i.push(`${p}[${h}][${m}]`)}const a=t.name,l=t.getClassName(),u=i.length===0?"":i[0],c=[`${a} (${l})`,s,o,t.countParams().toString(),u];Zx(c,e,r);for(let d=1;d<i.length;++d)Zx(["","","","",i[d]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function HK(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function LI(t,e){if(t===null)return null;if(typeof t=="string")return Qu(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let o=0;o<r;++o){const s=t[o];HK(e,o,s)?n.push(s):n.push(LI(s,e))}return n}else{const n={};for(const r of Object.keys(t)){const o=t[r];if(r==="name"&&typeof o=="string")n[r]=o;else{const s=Qu(r);n[s]=LI(o,s)}}return n}}function zI(t,e){if(t==null)return null;if(typeof t=="string")return ka(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let o=0;o<r;++o){const s=t[o];HK(e,o,s)?n.push(s):n.push(zI(s,e))}return n}else{const n={};for(const r of Object.keys(t)){const o=t[r],s=ka(r);(r==="name"||r==="className")&&typeof o=="string"?n[s]=o:n[s]=zI(o,r)}return n}}/** @license See the LICENSE file. */const qK="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const e_e=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class oi extends ot{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const v=this.getClassName().toLowerCase();this.name=Lk(v)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],ql(this.inputs).length!==this.inputs.length)throw new q(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(v=>v.name)}`);ql(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(v=>v.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const v of this.outputs){const b=v.sourceLayer,x=v.nodeIndex,w=v.tensorIndex;this.outputLayers.push(b),this.outputLayersNodeIndices.push(x),this.outputLayersTensorIndices.push(w)}for(const v of this.inputs){const b=v.sourceLayer,x=v.nodeIndex,w=v.tensorIndex;Bi(x===0,"input layer has >1 nodes"),Bi(w===0,"input layer has >1 tensors"),this.inputLayers.push(b),this.inputLayersNodeIndices.push(x),this.inputLayersTensorIndices.push(w)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let v=0;v<this.inputLayers.length;v++){const b=this.inputLayers[v];if(!(b instanceof N0))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${v} (0-based) originates from layer type ${b.getClassName()}.`);this.inputNames.push(b.name),this.feedInputShapes.push(b.batchInputShape),this.feedInputNames.push(b.name)}for(const v of this.outputLayers)this.outputNames.push(v.name);this.internalInputShapes=this.inputs.map(v=>v.shape),this.internalOutputShapes=this.outputs.map(v=>v.shape);const n={},r={},o={},s={},i={},a=[],l=(v,b,x,w,S,k)=>{(w==null||S==null||k==null)&&(w=v.sourceLayer,S=v.nodeIndex,k=v.tensorIndex);const $=w.inboundNodes[S];if(x.indexOf($)!==-1)throw new Ps(`The tensor ${v.name} at layer "${w.name}" is part of a cycle.`);if(b.indexOf($)!==-1)return;this.containerNodes.add(oi.nodeKey(w,S)),w.id in i||(i[w.id]=Object.keys(i).length),x.indexOf($)===-1&&x.push($);const C=$.inboundLayers.length;for(let I=0;I<C;I++){const E=$.inputTensors[I],O=$.inboundLayers[I],R=$.nodeIndices[I],z=$.tensorIndices[I];l(E,b,x,O,R,z)}for(b.push($);x.indexOf($)>=0;)x.splice(x.indexOf($),1);a.push($)},u=[],c=[];for(const v of this.outputs)l(v,u,c);const d=a.slice().reverse();for(const v of d){r[v.id]=v,v.id in n||(n[v.id]=0);let b=n[v.id];const x=o[v.outboundLayer.id]==null?0:o[v.outboundLayer.id];b=Math.max(b,x),o[v.outboundLayer.id]=b,s[v.outboundLayer.id]=v.outboundLayer,n[v.id]=b;for(let w=0;w<v.inboundLayers.length;w++){const S=v.inboundLayers[w],k=v.nodeIndices[w],$=S.inboundNodes[k],C=n[$.id]==null?0:n[$.id];n[$.id]=Math.max(b+1,C),r[$.id]=$}}const f={};for(const v in n){const b=n[v];b in f||(f[b]=[]),f[b].push(r[v])}const p={};for(const v in o){const b=o[v];b in p||(p[b]=[]),p[b].push(s[v])}let h=Object.keys(p).map(v=>parseInt(v,10)).sort(Dv);this.layers=[];for(const v of h){const b=p[v];b.sort((x,w)=>{const S=i[x.id],k=i[w.id];return S<k?-1:S>k?1:0});for(const x of b)x instanceof oi&&this.internalContainerRefs.push(x),this.layers.push(x)}this.layersByDepth=p,h=Object.keys(f).map(v=>parseInt(v,10)).sort(Dv);const m=this.inputs.slice(),g=[];for(const v of h)for(const b of f[v]){const x=b.outboundLayer;if(x!=null){for(const w of b.inputTensors)if(m.indexOf(w)===-1)throw new Ps(`Graph disconnected: cannot obtain value for tensor ${w} at layer "${x.name}". The following previous layers were accessed without issue: ${g}`);for(const w of b.outputTensors)m.push(w);g.push(x.name)}}this.nodesByDepth=f;const y=this.layers.map(v=>v.name);for(const v of y){const b=y.filter(x=>x===v).length;if(b!==1)throw new Ps(`The name "${v}" is used ${b} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(y))}this.outboundNodes=[],this.inboundNodes=[],new Bk({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(v=>null),outputMasks:this.outputs.map(v=>null),inputShapes:this.inputs.map(v=>v.shape),outputShapes:this.outputs.map(v=>v.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new q("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let o=0;const s=e_e(e);s&&this.parseWeights(e);for(const a of this.layers)for(const[l,u]of a.weights.entries()){const c=s?`${u.name.split("/").slice(0,-1).join("/")+"/"}${l}`:u.originalName;if(r[c]!=null)throw new q(`Duplicate weight name: ${c}`);r[c]=u,o++}const i=[];for(const a in e){let l=a;if(r[a]==null){const u=a.split("/");l=u.slice(0,-2).concat([u[u.length-1]]).join("/")}if(r[l]!=null)i.push([r[l],e[a]]);else if(n)throw new q(`Provided weight data has no target variable: ${a}`);delete r[l]}if(n){const a=[];for(const l in r)a.push(l);if(a.length>0)throw new q(`${a.length} of ${o} weights are not set: ${a}`)}iD(i)}parseWeights(e){for(const n in Object.keys(e)){const r=n.split("/"),o=["vars","layer_checkpoint_dependencies"],s=r.map(i=>i.startsWith("_")?i.slice(1):i).filter(i=>!o.includes(i)).join("/");s!==n&&(e[s]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${qK}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=zI(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return Z(()=>{e=Nt(e);const r=new Pl;for(let o=0;o<this.inputs.length;++o)r.add(this.inputs[o],e[o]);return Hh(this.outputs,r,n)})}computeMask(e,n){return Z(()=>{e=Nt(e);let r;return n==null?r=zc(null,e.length):r=Nt(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=Wx(e);if(n.length!==this.inputLayers.length)throw new q(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let a=0;a<n.length;a++){const l=this.inputLayers[a],u=n[a],c=l.name+"_0_0";r[c]=u}const o=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(Dv);if(o.length>1)for(const a of o){const l=this.nodesByDepth[a];for(const u of l){const c=u.outboundLayer;if(this.inputLayers.map(m=>m.id).indexOf(c.id)!==-1)continue;const d=[];for(let m=0;m<u.inboundLayers.length;m++){const g=u.inboundLayers[m],y=u.nodeIndices[m],v=u.tensorIndices[m],b=`${g.name}_${y}_${v}`,x=r[b];d.push(x)}const f=c.computeOutputShape(so(d)),p=Wx(f),h=c.inboundNodes.indexOf(u);for(let m=0;m<p.length;m++){const g=`${c.name}_${h}_${m}`;r[g]=p[m]}}}const s=[],i=[];for(let a=0;a<this.outputLayers.length;a++){const l=this.outputLayers[a],u=this.outputLayersNodeIndices[a],c=this.outputLayersTensorIndices[a],d=`${l.name}_${u}_${c}`;i.push(d)}for(let a=0;a<i.length;a++){const l=i[a];Bi(l in r),s.push(r[l])}return so(s)}runInternalGraph(e,n){n==null&&(n=zc(null,e.length));const r={};for(let l=0;l<this.inputs.length;++l){const u=this.inputs[l],c=e[l],d=n[l];r[u.id]=[c,d]}const o=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(Dv);for(const l of o){const u=this.nodesByDepth[l];for(const c of u){const d=c.outboundLayer,f=c.inputTensors,p=c.outputTensors,h=new Array;for(const m of f)m.id in r&&h.push(r[m.id]);if(h.length===f.length){let m={},g,y,v,b;if(c.callArgs!=null&&(m=c.callArgs),h.length===1){const[x,w]=h[0];m.mask==null&&(m.mask=w),v=Nt(d.call(x,m)),b=Nt(d.computeMask(x,w)),g=[x],y=[w]}else g=h.map(x=>x[0]),y=h.map(x=>x[1]),m.mask==null&&(m.mask=y),v=Nt(d.call(g,m)),b=Nt(d.computeMask(g,y));if(d.activityRegularizer)throw new Ze("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let x=0;x<p.length;++x){const w=p[x],S=v[x],k=b[x];r[w.id]=[S,k]}}}}const s=[],i=[],a=[];for(const l of this.outputs){Bi(l.id in r,`Could not compute output ${l.name} : ${l.id}`);const[u,c]=r[l.id];a.push(u.shape),s.push(u),i.push(c)}return[s,i,a]}buildNodeConversionMap(e){const n={};let r;for(const o of this.layers){r=o instanceof oi?1:0;for(let s=0;s<o.inboundNodes.length;s++){const i=oi.nodeKey(o,s);this.containerNodes.has(i)&&(n[i]=r,r+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new q("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new q(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new q(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return Z(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const o=oi.nodeKey(n,r);this.containerNodes.has(o)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const i of this.layers){const a=i.getClassName(),l=i.getConfig(),u=[];for(let d=0;d<i.inboundNodes.length;d++){const f=i.inboundNodes[d],p=oi.nodeKey(i,d);let h={};if(this.containerNodes.has(p)){if(f.callArgs)try{JSON.stringify(f.callArgs),h=f.callArgs}catch{console.warn(`Layer ${i.name} was passed non-serializable keyword arguments: ${f.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),h={}}if(f.inboundLayers.length>0){const m=[];for(let g=0;g<f.inboundLayers.length;g++){const y=f.inboundLayers[g],v=f.nodeIndices[g],b=f.tensorIndices[g],x=oi.nodeKey(y,v);let w=n[x];w==null&&(w=0),m.push([y.name,w,b,h])}u.push(m)}}}const c={};c.name=i.name,c.className=a,c.config=l,c.inboundNodes=u,r.push(c)}e.layers=r;const o=[];for(let i=0;i<this.inputLayers.length;i++){const a=this.inputLayers[i],l=this.inputLayersNodeIndices[i],u=oi.nodeKey(a,l);if(!this.containerNodes.has(u))continue;let c=n[u];c==null&&(c=0);const d=this.inputLayersTensorIndices[i];o.push([a.name,c,d])}e.inputLayers=o;const s=[];for(let i=0;i<this.outputLayers.length;i++){const a=this.outputLayers[i],l=this.outputLayersNodeIndices[i],u=oi.nodeKey(a,l);if(!this.containerNodes.has(u))continue;let c=n[u];c==null&&(c=0);const d=this.outputLayersTensorIndices[i];s.push([a.name,c,d])}return e.outputLayers=s,e}static fromConfig(e,n,r={},o=!1){const s={},i={};function a(g,y){g.name in i?i[g.name].push(y):i[g.name]=[y]}function l(g,y){const v=[];let b;for(const x of y){const w=x[0],S=x[1],k=x[2];if(b=x[3]==null?{}:x[3],!(w in s)){a(g,y);return}const $=s[w];if($.inboundNodes.length<=S){a(g,y);return}const C=$.inboundNodes[S];v.push(C.outputTensors[k])}v.length>0&&g.apply(so(v),b)}function u(g){const y=g.name,v=Va(g,n.customObjects!=null?n.customObjects:{});v.setFastWeightInitDuringBuild(o),s[y]=v,g.inboundNodes.forEach(x=>{if(!(x instanceof Array))throw new q(`Corrupted configuration, expected array for nodeData: ${x}`);a(v,x)})}const c=n.name,d=n.layers;for(const g of d)u(g);for(;!LCe(i);)for(const g of d){const y=s[g.name];if(y.name in i){const v=i[y.name];delete i[y.name];for(const b of v)l(y,b)}}const f=[],p=[],h=n.inputLayers;for(const g of h){const y=g[0],v=g[1],b=g[2];Bi(y in s);const w=s[y].inboundNodes[v].outputTensors;f.push(w[b])}const m=n.outputLayers;for(const g of m){const y=g[0],v=g[1],b=g[2];Bi(y in s);const w=s[y].inboundNodes[v].outputTensors;p.push(w[b])}return new e({inputs:f,outputs:p,name:c})}get stateful(){if(this._stateful)throw new q("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){Z(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function t_e(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(o=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const o=[];return e.forEach(s=>{s in t?o.push(t[s]):o.push(null)}),o}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function KK(t,e){return t_e(t,e,"classWeight")}async function XK(t,e,n,r){if(n!=null){const o=Z(()=>{if(t.shape.length===1)return ja(t);if(t.shape.length===2){if(t.shape[1]>1)return jf(t,1);if(t.shape[1]===1)return H(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),s=Array.from(await o.data());nt(o);const i=[];return s.forEach(a=>{if(n[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);i.push(n[a])}),Nr(i,"float32")}else return null}function n_e(t,e){return W(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const r_e=32;function YK(t,e){let n,r;const o=e;n=o.xs,r=o.ys,A(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const s=uB("input",t.inputNames,n),i=uB("output",t.outputNames,r),a=s[0].shape[0];A(s.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${s.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),A(i.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${i.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<s.length;l++)A(s[l].shape[0]===a,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${s[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);for(let l=0;l<i.length;l++)A(i[l].shape[0]===a,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${i[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);return{xs:s,ys:i}}function uB(t,e,n){if(n instanceof fn)return[n];if(Array.isArray(n))return A(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const o of e){if(n[o]==null)throw new q(`The feature data generated by the dataset lacks the required ${t} key '${o}'.`);r.push(n[o])}return r}}function o_e(t){if(t.length===3)throw new Ze("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function s_e(t,e,n){const r=n.batchesPerEpoch!=null;if(A(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),A(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),A(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),A(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),A(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const o=n.validationData!=null;let s,i;if(o)if(cB(n.validationData))A(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const g=o_e(n.validationData);s=g.xs,i=g.ys}const a=t.makeTrainFunction(),l=t.getDedupedMetricsNames();let u;o?u=l.slice().concat(l.map(g=>"val_"+g)):u=l.slice();const c=zK(n.callbacks,n.yieldEvery),d=n.verbose==null?1:n.verbose,{callbackList:f,history:p}=BK(c,d,n.epochs,null,null,i_e(e,n),null,o,u);f.setModel(t),t.history=p,await f.onTrainBegin(),t.stopTraining_=!1;let h=n.initialEpoch==null?0:n.initialEpoch,m=await e.iterator();for(;h<n.epochs;){const g={};await f.onEpochBegin(h);let y=0,v=0;for(r||(m=await e.iterator());!r||y<n.batchesPerEpoch;){const b=await m.next();if(r&&b.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${y} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(b.value!=null){const{xs:x,ys:w}=YK(t,b.value),S={};S.batch=v,S.size=x[0].shape[0],await f.onBatchBegin(v,S);const k=[];if(n.classWeight!=null){const I=KK(n.classWeight,t.outputNames);for(let E=0;E<I.length;++E)k.push(await XK(w[E],null,I[E]))}const $=x.concat(w).concat(k),C=a($);nt($);for(let I=0;I<l.length;++I){const E=l[I],O=C[I];S[E]=O,rr(O)}await f.onBatchEnd(v,S),LK(S),v++,y++}if(r?y>=n.batchesPerEpoch:b.done){if(o){let x;cB(n.validationData)?x=Nt(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):x=Nt(t.evaluate(s,i,{batchSize:n.validationBatchSize==null?r_e:n.validationBatchSize,verbose:0}));for(let w=0;w<t.metricsNames.length;++w)g[`val_${t.metricsNames[w]}`]=x[w]}break}if(t.stopTraining_)break}if(await f.onEpochEnd(h,g),h++,t.stopTraining_)break}return await f.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function i_e(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function cB(t){return typeof t.iterator=="function"}function a_e(t){return typeof t.next=="function"}async function l_e(t,e,n){n=n||{};const r=n.batches!=null,o=t.testFunction;let s=[];if(n.verbose>0)throw new Ze("Verbose mode is not implemented yet.");A(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const i=a_e(e)?e:await e.iterator();let a=0,l=0;for(;!r||l<n.batches;){const u=await i.next();if(s=Z(()=>{if(u.value){const{xs:c,ys:d}=YK(t,u.value),f=c.concat(d),p=Z(()=>o(f));if(nt(f),l===0)for(let m=0;m<p.length;++m)s.push(Me(0));const h=f[0].shape[0];for(let m=0;m<p.length;++m){const g=p[m],y=s[m];s[m]=Z(()=>ue(s[m],W(h,g))),l>0&&nt(y)}nt(p),a+=h,++l}return s}),u.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let u=0;u<s.length;++u){const c=s[u];s[u]=Oe(s[u],a),nt(c)}return so(s)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function rT(t){A(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function wh(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>bc(r,e,n-e)):bc(t,e,n-e)}function BI(t,e){return Z(()=>t==null?null:Array.isArray(t)?t.map(n=>BI(n,e)):$K(t,e.dtype==="int32"?e:be(e,"int32")))}function oT(t,e){const n=[];let r=0,o=null;for(;r<t;)o=r+e,o>=t&&(o=t),n.push([r,o]),r=o;return n}function ZK(t){const e=[];t instanceof fn&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push(T0(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function ni(t,e){if(t==null)return;const n=[];if(e instanceof fn)n.push(e.id);else if(Array.isArray(e))e.forEach(o=>n.push(o.id));else if(e!=null)for(const o in e){const s=e[o];n.push(s.id)}const r=[];if(t instanceof fn)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(o=>{n.indexOf(o.id)===-1&&r.push(o)});else if(t!=null)for(const o in t){const s=t[o];n.indexOf(s.id)===-1&&r.push(s)}r.forEach(o=>{o.isDisposed||o.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function u_e(t){return t instanceof fn}function jI(t){return Array.isArray(t)}function dB(t){return!u_e(t)&&!jI(t)}function fB(t,e,n,r=!0,o=""){if(e==null||e.length===0){if(t!=null){let i=!1;if(jI(t)&&t.length>0)i=!0;else if(dB(t)){for(const a in t)if(t.hasOwnProperty(a)){i=!0;break}}else i=!0;if(i)throw new q(`Error when checking model ${o} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(i=>null);let s;if(dB(t)){t=t,s=[];for(const i of e){if(t[i]==null)throw new q(`No data provided for "${i}". Need data for each key in: ${e}`);s.push(t[i])}}else if(jI(t)){if(t=t,t.length!==e.length)throw new q(`Error when checking model ${o}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);s=t}else{if(t=t,e.length>1)throw new q(`The model ${o} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);s=[t]}if(s=ZK(s),n!=null)for(let i=0;i<e.length;++i){if(n[i]==null)continue;const a=s[i];if(a.shape.length!==n[i].length)throw new q(`Error when checking ${o}: expected ${e[i]} to have ${n[i].length} dimension(s). but got array with shape ${a.shape}`);for(let l=0;l<n[i].length;++l){if(l===0&&!r)continue;const u=a.shape[l],c=n[i][l];if(c!=null&&c>=0&&u!==c)throw new q(`${o} expected a batch of elements where each example has shape [${n[i].slice(1,n[i].length)}] (i.e.,tensor shape [*,${n[i].slice(1,n[i].length)}]) but the ${o} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return s}function c_e(t,e,n){const r=ql(t.map(s=>s.shape[0]));r.sort();const o=ql(e.map(s=>s.shape[0]));if(o.sort(),r.length>1)throw new q(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(s=>s.shape))}`);if(o.length>1)throw new q(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(s=>s.shape))}`);if(r.length>0&&o.length>0&&!ct(r,o))throw new q(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${o[0]} target sample(s).`)}function d_e(t,e,n){const r=[jk,Vk,lg];for(let o=0;o<t.length;++o){const s=t[o],i=e[o],a=n[o];if(i!=null){if(i===lg&&s.shape[s.shape.length-1]===1)throw new q(`You are passing a target array of shape ${s.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(i)!==-1){const l=s.shape.slice(1),u=a.slice(1);for(let c=0;c<l.length;++c){const d=l[c],f=u[c];if(f!=null&&d!==f)throw new q(`A target Tensor with shape ${s.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function pB(t,e,n,r=!0,o=""){let s;if(Array.isArray(t)){if(t.length!==e.length)throw new q(`Error when checking model ${o}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);s=t}else{if(e.length>1)throw new q(`The model expects ${e.length} ${o} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);s=[t]}if(n!=null)for(let i=0;i<e.length;++i){if(n[i]==null)continue;const a=s[i];if(a.shape.length!==n[i].length)throw new q(`Error when checking ${o}: expected ${e[i]} to have ${n[i].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let l=0;l<n[i].length;++l){if(l===0&&!r)continue;const u=a.shape[l],c=n[i][l];if(c!=null&&c!==u)throw new q(`Error when checking ${o}: expected ${e[i]} to have shape ${JSON.stringify(n[i])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function f_e(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const o of e){let s=n.hasOwnProperty(o)?n[o]:[];Array.isArray(s)||(s=[s]),r.push(s)}return r}}const p_e="layers-model";class hf extends oi{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new q("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");XTe(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=KTe(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Iu))throw new q("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const i in e.loss)if(this.outputNames.indexOf(i)===-1)throw new q(`Unknown entry in loss dictionary: "${i}". Only expected the following keys: ${this.outputNames}`);for(const i of this.outputNames)e.loss[i]==null&&console.warn(`Output "${i}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${i} during training`),n.push(nT(e.loss[i]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new q(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(a=>nT(a))}else{const i=nT(e.loss);this.outputs.forEach(a=>{n.push(i)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let i=0;i<this.outputs.length;++i){const a=this.internalOutputShapes[i],l=this.outputNames[i];this.feedOutputNames.push(l),this.feedOutputShapes.push(a),this.feedLossFns.push(this.lossFunctions[i])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],vc("loss",()=>{for(let i=0;i<this.outputs.length;++i){if(r.indexOf(i)!==-1)continue;const a=this.lossFunctions[i];this.outputs.length>1&&(this.metricsTensors.push([a,i]),this.metricsNames.push(this.outputNames[i]+"_loss"))}});const o=f_e(e.metrics,this.outputNames),s=(i,a,l)=>{this.outputNames.length>1&&(a=this.outputNames[i]+"_"+a),this.metricsNames.push(a),this.metricsTensors.push([l,i])};vc("metric",()=>{for(let i=0;i<this.outputs.length;++i){if(r.indexOf(i)!==-1)continue;const a=o[i];(u=>{const c="";let d,f,p;for(const h of u){if(typeof h=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(h)!==-1){const g=this.internalOutputShapes[i];g[g.length-1]===1||this.lossFunctions[i]===Vk?["accuracy","acc"].indexOf(h)!==-1?f=VK:["crossentropy","ce"].indexOf(h)!==-1&&(f=LTe):this.lossFunctions[i]===Kx?["accuracy","acc"].indexOf(h)!==-1?f=zTe:["crossentropy","ce"].indexOf(h)!==-1&&(f=GK):["accuracy","acc"].indexOf(h)!==-1?f=WK:["crossentropy","ce"].indexOf(h)!==-1&&(f=UK);let y;["accuracy","acc"].indexOf(h)!==-1?y="acc":["crossentropy","ce"].indexOf(h)!==-1&&(y="ce"),p=f,d=c+y}else p=qTe(h),d=c+Lv(h);let m;vc(d,()=>{m=p}),s(i,d,m)}})(a)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const o=r.batchSize==null?32:r.batchSize;rT(o);const i=this.standardizeUserDataXY(e,n,!0,o);try{const a=i[0].concat(i[1]);this.makeTestFunction();const l=this.testFunction,u=this.testLoop(l,a,o,r.verbose,r.steps);return so(u)}finally{ni(i[0],e),ni(i[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),l_e(this,e,n)}checkNumSamples(e,n,r,o="steps"){let s;if(r!=null){if(s=null,n!=null)throw new q(`If ${o} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?s=e[0].shape[0]:s=e.shape[0];else throw new q(`Either the input data should have a defined shape, or ${o} shoud be specified.`);return s}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new q("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),o=r?n:[n],s=this.retrieveSymbolicTensors(o),i=new Pl;if(e instanceof fn&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new q(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)i.add(this.inputs[l],e[l])}else for(const l of this.inputs){const u=e[l.name];if(u==null)throw new q(`No value is provided for the model's input ${l.name}`);i.add(l,u)}const a=Hh(s,i);return r?a:a[0]}retrieveSymbolicTensors(e){const n=zc(null,e.length);let r=e.length;for(const o of this.layers){const s=Array.isArray(o.output)?o.output:[o.output],i=s.map(a=>a.name);for(let a=0;a<e.length;++a){const l=i.indexOf(e[a]);if(l!==-1&&(n[a]=s[l],r--),r===0)break}if(r===0)break}if(r>0){const o=[];throw n.forEach((s,i)=>{s==null&&o.push(e[i])}),new q(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(o)}`)}return n}predictLoop(e,n=32,r=!1){return Z(()=>{const o=this.checkNumSamples(e);if(r)throw new Ze("Verbose predictLoop() is not implemented yet.");const s=oT(o,n),i=this.outputs.map(a=>[]);for(let a=0;a<s.length;++a)Z(()=>{const u=s[a][0],c=s[a][1],d=wh(e,u,c),f=[];if(Array.isArray(d))for(let h=0;h<d.length;++h)f.push({key:this.inputs[h],value:d[h]});else f.push({key:this.inputs[0],value:d});const p=new Pl(f);return Hh(this.outputs,p)}).forEach((u,c)=>i[c].push(u));return so(i.map(a=>Dn(a,0)))})}predict(e,n={}){const r=ZK(e);pB(r,this.inputNames,this.feedInputShapes,!1);try{const o=n.batchSize==null?32:n.batchSize;return rT(o),this.predictLoop(r,o)}finally{ni(r,e)}}predictOnBatch(e){pB(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,o){if(this.optimizer_==null)throw new Ps("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const s=[];for(let i=0;i<this.feedOutputShapes.length;++i){const a=this.feedOutputShapes[i];this.feedLossFns[i]===Kx?s.push(a.slice(0,a.length-1).concat([1])):s.push(a)}if(e=fB(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=fB(n,this.feedOutputNames,s,!1,"target"),c_e(e,n),d_e(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&o!=null&&o>0&&e[0].shape[0]%o!==0)throw new q(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${o}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,o,s=!0,i){const[a,l]=this.standardizeUserDataXY(e,n,s,i);if(r!=null)throw new Error("sample weight is not supported yet.");let u=null;if(o!=null){const c=KK(o,this.outputNames);u=[];for(let d=0;d<c.length;++d)u.push(await XK(l[d],null,c[d]))}return[a,l,u]}testLoop(e,n,r,o=0,s){return Z(()=>{const i=this.checkNumSamples(n,r,s,"steps"),a=[];if(o>0)throw new Ze("Verbose mode is not implemented yet.");if(s!=null)throw new Ze("steps mode in testLoop() is not implemented yet");{const l=oT(i,r),u=Nr(ki(0,i));for(let c=0;c<l.length;++c){const d=l[c][0],f=l[c][1],p=bc(u,d,f-d),h=BI(n,p),m=e(h);if(c===0)for(let g=0;g<m.length;++g)a.push(Me(0));for(let g=0;g<m.length;++g){const y=m[g];a[g]=ue(a[g],W(f-d,y))}}for(let c=0;c<a.length;++c)a[c]=Oe(a[c],i)}return a})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const o=e[r];let s=o;if(Zz(e,o)>1){const i=Zz(e.slice(0,r),o);s+=`_${i}`}n.push(s)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),o=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),i=[],a=()=>{const d=[];for(let m=0;m<this.inputs.length;++m)d.push({key:this.inputs[m],value:r[m]});const f=new Pl(d),p=Hh(this.outputs,f,{training:!0});let h;for(let m=0;m<this.lossFunctions.length;++m){const g=this.lossFunctions[m];let y=g(o[m],p[m]);s[m]!=null&&(y=n_e(y,s[m]));const v=bn(y);n.push(v),m===0?h=y:h=ue(h,y)}for(let m=0;m<this.metricsTensors.length;++m){let g;if(this.outputs.length>1&&m<this.outputs.length)g=n[m];else{const y=this.metricsTensors[m][0],v=this.metricsTensors[m][1];g=bn(y(o[v],p[v]))}rr(g),i.push(g)}return h=bn(h),this.calculateLosses().forEach(m=>{h=ue(h,m)}),h},l=this.collectedTrainableWeights.map(d=>d.read());return[this.optimizer_.minimize(a,!0,l)].concat(i)}}makeTestFunction(){this.testFunction=e=>Z(()=>{const n=[];let r;const o=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=[];for(let u=0;u<this.inputs.length;++u)i.push({key:this.inputs[u],value:o[u]});const a=new Pl(i),l=Hh(this.outputs,a);for(let u=0;u<this.lossFunctions.length;++u){const c=this.lossFunctions[u],d=bn(c(s[u],l[u]));u===0?r=d:r=ue(r,d),n.push(r)}for(let u=0;u<this.metricsTensors.length;++u){const c=this.metricsTensors[u][0],d=this.metricsTensors[u][1],f=bn(c(s[d],l[d]));n.push(f)}return n})}async fit(e,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let o,s,i,a,l,u,c,d,f;try{const p=r.batchSize==null?32:r.batchSize;rT(p);const m=await this.standardizeUserData(e,n,r.sampleWeight,r.classWeight,!1,p);o=m[0],s=m[1],f=m[2];let g=!1,y;if(r.validationData!=null&&r.validationData.length>0){if(g=!0,r.validationData.length===2)l=r.validationData[0],u=r.validationData[1];else throw r.validationData.length===3?new Ze("validationData including sample weights is not supported yet."):new q(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const I=await this.standardizeUserData(l,u,null,null,!0,p);c=I[0],d=I[1],y=c.concat(d)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){g=!0;const C=Math.floor(o[0].shape[0]*(1-r.validationSplit)),I=o[0].shape[0];c=wh(o,C,I),i=o,o=wh(o,0,C),d=wh(s,C,I),a=s,s=wh(s,0,C),y=c.concat(d)}else r.validationSteps!=null&&(g=!0);const v=o.concat(s).concat(f);this.checkTrainableWeightsConsistency();const b=this.makeTrainFunction(),x=this.getDedupedMetricsNames();let w,S;g?(this.makeTestFunction(),w=this.testFunction,S=x.slice().concat(x.map(C=>"val_"+C))):(w=null,y=[],S=x.slice());const k=zK(r.callbacks,r.yieldEvery);return await this.fitLoop(b,v,x,p,r.epochs,r.verbose,k,w,y,r.shuffle,S,r.initialEpoch,null,null)}finally{this.isTraining=!1,ni(o,e),ni(s,n),ni(i,e),ni(a,n),ni(c,l),ni(d,u),f!=null&&nt(f)}}async fitLoop(e,n,r,o,s,i,a,l,u,c,d,f,p,h){o==null&&(o=32),s==null&&(s=1),c==null&&(c=!0),f==null&&(f=0);let m=!1;if(l!=null&&u!=null&&(m=!0),h!=null&&(m=!0,p==null))throw new q("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const g=this.checkNumSamples(n,o,p,"steps_per_epoch");let y;g!=null&&(y=ki(0,g)),i==null&&(i=1);const{callbackList:v,history:b}=BK(a,i,s,f,g,p,o,m,d);v.setModel(this),this.history=b,await v.onTrainBegin(),this.stopTraining_=!1;for(let x=f;x<s;++x){await v.onEpochBegin(x);const w={};if(p!=null)throw new Ze("stepsPerEpoch mode is not implemented yet.");{if(c==="batch")throw new Ze("batch shuffling is not implemneted yet");c&&oye(y);const S=Nr(y),k=oT(g,o);for(let $=0;$<k.length;++$){const C={};if(await v.onBatchBegin($,C),Z(()=>{const I=k[$][0],E=k[$][1],O=bc(S,I,E-I);C.batch=$,C.size=E-I;const R=BI(n,O),z=e(R);for(let L=0;L<r.length;++L){const B=r[L],D=z[L];C[B]=D,rr(D)}if($===k.length-1&&m){const L=this.testLoop(l,u,o);for(let B=0;B<r.length;++B){const D=r[B],F=L[B];rr(F),w["val_"+D]=F}}}),await v.onBatchEnd($,C),LK(C),this.stopTraining_)break}S.dispose()}if(await v.onEpochEnd(x,w),this.stopTraining_)break}return await v.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return s_e(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),o=r[0],s=r[1],a=this.makeTrainFunction()(o.concat(s)),l=[];for(const u of a){const c=await u.data();l.push(c[0])}return nt(a),ni(r[0],e),ni(r[1],n),so(l)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,o=r?this.trainableWeights:this.weights,s=this.getWeights(r);for(let i=0;i<o.length;++i)r&&!o[i].trainable||n.push({name:o[i].originalName,tensor:s[i]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=Rz().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-Rz().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=ka(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>ka(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const o of n)if(typeof r[o]=="string")e[o]=ka(r[o]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[ka(Lv(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>ka(Lv(e)));{const e={};for(const n in this.metrics)e[n]=ka(Lv(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=LI(e.optimizer_config),r=Va(n);let o;if(typeof e.loss=="string")o=Qu(e.loss);else if(Array.isArray(e.loss))o=e.loss.map(i=>Qu(i));else if(e.loss!=null){o={};for(const i in e.loss)o[i]=Qu(e.loss[i])}let s;if(Array.isArray(e.metrics))s=e.metrics.map(i=>Qu(i));else if(e.metrics!=null){s={};for(const i in e.metrics)s[i]=Qu(e.metrics[i])}this.compile({loss:o,metrics:s,optimizer:r})}async save(e,n){if(typeof e=="string"){const u=u9(e);if(u.length===0)throw new q(`Cannot find any save handlers for URL '${e}'`);if(u.length>1)throw new q(`Found more than one (${u.length}) save handlers for URL '${e}'`);e=u[0]}if(e.save==null)throw new q("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await wI(this.getNamedWeights(n)),a={modelTopology:this.toJSON(null,!1),format:p_e,generatedBy:`TensorFlow.js tfjs-layers v${qK}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){a.trainingConfig=this.getTrainingConfig();const u="optimizer",{data:c,specs:d}=await wI(await this.optimizer.getWeights(),u);r.specs.push(...d),r.data=i9([r.data,c])}return this.userDefinedMetadata!=null&&(lB(this.userDefinedMetadata,this.name,!0),a.userDefinedMetadata=this.userDefinedMetadata),a.weightData=r.data,a.weightSpecs=r.specs,e.save(a)}setUserDefinedMetadata(e){lB(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}hf.className="Model";ce(hf);class QK extends hf{}QK.className="Functional";ce(QK);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class ug extends hf{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:Lk("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new q(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof ug||e instanceof hf;let r;if(n){if(r=e,r.outputs.length!==1)throw new q("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new q("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new q("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const o=mTe({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(o)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new q(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new q("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=PK(this.outputs[0])}this.inboundNodes=[],new Bk({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:zc(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(o=>o.shape),outputShapes:this.outputs[0].shape})}else{const o=e.apply(this.outputs[0]);if(Array.isArray(o))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[o],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(bt(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new hf({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new Ps("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new Ps("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new Ps("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new Ps("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},o=!1){let s,i={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new q("Legacy serialization format not supported yet.");s=n}else A(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),s=n.layers,delete n.layers,i=n;const a=new e(i);if(!(a instanceof ug))throw new Ze(`Sequential.fromConfig called on non-Sequential input: ${a}`);for(const l of s){const c=Va(l,void 0,o);o&&c.setFastWeightInitDuringBuild(!0),a.add(c)}return a}set stopTraining(e){if(this.model==null)throw new q("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new q("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}}ug.className="Sequential";ce(ug);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Dr=class extends Dp{getConfig(){return{}}};class JK extends Dr{apply(e,n=1){return JCe(e,n)}}JK.className="elu";ce(JK);class e7 extends Dr{apply(e){return rR(e)}}e7.className="selu";ce(e7);class t7 extends Dr{apply(e){return ma(e)}}t7.className="relu";ce(t7);class n7 extends Dr{apply(e){return Z(()=>Mc(6,ma(e)))}}n7.className="relu6";ce(n7);let r7=class extends Dr{apply(e){return e}};r7.className="linear";ce(r7);class o7 extends Dr{apply(e){return oa(e)}}o7.className="sigmoid";ce(o7);class s7 extends Dr{apply(e){return tTe(e)}}s7.className="hardSigmoid";ce(s7);class i7 extends Dr{apply(e){return Op(e)}}i7.className="softplus";ce(i7);class a7 extends Dr{apply(e){return eTe(e)}}a7.className="softsign";ce(a7);class l7 extends Dr{apply(e){return Fc(e)}}l7.className="tanh";ce(l7);let cD=class extends Dr{apply(e,n=-1){return _k(e,n)}};cD.className="softmax";ce(cD);class u7 extends Dr{apply(e,n=-1){return VP(e,n)}}u7.className="logSoftmax";ce(u7);class c7 extends Dr{apply(e){return Z(()=>Z(()=>{const n=Math.sqrt(2),r=W(.5,ue(1,zP(Oe(e,n))));return W(e,r)}))}}c7.className="gelu";ce(c7);class d7 extends Dr{apply(e){return Z(()=>W(.5,W(e,ue(1,Fc(W(vr(Oe(2,Math.PI)),ue(e,W(.044715,Ja(e,3)))))))))}}d7.className="gelu_new";ce(d7);class f7 extends Dr{apply(e){return Z(()=>W(e,Fc(Op(e))))}}f7.className="mish";ce(f7);class p7 extends Dr{apply(e,n=1){return Z(()=>W(oa(W(e,n)),e))}}p7.className="swish";ce(p7);function cu(t){return t.getClassName()}function sT(t,e={}){return C0(t,_s.getMap().classNameMap,e,"activation")}function du(t){if(t==null){const e={};return e.className="linear",e.config={},sT(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},sT(e)}else return t instanceof Dr?t:sT(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function h_e(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class h7 extends Dp{}class m7 extends h7{constructor(e){super(),h_e(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return Z(()=>{let n=Bn([1]);return this.hasL1&&(n=ue(n,Ie(W(this.l1,Mn(e))))),this.hasL2&&(n=ue(n,Ie(W(this.l2,_0(e))))),H(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}m7.className="L1L2";ce(m7);const hB={l1l2:"L1L2"};function Ut(t){return YR(t)}function mB(t,e={}){return C0(t,_s.getMap().classNameMap,e,"regularizer")}function un(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in hB?hB[t]:t,config:{}};return mB(n)}else return t instanceof h7?t:mB(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class g7 extends ot{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=je(e);let r=ma(e);return this.maxValue!=null&&(r=Mo(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}g7.className="ReLU";ce(g7);class y7 extends ot{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=je(e);return gk(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}y7.className="LeakyReLU";ce(y7);class v7 extends ot{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=ln(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=un(e.alphaRegularizer),this.alphaConstraint=Hn(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new q(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=bt(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const o of this.sharedAxes)n[o-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let o=1;o<e.length;++o)r[o]=e[o];this.inputSpec=[new Wn({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=je(e),kk(e,this.alpha.read())}getConfig(){const e={alphaInitializer:hn(this.alphaInitializer),alphaRegularizer:Ut(this.alphaRegularizer),alphaConstraint:Gn(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}v7.className="PReLU";ce(v7);let b7=class extends ot{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new Ze(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=je(e);return v0(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};b7.className="ELU";ce(b7);class x7 extends ot{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=je(e);return W(r,be(Go(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}x7.className="ThresholdedReLU";ce(x7);class w7 extends ot{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new cD().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return Z(()=>{let r=je(e);const o=n.mask;if(o!=null){const s=W(ke(_o(r.shape),be(o,r.dtype)),Me(-1e9));r=ue(r,s)}return this.axis instanceof Array?this.axis.length>1?Lo(ke(r,vk(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}w7.className="Softmax";ce(w7);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function mf(t,e,n){if(typeof t=="number")return zc(t,e);if(t.length!==e)throw new q(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const o=t[r];if(!XCe(o))throw new q(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${o}`)}return t}function xi(t,e,n,r,o=1){if(t==null)return t;const s=e+(e-1)*(o-1);let i;return n==="same"?i=t:i=t-s+1,Math.floor((i+r-1)/r)}function ji(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+uu([n-e,0]);else if(r==="same")t=t*e;else throw new q(`Unsupport padding mode: ${r}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function dD(t,e){return Z(()=>(En(e),e==="channelsFirst"?pt(t,[0,2,3,1]):t))}function S7(t,e){return Z(()=>(En(e),e==="channelsFirst"?pt(t,[0,2,3,4,1]):t))}function m_e(t,e,n,r=1,o="valid",s,i=1){return Z(()=>{if(s==null&&(s=$i()),En(s),t.shape.length!==3)throw new q(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new q(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new q(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(s==="channelsFirst"&&(t=pt(t,[0,2,1])),o==="causal")throw new Ze("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=RP(t,e,r,o==="same"?"same":"valid","NWC",i);return n!=null&&(a=Ii(a,n)),a})}function gB(t,e,n,r=[1,1],o="valid",s,i,a=null){return Z(()=>{if(s==null&&(s=$i()),En(s),t.rank!==3&&t.rank!==4)throw new q(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new q(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=dD(t,s);if(o==="causal")throw new Ze("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=gq({x:l,filter:e,strides:r,pad:o==="same"?"same":"valid",dilations:i,dataFormat:"NHWC",bias:n,activation:a}),s==="channelsFirst"&&(l=pt(l,[0,3,1,2])),l})}function g_e(t,e,n,r=[1,1,1],o="valid",s,i){return Z(()=>{if(s==null&&(s=$i()),En(s),t.rank!==4&&t.rank!==5)throw new q(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new q(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let a=S7(t,s);if(o==="causal")throw new Ze("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=F9(a,e,r,o==="same"?"same":"valid","NDHWC",i),n!=null&&(a=Ii(a,n)),s==="channelsFirst"&&(a=pt(a,[0,4,1,2,3])),a})}class Wk extends ot{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",Wk.verifyArgs(n),this.rank=e,or(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new Ze(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=mf(n.kernelSize,e,"kernelSize"),this.strides=mf(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,ps(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,En(this.dataFormat),this.activation=du(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=ln(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Hn(n.biasConstraint),this.biasRegularizer=un(n.biasRegularizer),this.activityRegularizer=un(n.activityRegularizer),this.dilationRate=mf(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new q(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new q(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new q(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(Bi("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!ZR(e.kernelSize,"number",1,3))throw new q(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:cu(this.activation),useBias:this.useBias,biasInitializer:hn(this.biasInitializer),biasRegularizer:Ut(this.biasRegularizer),activityRegularizer:Ut(this.activityRegularizer),biasConstraint:Gn(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class Fp extends Wk{constructor(e,n){super(e,n),this.kernel=null,Fp.verifyArgs(n),this.filters=n.filters,or(this.filters,"filters"),this.kernelInitializer=ln(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Hn(n.kernelConstraint),this.kernelRegularizer=un(n.kernelRegularizer)}build(e){e=bt(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new q(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],o=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return Z(()=>{e=je(e);let r;const o=this.bias==null?null:this.bias.read(),s=vK(this.activation.getClassName());if(s!=null&&this.rank===2)r=gB(e,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate,s);else{if(this.rank===1)r=m_e(e,this.kernel.read(),o,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=gB(e,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=g_e(e,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new Ze("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=bt(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let s=0;s<r.length;++s){const i=xi(r[s],this.kernelSize[s],this.padding,this.strides[s],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[s]);n.push(i)}let o=[e[0]];return this.dataFormat==="channelsLast"?(o=o.concat(n),o.push(this.filters)):(o.push(this.filters),o=o.concat(n)),o}getConfig(){const e={filters:this.filters,kernelInitializer:hn(this.kernelInitializer),kernelRegularizer:Ut(this.kernelRegularizer),kernelConstraint:Gn(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new q(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class A0 extends Fp{constructor(e){super(2,e),A0.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!ZR(e.kernelSize,"number",1,2))throw new q(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}A0.className="Conv2D";ce(A0);class O0 extends Fp{constructor(e){super(3,e),O0.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new q(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}O0.className="Conv3D";ce(O0);class k7 extends A0{constructor(e){if(super(e),this.inputSpec=[new Wn({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new q(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=bt(e),e.length!==4)throw new q("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new q("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],o=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",o,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Wn({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return Z(()=>{let r=je(e);if(r.shape.length!==4)throw new q(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const o=r.shape,s=o[0];let i,a;this.dataFormat==="channelsFirst"?(i=2,a=3):(i=1,a=2);const l=o[i],u=o[a],c=this.kernelSize[0],d=this.kernelSize[1],f=this.strides[0],p=this.strides[1],h=ji(l,f,c,this.padding),m=ji(u,p,d,this.padding),g=[s,h,m,this.filters];this.dataFormat!=="channelsLast"&&(r=pt(r,[0,2,3,1]));let y=FP(r,this.kernel.read(),g,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(y=pt(y,[0,3,1,2])),this.bias!=null&&(y=Ii(y,this.bias.read(),this.dataFormat)),this.activation!=null&&(y=this.activation.apply(y)),y})}computeOutputShape(e){e=bt(e);const n=e.slice();let r,o,s;this.dataFormat==="channelsFirst"?(r=1,o=2,s=3):(r=3,o=1,s=2);const i=this.kernelSize[0],a=this.kernelSize[1],l=this.strides[0],u=this.strides[1];return n[r]=this.filters,n[o]=ji(n[o],l,i,this.padding),n[s]=ji(n[s],u,a,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}k7.className="Conv2DTranspose";ce(k7);class $7 extends O0{constructor(e){if(super(e),this.inputSpec=[new Wn({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new q(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=bt(e),e.length!==5)throw new q("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new q("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],o=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",o,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Wn({ndim:5,axes:{[n]:r}})],this.built=!0}call(e,n){return Z(()=>{let r=je(e);if(r.shape.length!==5)throw new q(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const o=r.shape,s=o[0];let i,a,l;this.dataFormat==="channelsFirst"?(l=2,i=3,a=4):(l=1,i=2,a=3);const u=o[l],c=o[i],d=o[a],f=this.kernelSize[0],p=this.kernelSize[1],h=this.kernelSize[2],m=this.strides[0],g=this.strides[1],y=this.strides[2],v=ji(u,m,f,this.padding),b=ji(c,g,p,this.padding),x=ji(d,y,h,this.padding),w=[s,v,b,x,this.filters];this.dataFormat!=="channelsLast"&&(r=pt(r,[0,2,3,4,1]));let S=L9(r,this.kernel.read(),w,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(S=pt(S,[0,4,1,2,3])),this.bias!==null&&(S=Ii(S,this.bias.read(),this.dataFormat)),this.activation!==null&&(S=this.activation.apply(S)),S})}computeOutputShape(e){e=bt(e);const n=e.slice();let r,o,s,i;this.dataFormat==="channelsFirst"?(r=1,o=2,s=3,i=4):(r=4,o=1,s=2,i=3);const a=this.kernelSize[0],l=this.kernelSize[1],u=this.kernelSize[2],c=this.strides[0],d=this.strides[1],f=this.strides[2];return n[r]=this.filters,n[o]=ji(n[o],c,a,this.padding),n[s]=ji(n[s],d,l,this.padding),n[i]=ji(n[i],f,u,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}$7.className="Conv3DTranspose";ce($7);class C7 extends Fp{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new q("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new q("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new q(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=ln(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=un(n.depthwiseRegularizer),this.depthwiseConstraint=Hn(n.depthwiseConstraint),this.pointwiseInitializer=ln(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=un(n.pointwiseRegularizer),this.pointwiseConstraint=Hn(n.pointwiseConstraint)}build(e){if(e=bt(e),e.length<this.rank+2)throw new q(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new q(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],o=this.kernelSize.concat([r,this.depthMultiplier]),s=[];for(let a=0;a<this.rank;++a)s.push(1);s.push(r*this.depthMultiplier,this.filters);const i=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",o,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,i,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",s,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,i,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,i,this.biasConstraint):this.bias=null,this.inputSpec=[new Wn({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return Z(()=>{e=je(e);let r;if(this.rank===1)throw new Ze("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=pt(e,[0,2,3,1])),r=oR(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=Ii(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=pt(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=hn(this.depthwiseInitializer),e.pointwiseInitializer=hn(this.pointwiseInitializer),e.depthwiseRegularizer=Ut(this.depthwiseRegularizer),e.pointwiseRegularizer=Ut(this.pointwiseRegularizer),e.depthwiseConstraint=Gn(this.depthwiseConstraint),e.pointwiseConstraint=Gn(this.pointwiseConstraint),e}}C7.className="SeparableConv";class T7 extends C7{constructor(e){super(2,e)}}T7.className="SeparableConv2D";ce(T7);class Uk extends Fp{constructor(e){super(1,e),Uk.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!ZR(e.kernelSize,"number",1,1))throw new q(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}Uk.className="Conv1D";ce(Uk);class _7 extends ot{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return Z(()=>{if(e=je(e),this.dataFormat==="channelsLast"){const r=Mv(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return Mv(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=Mv(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return Mv(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}_7.className="Cropping2D";ce(_7);class I7 extends ot{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,En(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,HCe(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return Z(()=>{let r=je(e);const o=r.shape;if(this.dataFormat==="channelsFirst"){r=pt(r,[0,2,3,1]);const s=this.size[0]*o[2],i=this.size[1]*o[3],a=this.interpolation==="nearest"?qi.resizeNearestNeighbor(r,[s,i]):qi.resizeBilinear(r,[s,i]);return pt(a,[0,3,1,2])}else{const s=this.size[0]*o[1],i=this.size[1]*o[2];return this.interpolation==="nearest"?qi.resizeNearestNeighbor(r,[s,i]):qi.resizeBilinear(r,[s,i])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}I7.className="UpSampling2D";ce(I7);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function y_e(t,e,n=[1,1],r="valid",o,s){return Z(()=>{o==null&&(o=$i()),En(o);let i=dD(t,o);if(t.rank!==4)throw new q(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new q(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return i=y0(i,e,n,r==="same"?"same":"valid","NHWC",s),o==="channelsFirst"&&(i=pt(i,[0,3,1,2])),i})}class N7 extends Wk{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=ln(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Hn(e.depthwiseConstraint),this.depthwiseRegularizer=un(e.depthwiseRegularizer)}build(e){if(e=bt(e),e.length<4)throw new q(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new q(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],o=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",o,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Z(()=>{e=je(e);let r=y_e(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=Ii(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=bt(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],o=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,s=xi(n,this.kernelSize[0],this.padding,this.strides[0]),i=xi(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],o,s,i]:[e[0],s,i,o]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=hn(this.depthwiseInitializer),e.depthwiseRegularizer=Ut(this.depthwiseRegularizer),e.depthwiseConstraint=Gn(this.depthwiseRegularizer),e}}N7.className="DepthwiseConv2D";ce(N7);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function E7(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new q("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function o(s){return s==null||Array.isArray(s)?s:[s]}return e=o(e),n=o(n),{inputs:t,initialState:e,constants:n}}function A7(t,e,n,r=!1,o,s,i=!1,a=!1){return Z(()=>{const l=e.shape.length;if(l<3)throw new q(`Input should be at least 3D, but is ${l}D.`);const u=[1,0].concat(ki(2,l));e=pt(e,u),i&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),o!=null&&(o=be(be(o,"bool"),"float32"),o.rank===l-1&&(o=Hr(o,-1)),o=pt(o,u)),r&&(e=qs(e,0),o!=null&&(o=qs(o,0)));const c=[];let d,f=n;const p=e.shape[0],h=Ks(e);let m;o!=null&&(m=Ks(o));for(let y=0;y<p;++y){const v=h[y],b=Z(()=>t(v,f));if(o==null)d=b[0],f=b[1];else{const x=Z(()=>{const w=m[y],S=ke(ls(w),w),k=ue(W(b[0],w),W(f[0],S)),$=f.map((C,I)=>ue(W(b[1][I],w),W(C,S)));return{output:k,newStates:$}});d=x.output,f=x.newStates}a&&c.push(d)}let g;return a&&(g=zo(c,1)),[d,g,f]})}class Nu extends ot{constructor(e){super(e);let n;if(e.cell==null)throw new q("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new hD({cells:e.cell}):n=e.cell,n.stateSize==null)throw new q("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new Wn({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return ki(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){DI(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let o;if(this.returnSequences?o=[e[0],e[1],r]:o=[e[0],r],this.returnState){const s=[];for(const i of n)s.push([e[0],i]);return[o].concat(s)}else return o}computeMask(e,n){return Z(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const o=this.states.map(s=>null);return[r].concat(o)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new Ze("Constants support is not implemented in RNN yet.");DI(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new Wn({shape:[n,null,...r]});const o=[e[0]].concat(e.slice(2));this.cell.build(o);let s;if(Array.isArray(this.cell.stateSize)?s=this.cell.stateSize:s=[this.cell.stateSize],this.stateSpec!=null){if(!ct(this.stateSpec.map(i=>i.shape[i.shape.length-1]),s))throw new q(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=s.map(i=>new Wn({shape:[null,i]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){Z(()=>{if(!this.stateful)throw new zi("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new q("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(o=>Bn([r,o])):this.states_=[Bn([r,this.cell.stateSize])];else if(e==null)nt(this.states_),this.keptStates!=null&&(nt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(o=>Bn([r,o])):this.states_[0]=Bn([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new q(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):nt(this.states_);for(let o=0;o<this.states_.length;++o){const s=e[o],i=Array.isArray(this.cell.stateSize)?this.cell.stateSize[o]:this.cell.stateSize,a=[r,i];if(!ct(s.shape,a))throw new q(`State ${o} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${s.shape}`);this.states_[o]=s}}this.states_=this.states_.map(o=>rr(o.clone()))})}apply(e,n){let r=n==null?null:n.initialState,o=n==null?null:n.constants;n==null&&(n={});const s=E7(e,r,o,this.numConstants);e=s.inputs,r=s.initialState,o=s.constants;let i=[],a=[];if(r!=null){n.initialState=r,i=i.concat(r),this.stateSpec=[];for(const u of r)this.stateSpec.push(new Wn({shape:u.shape}));a=a.concat(this.stateSpec)}if(o!=null&&(n.constants=o,i=i.concat(o),this.numConstants=o.length),i[0]instanceof fa){const u=[e].concat(i),c=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=c;const f=super.apply(u,n);return this.inputSpec=d,f}else return super.apply(e,n)}call(e,n){return Z(()=>{const r=n==null?null:n.mask,o=n==null?null:n.training;let s=n==null?null:n.initialState;e=je(e),s==null&&(this.stateful?s=this.states_:s=this.getInitialState(e));const i=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(s.length!==i)throw new q(`RNN Layer has ${i} state(s) but was passed ${s.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:o},u=A7((h,m)=>{const g=this.cell.call([h].concat(m),a);return[g[0],g.slice(1)]},e,s,this.goBackwards,r,null,this.unroll,this.returnSequences),c=u[0],d=u[1],f=u[2];this.stateful&&this.resetStates(f,o);const p=this.returnSequences?d:c;return this.returnState?[p].concat(f):p})}getInitialState(e){return Z(()=>{let n=Bn(e.shape);return n=Ie(n,[1,2]),n=T0(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?PI(n,[1,r]):n):this.cell.stateSize>1?[PI(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===Nu.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),n)}static fromConfig(e,n,r={}){const o=n.cell,s=Va(o,r);return new e(Object.assign(n,{cell:s}))}}Nu.className="RNN";ce(Nu);class Gk extends ot{}class fD extends Gk{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,or(this.units,"units"),this.activation=du(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=ln(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=ln(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=ln(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=un(e.kernelRegularizer),this.recurrentRegularizer=un(e.recurrentRegularizer),this.biasRegularizer=un(e.biasRegularizer),this.kernelConstraint=Hn(e.kernelConstraint),this.recurrentConstraint=Hn(e.recurrentConstraint),this.biasConstraint=Hn(e.biasConstraint),this.dropout=Gf([1,uu([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Gf([1,uu([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=bt(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Z(()=>{if(e=e,e.length!==2)throw new q(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const o=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=fu({ones:()=>ls(e),rate:this.dropout,training:o,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=fu({ones:()=>ls(r),rate:this.recurrentDropout,training:o,dropoutFunc:this.dropoutFunc}));let s;const i=this.dropoutMask,a=this.recurrentDropoutMask;i!=null?s=aa(W(e,i),this.kernel.read()):s=aa(e,this.kernel.read()),this.bias!=null&&(s=Ii(s,this.bias.read())),a!=null&&(r=W(r,a));let l=ue(s,aa(r,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:cu(this.activation),useBias:this.useBias,kernelInitializer:hn(this.kernelInitializer),recurrentInitializer:hn(this.recurrentInitializer),biasInitializer:hn(this.biasInitializer),kernelRegularizer:Ut(this.kernelRegularizer),recurrentRegularizer:Ut(this.recurrentRegularizer),biasRegularizer:Ut(this.biasRegularizer),activityRegularizer:Ut(this.activityRegularizer),kernelConstraint:Gn(this.kernelConstraint),recurrentConstraint:Gn(this.recurrentConstraint),biasConstraint:Gn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}fD.className="SimpleRNNCell";ce(fD);class O7 extends Nu{constructor(e){e.cell=new fD(e),super(e)}call(e,n){return Z(()=>{this.cell.dropoutMask!=null&&(nt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(nt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,o=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:o,initialState:s})})}static fromConfig(e,n){return new e(n)}}O7.className="SimpleRNN";ce(O7);class pD extends Gk{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new q("GRUCell does not support reset_after parameter set to true.");this.units=e.units,or(this.units,"units"),this.activation=du(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=du(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=ln(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=ln(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=ln(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=un(e.kernelRegularizer),this.recurrentRegularizer=un(e.recurrentRegularizer),this.biasRegularizer=un(e.biasRegularizer),this.kernelConstraint=Hn(e.kernelConstraint),this.recurrentConstraint=Hn(e.recurrentConstraint),this.biasConstraint=Hn(e.biasConstraint),this.dropout=Gf([1,uu([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Gf([1,uu([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=bt(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Z(()=>{if(e=e,e.length!==2)throw new q(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let o=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=fu({ones:()=>ls(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=fu({ones:()=>ls(o),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const s=this.dropoutMask,i=this.recurrentDropoutMask;let a,l,u;0<this.dropout&&this.dropout<1&&(e=W(e,s[0]));let c=aa(e,this.kernel.read());this.useBias&&(c=Ii(c,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(o=W(o,i[0]));const d=this.recurrentKernel.read(),[f,p]=Ro(d,[2*this.units,this.units],d.rank-1),h=aa(o,f),[m,g,y]=Ro(c,3,c.rank-1),[v,b]=Ro(h,2,h.rank-1);a=this.recurrentActivation.apply(ue(m,v)),l=this.recurrentActivation.apply(ue(g,b));const x=aa(W(l,o),p);u=this.activation.apply(ue(y,x));const w=ue(W(a,o),W(ue(1,tn(a)),u));return[w,w]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:cu(this.activation),recurrentActivation:cu(this.recurrentActivation),useBias:this.useBias,kernelInitializer:hn(this.kernelInitializer),recurrentInitializer:hn(this.recurrentInitializer),biasInitializer:hn(this.biasInitializer),kernelRegularizer:Ut(this.kernelRegularizer),recurrentRegularizer:Ut(this.recurrentRegularizer),biasRegularizer:Ut(this.biasRegularizer),activityRegularizer:Ut(this.activityRegularizer),kernelConstraint:Gn(this.kernelConstraint),recurrentConstraint:Gn(this.recurrentConstraint),biasConstraint:Gn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}pD.className="GRUCell";ce(pD);class P7 extends Nu{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new pD(e),super(e)}call(e,n){return Z(()=>{this.cell.dropoutMask!=null&&(nt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(nt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,o=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:o,initialState:s})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}P7.className="GRU";ce(P7);class Hk extends Gk{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,or(this.units,"units"),this.activation=du(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=du(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=ln(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=ln(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=ln(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=un(e.kernelRegularizer),this.recurrentRegularizer=un(e.recurrentRegularizer),this.biasRegularizer=un(e.biasRegularizer),this.kernelConstraint=Hn(e.kernelConstraint),this.recurrentConstraint=Hn(e.recurrentConstraint),this.biasConstraint=Hn(e.biasConstraint),this.dropout=Gf([1,uu([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Gf([1,uu([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=bt(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let o;if(this.useBias){if(this.unitForgetBias){const s=this.biasInitializer,i=this.units;o=new(n=class extends Zs{apply(l,u){const c=s.apply([i]),d=new JR().apply([i]),f=s.apply([i*2]);return Jz(Jz(c,d),f)}},n.className="CustomInit",n)}else o=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,o,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return Z(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new q(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let o=e[1];const s=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=fu({ones:()=>ls(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=fu({ones:()=>ls(o),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,a=this.recurrentDropoutMask;let l,u,c,d;0<this.dropout&&this.dropout<1&&(e=W(e,i[0]));let f=aa(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(o=W(o,a[0])),f=ue(f,aa(o,this.recurrentKernel.read())),this.useBias&&(f=Ii(f,this.bias.read()));const[p,h,m,g]=Ro(f,4,f.rank-1);l=this.recurrentActivation.apply(p),u=this.recurrentActivation.apply(h),c=ue(W(u,s),W(l,this.activation.apply(m))),d=this.recurrentActivation.apply(g);const y=W(d,this.activation.apply(c));return[y,y,c]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:cu(this.activation),recurrentActivation:cu(this.recurrentActivation),useBias:this.useBias,kernelInitializer:hn(this.kernelInitializer),recurrentInitializer:hn(this.recurrentInitializer),biasInitializer:hn(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Ut(this.kernelRegularizer),recurrentRegularizer:Ut(this.recurrentRegularizer),biasRegularizer:Ut(this.biasRegularizer),activityRegularizer:Ut(this.activityRegularizer),kernelConstraint:Gn(this.kernelConstraint),recurrentConstraint:Gn(this.recurrentConstraint),biasConstraint:Gn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}Hk.className="LSTMCell";ce(Hk);class R7 extends Nu{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Hk(e),super(e)}call(e,n){return Z(()=>{this.cell.dropoutMask!=null&&(nt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(nt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,o=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:o,initialState:s})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}R7.className="LSTM";ce(R7);class hD extends Gk{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return Z(()=>{e=e;let r=e.slice(1);const o=[];for(const a of this.cells.slice().reverse())Array.isArray(a.stateSize)?o.push(r.splice(0,a.stateSize.length)):o.push(r.splice(0,1));o.reverse();const s=[];let i;for(let a=0;a<this.cells.length;++a){const l=this.cells[a];r=o[a],a===0?i=[e[0]].concat(r):i=[i[0]].concat(r),i=l.call(i,n),s.push(i.slice(1))}r=[];for(const a of s.slice().reverse())r.push(...a);return[i[0]].concat(r)})}build(e){DI(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,o)=>{vc(`RNNCell_${o}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=s=>({className:s.getClassName(),config:s.getConfig()}),o={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),o)}static fromConfig(e,n,r={}){const o=[];for(const s of n.cells)o.push(Va(s,r));return new e({cells:o})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return FI(e)}setWeights(e){const n=[];for(const r of this.cells){const o=r.weights.length,s=e.splice(o);for(let i=0;i<r.weights.length;++i)n.push([r.weights[i],s[i]])}iD(n)}}hD.className="StackedRNNCells";ce(hD);function fu(t){const{ones:e,rate:n,training:r=!1,count:o=1,dropoutFunc:s}=t,i=()=>s!=null?s(e(),n):CK(e(),n),a=()=>I0(i,e,r);return!o||o<=1?rr(a().clone()):Array(o).fill(void 0).map(a).map(u=>rr(u.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var v_e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};class D7 extends Nu{constructor(e){if(e.unroll)throw new Ze("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new Ze("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new Wn({ndim:5})]}call(e,n){return Z(()=>{if(this.cell.dropoutMask!=null&&(nt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(nt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new q("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,o=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:o,initialState:s})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return Z(()=>{const{stateSize:n}=this.cell,r=e.shape,o=this.computeSingleOutputShape(r),s=[o[0],...o.slice(2)],i=Bn(s);return Array.isArray(n)?Array(n.length).fill(i):[i]})}resetStates(e,n=!1){Z(()=>{if(!this.stateful)throw new zi("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,o=this.computeSingleOutputShape(r),s=[o[0],...o.slice(2)];if(r[0]==null)throw new q("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Bn(s)):this.states_=[Bn(s)];else if(e==null)nt(this.states_),this.keptStates!=null&&(nt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Bn(s)):this.states_[0]=Bn(s);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new q(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):nt(this.states_);for(let a=0;a<this.states_.length;++a){const l=e[a],u=s;if(!ct(l.shape,u))throw new q(`State ${a} is incompatible with layer ${this.name}: expected shape=${u}, received shape=${l.shape}`);this.states_[a]=l}}this.states_=this.states_.map(a=>rr(a.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:o,padding:s,strides:i,dilationRate:a}=this.cell,l=n==="channelsFirst",u=e[l?3:2],c=e[l?4:3],d=xi(u,o[0],s,i[0],a[0]),f=xi(c,o[1],s,i[1],a[1]);return[...e.slice(0,2),...l?[r,d,f]:[d,f,r]]}}D7.className="ConvRNN2D";class mD extends Hk{constructor(e){const{filters:n,kernelSize:r,strides:o,padding:s,dataFormat:i,dilationRate:a}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,or(this.filters,"filters"),this.kernelSize=mf(r,2,"kernelSize"),this.kernelSize.forEach(l=>or(l,"kernelSize")),this.strides=mf(o||1,2,"strides"),this.strides.forEach(l=>or(l,"strides")),this.padding=s||"valid",ps(this.padding),this.dataFormat=i||"channelsLast",En(this.dataFormat),this.dilationRate=mf(a||1,2,"dilationRate"),this.dilationRate.forEach(l=>or(l,"dilationRate"))}build(e){var n;e=bt(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new q(`The channel dimension of the input should be defined. Found ${e[r]}`);const o=e[r],s=4,i=this.kernelSize.concat([o,this.filters*s]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,this.filters*s]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const u=this.biasInitializer,c=this.filters;l=new(n=class extends Zs{apply(f,p){const h=u.apply([c]),m=_o([c]),g=u.apply([c*2]);return QR([h,m,g])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*s],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return Z(()=>{if(e.length!==3)throw new q(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,o=e[0],s=e[1],i=e[2],a=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=fu({ones:()=>ls(o),rate:this.dropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,u=(G,Y,X)=>!Y||!Y[X]?G:W(Y[X],G);let c=u(o,l,0),d=u(o,l,1),f=u(o,l,2),p=u(o,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=fu({ones:()=>ls(s),rate:this.recurrentDropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const h=this.recurrentDropoutMask;let m=u(s,h,0),g=u(s,h,1),y=u(s,h,2),v=u(s,h,3);const b=3,[x,w,S,k]=Ro(this.kernel.read(),a,b),[$,C,I,E]=this.useBias?Ro(this.bias.read(),a):[null,null,null,null];c=this.inputConv(c,x,$,this.padding),d=this.inputConv(d,w,C,this.padding),f=this.inputConv(f,S,I,this.padding),p=this.inputConv(p,k,E,this.padding);const[O,R,z,L]=Ro(this.recurrentKernel.read(),a,b);m=this.recurrentConv(m,O),g=this.recurrentConv(g,R),y=this.recurrentConv(y,z),v=this.recurrentConv(v,L);const B=this.recurrentActivation.apply(ue(c,m)),D=this.recurrentActivation.apply(ue(d,g)),F=ue(W(D,i),W(B,this.activation.apply(ue(f,y)))),j=W(this.recurrentActivation.apply(ue(p,v)),this.activation.apply(F));return[j,j,F]})}getConfig(){const e=super.getConfig(),{units:n}=e,r=v_e(e,["units"]),o={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},r),o)}inputConv(e,n,r,o){const s=lu(e,n,this.strides,o||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?Ii(s,r,this.dataFormat):s}recurrentConv(e,n){return lu(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}mD.className="ConvLSTM2DCell";ce(mD);class F7 extends D7{constructor(e){const n=new mD(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}F7.className="ConvLSTM2D";ce(F7);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class gD extends ot{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let o=0;o<this.noiseShape.length;++o)r.push(this.noiseShape[o]==null?n[o]:this.noiseShape[o]);return r}call(e,n){return Z(()=>{this.invokeCallHook(e,n);const r=je(e);if(0<this.rate&&this.rate<1){const o=n.training==null?!1:n.training,s=this.getNoiseShape(r);return I0(()=>CK(r,this.rate,s,this.seed),()=>r,o)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}gD.className="Dropout";ce(gD);class M7 extends gD{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}M7.className="SpatialDropout1D";ce(M7);class L7 extends ot{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,or(this.units,"units"),this.activation=du(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=ln(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=ln(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Hn(e.kernelConstraint),this.biasConstraint=Hn(e.biasConstraint),this.kernelRegularizer=un(e.kernelRegularizer),this.biasRegularizer=un(e.biasRegularizer),this.activityRegularizer=un(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=bt(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=bt(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return Z(()=>{this.invokeCallHook(e,n);const r=je(e),o=vK(this.activation.getClassName());let s;return o!=null?s=aa(r,this.kernel.read(),o,this.bias?this.bias.read():null):(s=aa(r,this.kernel.read()),this.bias!=null&&(s=Ii(s,this.bias.read())),this.activation!=null&&(s=this.activation.apply(s))),s})}getConfig(){const e={units:this.units,activation:cu(this.activation),useBias:this.useBias,kernelInitializer:hn(this.kernelInitializer),biasInitializer:hn(this.biasInitializer),kernelRegularizer:Ut(this.kernelRegularizer),biasRegularizer:Ut(this.biasRegularizer),activityRegularizer:Ut(this.activityRegularizer),kernelConstraint:Gn(this.kernelConstraint),biasConstraint:Gn(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}L7.className="Dense";ce(L7);class z7 extends ot{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=bt(e);for(const n of e.slice(1))if(n==null)throw new q(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],Kl(e,1)]}call(e,n){return Z(()=>{this.invokeCallHook(e,n);let r=je(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const o=[0];for(let s=2;s<r.rank;++s)o.push(s);o.push(1),r=pt(r,o)}return QCe(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}z7.className="Flatten";ce(z7);class B7 extends ot{constructor(e){super(e),this.supportsMasking=!0,this.activation=du(e.activation)}call(e,n){return Z(()=>{this.invokeCallHook(e,n);const r=je(e);return this.activation.apply(r)})}getConfig(){const e={activation:cu(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}B7.className="Activation";ce(B7);class j7 extends ot{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return Z(()=>(e=je(e),YCe(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}j7.className="RepeatVector";ce(j7);class V7 extends ot{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",o=n.slice();let s=1,i=null;for(let l=0;l<o.length;++l){const u=o[l];if(this.isUnknown(u))if(i===null)i=l;else throw new q("Can only specifiy one unknown dimension.");else s*=u}const a=Kl(e);if(i!==null){if(s===0||a%s!==0)throw new q(r);o[i]=a/s}else if(a!==s)throw new q(r);return o}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return Z(()=>{this.invokeCallHook(e,n);const r=je(e),o=r.shape,s=o.slice(0,1).concat(this.fixUnknownDimension(o.slice(1),this.targetShape));return H(r,s)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}V7.className="Reshape";ce(V7);class W7 extends ot{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=ki(1,e.dims.length+1);if(!ct(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Wn({ndim:this.dims.length+1})]}computeOutputShape(e){e=bt(e);const n=e.slice();return this.dims.forEach((r,o)=>{n[o+1]=e[r]}),n}call(e,n){return pt(je(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}W7.className="Permute";ce(W7);class U7 extends ot{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=je(e);return jx(Wf(r,this.maskValue),-1)}call(e,n){return Z(()=>{this.invokeCallHook(e,n);const r=je(e),i=jx(Wf(r,this.maskValue),-1,!0);return W(r,be(i,r.dtype))})}}U7.className="Masking";ce(U7);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class G7 extends ot{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(Nt(e.inputLength))}this.inputDim=e.inputDim,or(this.inputDim,"inputDim"),this.outputDim=e.outputDim,or(this.outputDim,"outputDim"),this.embeddingsInitializer=ln(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=un(e.embeddingsRegularizer),this.activityRegularizer=un(e.activityRegularizer),this.embeddingsConstraint=Hn(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return Z(()=>this.maskZero?(e=je(e),Wf(e,ht(e))):null)}computeOutputShape(e){if(e=bt(e),this.inputLength==null)return[...e,this.outputDim];const n=Nt(this.inputLength);if(n.length!==e.length-1)throw new q(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let o=0;o<n.length;++o){const s=n[o],i=e[o+1];if(s!=null&&i!=null&&s!==i)throw new q(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);s==null&&(n[r]=i),r++}}return[e[0],...n,this.outputDim]}call(e,n){return Z(()=>{this.invokeCallHook(e,n);let r=je(e);r.dtype!=="int32"&&(r=ia(r,"int32"));const o=$K(this.embeddings.read(),H(r,[r.size]));return H(o,bt(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:hn(this.embeddingsInitializer),embeddingsRegularizer:Ut(this.embeddingsRegularizer),activityRegularizer:Ut(this.activityRegularizer),embeddingsConstraint:Gn(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}G7.className="Embedding";ce(G7);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class sd extends ot{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new Ze}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let o=0;o<n.length;++o){const s=e[e.length-n.length+o],i=n[o];if(s==null||i==null||s<0||i<0)r.push(null);else if(s===1)r.push(i);else if(i===1)r.push(s);else{if(s!==i)throw new q("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(s)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[bt(e)]),e=e,e.length<2)throw new q(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const s of e)s!=null&&s[0]!==null&&n.push(s[0]);if(n=ql(n),n.length>1)throw new q(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let s=1;s<e.length;++s){const i=e[s]==null?null:e[s].slice(1);r=this.computeElementwiseOpOutputShape(r,i)}const o=e.map(s=>s.length);e.indexOf(null)===-1&&ql(o).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return Z(()=>{if(e=e,this.reshapeRequired){const r=[],o=e.map(s=>s.rank);if(o.indexOf(null)===-1){const s=uu(o);for(let i of e){const a=i.rank;for(let l=0;l<s-a;++l)i=T0(i,1);r.push(i)}return this.mergeFunction(r)}else{let s=!1;for(const l of e){const u=l.rank;if(u==null){const c=l.shape,d=c[0],f=c.slice(1).concat([d]);let p=H(l,[d].concat(Kl(c.slice(1))));p=pt(p,[1,0]),p=H(p,f),r.push(p),s=!0}else if(u>1){const c=ki(1,u).concat([0]);r.push(pt(l,c)),s=!0}else r.push(l)}let i=this.mergeFunction(r);const a=i.rank;if(s){if(a==null){const l=i.shape,u=l.length,c=l[u-1],d=[c].concat(l.slice(0,l.length-1));i=H(pt(H(i,[-1,c]),[1,0]),d)}else if(a>1){const l=[a-1].concat(ki(0,a-1));i=pt(i,l)}}return i}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let o=1;o<e.length;++o){const s=e[o]==null?null:e[o].slice(1);n=this.computeElementwiseOpOutputShape(n,s)}let r=[];for(const o of e)o!=null&&o[0]!==null&&r.push(o[0]);return r=ql(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return Z(()=>{if(n==null)return null;if(!Array.isArray(n))throw new q("`mask` should be an Array");if(!Array.isArray(e))throw new q("`inputs` should be an Array");if(n.length!==e.length)throw new q(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(o=>o==null))return null;n=n.map(o=>o==null?o:Hr(o,0));let r=n[0];for(let o=1;o<n.length-1;++o)r=da(r,n[o]);return r})}}class H7 extends sd{constructor(e){super(e)}mergeFunction(e){return Z(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=ue(n,e[r]);return n})}}H7.className="Add";ce(H7);class q7 extends sd{constructor(e){super(e)}mergeFunction(e){return Z(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=W(n,e[r]);return n})}}q7.className="Multiply";ce(q7);class K7 extends sd{constructor(e){super(e)}mergeFunction(e){return Z(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=ue(n,e[r]);return W(1/e.length,n)})}}K7.className="Average";ce(K7);class X7 extends sd{constructor(e){super(e)}mergeFunction(e){return Z(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=pl(n,e[r]);return n})}}X7.className="Maximum";ce(X7);class Y7 extends sd{constructor(e){super(e)}mergeFunction(e){return Z(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=Mc(n,e[r]);return n})}}Y7.className="Minimum";ce(Y7);class Z7 extends sd{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new q("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const o of e)if(o!=null){n=!1;break}if(n)return;const r=[];for(let o=0;o<e.length;++o){const s=e[o].slice();s.splice(this.axis,1);let i=!1;for(const a of r)if(ct(a,s)){i=!0;break}i||r.push(s)}if(r.length>1)throw new q("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return Z(()=>QR(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new q("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),o=this.axis<0?r.length+this.axis:this.axis;for(const s of n.slice(1)){if(r[o]==null||s[o]==null){r[o]=null;break}r[o]+=s[o]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new q("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new q("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new q(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return Z(()=>{let r=!0;if(n.forEach(i=>{if(i!=null){r=!1;return}}),r)return null;const o=[];for(let i=0;i<e.length;++i)n[i]==null?o.push(be(ls(e[i]),"bool")):n[i].rank<e[i].rank?o.push(Hr(n[i],-1)):o.push(n[i]);const s=Dn(o,this.axis);return OP(s,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}Z7.className="Concatenate";ce(Z7);function Sh(t,e){for(;t<0;)t+=e;return t}function b_e(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new Ze("batchDot is not implemented for tensors of 4D or higher rank yet");if(A(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),A(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new Ze("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,o=e.shape.length;n==null&&(n=[r-1,o-2]);const s=n;return Z(()=>{let i;if(r>o){i=r-o;const l=[];for(let u=0;u<i;++u)l.push(1);e=H(e,e.shape.concat(l))}else if(o>r){i=o-r;const l=[];for(let u=0;u<i;++u)l.push(1);t=H(t,t.shape.concat(l))}else i=0;let a;if(t.shape.length===2&&e.shape.length===2)s[0]===s[1]?a=Ie(W(t,e),s[0]):a=Ie(W(pt(t,[1,0]),e),s[1]);else{const l=s[0]!==t.shape.length-1,u=s[1]===e.shape.length-1;a=tt(t,e,l,u)}if(i>0){let l;r>o?l=r+o-3:l=r-1;const u=[];for(let c=l;c<l+i;++c)u.push(c);a=nd(a,u)}return a.shape.length===1&&(a=Hr(a,1)),a})}let Q7=class extends sd{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){A(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new Ze("Dot layer does not support tensors of 4D or higher rank yet.");const o=this.interpretAxes(n,r);if(n[o[0]]!==r[o[1]])throw new q(`Dimension incompatibility: ${n[o[0]]} !== ${r[o[1]]}`)}mergeFunction(e){if(e.length!==2)throw new q(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],o;return Array.isArray(this.axes)?o=this.axes.map((s,i)=>Sh(s,e[i].shape.length)):o=[Sh(this.axes,n.shape.length),Sh(this.axes,r.shape.length)],this.normalize&&(n=qx(n,o[0]),r=qx(r,o[1])),b_e(n,r,o)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[Sh(this.axes,e.length),Sh(this.axes,n.length)],r}computeOutputShape(e){A(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new Ze("Dot layer does not support tensors of 4D or higher rank yet.");const o=this.interpretAxes(n,r);n.splice(o[0],1),r.splice(o[1],1),r.splice(0,1);const s=n.concat(r);return s.length===1&&s.push(1),s}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}};Q7.className="Dot";ce(Q7);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class J7 extends ot{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return Z(()=>{this.invokeCallHook(e,n);const r=je(e);return I0(()=>ue(zk(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}J7.className="GaussianNoise";ce(J7);class eX extends ot{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return Z(()=>{this.invokeCallHook(e,n);const r=je(e);return this.rate>0&&this.rate<1?I0(()=>{const s=Math.sqrt(this.rate/(1-this.rate));return W(r,zk(r.shape,1,s))},()=>r,n.training||!1):r})}}eX.className="GaussianDropout";ce(eX);class tX extends ot{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||je(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return Z(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return I0(()=>{const s=je(e),l=-1.6732632423543772*1.0507009873554805;let u=Tu(td(r),this.rate);u=ia(u,"float32");const c=((1-this.rate)*(1+this.rate*l**2))**-.5,d=-c*l*this.rate,f=ue(W(s,u),W(ue(u,-1),l));return ue(W(f,c),d)},()=>je(e),n.training||!1)}return e})}}tX.className="AlphaDropout";ce(tX);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function cg(t,e,n,r,o,s=.001){let i;if(t.rank===2)i=_9(t,e,n,r,o,s);else if(t.rank===3)i=I9(t,e,n,r,o,s);else if(t.rank===4)i=N9(t,e,n,r,o,s);else throw new Ze(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return i}function x_e(t,e,n,r,o=.001){return Z(()=>{const s=wk(t,r),i=s.mean,a=s.variance;return[cg(t,i,a,n,e,o),i,a]})}function w_e(t,e,n,r,o=.001){return Z(()=>{const s=wk(t,r),i=s.mean,a=s.variance,l=[];for(const h of ki(0,t.rank))r.indexOf(h)!==-1?l.push(1):l.push(t.shape[h]);const u=H(i,l),c=H(a,l),d=e==null?null:H(e,l),f=n==null?null:H(n,l);return[cg(t,u,c,f,d,o),i,a]})}function S_e(t,e,n,r,o=.001){return ct(r.slice().sort(),ki(0,t.rank-1))?x_e(t,e,n,r,o):w_e(t,e,n,r,o)}class nX extends ot{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=ln(e.betaInitializer||"zeros"),this.gammaInitializer=ln(e.gammaInitializer||"ones"),this.movingMeanInitializer=ln(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=ln(e.movingVarianceInitializer||"ones"),this.betaConstraint=Hn(e.betaConstraint),this.gammaConstraint=Hn(e.gammaConstraint),this.betaRegularizer=un(e.betaRegularizer),this.gammaRegularizer=un(e.gammaRegularizer)}build(e){e=bt(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new q(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new Wn({ndim:e.length,axes:{[n]:r}})];const o=[r];this.scale&&(this.gamma=this.addWeight("gamma",o,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",o,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",o,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",o,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return Z(()=>{const r=n.training==null?!1:n.training,o=je(e),s=o.shape,i=s.length,a=ki(0,i),l=this.axis>=0?this.axis:this.axis+i;a.splice(l,1);const u=zc(1,i);u[l]=s[l];const c=a.slice();c.sort();const d=!ct(c,ki(0,i).slice(0,i-1)),f=()=>{if(d){const v=H(this.movingMean.read(),u),b=H(this.movingVariance.read(),u),x=this.center?H(this.beta.read(),u):null,w=this.scale?H(this.gamma.read(),u):null;return cg(o,v,b,x,w,this.epsilon)}else return cg(o,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return f();const[p,h,m]=S_e(o,this.gamma.read(),this.beta.read(),a,this.epsilon),g=(v,b,x)=>{Z(()=>{const w=1-x,S=v.read(),k=W(ke(S,b),w);v.write(ke(S,k))})};return(()=>{g(this.movingMean,h,this.momentum),g(this.movingVariance,m,this.momentum)})(),p})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:hn(this.betaInitializer),gammaInitializer:hn(this.gammaInitializer),movingMeanInitializer:hn(this.movingMeanInitializer),movingVarianceInitializer:hn(this.movingVarianceInitializer),betaRegularizer:Ut(this.betaRegularizer),gammaRegularizer:Ut(this.gammaRegularizer),betaConstraint:Gn(this.betaConstraint),gammaConstraint:Gn(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}nX.className="BatchNormalization";ce(nX);class rX extends ot{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=ln(e.betaInitializer||"zeros"),this.gammaInitializer=ln(e.gammaInitializer||"ones"),this.betaRegularizer=un(e.betaRegularizer),this.gammaRegularizer=un(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=bt(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let s=0;s<this.axis.length;++s)this.axis[s]<0&&(this.axis[s]+=n);for(const s of this.axis)if(s<0||s>=n)throw new Error(`Invalid axis: ${s}`);if(this.axis.length!==ql(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(s=>e[s]),o=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,o):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,o):this.beta=null,this.built=!0}call(e,n){const r=je(e),o=r.shape,s=o.length;return Z(()=>{let{mean:a,variance:l}=wk(r,this.axis,!0);const u=zc(1,s);for(const m of this.axis)u[m]=o[m];const c=m=>m!=null&&m.shape.length!==s?H(m,u):m;let d=this.scale?c(this.gamma.read()):null,f=this.center?c(this.beta.read()):null;const p=[],h=[];for(let m=0;m<s;++m)this.axis.indexOf(m)!==-1?(p.push(o[m]),h.push(1)):(p.push(1),h.push(o[m]));return a=Os(a,p),l=Os(l,p),d!=null&&(d=Os(d,h)),f!=null&&(f=Os(f,h)),cg(r,a,l,f,d,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:hn(this.betaInitializer),gammaInitializer:hn(this.gammaInitializer),betaRegularizer:Ut(this.betaRegularizer),gammaRegularizer:Ut(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}rX.className="LayerNormalization";ce(rX);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function k_e(t,e,n){return Z(()=>{if(t.rank!==4)throw new q(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new q("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=$i()),n!=="channelsLast"&&n!=="channelsFirst")throw new q(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],_u(t,r)})}class oX extends ot{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?$i():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new q(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new q(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new q(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new Wn({ndim:4})]}computeOutputShape(e){e=bt(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return Z(()=>k_e(je(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}oX.className="ZeroPadding2D";ce(oX);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function qk(t,e,n,r,o,s){return Z(()=>{En(o),xK(s),ps(r),n==null&&(n=[1,1]),r==null&&(r="valid"),o==null&&(o=$i()),s==null&&(s="max"),t=dD(t,o);let i;const a=r==="same"?"same":"valid";return s==="max"?i=xk(t,e,n,a):i=fk(t,e,n,a),o==="channelsFirst"&&(i=pt(i,[0,3,1,2])),i})}function sX(t,e,n,r,o,s){return Z(()=>{En(o),xK(s),ps(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),o==null&&(o=$i()),s==null&&(s="max"),t=S7(t,o);let i;const a=r==="same"?"same":"valid";return s==="max"?i=J9(t,e,n,a):i=T9(t,e,n,a),o==="channelsFirst"&&(i=pt(i,[0,4,1,2,3])),i})}class iX extends ot{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new q(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(or(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new q(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);or(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,ps(this.padding),this.inputSpec=[new Wn({ndim:3})]}computeOutputShape(e){e=bt(e);const n=xi(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return Z(()=>{this.invokeCallHook(e,n),e=T0(je(e),2);const r=this.poolingFunction(je(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return nd(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class aX extends iX{constructor(e){super(e)}poolingFunction(e,n,r,o,s){return En(s),ps(o),qk(e,n,r,o,s,"max")}}aX.className="MaxPooling1D";ce(aX);class lX extends iX{constructor(e){super(e)}poolingFunction(e,n,r,o,s){return En(s),ps(o),qk(e,n,r,o,s,"avg")}}lX.className="AveragePooling1D";ce(lX);class uX extends ot{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new q(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];or(this.poolSize,"poolSize"),or(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,En(this.dataFormat),ps(this.padding),this.inputSpec=[new Wn({ndim:4})]}computeOutputShape(e){e=bt(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=xi(n,this.poolSize[0],this.padding,this.strides[0]),r=xi(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return Z(()=>(this.invokeCallHook(e,n),this.poolingFunction(je(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class cX extends uX{constructor(e){super(e)}poolingFunction(e,n,r,o,s){return En(s),ps(o),qk(e,n,r,o,s,"max")}}cX.className="MaxPooling2D";ce(cX);class dX extends uX{constructor(e){super(e)}poolingFunction(e,n,r,o,s){return En(s),ps(o),qk(e,n,r,o,s,"avg")}}dX.className="AveragePooling2D";ce(dX);class fX extends ot{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new q(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];or(this.poolSize,"poolSize"),or(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,En(this.dataFormat),ps(this.padding),this.inputSpec=[new Wn({ndim:5})]}computeOutputShape(e){e=bt(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],o=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=xi(n,this.poolSize[0],this.padding,this.strides[0]),r=xi(r,this.poolSize[1],this.padding,this.strides[1]),o=xi(o,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,o]:[e[0],n,r,o,e[4]]}call(e,n){return Z(()=>(this.invokeCallHook(e,n),this.poolingFunction(je(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class pX extends fX{constructor(e){super(e)}poolingFunction(e,n,r,o,s){return En(s),ps(o),sX(e,n,r,o,s,"max")}}pX.className="MaxPooling3D";ce(pX);class hX extends fX{constructor(e){super(e)}poolingFunction(e,n,r,o,s){return En(s),ps(o),sX(e,n,r,o,s,"avg")}}hX.className="AveragePooling3D";ce(hX);class mX extends ot{constructor(e){super(e),this.inputSpec=[new Wn({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new Ze}}class gX extends mX{constructor(e){super(e||{})}call(e,n){return Z(()=>{const r=je(e);return bn(r,1)})}}gX.className="GlobalAveragePooling1D";ce(gX);class yX extends mX{constructor(e){super(e||{})}call(e,n){return Z(()=>{const r=je(e);return Bs(r,1)})}}yX.className="GlobalMaxPooling1D";ce(yX);class vX extends ot{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,En(this.dataFormat),this.inputSpec=[new Wn({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new Ze}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class bX extends vX{call(e,n){return Z(()=>{const r=je(e);return this.dataFormat==="channelsLast"?bn(r,[1,2]):bn(r,[2,3])})}}bX.className="GlobalAveragePooling2D";ce(bX);class xX extends vX{call(e,n){return Z(()=>{const r=je(e);return this.dataFormat==="channelsLast"?Bs(r,[1,2]):Bs(r,[2,3])})}}xX.className="GlobalMaxPooling2D";ce(xX);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class wX extends ot{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const o=n.layer,s=Va(o,r);delete n.layer;const i={layer:s};return Object.assign(i,n),new e(i)}}class SX extends wX{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=bt(e),e.length<3)throw new q(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=bt(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),o=e[1];return[r[0],o].concat(r.slice(1))}call(e,n){return Z(()=>(e=je(e),A7((i,a)=>[je(this.layer.call(i,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}SX.className="TimeDistributed";ce(SX);function $_e(t){od(GCe,"BidirectionalMergeMode",t)}const C_e="concat";class kX extends wX{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=Va(r),n.goBackwards=n.goBackwards!==!0;const o={};if(o.className=e.layer.getClassName(),o.config=n,this.backwardLayer=Va(o),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?C_e:e.mergeMode,$_e(this.mergeMode),e.weights)throw new Ze("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,o,s;return this.returnState&&(s=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,o=[r]):this.mergeMode==null?o=[r,r.slice()]:o=[r],this.returnState?this.mergeMode==null?o.concat(s).concat(s.slice()):[r].concat(s).concat(s.slice()):so(o)}apply(e,n){let r=n==null?null:n.initialState,o=n==null?null:n.constants;n==null&&(n={});const s=E7(e,r,o,this.numConstants);if(e=s.inputs,r=s.initialState,o=s.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&o==null)return super.apply(e,n);const i=[],a=[];if(r!=null){const u=r.length;if(u%2>0)throw new q("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,i.push(...r);const c=r.map(d=>new Wn({shape:d.shape}));this.forwardLayer.stateSpec=c.slice(0,u/2),this.backwardLayer.stateSpec=c.slice(u/2),a.push(...c)}if(o!=null)throw new Ze("Support for constants in Bidirectional layers is not implemented yet.");const l=i[0]instanceof fa;for(const u of i)if(u instanceof fa!==l)throw new q("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const u=[e].concat(i),c=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=c;const f=super.apply(u,n);return this.inputSpec=d,f}else return super.apply(e,n)}call(e,n){return Z(()=>{const r=n.initialState;let o,s;if(r==null)o=this.forwardLayer.call(e,n),s=this.backwardLayer.call(e,n);else{const l=r.slice(0,r.length/2),u=r.slice(r.length/2);o=this.forwardLayer.call(e,Object.assign(n,{initialState:l})),s=this.backwardLayer.call(e,Object.assign(n,{initialState:u}))}let i;this.returnState&&(Array.isArray(o)&&(i=o.slice(1).concat(s.slice(1))),o=o[0],s=s[0]),this.returnSequences&&(s=qs(s,1));let a;return this.mergeMode==="concat"?a=QR([o,s]):this.mergeMode==="sum"?a=ue(o,s):this.mergeMode==="ave"?a=W(.5,ue(o,s)):this.mergeMode==="mul"?a=W(o,s):this.mergeMode==null&&(a=[o,s]),this.returnState?this.mergeMode==null?a.concat(i):[a].concat(i):a})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){vc(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),vc(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const s=this.forwardLayer.states.map(i=>null);return Array.isArray(r)?r.concat(s).concat(s):[r].concat(s).concat(s)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=Va(n.layer);if(delete n.layer,n.numConstants!=null)throw new Ze("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const o=n;return o.layer=r,new e(o)}}kX.className="Bidirectional";ce(kX);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class $X extends ot{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return Z(()=>(e=je(e),e.dtype!=="float32"&&(e=ia(e,"float32")),ue(W(e,this.scale),this.offset)))}}$X.className="Rescaling";ce($X);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:T_e,cropAndResize:__e}=qi;class CX extends ot{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,r,o,s,i,a,l){return Z(()=>{let u,c=!1;const d=n/i,f=r/a,p=(o+n)/i,h=(s+r)/a,m=[d,f,p,h],g=[];e.rank===3?(c=!0,u=zo([e])):u=e;for(let w=0;w<u.shape[0];w++)g.push(m);const y=bi(g,[g.length,4]),v=Uf(0,g.length,1,"int32"),x=__e(u,y,v,[o,s],"nearest");return ia(c?je(Ks(x)):x,l)})}upsize(e,n,r,o){return Z(()=>{const s=T_e(e,[n,r]);return ia(s,o)})}call(e,n){return Z(()=>{const r=je(e),o=r.dtype,s=r.shape,i=s[s.length-3],a=s[s.length-2];let l=0;i!==this.height&&(l=Math.floor((i-this.height)/2));let u=0;return a!==this.width&&(u=Math.floor((a-this.width)/2),u===0&&(u=1)),l>=0&&u>=0?this.centerCrop(r,l,u,this.height,this.width,i,a,o):this.upsize(e,this.height,this.width,o)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=bt(e);const n=e.length-3,r=e.length-2;return e[n]=this.height,e[r]=this.width,e}}CX.className="CenterCrop";ce(CX);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function I_e(t,e,n,r){let o=je(t);if(o.dtype!=="int32"&&(o=ia(o,"int32")),e==="int")return o;const s=o.shape;if(o.rank===0&&(o=Hr(o,-1)),e==="oneHot"&&o.shape[o.shape.length-1]!==1&&(o=Hr(o,-1)),o.rank>2)throw new q(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${s} which would result in output rank ${o.rank}.`);const i=["multiHot","oneHot"].includes(e),a=o;let l;if(typeof r<"u"&&e==="count"?l=_I(a,r,n,i):l=_I(a,[],n,i),e!=="tfIdf")return l;if(r)return W(l,r);throw new q("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class TX extends ot{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=bt(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return Z(()=>{e=je(e),e.dtype!=="int32"&&(e=ia(e,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new q(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=je(n.countWeights)}const o=Bs(e),s=ng(e),i=Go(this.numTokens,o).bufferSync().get(0),a=Tu(s,0).bufferSync().get(0);if(!(i&&a))throw new q(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return I_e(e,this.outputMode,this.numTokens,r)})}}TX.className="CategoryEncoding";ce(TX);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const N_e=["bilinear","nearest"],yB=new Set(N_e);class _X extends ot{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(yB.has(e.interpolation))this.interpolation=e.interpolation;else throw new q(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=bt(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return Z(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return qi.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return qi.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...yB]} are supported`)})}}_X.className="Resizing";ce(_X);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class IX{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}IX.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class NX extends ot{constructor(e){super(e),this.randomGenerator=new IX(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}NX.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const E_e=["bilinear","nearest"],vB=new Set(E_e);class EX extends NX{constructor(e){super(e);const{factor:n,interpolation:r="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new q(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new q(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new q(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(vB.has(r))this.interpolation=r;else throw new q(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=bt(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return Z(()=>{const r=je(e);this.imgHeight=r.shape[r.shape.length-3];const o=r.shape[r.shape.length-2];this.widthFactor=td([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let s=this.widthFactor.dataSync()[0]*o;s=Math.round(s);const i=[this.imgHeight,s];switch(this.interpolation){case"bilinear":return qi.resizeBilinear(e,i);case"nearest":return qi.resizeNearestNeighbor(e,i);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...vB]} are supported`)}})}}EX.className="RandomWidth";ce(EX);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A_e=J();A_e.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var wo;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(wo||(wo={}));var bB;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(bB||(bB={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O_e={};function AX(t){return O_e[t]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T(t,e,n,r,o){const s=e.inputParams[t];if(s&&s.inputIndexStart!==void 0){const a=s.inputIndexStart,l=s.inputIndexEnd===0?void 0:s.inputIndexEnd===void 0?a+1:s.inputIndexEnd,u=a<0?e.inputNames.length+a:a;if(s.type==="tensor")return hr(e.inputNames[u],n,r,o);if(s.type==="tensors"){const f=e.inputs.slice(a,l);return e.inputNames.slice(a,l).filter((h,m)=>{var g;return((g=f[m])===null||g===void 0?void 0:g.op)!=="NoOp"}).map(h=>hr(h,n,r,o))}const c=hr(e.inputNames[u],n,r,o),d=c.dataSync();return s.type==="number"?d[0]:zs(c.shape,d)}const i=e.attrParams[t];return i&&i.value}function hr(t,e,n,r){const[o,s]=So(t,n);if(r!=null){const a=r.getHashTableHandleByName(o);if(a!=null)return a}const i=n.currentContextIds.find(a=>!!e[Qx(o,a)]);return i!==void 0?e[Qx(o,i)][s]:void 0}function xB(t,e,n){return e[Qx(t,n.currentContextId)]}function $a(t,e){const[n,r,o]=So(t,e);return[Qx(n,e&&e.currentContextId),r,o]}function Qx(t,e){return e?`${t}-${e}`:t}function So(t,e){if(t==="")return["",0,void 0];const n=e!=null&&e.parseNodeNameCache!=null;if(n){const s=e.parseNodeNameCache.get(t);if(s!=null)return s}const r=t.split(":");let o;if(r.length===1)o=[t,0,void 0];else{const s=r[0],i=r.length===3?r[1]:void 0,a=Number(r[r.length-1]);o=[s,a,i]}return n&&e.parseNodeNameCache.set(t,o),o}function Rb(t,e,n){let r=T("pad",t,e,n);if(r==="explicit"){r=T("explicitPaddings",t,e,n);const o=[[0,0],[0,0],[0,0],[0,0]];for(let s=0;s<4;s++)o[s][0]=r[s*2],o[s][1]=r[s*2+1];return o}return r}function Ca(t){return t.kept?t:ja(t)}/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P_e=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],R_e=Object.freeze(Object.defineProperty({__proto__:null,json:P_e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D_e=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],F_e=Object.freeze(Object.defineProperty({__proto__:null,json:D_e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M_e=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],L_e=Object.freeze(Object.defineProperty({__proto__:null,json:M_e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z_e=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],B_e=Object.freeze(Object.defineProperty({__proto__:null,json:z_e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j_e=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],V_e=Object.freeze(Object.defineProperty({__proto__:null,json:j_e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W_e=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],U_e=Object.freeze(Object.defineProperty({__proto__:null,json:W_e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G_e=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],H_e=Object.freeze(Object.defineProperty({__proto__:null,json:G_e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q_e=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],K_e=Object.freeze(Object.defineProperty({__proto__:null,json:q_e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X_e=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],Y_e=Object.freeze(Object.defineProperty({__proto__:null,json:X_e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z_e=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],Q_e=Object.freeze(Object.defineProperty({__proto__:null,json:Z_e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J_e=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],eIe=Object.freeze(Object.defineProperty({__proto__:null,json:J_e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tIe=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],nIe=Object.freeze(Object.defineProperty({__proto__:null,json:tIe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rIe=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],oIe=Object.freeze(Object.defineProperty({__proto__:null,json:rIe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sIe=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],iIe=Object.freeze(Object.defineProperty({__proto__:null,json:sIe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aIe=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],lIe=Object.freeze(Object.defineProperty({__proto__:null,json:aIe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uIe=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],cIe=Object.freeze(Object.defineProperty({__proto__:null,json:uIe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dIe=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],fIe=Object.freeze(Object.defineProperty({__proto__:null,json:dIe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pIe=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],hIe=Object.freeze(Object.defineProperty({__proto__:null,json:pIe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mIe=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],gIe=Object.freeze(Object.defineProperty({__proto__:null,json:mIe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wB{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[R_e,F_e,L_e,B_e,V_e,U_e,H_e,K_e,Y_e,Q_e,eIe,nIe,oIe,iIe,lIe,cIe,fIe,hIe,gIe],n=[].concat(...e.map(r=>r.json));this.opMappers=n.reduce((r,o)=>(r[o.tfOpName]=o,r),{})}transformGraph(e,n={}){const r=e.node,o=[],s=[],i=[],a=r.reduce((m,g)=>(m[g.name]=this.mapNode(g),g.op.startsWith("Placeholder")?o.push(m[g.name]):g.op==="Const"?s.push(m[g.name]):(g.input==null||g.input.length===0)&&i.push(m[g.name]),m),{});let l=[];const u=[];let c={},d={};n!=null&&(c=this.mapSignatureEntries(n.inputs),d=this.mapSignatureEntries(n.outputs));const f=Object.keys(a);f.forEach(m=>{const g=a[m];g.inputNames.forEach((y,v)=>{const[b,,x]=$a(y),w=a[b];if(w.outputs!=null){const S=w.outputs.indexOf(x);if(S!==-1){const k=`${b}:${S}`;g.inputNames[v]=k}}g.inputs.push(w),w.children.push(g)})}),Object.keys(d).length===0?f.forEach(m=>{const g=a[m];g.children.length===0&&u.push(g)}):Object.keys(d).forEach(m=>{const[g]=$a(m),y=a[g];y!=null&&(y.signatureKey=d[m],u.push(y))}),Object.keys(c).length>0?Object.keys(c).forEach(m=>{const[g]=$a(m),y=a[g];y&&(y.signatureKey=c[m],l.push(y))}):l=o;let p={};e.library!=null&&e.library.function!=null&&(p=e.library.function.reduce((m,g)=>(m[g.signature.name]=this.mapFunction(g),m),{}));const h={nodes:a,inputs:l,outputs:u,weights:s,placeholders:o,signature:n,functions:p};return i.length>0&&(h.initNodes=i),h}mapSignatureEntries(e){return Object.keys(e||{}).reduce((n,r)=>(n[e[r].name]=r,n),{})}mapNode(e){const n=AX(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const r={name:e.name,op:e.op,category:n.category,inputNames:(e.input||[]).map(o=>o.startsWith("^")?o.slice(1):o),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((o,s)=>(o[s.name]={type:s.type,inputIndexStart:s.start,inputIndexEnd:s.end},o),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((o,s)=>{const i=s.type;let a;switch(s.type){case"string":a=VI(e.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=VI(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"string[]":a=XI(e.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=XI(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"number":a=UI(e.attr,s.tfName,s.defaultValue||0),a===void 0&&s.tfDeprecatedName&&(a=UI(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"number[]":a=KI(e.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=KI(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"bool":a=WI(e.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=WI(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"bool[]":a=ZI(e.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=ZI(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"shape":a=qI(e.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=qI(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"shape[]":a=YI(e.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=YI(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"dtype":a=GI(e.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=GI(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"dtype[]":a=HI(e.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=HI(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"func":a=SB(e.attr,s.tfName,s.defaultValue),a===void 0&&s.tfDeprecatedName&&(a=SB(e.attr,s.tfDeprecatedName,s.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${s.type} for op: ${e.op}`)}return o[s.name]={value:a,type:i},o},{})),r}mapFunction(e){const n=e.nodeDef,r=[],o=[];let s={};n!=null&&(s=n.reduce((d,f)=>(d[f.name]=this.mapNode(f),f.op==="Const"&&o.push(d[f.name]),d),{}));const i=[],a=[];e.signature.inputArg.forEach(d=>{const[f]=$a(d.name),p={name:f,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:yD(d.type),type:"dtype"}},children:[]};p.signatureKey=d.name,i.push(p),s[f]=p}),Object.keys(s).forEach(d=>{const f=s[d];f.inputNames.forEach((p,h)=>{const[m,,g]=$a(p),y=s[m];if(y.outputs!=null){const v=y.outputs.indexOf(g);if(v!==-1){const b=`${m}:${v}`;f.inputNames[h]=b}}f.inputs.push(y),y.children.push(f)})});const u=e.ret;e.signature.outputArg.forEach(d=>{const[f,p]=$a(u[d.name]),h=s[f];h!=null&&(h.defaultOutput=p,a.push(h))});const c=this.mapArgsToSignature(e);return{nodes:s,inputs:i,outputs:a,weights:o,placeholders:r,signature:c}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:e.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,e.ret),n),{})}}mapArgToTensorInfo(e,n){let r=e.name;return n!=null&&(r=n[r]),{name:r,dtype:e.type}}}function yIe(t){const e=J().global;if(typeof e.atob<"u")return e.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function OX(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):yIe(t);return e?n:n.toLowerCase()}function VI(t,e,n,r=!1){const o=t[e];return o!=null?OX(o.s,r):n}function WI(t,e,n){const r=t[e];return r?r.b:n}function UI(t,e,n){const r=t[e]||{},o=r.i!=null?r.i:r.f!=null?r.f:n;return typeof o=="number"?o:parseInt(o,10)}function yD(t){switch(typeof t=="string"&&(t=wo[t]),t){case wo.DT_FLOAT:case wo.DT_HALF:return"float32";case wo.DT_INT32:case wo.DT_INT64:case wo.DT_INT8:case wo.DT_UINT8:return"int32";case wo.DT_BOOL:return"bool";case wo.DT_DOUBLE:return"float32";case wo.DT_STRING:return"string";case wo.DT_COMPLEX64:case wo.DT_COMPLEX128:return"complex64";default:return null}}function SB(t,e,n){const r=t[e];return r&&r.func?r.func.name:n}function GI(t,e,n){const r=t[e];return r&&r.type?yD(r.type):n}function HI(t,e,n){const r=t[e];return r&&r.list&&r.list.type?r.list.type.map(o=>yD(o)):n}function PX(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function qI(t,e,n){const r=t[e];return r&&r.shape?PX(r.shape):n}function KI(t,e,n){const r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(o=>typeof o=="number"?o:parseInt(o,10)):n}function XI(t,e,n,r=!1){const o=t[e];return o&&o.list&&o.list.s?o.list.s.map(s=>OX(s,r)):n}function YI(t,e,n){const r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(o=>PX(o)):n}function ZI(t,e,n){const r=t[e];return r&&r.list&&r.list.b?r.list.b:n}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vIe{constructor(e,n,r){this.node=e,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(o=>this.getInput(o)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((o,s)=>(o[s]=this.getAttr(s),o),{}))}getInput(e){return hr(e,this.tensorMap,this.context)}getAttr(e,n){const r=this.node.rawAttrs[e];if(r.tensor!=null)return hr(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return UI(this.node.rawAttrs,e,n);if(r.s!=null)return VI(this.node.rawAttrs,e,n);if(r.b!=null)return WI(this.node.rawAttrs,e,n);if(r.shape!=null)return qI(this.node.rawAttrs,e,n);if(r.type!=null)return GI(this.node.rawAttrs,e,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return KI(this.node.rawAttrs,e,n);if(r.list.s!=null)return XI(this.node.rawAttrs,e,n);if(r.list.shape!=null)return YI(this.node.rawAttrs,e,n);if(r.list.b!=null)return ZI(this.node.rawAttrs,e,n);if(r.list.type!=null)return HI(this.node.rawAttrs,e,n)}return n}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sr=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:e9,abs:Mn,acos:v9,acosh:b9,add:ue,addN:L0e,all:OP,any:jx,argMax:jf,argMin:x9,asin:w9,asinh:S9,atan:k9,atan2:$9,atanh:C9,avgPool:fk,avgPool3d:T9,basicLSTMCell:ave,batchNorm:g0,batchNorm2d:_9,batchNorm3d:I9,batchNorm4d:N9,batchToSpaceND:pk,bincount:E9,bitwiseAnd:gve,booleanMaskAsync:J1e,broadcastArgs:vve,broadcastTo:pf,buffer:Qe,cast:be,ceil:A9,clipByValue:Mo,clone:ja,complex:su,concat:Dn,concat1d:O9,concat2d:P9,concat3d:R9,concat4d:D9,conv1d:RP,conv2d:lu,conv2dTranspose:FP,conv3d:F9,conv3dTranspose:L9,cos:hk,cosh:MP,cosineWindow:hR,cumprod:Vx,cumsum:LP,denseBincount:_I,depthToSpace:z9,depthwiseConv2d:y0,diag:jve,dilation2d:B9,div:Oe,divNoNan:j9,dot:V9,dropout:hq,einsum:Id,elu:v0,enclosingPowerOfTwo:mq,ensureShape:Zve,equal:Si,erf:zP,euclideanNorm:G9,exp:Lo,expandDims:Hr,expm1:H9,eye:jP,fft:Ik,fill:Ap,floor:x0,floorDiv:AP,fused:wwe,gather:w0,gatherND:uwe,greater:Go,greaterEqual:Tu,ifft:ig,imag:mk,image:qi,inTopKAsync:pwe,irfft:lR,isFinite:q9,isInf:K9,isNaN:X9,leakyRelu:gk,less:rg,lessEqual:Jc,linalg:xR,linspace:kbe,localResponseNormalization:Y9,log:as,log1p:yk,logSigmoid:Z9,logSoftmax:VP,logSumExp:vk,logicalAnd:da,logicalNot:bk,logicalOr:WP,logicalXor:Q9,losses:QSe,lowerBound:zbe,matMul:tt,max:Bs,maxPool:xk,maxPool3d:J9,maxPoolWithArgmax:Wbe,maximum:pl,mean:bn,meshgrid:Hbe,min:ng,minimum:Mc,mirrorPad:eq,mod:tq,moments:wk,movingAverage:nwe,mul:W,multiRNNCell:Qbe,multinomial:exe,neg:tn,norm:b0,notEqual:Wf,oneHot:GP,ones:_o,onesLike:ls,op:V,outerProduct:sxe,pad:_u,pad1d:lxe,pad2d:cxe,pad3d:fxe,pad4d:hxe,pool:nq,pow:Ja,prelu:kk,print:y9,prod:rq,raggedGather:Sxe,raggedRange:$xe,raggedTensorToTensor:Txe,rand:Ixe,randomGamma:Kxe,randomNormal:JP,randomStandardNormal:Zxe,randomUniform:td,randomUniformInt:e1e,range:Uf,real:og,reciprocal:sq,relu:ma,relu6:eR,reshape:H,reverse:qs,reverse1d:a1e,reverse2d:u1e,reverse3d:d1e,reverse4d:p1e,rfft:Nk,round:tR,rsqrt:nR,scalar:Me,scatterND:owe,searchSorted:UP,selu:rR,separableConv2d:oR,setdiff1dAsync:b1e,sigmoid:oa,sign:iq,signal:ZSe,sin:sR,sinh:iR,slice:ft,slice1d:Ck,slice2d:aR,slice3d:Tk,slice4d:sg,softmax:_k,softplus:Op,spaceToBatchND:Sk,sparse:JSe,sparseToDense:awe,spectral:YSe,split:Ro,sqrt:vr,square:Wt,squaredDifference:uR,squeeze:nd,stack:zo,step:Pp,stridedSlice:aq,string:eke,sub:ke,sum:Ie,tan:lq,tanh:Fc,tensor:bi,tensor1d:Nr,tensor2d:yc,tensor3d:z1e,tensor4d:B1e,tensor5d:j1e,tensor6d:V1e,tensorScatterUpdate:U1e,tile:Os,topk:cq,transpose:pt,truncatedNormal:dR,unique:dq,unsortedSegmentSum:fR,unstack:Ks,upperBound:Y1e,variable:fq,where:Or,whereAsync:pq,zeros:Bn,zerosLike:ht},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bIe=(t,e,n,r=Sr)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(T("a",t,e,n),T("b",t,e,n))];case"AddN":return[r.addN(T("tensors",t,e,n))];case"FloorMod":case"Mod":return[r.mod(T("a",t,e,n),T("b",t,e,n))];case"Mul":return[r.mul(T("a",t,e,n),T("b",t,e,n))];case"RealDiv":case"Div":return[r.div(T("a",t,e,n),T("b",t,e,n))];case"DivNoNan":return[r.divNoNan(T("a",t,e,n),T("b",t,e,n))];case"FloorDiv":return[r.floorDiv(T("a",t,e,n),T("b",t,e,n))];case"Sub":return[r.sub(T("a",t,e,n),T("b",t,e,n))];case"Minimum":return[r.minimum(T("a",t,e,n),T("b",t,e,n))];case"Maximum":return[r.maximum(T("a",t,e,n),T("b",t,e,n))];case"Pow":return[r.pow(T("a",t,e,n),T("b",t,e,n))];case"SquaredDifference":return[r.squaredDifference(T("a",t,e,n),T("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xIe=(t,e,n,r=Sr)=>{switch(t.op){case"Abs":case"ComplexAbs":return[r.abs(T("x",t,e,n))];case"Acos":return[r.acos(T("x",t,e,n))];case"Acosh":return[r.acosh(T("x",t,e,n))];case"Asin":return[r.asin(T("x",t,e,n))];case"Asinh":return[r.asinh(T("x",t,e,n))];case"Atan":return[r.atan(T("x",t,e,n))];case"Atan2":return[r.atan2(T("x",t,e,n),T("y",t,e,n))];case"Atanh":return[r.atanh(T("x",t,e,n))];case"Ceil":return[r.ceil(T("x",t,e,n))];case"Complex":return[r.complex(T("real",t,e,n),T("imag",t,e,n))];case"Cos":return[r.cos(T("x",t,e,n))];case"Cosh":return[r.cosh(T("x",t,e,n))];case"Elu":return[r.elu(T("x",t,e,n))];case"Erf":return[r.erf(T("x",t,e,n))];case"Exp":return[r.exp(T("x",t,e,n))];case"Expm1":return[r.expm1(T("x",t,e,n))];case"Floor":return[r.floor(T("x",t,e,n))];case"Log":return[r.log(T("x",t,e,n))];case"Log1p":return[r.log1p(T("x",t,e,n))];case"Imag":return[r.imag(T("x",t,e,n))];case"Neg":return[r.neg(T("x",t,e,n))];case"Reciprocal":return[r.reciprocal(T("x",t,e,n))];case"Real":return[r.real(T("x",t,e,n))];case"Relu":return[r.relu(T("x",t,e,n))];case"Round":return[r.round(T("x",t,e,n))];case"Selu":return[r.selu(T("x",t,e,n))];case"Sigmoid":return[r.sigmoid(T("x",t,e,n))];case"Sin":return[r.sin(T("x",t,e,n))];case"Sign":return[r.sign(T("x",t,e,n))];case"Sinh":return[r.sinh(T("x",t,e,n))];case"Softplus":return[r.softplus(T("x",t,e,n))];case"Sqrt":return[r.sqrt(T("x",t,e,n))];case"Square":return[r.square(T("x",t,e,n))];case"Tanh":return[r.tanh(T("x",t,e,n))];case"Tan":return[r.tan(T("x",t,e,n))];case"ClipByValue":return[r.clipByValue(T("x",t,e,n),T("clipValueMin",t,e,n),T("clipValueMax",t,e,n))];case"Relu6":return[r.relu6(T("x",t,e,n))];case"Rsqrt":return[r.rsqrt(hr(t.inputNames[0],e,n))];case"LeakyRelu":return[r.leakyRelu(T("x",t,e,n),T("alpha",t,e,n))];case"Prelu":return[r.prelu(T("x",t,e,n),T("alpha",t,e,n))];case"IsNan":return[r.isNaN(hr(t.inputNames[0],e,n))];case"IsInf":return[r.isInf(hr(t.inputNames[0],e,n))];case"IsFinite":return[r.isFinite(hr(t.inputNames[0],e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $s(t,e,n=""){if(!(typeof t=="number"||typeof e=="number")){A(t.length===e.length,()=>n+` Shapes ${t} and ${e} must match`);for(let r=0;r<t.length;r++){const o=t[r],s=e[r];A(o<0||s<0||o===s,()=>n+` Shapes ${t} and ${e} must match`)}}}function kB(t){return!(typeof t=="number"||t.some(e=>e<0))}function kh(t,e,n){let r=QI(t,n);const o=!kB(r);if(o&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(o&&e.forEach(s=>{r=QI(s.shape,r)}),!kB(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function QI(t,e){if(typeof t=="number")return e;if(typeof e=="number")return t;if(t.length!==e.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${e}`);const n=[];for(let r=0;r<t.length;++r){const o=t[r],s=e[r];if(o>=0&&s>=0&&o!==s)throw new Error(`Incompatible shape during merge: ${t} vs. ${e}`);n[r]=o>=0?o:s}return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wIe{constructor(e,n,r,o,s,i,a){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=o,this.identicalElementShapes=s,this.dynamicSize=i,this.clearAfterRead=a,this.tensors=[],this.closed_=!1,this.idTensor=Me(0),rr(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const n=this.tensors[e];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(e){return e.map(n=>this.read(n))}write(e,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[e]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),$s(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=n,rr(n),r.written=!0,this.tensors[e]=r}writeMany(e,n){if(e.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${n.length}.`);e.forEach((r,o)=>this.write(r,n[o]))}gather(e,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(e)e=e.slice(0,this.size());else{e=[];for(let o=0;o<this.size();o++)e.push(o)}if(e.length===0)return bi([],[0].concat(this.elementShape));const r=this.readMany(e);return $s(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),zo(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return bi([],[0].concat(this.elementShape));const n=[];for(let o=0;o<this.size();o++)n.push(o);const r=this.readMany(n);return $s(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),Dn(r,0)}scatter(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,Ks(n,0))}split(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0;const o=e.map(l=>(r+=l,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const s=r===0?0:n.size/r,i=[];Z(()=>{n=H(n,[1,r,s]);for(let l=0;l<e.length;++l){const c=[0,l===0?0:o[l-1],0],d=[1,e[l],s];i[l]=H(ft(n,c,d),this.elementShape)}return i});const a=[];for(let l=0;l<e.length;l++)a[l]=l;this.writeMany(a,i)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bc{get id(){return this.idTensor.id}constructor(e,n,r,o=-1){this.tensors=e,this.elementShape=n,this.elementDtype=r,e!=null&&e.forEach(s=>{if(r!==s.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${s.dtype}`);$s(n,s.shape,"TensorList shape mismatch: "),rr(s)}),this.idTensor=Me(0),this.maxNumElements=o,rr(this.idTensor)}copy(){return new Bc([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);$s(e,this.elementShape,"TensorList shape mismatch: ");const o=kh(this.elementShape,this.tensors,e);return Z(()=>{const s=this.tensors.map(i=>H(i,o));return zo(s,0)})}popBack(e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=kh(this.elementShape,this.tensors,e),o=this.tensors.pop();return o.kept=!1,$s(o.shape,e,"TensorList shape mismatch: "),H(o,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if($s(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");rr(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const n=new Bc([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)n.tensors[r]=this.tensors[r];return n}getItem(e,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);$s(this.tensors[e].shape,n,"TensorList shape mismatch: ");const o=kh(this.elementShape,this.tensors,n);return H(this.tensors[e],o)}setItem(e,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);$s(this.elementShape,n.shape,"TensorList shape mismatch: "),rr(n),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=n}gather(e,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);$s(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());const o=kh(this.elementShape,this.tensors,r);return e.length===0?bi([],[0].concat(o)):Z(()=>{const s=e.map(i=>H(this.tensors[i],o));return zo(s,0)})}concat(e,n){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);$s(this.elementShape,n,"TensorList shape mismatch: ");const r=kh(this.elementShape,this.tensors,n);return this.size()===0?bi([],[0].concat(r)):Z(()=>{const o=this.tensors.map(s=>H(s,r));return Dn(o,0)})}}function SIe(t,e,n){const r=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);const o=t.shape.slice(1);$s(o,e,"TensorList shape mismatch: ");const s=Ks(t);return new Bc(s,e,r)}function kIe(t,e,n,r){return new Bc([],t,e,r)}function $Ie(t,e,n,r){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const o=Math.max(...e);if(r!=null&&r!==-1&&o>=r)throw new Error(`Max index must be < array size (${o}  vs. ${r})`);const s=new Bc([],n,t.dtype,r),i=Ks(t,0);return e.forEach((a,l)=>{s.setItem(a,i[l])}),s}function CIe(t,e,n){let r=0;const o=e.map(c=>(r+=c,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);const s=t.shape.slice(1),i=QI(s,n),a=r===0?0:t.size/r,l=Z(()=>{const c=[];t=H(t,[1,r,a]);for(let d=0;d<e.length;++d){const p=[0,d===0?0:o[d-1],0],h=[1,e[d],a];c[d]=H(ft(t,p,h),i)}return t.dispose(),c}),u=new Bc([],n,t.dtype,e.length);for(let c=0;c<l.length;c++)u.setItem(c,l[c]);return u}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TIe=async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{const r=T("thenBranch",t,e,n),o=T("elseBranch",t,e,n),s=T("cond",t,e,n),i=T("args",t,e,n);return(await s.data())[0]?n.functionMap[r].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap):n.functionMap[o].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=T("body",t,e,n),o=T("cond",t,e,n),s=T("args",t,e,n),i=await n.functionMap[o].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap),a=s.map(c=>c.id);let l=await i[0].data();i.forEach(c=>{!c.kept&&a.indexOf(c.id)===-1&&c.dispose()});let u=s;for(;l[0];){const c=u;u=await n.functionMap[r].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);const d=u.map(p=>p.id);c.forEach(p=>{!p.kept&&a.indexOf(p.id)===-1&&d.indexOf(p.id)===-1&&p.dispose()});const f=await n.functionMap[o].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);l=await f[0].data(),f.forEach(p=>{!p.kept&&a.indexOf(p.id)===-1&&d.indexOf(p.id)===-1&&p.dispose()})}return u}case"LoopCond":{const r=T("pred",t,e,n);return[Ca(r)]}case"Switch":{const r=T("pred",t,e,n);let o=T("data",t,e,n);return o.kept||(o=Ca(o)),(await r.data())[0]?[void 0,o]:[o,void 0]}case"Merge":{const r=t.inputNames.find(o=>hr(o,e,n)!==void 0);if(r){const o=hr(r,e,n);return[Ca(o)]}return}case"Enter":{const r=T("frameName",t,e,n),o=T("tensor",t,e,n);return n.enterFrame(r),[Ca(o)]}case"Exit":{const r=T("tensor",t,e,n);return n.exitFrame(),[Ca(r)]}case"NextIteration":{const r=T("tensor",t,e,n);return n.nextIteration(),[Ca(r)]}case"TensorArrayV3":{const r=T("size",t,e,n),o=T("dtype",t,e,n),s=T("elementShape",t,e,n),i=T("dynamicSize",t,e,n),a=T("clearAfterRead",t,e,n),l=T("identicalElementShapes",t,e,n),u=T("name",t,e,n),c=new wIe(u,o,r,s,l,i,a);return n.addTensorArray(c),[c.idTensor,Me(1)]}case"TensorArrayWriteV3":{const r=T("tensorArrayId",t,e,n),o=T("index",t,e,n),s=T("tensor",t,e,n),i=n.getTensorArray(r.id);return i.write(o,s),[i.idTensor]}case"TensorArrayReadV3":{const r=T("tensorArrayId",t,e,n),o=T("index",t,e,n);return[n.getTensorArray(r.id).read(o)]}case"TensorArrayGatherV3":{const r=T("tensorArrayId",t,e,n),o=T("indices",t,e,n),s=T("dtype",t,e,n);return[n.getTensorArray(r.id).gather(o,s)]}case"TensorArrayScatterV3":{const r=T("tensorArrayId",t,e,n),o=T("indices",t,e,n),s=T("tensor",t,e,n),i=n.getTensorArray(r.id);return i.scatter(o,s),[i.idTensor]}case"TensorArrayConcatV3":{const r=T("tensorArrayId",t,e,n),o=n.getTensorArray(r.id),s=T("dtype",t,e,n);return[o.concat(s)]}case"TensorArraySplitV3":{const r=T("tensorArrayId",t,e,n),o=T("tensor",t,e,n),s=T("lengths",t,e,n),i=n.getTensorArray(r.id);return i.split(s,o),[i.idTensor]}case"TensorArraySizeV3":{const r=T("tensorArrayId",t,e,n),o=n.getTensorArray(r.id);return[Me(o.size(),"int32")]}case"TensorArrayCloseV3":{const r=T("tensorArrayId",t,e,n),o=n.getTensorArray(r.id);return o.clearAndClose(),[o.idTensor]}case"TensorListSetItem":{const r=T("tensorListId",t,e,n),o=T("index",t,e,n),s=T("tensor",t,e,n),i=n.getTensorList(r.id);return i.setItem(o,s),[i.idTensor]}case"TensorListGetItem":{const r=T("tensorListId",t,e,n),o=T("index",t,e,n),s=T("elementShape",t,e,n),i=T("elementDType",t,e,n);return[n.getTensorList(r.id).getItem(o,s,i)]}case"TensorListScatterV2":case"TensorListScatter":{const r=T("indices",t,e,n),o=T("tensor",t,e,n),s=T("elementShape",t,e,n),i=T("numElements",t,e,n),a=$Ie(o,r,s,i);return n.addTensorList(a),[a.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=T("elementShape",t,e,n),o=T("elementDType",t,e,n);let s;t.op==="TensorListReserve"?s="numElements":s="maxNumElements";const i=T(s,t,e,n),a=t.op==="TensorListReserve"?-1:i,l=kIe(r,o,i,a);return n.addTensorList(l),[l.idTensor]}case"TensorListGather":{const r=T("tensorListId",t,e,n),o=T("indices",t,e,n),s=T("elementShape",t,e,n),i=T("elementDType",t,e,n);return[n.getTensorList(r.id).gather(o,i,s)]}case"TensorListStack":{const r=T("tensorListId",t,e,n),o=T("elementShape",t,e,n),s=T("elementDType",t,e,n),i=T("numElements",t,e,n);return[n.getTensorList(r.id).stack(o,s,i)]}case"TensorListFromTensor":{const r=T("tensor",t,e,n),o=T("elementShape",t,e,n),s=T("elementDType",t,e,n),i=SIe(r,o,s);return n.addTensorList(i),[i.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=T("tensorListId",t,e,n),o=n.getTensorList(r.id),s=T("dtype",t,e,n),i=T("elementShape",t,e,n);return[o.concat(s,i)]}case"TensorListPushBack":{const r=T("tensorListId",t,e,n),o=T("tensor",t,e,n),s=n.getTensorList(r.id);return s.pushBack(o),[s.idTensor]}case"TensorListPopBack":{const r=T("tensorListId",t,e,n),o=T("elementShape",t,e,n),s=T("elementDType",t,e,n);return[n.getTensorList(r.id).popBack(o,s)]}case"TensorListSplit":{const r=T("tensor",t,e,n),o=T("elementShape",t,e,n),s=T("lengths",t,e,n),i=CIe(r,s,o);return n.addTensorList(i),[i.idTensor]}case"TensorListLength":{const r=T("tensorListId",t,e,n),o=n.getTensorList(r.id);return[Me(o.size(),"int32")]}case"TensorListResize":{const r=T("tensorListId",t,e,n),o=T("size",t,e,n),i=n.getTensorList(r.id).resize(o);return n.addTensorList(i),[i.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $B(t,e,n){const[r,o]=T("fusedOps",t,e,n),s=r==="biasadd",i=!s,a=o==="prelu",l=r==="fusedbatchnorm",u=T("numArgs",t,e,n);if(s){if(a&&u!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&s&&u!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const c=T("strides",t,e,n),d=Rb(t,e,n),f=T("dataFormat",t,e,n).toUpperCase(),p=T("dilations",t,e,n);let[h,m]=T("args",t,e,n);i&&(m=h,h=void 0);const g=T("leakyreluAlpha",t,e,n);return{stride:c,pad:d,dataFormat:f,dilations:p,biasArg:h,preluArg:m,activationFunc:o,leakyreluAlpha:g}}const _Ie=(t,e,n,r=Sr)=>{switch(t.op){case"Conv1D":{const o=T("stride",t,e,n),s=T("pad",t,e,n),i=T("dataFormat",t,e,n).toUpperCase(),a=T("dilation",t,e,n);return[r.conv1d(T("x",t,e,n),T("filter",t,e,n),o,s,i,a)]}case"Conv2D":{const o=T("strides",t,e,n),s=Rb(t,e,n),i=T("dataFormat",t,e,n).toUpperCase(),a=T("dilations",t,e,n);return[r.conv2d(T("x",t,e,n),T("filter",t,e,n),[o[1],o[2]],s,i,[a[1],a[2]])]}case"_FusedConv2D":{const{stride:o,pad:s,dataFormat:i,dilations:a,biasArg:l,preluArg:u,activationFunc:c,leakyreluAlpha:d}=$B(t,e,n);return[r.fused.conv2d({x:T("x",t,e,n),filter:T("filter",t,e,n),strides:[o[1],o[2]],pad:s,dataFormat:i,dilations:[a[1],a[2]],bias:l,activation:c,preluActivationWeights:u,leakyreluAlpha:d})]}case"FusedDepthwiseConv2dNative":{const{stride:o,pad:s,dataFormat:i,dilations:a,biasArg:l,preluArg:u,activationFunc:c,leakyreluAlpha:d}=$B(t,e,n);return[r.fused.depthwiseConv2d({x:T("x",t,e,n),filter:T("filter",t,e,n),strides:[o[1],o[2]],pad:s,dataFormat:i,dilations:[a[1],a[2]],bias:l,activation:c,preluActivationWeights:u,leakyreluAlpha:d})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const o=T("outputShape",t,e,n),s=T("strides",t,e,n),i=Rb(t,e,n);return[r.conv2dTranspose(T("x",t,e,n),T("filter",t,e,n),o,[s[1],s[2]],i)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const o=T("strides",t,e,n),s=Rb(t,e,n),i=T("dilations",t,e,n),a=T("dataFormat",t,e,n).toUpperCase();return[r.depthwiseConv2d(T("input",t,e,n),T("filter",t,e,n),[o[1],o[2]],s,a,[i[1],i[2]])]}case"Conv3D":{const o=T("strides",t,e,n),s=T("pad",t,e,n),i=T("dataFormat",t,e,n).toUpperCase(),a=T("dilations",t,e,n);return[r.conv3d(T("x",t,e,n),T("filter",t,e,n),[o[1],o[2],o[3]],s,i,[a[1],a[2],a[3]])]}case"AvgPool":{const o=T("strides",t,e,n),s=T("pad",t,e,n),i=T("kernelSize",t,e,n);return[r.avgPool(T("x",t,e,n),[i[1],i[2]],[o[1],o[2]],s)]}case"MaxPool":{const o=T("strides",t,e,n),s=T("pad",t,e,n),i=T("kernelSize",t,e,n);return[r.maxPool(T("x",t,e,n),[i[1],i[2]],[o[1],o[2]],s)]}case"MaxPoolWithArgmax":{const o=T("strides",t,e,n),s=T("pad",t,e,n),i=T("kernelSize",t,e,n),a=T("includeBatchInIndex",t,e,n),{result:l,indexes:u}=r.maxPoolWithArgmax(T("x",t,e,n),[i[1],i[2]],[o[1],o[2]],s,a);return[l,u]}case"AvgPool3D":{const o=T("strides",t,e,n),s=T("pad",t,e,n),i=T("kernelSize",t,e,n);return[r.avgPool3d(T("x",t,e,n),[i[1],i[2],i[3]],[o[1],o[2],o[3]],s)]}case"MaxPool3D":{const o=T("strides",t,e,n),s=T("pad",t,e,n),i=T("kernelSize",t,e,n);return[r.maxPool3d(T("x",t,e,n),[i[1],i[2],i[3]],[o[1],o[2],o[3]],s)]}case"Dilation2D":{const o=T("strides",t,e,n),s=T("pad",t,e,n),i=T("dilations",t,e,n),a=o[1],l=o[2],u=i[1],c=i[2];return[r.dilation2d(T("x",t,e,n),T("filter",t,e,n),[a,l],s,[u,c],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IIe=(t,e,n,r=Sr)=>{switch(t.op){case"Fill":{const o=T("shape",t,e,n),s=T("dtype",t,e,n),i=T("value",t,e,n);return[r.fill(o,i,s)]}case"LinSpace":{const o=T("start",t,e,n),s=T("stop",t,e,n),i=T("num",t,e,n);return[r.linspace(o,s,i)]}case"Multinomial":{const o=T("logits",t,e,n),s=T("numSamples",t,e,n),i=T("seed",t,e,n);return[r.multinomial(o,s,i)]}case"OneHot":{const o=T("indices",t,e,n),s=T("depth",t,e,n),i=T("onValue",t,e,n),a=T("offValue",t,e,n),l=T("dtype",t,e,n);return[r.oneHot(o,s,i,a,l)]}case"Ones":return[r.ones(T("shape",t,e,n),T("dtype",t,e,n))];case"OnesLike":return[r.onesLike(T("x",t,e,n))];case"RandomStandardNormal":return[r.randomStandardNormal(T("shape",t,e,n),T("dtype",t,e,n),T("seed",t,e,n))];case"RandomUniform":return[r.randomUniform(T("shape",t,e,n),T("minval",t,e,n),T("maxval",t,e,n),T("dtype",t,e,n))];case"RandomUniformInt":return[r.randomUniformInt(T("shape",t,e,n),T("minval",t,e,n),T("maxval",t,e,n),T("seed",t,e,n))];case"Range":{const o=T("start",t,e,n),s=T("stop",t,e,n),i=T("step",t,e,n);return[r.range(o,s,i,T("dtype",t,e,n))]}case"TruncatedNormal":{const o=T("shape",t,e,n),s=T("mean",t,e,n),i=T("stdDev",t,e,n),a=T("seed",t,e,n);return[r.truncatedNormal(o,s,i,T("dtype",t,e,n),a)]}case"Zeros":return[r.zeros(T("shape",t,e,n),T("dtype",t,e,n))];case"ZerosLike":return[r.zerosLike(T("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iT(t,e,n){const r=T("boxes",t,e,n),o=T("scores",t,e,n),s=T("maxOutputSize",t,e,n),i=T("iouThreshold",t,e,n),a=T("scoreThreshold",t,e,n),l=T("softNmsSigma",t,e,n);return{boxes:r,scores:o,maxOutputSize:s,iouThreshold:i,scoreThreshold:a,softNmsSigma:l}}const NIe=async(t,e,n,r,o=Sr)=>{switch(t.op){case"NonMaxSuppressionV5":{const{boxes:s,scores:i,maxOutputSize:a,iouThreshold:l,scoreThreshold:u,softNmsSigma:c}=iT(t,e,n),d=await o.image.nonMaxSuppressionWithScoreAsync(s,i,a,l,u,c);return[d.selectedIndices,d.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:s,scores:i,maxOutputSize:a,iouThreshold:l,scoreThreshold:u}=iT(t,e,n),c=T("padToMaxOutputSize",t,e,n),d=await o.image.nonMaxSuppressionPaddedAsync(s,i,a,l,u,c);return[d.selectedIndices,d.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:s,scores:i,maxOutputSize:a,iouThreshold:l,scoreThreshold:u}=iT(t,e,n);return[await o.image.nonMaxSuppressionAsync(s,i,a,l,u)]}case"Where":{const s=o.cast(T("condition",t,e,n),"bool"),i=[await o.whereAsync(s)];return s.dispose(),i}case"ListDiff":return o.setdiff1dAsync(T("x",t,e,n),T("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EIe=(t,e,n,r=Sr)=>{switch(t.op){case"LowerBound":{const o=T("sortedSequence",t,e,n),s=T("values",t,e,n);return[r.lowerBound(o,s)]}case"TopKV2":{const o=T("x",t,e,n),s=T("k",t,e,n),i=T("sorted",t,e,n),a=r.topk(o,s,i);return[a.values,a.indices]}case"UpperBound":{const o=T("sortedSequence",t,e,n),s=T("values",t,e,n);return[r.upperBound(o,s)]}case"Unique":{const o=T("x",t,e,n),s=r.unique(o);return[s.values,s.indices]}case"UniqueV2":{const o=T("x",t,e,n),s=T("axis",t,e,n),i=r.unique(o,s);return[i.values,i.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AIe=(t,e,n,r=Sr)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":const o=T("default",t,e,n);return[hr(t.name,e,n)||o];case"Placeholder":return[hr(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const c=T("x",t,e,n);return[Ca(c)]}case"IdentityN":return T("x",t,e,n).map(c=>Ca(c));case"Snapshot":const s=T("x",t,e,n);return[Ca(s)];case"Shape":return[r.tensor1d(T("x",t,e,n).shape,"int32")];case"ShapeN":return T("x",t,e,n).map(c=>r.tensor1d(c.shape));case"Size":return[r.scalar(T("x",t,e,n).size,"int32")];case"Rank":return[r.scalar(T("x",t,e,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const i=T("x",t,e,n),a=T("data",t,e,n),l=T("message",t,e,n),u=T("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let c=0;c<a.length;c++)console.log(Array.prototype.slice.call(a[c].dataSync()).slice(0,u));return[i];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OIe{get id(){return this.handle.id}constructor(e,n){this.keyDType=e,this.valueDType=n,this.handle=Me(0),this.tensorMap=new Map,rr(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Me(this.size(),"int32")}async import(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return this.tensorMap.forEach(o=>o.dispose()),this.tensorMap.clear(),Z(()=>{const o=Ks(n),s=r.length,i=o.length;A(s===i,()=>`The number of elements doesn't match, keys has ${s} elements, the values has ${i} elements.`);for(let a=0;a<s;a++){const l=r[a],u=o[a];rr(u),this.tensorMap.set(l,u)}return this.handle})}async find(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return Z(()=>{const o=[];for(let s=0;s<r.length;s++){const i=r[s],a=this.findWithDefault(i,n);o.push(a)}return zo(o)})}findWithDefault(e,n){const r=this.tensorMap.get(e);return r??n}checkKeyAndValueTensor(e,n){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PIe=async(t,e,n,r)=>{switch(t.op){case"HashTable":case"HashTableV2":{const o=r.getHashTableHandleByName(t.name);if(o!=null)return[o];{const s=T("keyDType",t,e,n),i=T("valueDType",t,e,n),a=new OIe(s,i);return r.addHashTable(t.name,a),[a.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const o=T("tableHandle",t,e,n,r),s=T("keys",t,e,n),i=T("values",t,e,n);return[await r.getHashTableById(o.id).import(s,i)]}case"LookupTableFind":case"LookupTableFindV2":{const o=T("tableHandle",t,e,n,r),s=T("keys",t,e,n),i=T("defaultValue",t,e,n);return[await r.getHashTableById(o.id).find(s,i)]}case"LookupTableSize":case"LookupTableSizeV2":{const o=T("tableHandle",t,e,n,r);return[r.getHashTableById(o.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RIe=(t,e,n,r=Sr)=>{switch(t.op){case"ResizeBilinear":{const o=T("images",t,e,n),s=T("size",t,e,n),i=T("alignCorners",t,e,n),a=T("halfPixelCenters",t,e,n);return[r.image.resizeBilinear(o,[s[0],s[1]],i,a)]}case"ResizeNearestNeighbor":{const o=T("images",t,e,n),s=T("size",t,e,n),i=T("alignCorners",t,e,n),a=T("halfPixelCenters",t,e,n);return[r.image.resizeNearestNeighbor(o,[s[0],s[1]],i,a)]}case"CropAndResize":{const o=T("image",t,e,n),s=T("boxes",t,e,n),i=T("boxInd",t,e,n),a=T("cropSize",t,e,n),l=T("method",t,e,n),u=T("extrapolationValue",t,e,n);return[r.image.cropAndResize(o,s,i,a,l,u)]}case"ImageProjectiveTransformV3":{const o=T("images",t,e,n),s=T("transforms",t,e,n),i=T("outputShape",t,e,n),a=T("fillValue",t,e,n),l=T("interpolation",t,e,n),u=T("fillMode",t,e,n);return[r.image.transform(o,s,l.toLowerCase(),u.toLowerCase(),a,i)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DIe=(t,e,n,r=Sr)=>{switch(t.op){case"Equal":return[r.equal(T("a",t,e,n),T("b",t,e,n))];case"NotEqual":return[r.notEqual(T("a",t,e,n),T("b",t,e,n))];case"Greater":return[r.greater(T("a",t,e,n),T("b",t,e,n))];case"GreaterEqual":return[r.greaterEqual(T("a",t,e,n),T("b",t,e,n))];case"Less":return[r.less(T("a",t,e,n),T("b",t,e,n))];case"LessEqual":return[r.lessEqual(T("a",t,e,n),T("b",t,e,n))];case"LogicalAnd":return[r.logicalAnd(T("a",t,e,n),T("b",t,e,n))];case"LogicalNot":return[r.logicalNot(T("a",t,e,n))];case"LogicalOr":return[r.logicalOr(T("a",t,e,n),T("b",t,e,n))];case"Select":case"SelectV2":return[r.where(T("condition",t,e,n),T("a",t,e,n),T("b",t,e,n))];case"BitwiseAnd":return[r.bitwiseAnd(T("a",t,e,n),T("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FIe=(t,e,n,r=Sr)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(T("a",t,e,n),T("b",t,e,n),T("transposeA",t,e,n),T("transposeB",t,e,n))];case"Einsum":return[r.einsum(T("equation",t,e,n),...T("tensors",t,e,n))];case"Transpose":return[r.transpose(T("x",t,e,n),T("perm",t,e,n))];case"_FusedMatMul":const[o,s]=T("fusedOps",t,e,n),i=o==="biasadd",a=s==="prelu",l=T("numArgs",t,e,n),u=T("leakyreluAlpha",t,e,n);if(i){if(a&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[c,d]=T("args",t,e,n);return[r.fused.matMul({a:T("a",t,e,n),b:T("b",t,e,n),transposeA:T("transposeA",t,e,n),transposeB:T("transposeB",t,e,n),bias:c,activation:s,preluActivationWeights:d,leakyreluAlpha:u})];case"MatrixBandPart":return[r.linalg.bandPart(T("a",t,e,n),T("numLower",t,e,n),T("numUpper",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MIe=(t,e,n,r=Sr)=>{switch(t.op){case"EuclideanNorm":return[r.euclideanNorm(T("x",t,e,n),T("axis",t,e,n),T("keepDims",t,e,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(T("x",t,e,n),T("mean",t,e,n),T("variance",t,e,n),T("offset",t,e,n),T("scale",t,e,n),T("epsilon",t,e,n))];case"FusedBatchNormV3":return[r.batchNorm(T("x",t,e,n),T("mean",t,e,n),T("variance",t,e,n),T("offset",t,e,n),T("scale",t,e,n),T("epsilon",t,e,n))];case"LRN":return[r.localResponseNormalization(T("x",t,e,n),T("radius",t,e,n),T("bias",t,e,n),T("alpha",t,e,n),T("beta",t,e,n))];case"Softmax":return[r.softmax(T("x",t,e,n))];case"LogSoftmax":return[r.logSoftmax(T("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LIe=(t,e,n,r=Sr)=>{switch(t.op){case"RaggedGather":{const{outputNestedSplits:o,outputDenseValues:s}=r.raggedGather(T("paramsNestedSplits",t,e,n),T("paramsDenseValues",t,e,n),T("indices",t,e,n),T("outputRaggedRank",t,e,n));return o.concat(s)}case"RaggedRange":{const{rtNestedSplits:o,rtDenseValues:s}=r.raggedRange(T("starts",t,e,n),T("limits",t,e,n),T("splits",t,e,n));return[o,s]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(T("shape",t,e,n),T("values",t,e,n),T("defaultValue",t,e,n),T("rowPartitionTensors",t,e,n),T("rowPartitionTypes",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zIe=(t,e,n,r=Sr)=>{switch(t.op){case"Max":{const a=T("axis",t,e,n),l=T("keepDims",t,e,n);return[r.max(T("x",t,e,n),a,l)]}case"Mean":{const a=T("axis",t,e,n),l=T("keepDims",t,e,n);return[r.mean(T("x",t,e,n),a,l)]}case"Min":{const a=T("axis",t,e,n),l=T("keepDims",t,e,n);return[r.min(T("x",t,e,n),a,l)]}case"Sum":{const a=T("axis",t,e,n),l=T("keepDims",t,e,n);return[r.sum(T("x",t,e,n),a,l)]}case"All":{const a=T("axis",t,e,n),l=T("keepDims",t,e,n);return[r.all(T("x",t,e,n),a,l)]}case"Any":{const a=T("axis",t,e,n),l=T("keepDims",t,e,n);return[r.any(T("x",t,e,n),a,l)]}case"ArgMax":{const a=T("axis",t,e,n);return[r.argMax(T("x",t,e,n),a)]}case"ArgMin":{const a=T("axis",t,e,n);return[r.argMin(T("x",t,e,n),a)]}case"Prod":{const a=T("axis",t,e,n),l=T("keepDims",t,e,n);return[r.prod(T("x",t,e,n),a,l)]}case"Cumprod":{const a=T("axis",t,e,n),l=T("exclusive",t,e,n),u=T("reverse",t,e,n);return[r.cumprod(T("x",t,e,n),a,l,u)]}case"Cumsum":{const a=T("axis",t,e,n),l=T("exclusive",t,e,n),u=T("reverse",t,e,n);return[r.cumsum(T("x",t,e,n),a,l,u)]}case"Bincount":const o=T("x",t,e,n),s=T("weights",t,e,n),i=T("size",t,e,n);return[r.bincount(o,s,i)];case"DenseBincount":{const a=T("x",t,e,n),l=T("weights",t,e,n),u=T("size",t,e,n),c=T("binaryOutput",t,e,n);return[r.denseBincount(a,l,u,c)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BIe=(t,e,n,r=Sr)=>{switch(t.op){case"ConcatV2":case"Concat":{const o=T("n",t,e,n),s=T("axis",t,e,n);let i=T("tensors",t,e,n);return i=i.slice(0,o),[r.concat(i,s)]}case"Gather":{const o=T("x",t,e,n),s=T("indices",t,e,n);return[r.gather(o,r.cast(s,"int32"),0)]}case"GatherV2":{const o=T("axis",t,e,n),s=T("batchDims",t,e,n),i=T("x",t,e,n),a=T("indices",t,e,n);return[r.gather(i,r.cast(a,"int32"),o,s)]}case"Reverse":{const o=T("dims",t,e,n),s=[];for(let a=0;a<o.length;a++)o[a]&&s.push(a);const i=T("x",t,e,n);return[r.reverse(i,s)]}case"ReverseV2":{const o=T("axis",t,e,n),s=T("x",t,e,n);return[r.reverse(s,o)]}case"Slice":{const o=T("begin",t,e,n),s=T("size",t,e,n);return[r.slice(T("x",t,e,n),o,s)]}case"StridedSlice":{const o=T("begin",t,e,n),s=T("end",t,e,n),i=T("strides",t,e,n),a=T("beginMask",t,e,n),l=T("endMask",t,e,n),u=T("ellipsisMask",t,e,n),c=T("newAxisMask",t,e,n),d=T("shrinkAxisMask",t,e,n),f=T("x",t,e,n);return[r.stridedSlice(f,o,s,i,a,l,u,c,d)]}case"Pack":return Z(()=>{const o=T("axis",t,e,n),s=T("tensors",t,e,n),i=s[0].shape,a=r.squeeze(s[0]).shape,l=s.map(u=>{const c=ct(u.shape,i);if(!c&&!ct(r.squeeze(u).shape,a))throw new Error("the input tensors shape does not match");return c?u:r.reshape(u,i)});return[r.stack(l,o)]});case"Unpack":{const o=T("axis",t,e,n),s=T("tensor",t,e,n);return r.unstack(s,o)}case"Tile":{const o=T("reps",t,e,n);return[r.tile(T("x",t,e,n),o)]}case"Split":case"SplitV":{const o=T("axis",t,e,n),s=T("numOrSizeSplits",t,e,n),i=T("x",t,e,n);return r.split(i,s,o)}case"ScatterNd":{const o=T("indices",t,e,n),s=T("values",t,e,n),i=T("shape",t,e,n);return[r.scatterND(o,s,i)]}case"GatherNd":{const o=T("x",t,e,n),s=T("indices",t,e,n);return[r.gatherND(o,s)]}case"SparseToDense":{const o=T("sparseIndices",t,e,n),s=T("outputShape",t,e,n),i=T("sparseValues",t,e,n),a=T("defaultValue",t,e,n);return[r.sparseToDense(o,i,s,i.dtype===a.dtype?a:r.cast(a,i.dtype))]}case"TensorScatterUpdate":{const o=T("indices",t,e,n),s=T("values",t,e,n),i=T("tensor",t,e,n);return[r.tensorScatterUpdate(i,o,s)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jIe=(t,e,n,r=Sr)=>{switch(t.op){case"SparseFillEmptyRows":{const{outputIndices:o,outputValues:s,emptyRowIndicator:i,reverseIndexMap:a}=r.sparse.sparseFillEmptyRows(T("indices",t,e,n),T("values",t,e,n),T("denseShape",t,e,n),T("defaultValue",t,e,n));return[o,s,i,a]}case"SparseReshape":{const{outputIndices:o,outputShape:s}=r.sparse.sparseReshape(T("inputIndices",t,e,n),T("inputShape",t,e,n),T("newShape",t,e,n));return[o,s]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(T("data",t,e,n),T("indices",t,e,n),T("segmentIds",t,e,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(T("data",t,e,n),T("indices",t,e,n),T("segmentIds",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VIe=(t,e,n,r=Sr)=>{switch(t.op){case"FFT":return[r.fft(T("x",t,e,n))];case"IFFT":return[r.ifft(T("x",t,e,n))];case"RFFT":return[r.rfft(T("x",t,e,n))];case"IRFFT":return[r.irfft(T("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WIe=(t,e,n,r=Sr)=>{switch(t.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(T("input",t,e,n),T("pattern",t,e,n),T("rewrite",t,e,n),T("replaceGlobal",t,e,n))];case"StringNGrams":{const{nGrams:o,nGramsSplits:s}=r.string.stringNGrams(T("data",t,e,n),T("dataSplits",t,e,n),T("separator",t,e,n),T("nGramWidths",t,e,n),T("leftPad",t,e,n),T("rightPad",t,e,n),T("padWidth",t,e,n),T("preserveShortSequences",t,e,n));return[o,s]}case"StringSplit":{const{indices:o,values:s,shape:i}=r.string.stringSplit(T("input",t,e,n),T("delimiter",t,e,n),T("skipEmpty",t,e,n));return[o,s,i]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(T("input",t,e,n),T("numBuckets",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UIe=(t,e,n,r=Sr)=>{switch(t.op){case"Cast":return[r.cast(T("x",t,e,n),T("dtype",t,e,n))];case"ExpandDims":{const o=T("axis",t,e,n);return[r.expandDims(T("x",t,e,n),o)]}case"Squeeze":{const o=T("axis",t,e,n);return[r.squeeze(T("x",t,e,n),o)]}case"Reshape":return[r.reshape(T("x",t,e,n),T("shape",t,e,n))];case"EnsureShape":return[r.ensureShape(T("x",t,e,n),T("shape",t,e,n))];case"MirrorPad":return[r.mirrorPad(T("x",t,e,n),T("padding",t,e,n),T("mode",t,e,n))];case"PadV2":case"Pad":return[r.pad(T("x",t,e,n),T("padding",t,e,n),T("constantValue",t,e,n))];case"SpaceToBatchND":{const o=T("blockShape",t,e,n),s=T("paddings",t,e,n);return[r.spaceToBatchND(T("x",t,e,n),o,s)]}case"BatchToSpaceND":{const o=T("blockShape",t,e,n),s=T("crops",t,e,n);return[r.batchToSpaceND(T("x",t,e,n),o,s)]}case"DepthToSpace":{const o=T("blockSize",t,e,n),s=T("dataFormat",t,e,n).toUpperCase();return[r.depthToSpace(T("x",t,e,n),o,s)]}case"BroadcastTo":return[r.broadcastTo(T("x",t,e,n),T("shape",t,e,n))];case"BroadcastArgs":return[r.broadcastArgs(T("s0",t,e,n),T("s1",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CB(t,e,n,r,o=Z){const s=((i,a,l)=>{switch(i.category){case"arithmetic":return o(()=>bIe(i,a,l));case"basic_math":return o(()=>xIe(i,a,l));case"control":return TIe(i,a,l);case"convolution":return o(()=>_Ie(i,a,l));case"creation":return o(()=>IIe(i,a,l));case"dynamic":return NIe(i,a,l);case"evaluation":return o(()=>EIe(i,a,l));case"image":return o(()=>RIe(i,a,l));case"graph":return o(()=>AIe(i,a,l));case"logical":return o(()=>DIe(i,a,l));case"matrices":return o(()=>FIe(i,a,l));case"normalization":return o(()=>MIe(i,a,l));case"ragged":return o(()=>LIe(i,a,l));case"reduction":return o(()=>zIe(i,a,l));case"slice_join":return o(()=>BIe(i,a,l));case"sparse":return o(()=>jIe(i,a,l));case"spectral":return o(()=>VIe(i,a,l));case"string":return o(()=>WIe(i,a,l));case"transformation":return o(()=>UIe(i,a,l));case"hash_table":return PIe(i,a,l,r);case"custom":const u=AX(i.op);if(u&&u.customExecutor)return u.customExecutor(new vIe(i,a,l));throw TypeError(`Custom op ${i.op} is not registered.`);default:throw TypeError(`Unknown op '${i.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return Ac(s)?s.then(i=>[].concat(i)):[].concat(s)}class TB{constructor(e={},n={},r={},o={},s){this.weightMap=e,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=o,this.parseNodeNameCache=s,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,n){return{id:e,frameName:n,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let n=0;n<this.contexts.length-1;n++){const r=this.contexts.slice(0,this.contexts.length-n);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(e);for(const n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _B(t,e,n,r){const o=new Set,s=[];let i=null,a=null;const l=new Set,u=new Set(Object.keys(t).map(f=>So(f)[0]));r=r||[];const c=new Set(r.map(f=>So(f.name)[0])),d=[...e];for(;d.length>0;){const f=d.pop();if((Ju(f)||QIe(f)||JIe(f))&&i==null&&(i=f,a=i.children.map(p=>p.name).filter(p=>o.has(p))),o.add(f.name),n[f.name]==null&&!u.has(f.name)&&!c.has(f.name)){if(f.inputs.length===0){s.push(f.name);continue}f.inputs.forEach(p=>{l.has(p.name)||(l.add(p.name),d.push(p))})}}return{inputs:t,outputs:e,usedNodes:o,missingInputs:s,dynamicNode:i,syncInputs:a}}function GIe(t,e){const{usedNodes:n,inputs:r}=e,o=Object.keys(r).map(g=>So(g)[0]).map(g=>t.nodes[g]),s=t.initNodes||[],i=g=>n.has(typeof g=="string"?g:g.name);function a(g){return[...new Map(g.map(y=>[y.name,y])).values()]}const l=a([...o,...t.weights,...s]).filter(i),u=a([...l,...Object.values(t.nodes)]).filter(i),c=new Map(u.map(g=>[g.name,g])),d={};for(const g of u){d[g.name]=d[g.name]||0;for(const y of g.children)i(y)||(d[y.name]=Number.POSITIVE_INFINITY),d[y.name]=(d[y.name]||0)+1}const f=Object.entries(d).filter(([,g])=>g===0).map(([g])=>g),p=[...f];for(;f.length>0;){const g=f.pop(),y=c.get(g);for(const v of y.children.filter(i))--d[v.name]===0&&(p.push(v.name),f.push(v.name))}const h=p.map(g=>c.get(g)),m=HIe(h,l);return qIe(m,l),m}function HIe(t,e){const n=new Map(t.map(i=>[i.name,i])),r=e.map(i=>i.name),o=new Set(r);for(;r.length>0;){const i=r.pop(),a=n.get(i);for(const l of a.children)!n.has(l.name)||o.has(l.name)||(o.add(l.name),r.push(l.name))}return t.filter(i=>o.has(i.name))}class zv extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}}function qIe(t,e){const n=new Map(t.map((a,l)=>[a.name,l])),r=new Set(e.map(a=>a.name)),o=a=>r.has(typeof a=="string"?a:a.name),s=new Set(t.map(a=>a.name)),i=a=>s.has(typeof a=="string"?a:a.name);for(const a of t){for(const l of a.children.filter(i)){if(!n.has(l.name))throw new zv(`Child ${l.name} of node ${a.name} is unreachable.`);if(n.get(a.name)>n.get(l.name))throw new zv(`Node ${a.name} is scheduled to run after its child ${l.name}.`)}if(!o(a))for(const l of a.inputs){if(!n.has(l.name))throw new zv(`Input ${l.name} of node ${a.name} is unreachable.`);if(n.get(l.name)>n.get(a.name))throw new zv(`Node ${a.name} is scheduled to run before its input ${l.name}.`)}}}function KIe(t){const e=new Map(t.map((a,l)=>[a.name,l])),n=Number.MAX_SAFE_INTEGER,r=t.map((a,l)=>Ju(a)?n:l),o=a=>{const l=r[e.get(a.name)];return l??-1},s=t.map((a,l)=>a.children.map(o).reduce((u,c)=>Math.max(u,c),r[l])),i=new Map;for(let a=0;a<t.length;++a){const l=s[a];if(l===n)continue;const u=t[a],c=t[l];i.has(c.name)||i.set(c.name,[]),i.get(c.name).push(u)}return i}const XIe=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),YIe=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),ZIe=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function Ju(t){return XIe.has(t.op)}function QIe(t){return YIe.has(t.op)}function JIe(t){return ZIe.has(t.op)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Jx{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const n=Object.keys(e).map(r=>e[r].map(o=>o.id));this._weightIds=[].concat(...n),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const n=e.signatureKey||e.name;return e.defaultOutput?`${n}:${e.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((e,n)=>(e[n]=this._functions[n].signature,e),{})}constructor(e,n){this.graph=e,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new Jx(e.functions[r],this)})}getCompilationKey(e,n){const r=e.map(s=>s.name).sort(),o=n.map(s=>s.name).sort();return r.join(this.SEPARATOR)+"--"+o.join(this.SEPARATOR)}compile(e,n){const r=_B(e,n,this.weightMap,this._initNodes),{missingInputs:o,dynamicNode:s,syncInputs:i}=r;if(s!=null)throw new Error(`This execution contains the node '${s.name}', which has the dynamic op '${s.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${i}]`);if(o.length>0){const u=n.map(d=>d.name),c=Object.keys(e);throw new Error(`Cannot compute the outputs [${u}] from the provided inputs [${c}]. Missing the following inputs: [${o}]`)}const a=GIe(this.graph,r),l=KIe(a);return{orderedNodes:a,nodeLiveUntilMap:l}}cloneAndKeepTensor(e){if(e==null)return null;const n=e.clone();return rr(n),n}cloneTensorList(e){return e?e.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,this.cloneTensorList(r)]))}execute(e,n){this.disposeIntermediateTensors(),e=this.mapInputs(e);const r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n);const o=r.map(f=>this.graph.nodes[So(f)[0]]),s=n.map(f=>So(f)[0]),i=new Set(s);let a=s.map(f=>this.graph.nodes[f]);a.length===0&&(a=this._outputs);const l=this.getCompilationKey(o,a);let u=this.compiledMap.get(l);u==null&&(u=this.compile(e,a),this.compiledMap.set(l,u));try{this.keepIntermediateTensors=J().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(f){this.keepIntermediateTensors=!1,console.warn(f.message)}const c={},d={};return Z(()=>{const f=new TB(this.weightMap,c,d,this.functionExecutorMap,this.parseNodeNameCache),p=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(y=>{const[v,b]=So(y,f),x=[];x[b]=e[y],p[v]=x,this.keepIntermediateTensors&&(this.clonedTensorsMap[v]=this.cloneTensorList(x))});const h=this.getFrozenTensorIds(p),{orderedNodes:m,nodeLiveUntilMap:g}=u;for(const y of m){if(p[y.name])continue;const v=CB(y,p,f,this._resourceManager);if(Ac(v))throw new Error(`The execution of the op '${y.op}' returned a promise. Please use model.executeAsync() instead.`);p[y.name]=v,this.keepIntermediateTensors&&(this.clonedTensorsMap[y.name]=this.cloneTensorList(v)),this.checkTensorForDisposalWithNodeLiveUntilInfo(y,p,f,h,i,g.get(y.name))}return this.parent==null&&f.dispose(h),n.map(y=>hr(y,p,f))})}getFrozenTensorIds(e){const n=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(o=>o.id)));return new Set(n)}checkTensorForDisposal(e,n,r,o,s,i,a){if(!(Ju(n)||i.has(e))){for(const l of r[e])l!=null&&(a[l.id]=(a[l.id]||0)+n.children.length);for(const l of n.inputs){if(Ju(l))continue;const u=xB(l.name,r,o);if(u!=null)for(const c of u){if(!c||c.kept||s.has(c.id))continue;const d=a[c.id];d===1?(c.dispose(),delete a[c.id]):d!=null&&a[c.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,n,r,o,s,i){function a(l){return Ju(l)||s.has(l.name)}if(!(Ju(e)||i==null))for(const l of i){if(a(l))continue;const u=xB(l.name,n,r);for(const c of u)!c||c.kept||o.has(c.id)||c.dispose()}}async executeAsync(e,n){return this._executeAsync(e,n)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(const n of e)n&&!n.isDisposed&&n.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,n,r=!1,o={},s={}){this.disposeIntermediateTensors(),r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=J().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(f){this.keepIntermediateTensors=!1,console.warn(f.message)}const i=new TB(this.weightMap,o,s,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const a=await this.executeWithControlFlow(e,i,n,r),l=n.map(f=>hr(f,a,i)),u=l.map(f=>f.id),c=Object.keys(e).map(f=>e[f].id),d=new Set([...u,...c,...this.weightIds]);return Object.values(a).forEach(f=>{f.forEach(p=>{p&&!p.isDisposed&&!d.has(p.id)&&p.dispose()})}),this.parent==null&&i.dispose(d),l}async executeFunctionAsync(e,n,r){const o=e.reduce((s,i,a)=>(s[this.inputs[a].name]=i,s),{});return this._executeAsync(o,this.outputNodes,!0,n,r)}async executeWithControlFlow(e,n,r,o){const s=Object.keys(e),i=s.map(x=>this.graph.nodes[So(x)[0]]),a=r.map(x=>So(x)[0]),l=new Set(a);let u=a.map(x=>this.graph.nodes[x]);u.length===0&&(u=this._outputs);const{usedNodes:c,missingInputs:d,dynamicNode:f,syncInputs:p}=_B(e,u,this.weightMap,this._initNodes),h=[...i,...this.graph.weights,...this._initNodes||[]].map(x=>({node:x,contexts:n.currentContext})),m=Object.assign({},this.weightMap);Object.keys(e).forEach(x=>{const[w,S]=So(x),k=[];k[S]=e[x],m[w]=k});const g={},y=this.getFrozenTensorIds(m),v={};for(;h.length>0;){const x=this.processStack(i,h,n,m,v,y,l,g,c);await Promise.all(x)}f==null&&!o&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const b=u.filter(x=>!Ju(x)&&!hr(x.name,m,n)).map(x=>x.name);if(b.length>0){let x="";throw f!=null&&(x=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${p}]`),new Error(`Cannot compute the outputs [${b}] from the provided inputs [${s}]. Consider providing the following inputs: [${d}]. ${x}`)}return m}processStack(e,n,r,o,s,i,a,l,u){const c=[];for(;n.length>0;){const d=n.pop();r.currentContext=d.contexts;let f="";if(d.node.op==="Enter"&&T("isConstant",d.node,o,r)&&([f]=$a(d.node.name,r)),o[d.node.name]==null){const p=CB(d.node,o,r,this._resourceManager);f||([f]=$a(d.node.name,r));const h=r.currentContext;Ac(p)?c.push(p.then(m=>(o[f]=m,this.keepIntermediateTensors&&(this.clonedTensorsMap[f]=this.cloneTensorList(m)),r.currentContext=h,this.checkTensorForDisposal(f,d.node,o,r,i,a,l),this.processChildNodes(d.node,n,r,o,s,u),m))):(o[f]=p,this.keepIntermediateTensors&&(this.clonedTensorsMap[f]=this.cloneTensorList(p)),this.checkTensorForDisposal(f,d.node,o,r,i,a,l),this.processChildNodes(d.node,n,r,o,s,u))}else this.processChildNodes(d.node,n,r,o,s,u)}return c}processChildNodes(e,n,r,o,s,i){e.children.forEach(a=>{const[l]=$a(a.name,r);s[l]||!i.has(a.name)||(a.op==="Merge"?a.inputNames.some(u=>!!hr(u,o,r))&&(s[l]=!0,n.push({contexts:r.currentContext,node:a})):a.inputNames.every(u=>!!hr(u,o,r))&&(s[l]=!0,n.push({contexts:r.currentContext,node:a})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(n=>n.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(n=>{const r=e[n],[o]=So(n),s=this.graph.nodes[o];if(s.attrParams.shape&&s.attrParams.shape.value){const i=s.attrParams.shape.value,a=i.length===r.shape.length&&r.shape.every((l,u)=>i[u]===-1||i[u]===l);A(a,()=>`The shape of dict['${s.name}'] provided in model.execute(dict) must be [${i}], but was [${r.shape}]`)}s.attrParams.dtype&&s.attrParams.dtype.value&&A(r.dtype===s.attrParams.dtype.value,()=>`The dtype of dict['${s.name}'] provided in model.execute(dict) must be ${s.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){var n,r;const o={};for(const s in e){const i=(r=(n=this._signature)===null||n===void 0?void 0:n.inputs)===null||r===void 0?void 0:r[s];i!=null?o[i.name]=e[s]:o[s]=e[s]}return o}checkInputs(e){const n=Object.keys(e).filter(r=>{const[o]=So(r);return this.graph.nodes[o]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(e){return e.map(n=>{var r,o;const s=(o=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||o===void 0?void 0:o[n];return s!=null?s.name:n},{})}checkOutputs(e){e.forEach(n=>{const[r]=So(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}}class e2e{constructor(e={},n={}){this.hashTableNameToHandle=e,this.hashTableMap=n}addHashTable(e,n){this.hashTableNameToHandle[e]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t2e="?tfjs-format=file",n2e="model.json";class r2e{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,n={},r=Rq){this.modelUrl=e,this.loadOptions=n,this.version="n/a",this.io=r,n==null&&(this.loadOptions={}),this.resourceManager=new e2e}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const n=this.io.getLoadHandlers(e,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[e]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return Ac(e)?e.then(n=>n.getWeightStream==null?this.loadSync(n):this.loadStreaming(n)):this.loadSync(e)}loadSync(e){const n=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,n)}async loadStreaming(e){if(e.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");const n=await s9(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,n)}loadWithWeightMap(e,n){this.artifacts=e;const r=this.artifacts.modelTopology;let o=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const s=this.artifacts.userDefinedMetadata;s.signature!=null&&(o=s.signature),s.structuredOutputKeys!=null&&(this.structuredOutputKeys=s.structuredOutputKeys)}if(this.signature=o,this.version=`${r.versions.producer}.${r.versions.minConsumer}`,this.executor=new Jx(wB.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const s=wB.Instance.transformGraph(e.modelInitializer);this.initializer=new Jx(s),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,n){if(typeof e=="string"){const r=this.io.getSaveHandlers(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const n=e instanceof fn?[e]:e,r={};return n.forEach((o,s)=>r[this.structuredOutputKeys[s]]=o),r}return e}predict(e,n){const r=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(r)}async predictAsync(e,n){const r=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(r)}normalizeInputs(e){var n;if(!(e instanceof fn)&&!Array.isArray(e)){const s=(n=this.signature)===null||n===void 0?void 0:n.inputs;if(s!=null)for(const i in s){const a=s[i];a.resourceId!=null&&(e[i]=this.resourceIdToCapturedInput[a.resourceId])}return e}e=Array.isArray(e)?e:[e];const r=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${e.length} input tensors provided.`);let o=0;return this.inputNodes.reduce((s,i)=>{var a,l,u;const c=(u=(l=(a=this.signature)===null||a===void 0?void 0:a.inputs)===null||l===void 0?void 0:l[i])===null||u===void 0?void 0:u.resourceId;return c!=null?s[i]=this.resourceIdToCapturedInput[c]:s[i]=e[o++],s},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const n=this.initializerSignature.outputs,r=Object.keys(n);for(let o=0;o<r.length;o++){const s=r[o],i=n[s];this.resourceIdToCapturedInput[i.resourceId]=e[o]}}}execute(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=this.executor.execute(e,n);return r.length>1?r:r[0]}async executeAsync(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=await this.executor.executeAsync(e,n);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((n,r)=>(n[r]=[e[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&nt(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function IB(t,e={},n=Rq){if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof t=="string"&&(t=o2e(t));const r=new r2e(t,e,n);return await r.load(),r}function o2e(t){return t.endsWith("/")||(t=t+"/"),`${t}${n2e}${t2e}`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var NB;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(NB||(NB={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ne(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&A(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s2e=pR;class Kk extends bO{nextDataId(){return Kk.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new _8(this,Di())}write(e,n,r){this.firstUse&&(this.firstUse=!1,J().get("IS_NODE")&&Zo(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const o={id:this.nextDataId()};return this.data.set(o,{values:e,dtype:r,refCount:1}),o}makeTensorInfo(e,n,r){let o;if(n==="string"&&r!=null&&r.length>0&&vy(r[0])){const s=r.map(i=>Hl(i));o=this.write(s,e,n)}else o=this.write(r,e,n);return{dataId:o,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,o,s){this.data.set(e,{values:n,dtype:o,refCount:s})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const o=this.readSync(r.real.dataId),s=this.readSync(r.imag.dataId);return tl(o,s)}return dye(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(o=>ru(o));return Qe(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Qe(e.shape,e.dtype,n)}makeOutput(e,n,r){return Di().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=oo();return e(),{kernelMs:oo()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){Ne([e],"where");const n=this.readSync(e.dataId);return s2e(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}Kk.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RX(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const i2e=t=>{const{x:e}=t.inputs,n=t.backend;Ne(e,"abs");let r=new Float32Array(ne(e.shape));const o=n.data.get(e.dataId).values;return r=RX(o),n.makeOutput(r,e.shape,e.dtype)},a2e={kernelName:lS,backendName:"cpu",kernelFunc:i2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function An(t){return(e,n,r,o,s)=>{const i=Xe(e,n),a=i.length,l=Fe(i),u=ne(i),c=yr(s,u),d=e.length,f=n.length,p=Fe(e),h=Fe(n),m=Vf(e,i),g=Vf(n,i);if(m.length+g.length===0)for(let y=0;y<c.length;++y)c[y]=t(r[y%r.length],o[y%o.length]);else for(let y=0;y<c.length;++y){const v=Np(y,a,l),b=v.slice(-d);m.forEach(k=>b[k]=0);const x=ra(b,d,p),w=v.slice(-f);g.forEach(k=>w[k]=0);const S=ra(w,f,h);c[y]=t(r[x],o[S])}return[c,i]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $o(t){const{inputs:e,backend:n}=t,{real:r,imag:o}=e,s=n.data.get(r.dataId).values,i=n.data.get(o.dataId).values,a=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(a.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",s),imag:n.makeTensorInfo(o.shape,"float32",i)},a}const l2e={kernelName:NO,backendName:"cpu",kernelFunc:$o};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e1(t,e,n="float32"){if(n==="complex64"){const o=e1(t,e,"float32"),s=e1(t,e,"float32");return $o({inputs:{real:o,imag:s},backend:t})}const r=Rr(ne(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pa(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const u2e={kernelName:zy,backendName:"cpu",kernelFunc:pa};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jc(t){const{inputs:e,backend:n}=t,{input:r}=e,o=n.data.get(r.dataId).complexTensorInfos.real,s=n.data.get(o.dataId).values;return n.makeTensorInfo(o.shape,o.dtype,s)}const c2e={kernelName:aP,backendName:"cpu",kernelFunc:jc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DX(t,e,n,r){if(r==="int32"){const o=Int32Array.from(t);return[e,"int32",o]}if(r==="bool"){const o=Qc([0],n),[s,i]=An((a,l)=>a!==l?1:0)(e,[],t,o,"bool");return[i,"bool",s]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function pu(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{dtype:s}=r;if(s==="complex64"){if(o.dtype==="complex64")return pa({inputs:{x:o},backend:n});const c=e1(n,o.shape,o.dtype),d=pu({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),f=$o({inputs:{real:d,imag:c},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),f}if(o.dtype==="complex64"){const c=jc({inputs:{input:o},backend:n}),d=pu({inputs:{x:c},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(c),d}if(!N8(o.dtype,s)){const c=pa({inputs:{x:o},backend:n});return{dataId:c.dataId,shape:c.shape,dtype:s}}const i=n.data.get(o.dataId).values,[a,l,u]=DX(i,o.shape,o.dtype,s);return n.makeTensorInfo(a,l,u)}const d2e={kernelName:Ty,backendName:"cpu",kernelFunc:pu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xn(t,e,n,r){return n==null?({inputs:o,backend:s})=>{const{a:i,b:a}=o,l=s;Ne([i,a],t);const u=l.data.get(i.dataId).values,c=l.data.get(a.dataId).values,d=i.dtype==="string"?nl(u):u,f=i.dtype==="string"?nl(c):c,p=r||i.dtype,[h,m]=e(i.shape,a.shape,d,f,p);return l.makeTensorInfo(m,p,h)}:({inputs:o,backend:s})=>{const{a:i,b:a}=o,l=s;if(i.dtype==="complex64"||a.dtype==="complex64"){const u=pu({inputs:{x:i},backend:l,attrs:{dtype:"complex64"}}),c=l.data.get(u.dataId),d=c.complexTensorInfos.real,f=c.complexTensorInfos.imag,p=l.data.get(d.dataId).values,h=l.data.get(f.dataId).values,m=pu({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),g=l.data.get(m.dataId),y=g.complexTensorInfos.real,v=g.complexTensorInfos.imag,b=l.data.get(y.dataId).values,x=l.data.get(v.dataId).values,[w,S,k]=n(i.shape,a.shape,p,h,b,x),$=l.makeTensorInfo(k,"float32",w),C=l.makeTensorInfo(k,"float32",S),I=$o({inputs:{real:$,imag:C},backend:l});return l.disposeIntermediateTensorInfo(u),l.disposeIntermediateTensorInfo(m),l.disposeIntermediateTensorInfo($),l.disposeIntermediateTensorInfo(C),I}else{const u=l.data.get(i.dataId).values,c=l.data.get(a.dataId).values,d=r||i.dtype,[f,p]=e(i.shape,a.shape,u,c,d);return l.makeTensorInfo(p,d,f)}}}function vD(t){return(e,n,r,o,s,i)=>{const a=Xe(e,n),l=ne(a),u=a.length,c=Fe(a),d=yr("float32",l),f=yr("float32",l),p=Vf(e,a),h=Vf(n,a),m=tl(r,o),g=tl(s,i),y=e.length,v=Fe(e),b=n.length,x=Fe(n);if(p.length+h.length===0)for(let w=0;w<d.length;w++){const S=w%m.length,k=w%g.length,$=t(m[S*2],m[S*2+1],g[k*2],g[k*2+1]);d[w]=$.real,f[w]=$.imag}else for(let w=0;w<d.length;w++){const S=Np(w,u,c),k=S.slice(-y);p.forEach(O=>k[O]=0);const $=ra(k,y,v),C=S.slice(-b);h.forEach(O=>C[O]=0);const I=ra(C,b,x),E=t(m[$*2],m[$*2+1],g[I*2],g[I*2+1]);d[w]=E.real,f[w]=E.imag}return[d,f,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FX=An((t,e)=>t+e),f2e=vD((t,e,n,r)=>({real:t+n,imag:e+r})),Hf=Xn(Ep,FX,f2e),p2e={kernelName:Ep,backendName:"cpu",kernelFunc:Hf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bD(t,e,n,r,o){const s=ne(r),i=Rr(o,n);for(let a=0;a<t.length;a++){const l=t[a];if(l<0)throw new Error("Input x must be non-negative!");l>=o||(s>0?i[l]+=e[a]:i[l]+=1)}return i}function MX(t,e,n,r=!1){const o=t.shape[0],s=t.shape[1],i=Qe([o,n],e.dtype);for(let a=0;a<o;a++)for(let l=0;l<s;l++){const u=t.get(a,l);if(u<0)throw new Error("Input x must be non-negative!");u>=n||(r?i.set(1,a,u):e.size>0?i.set(i.get(a,u)+e.get(a,l),a,u):i.set(i.get(a,u)+1,a,u))}return i}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LX=An((t,e)=>t&e),h2e=Xn(gS,LX),m2e={kernelName:gS,backendName:"cpu",kernelFunc:h2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ga(t){return(e,n,r)=>{const o=_n(n,e.length);for(let s=0;s<e.length;++s)o[s]=t(e[s],r);return o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Et(t,e,n){const r=ga(e);return Eu(t,r,n)}function Eu(t,e,n){return({inputs:r,attrs:o,backend:s})=>{const{x:i}=r;Ne(i,t);const a=s,l=a.data.get(i.dataId).values;let u;if(i.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");u=nl(l)}else u=l;const c=n||i.dtype,d=e(u,c,o);return a.makeTensorInfo(i.shape,c,d)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zX=ga(t=>Math.ceil(t)),g2e=Eu(_y,zX),y2e={kernelName:_y,backendName:"cpu",kernelFunc:g2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BX(t,e,n,r){const o=_n(n,ne(e));if(r&&n!=="string"){let s=0;t.forEach(i=>{const a=ne(i.shape);o.set(i.vals,s),s+=a})}else{let s=0;t.forEach(i=>{const a=n==="string"?nl(i.vals):i.vals;let l=0;for(let u=0;u<i.shape[0];++u){const c=u*e[1]+s;for(let d=0;d<i.shape[1];++d)o[c+d]=a[l++]}s+=i.shape[1]})}return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jX=An((t,e)=>t===e?1:0),VX=Xn(CS,jX,null,"bool"),v2e={kernelName:CS,backendName:"cpu",kernelFunc:VX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WX=ga(t=>Math.exp(t)),UX=Eu(Ry,WX,"float32"),b2e={kernelName:Ry,backendName:"cpu",kernelFunc:UX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GX=ga(t=>Math.expm1(t)),x2e=Eu(Dy,GX),w2e={kernelName:Dy,backendName:"cpu",kernelFunc:x2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HX=ga(t=>Math.floor(t)),S2e=Eu(Fy,HX),k2e={kernelName:Fy,backendName:"cpu",kernelFunc:S2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qX=An((t,e)=>Math.floor(t/e)),$2e=Xn(My,qX,null,"int32"),C2e={kernelName:My,backendName:"cpu",kernelFunc:$2e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KX(t,e,n,r,o,s,i,a,l){const u=Qe([r,s],n);for(let c=0;c<r;c++){const d=[];let f=0;for(let p=0;p<o;p++){const h=t[c*o+p];f+=h*i[p],d.push(h)}if(f<0||f>=l/s)throw new Error(`Invalid indices: ${d} does not index into ${a}`);for(let p=0;p<s;p++)u.values[c*s+p]=e.get(...e.indexToLoc(f*s+p))}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XX(t,e,n){const r=Qe(n,t.dtype);for(let o=0;o<r.size;++o){const i=r.indexToLoc(o).slice(),a=i[0],l=i[2],u=e.locToIndex([a,l]);i[2]=e.values[u];const c=t.locToIndex(i);0<=c&&c<t.values.length&&(r.values[o]=t.values[c])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YX=An((t,e)=>t>e?1:0),T2e=Xn(NS,YX,null,"bool"),_2e={kernelName:NS,backendName:"cpu",kernelFunc:T2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZX=An((t,e)=>t>=e?1:0),I2e=Xn(Ly,ZX,null,"bool"),N2e={kernelName:Ly,backendName:"cpu",kernelFunc:I2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QX=An((t,e)=>t<e?1:0),E2e=Xn(AS,QX,null,"bool"),A2e={kernelName:AS,backendName:"cpu",kernelFunc:E2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JX=An((t,e)=>t<=e?1:0),O2e=Xn(OS,JX,null,"bool"),P2e={kernelName:OS,backendName:"cpu",kernelFunc:O2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eY(t,e,n){const r=(e-t)/(n-1),o=Rr(n,"float32");o[0]=t;for(let s=1;s<o.length;s++)o[s]=o[s-1]+r;return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tY=ga(t=>Math.log(t)),R2e=Eu(Wy,tY),D2e={kernelName:Wy,backendName:"cpu",kernelFunc:R2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nY(t,e,n,r){const o=yr(r,ne(n));for(let s=0;s<o.length;++s){const i=s*e;let a=t[i];for(let l=0;l<e;++l){const u=t[i+l];(Number.isNaN(u)||u>a)&&(a=u)}o[s]=a}return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rY=An((t,e)=>Math.max(t,e)),F2e=Xn(Gy,rY),M2e={kernelName:Gy,backendName:"cpu",kernelFunc:F2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oY=An((t,e)=>Math.min(t,e)),L2e=Xn(Hy,oY),z2e={kernelName:Hy,backendName:"cpu",kernelFunc:L2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xD=An((t,e)=>t*e),B2e=vD((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),Xk=Xn(Ky,xD,B2e),j2e={kernelName:Ky,backendName:"cpu",kernelFunc:Xk};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sY(t,e,n){const r=wu(-1,n);return xD([],e,r,t,n)}function V2e(t){const{inputs:e,backend:n}=t,{x:r}=e;Ne(r,"neg");const o=n.data.get(r.dataId).values,[s,i]=sY(o,r.shape,r.dtype);return n.makeTensorInfo(i,r.dtype,s)}const W2e={kernelName:WS,backendName:"cpu",kernelFunc:V2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iY=An((t,e)=>t!==e?1:0),U2e=Xn(US,iY,null,"bool"),G2e={kernelName:US,backendName:"cpu",kernelFunc:U2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wD(t,e,n,r,o){const s=e.length,i=ne(e),a=Fe(e),l=Fe(o),u=yr(n,ne(o));for(let c=0;c<i;++c){const d=Np(c,s,a),f=new Array(d.length);for(let h=0;h<f.length;h++)f[h]=d[r[h]];const p=ra(f,s,l);u[p]=t[c]}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function po(t){const{inputs:e,attrs:n,backend:r}=t,{x:o}=e,{perm:s}=n;Ne(o,"transpose");const i=o.shape.length,a=new Array(i);for(let d=0;d<a.length;d++)a[d]=o.shape[s[d]];const l=r.data.get(o.dataId).values,u=wD(l,o.shape,o.dtype,s,a);return{dataId:r.write(u,a,o.dtype),shape:a,dtype:o.dtype}}const H2e={kernelName:cf,backendName:"cpu",kernelFunc:po};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aY(t,e,n,r){const[o,s]=ar(t,r),i=Fo(e,"int32"),a=Rr(ne(o),i),l=ne(s);for(let u=0;u<a.length;++u){const c=u*l;let d=1;for(let f=0;f<l;++f)d*=n[c+f];a[u]=d}return{outVals:a,outShape:o,outDtype:i}}function q2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r;Ne(o,"prod");const a=o.shape.length,l=rt(s,o.shape),u=gn(l,a);let c=l,d=o;const f=[];u!=null&&(d=po({inputs:{x:o},backend:n,attrs:{perm:u}}),f.push(d),c=Nn(c.length,a));const p=n.data.get(d.dataId).values,{outVals:h,outShape:m,outDtype:g}=aY(d.shape,d.dtype,p,c);let y=m;return i&&(y=In(m,l)),f.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.makeTensorInfo(y,g,h)}const K2e={kernelName:YS,backendName:"cpu",kernelFunc:q2e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X2e(t,e,n){t.forEach((r,o)=>{if(r<0||r>=n){const s=Np(o,e.length,Fe(e)).join(",");throw new Error(`indices[${s}] = ${r} is not in [0, ${n})`)}})}function Y2e(t,e){for(let n=0;n<t.length;++n){const r=t[n],o=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>o)throw new Error("Ragged splits must not point past values");for(let s=1;s<r.length;++s)if(r[s-1]>r[s])throw new Error("Ragged splits must be sorted in ascending order")}}function Z2e(t,e,n,r){const o=[];let s=0;const i=e.length-1+n.length,a=new Array(i).fill(null).map(()=>[0]);Y2e(n,r);let l=1;for(let u=0;u<e.length-1;++u){l*=e[u];const c=e[u+1];for(let d=1;d<l+1;++d)a[u].push(d*c)}for(let u=0;u<t.length;++u){let c=t[u],d=t[u]+1;for(let f=0;f<n.length;++f){const p=n[f],h=f+e.length-1;if(h>=0){const m=a[h],g=m[m.length-1]-p[c];for(let y=c;y<d;++y)a[h].push(p[y+1]+g)}c=p[c],d=p[d]}d!==c&&(o.push([c,d]),s+=d-c)}return{outSplits:a,valueSlices:o,numValues:s}}function Q2e(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,o=_n("int32",r);e.push(o),t[n].forEach((s,i)=>o[i]=s)}return e}function EB(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function J2e(t,e,n,r,o,s){const i=EB(e,2)[1],a=EB(s,2)[1];let l=0;for(const u of n)for(let c=u[0];c<u[1];++c){for(let d=0;d<r;++d)o[l*a+d]=t[c*i+d];++l}}function eNe(t,e,n,r,o){const s=e.slice();s[0]=o;const i=_n(n,ne(s)),a=t.length,l=a===0?0:a/e[0];return J2e(t,e,r,l,i,s),[i,s]}function lY(t,e,n,r,o,s,i,a){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(X2e(s,i,l),r.length===0)throw new Error("params.rank must be nonzero");const u=r[0],{outSplits:c,valueSlices:d,numValues:f}=Z2e(s,i,t,u),p=Q2e(c),h=eNe(n,r,o,d,f);return[p,h[0],h[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AB=2147483647;function uY(t,e,n,r,o,s,i){if(e.length>1)throw new Error("starts must be a scalar or vector");if(o.length>1)throw new Error("limits must be a scalar or vector");if(i.length>1)throw new Error("deltas must be a scalar or vector");const a=e.length===0,l=o.length===0,u=i.length===0,c=[];a||c.push(e[0]),l||c.push(o[0]),u||c.push(i[0]);for(let g=1;g<c.length;++g)if(c[g]!==c[g-1])throw new Error("starts, limits, and deltas must have the same shape");const d=c.length===0?1:c[0],f=_n("int32",d+1);f[0]=0;for(let g=0;g<d;++g){const y=a?t[0]:t[g],v=l?r[0]:r[g],b=u?s[0]:s[g];if(b===0)throw new Error("Requires delta != 0");let x;if(b>0&&v<y||b<0&&v>y)x=0;else if(x=Math.ceil(Math.abs((v-y)/b)),x>AB)throw new Error(`Requires ((limit - start) / delta) <= ${AB}`);f[g+1]=f[g]+x}const p=f[d],h=_n(n,p);let m=0;for(let g=0;g<d;++g){const y=f[g+1]-f[g];let v=a?t[0]:t[g];const b=u?s[0]:s[g];for(let x=0;x<y;++x)h[m++]=v,v+=b}return[f,h]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ys=ci;class t1{constructor(e,n,r,o,s,i,a,l,u,c){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=o,this.valuesDType=s,this.defaultValue=i,this.defaultValueShape=a,this.rowPartitionValues=l,this.rowPartitionValuesShapes=u,this.rowPartitionTypes=Gq(c),this.raggedRank=Hq(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===ys.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===ys.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case ys.VALUE_ROWIDS:return t1.getMaxWidthValueRowID(n);case ys.ROW_SPLITS:return t1.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${ys[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let o=0;o<n-1;++o){const s=e[o+1]-e[o];s>r&&(r=s)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,o=e[0],s=0;for(let i=1;i<n;++i){const a=e[i];a!==o&&(o=a,s=Math.max(i-r,s),r=i)}return Math.max(n-r,s)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return PB(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;qq(r,n);const o=this.tensorShapeFromTensor(this.shape,this.shapeShape),i=Uq(this.raggedRank,o,n);i[0]<0&&(i[0]=e);for(let a=1;a<=this.raggedRank;++a)i[a]<0&&(i[a]=this.getMaxWidth(a));return i}calculateFirstParentOutputIndex(e,n,r){const o=Math.min(e,r),s=[];let i=0;for(let a=0;a<o;++a,i+=n)s.push(i);for(let a=o;a<e;++a)s.push(-1);return A(s.length===e,()=>"Final length of result must be equal to firstDimension."),s}calculateOutputIndexRowSplit(e,n,r,o){const s=e.length,i=[];for(let a=0;a<s-1;++a){const l=e[a+1]-e[a];let u=Math.min(o,l),c=n[a];c===-1&&(u=0);for(let d=0;d<u;++d)i.push(c),c+=r;for(let d=0;d<l-u;++d)i.push(-1)}if(s>0&&i.length!==e[s-1])throw new Error("Invalid row split size.");return i}calculateOutputIndexValueRowID(e,n,r,o){const s=e.length,i=[];if(s===0)return[];let a=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let u=n[l];i.push(u);for(let c=1;c<s;++c){const d=e[c];if(d===l)u>=0&&(++a,a<o?u+=r:u=-1);else{if(a=0,l=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);u=n[d]}i.push(u)}if(i.length!==e.length)throw new Error("Invalid row ids.");return i}calculateOutputIndex(e,n,r,o){const s=this.getRowPartitionTensor(e),i=this.getRowPartitionTypeByDimension(e);switch(i){case ys.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(s,n,r,o);case ys.ROW_SPLITS:if(s.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${s.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(s,n,r,o);default:throw new Error(`Unsupported partition type: ${ys[i]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case ys.FIRST_DIM_SIZE:return e[0];case ys.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case ys.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${ys[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),o=new Array(this.raggedRank+1);o[o.length-1]=1;for(let l=o.length-2;l>=0;--l)o[l]=o[l+1]*r[l+1];const s=PB(r,!1),i=_n(this.valuesDType,ne(s));if(o[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(n,o[0],r[0]);for(let u=1;u<=this.raggedRank;++u)l=this.calculateOutputIndex(u-1,l,o[u],r[u]);this.setOutput(this.raggedRank,l,i,s)}return[s,i]}setOutput(e,n,r,o){if(r.length===0)return;const s=this.values,i=r;let a=o.slice();a=a.slice(e+1);const l=ne(a),u=n.length;let c=this.defaultValue;if(c.length!==l&&c.length!==1){const h=this.defaultValueShape;Z(()=>{const m=H(c,h);c=pf(m,a).dataSync()})}let d=0,f=0,p=0;for(let h=0;h<=u;++h){let m=h<u?n[h]:-1;if(m===p){++p;continue}if(f<p){const g=s.subarray(d*l),y=i.subarray(f*l),v=(p-f)*l;OB(y,g,v)}if(h>=u){const g=r.length;m=Math.floor(g/l)}if(m>p)if(this.defaultValue.length===1)i.subarray(p*l,m*l).fill(this.defaultValue[0]),p=m;else for(;m>p;){const g=i.slice(p*l);OB(g,c,l),++p}m<0?(d=h+1,f=p):(d=h,f=p,p=f+1)}}}function OB(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function PB(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function cY(t,e,n,r,o,s,i,a,l,u){return new t1(t,e,n,r,o,s,i,a,l,u).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dY(t,e,n,r){const o=t===e,s=t<e&&n<0,i=e<t&&n>1;if(o||s||i)return Rr(0,r);const a=Math.abs(Math.ceil((e-t)/n)),l=Rr(a,r);e<t&&n===1&&(n=-1),l[0]=t;for(let u=1;u<l.length;u++)l[u]=l[u-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fY=ga(t=>1/Math.sqrt(t)),tNe=Eu(e0,fY),nNe={kernelName:e0,backendName:"cpu",kernelFunc:tNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lc(t,e,n,r,o,s,i,a,l,u){const c=[r/o,o],d=t.values,f=e.values;if(r===0)return Qe(n,e.dtype);const p=l instanceof Un?l:Qe(c,e.dtype);typeof l=="string"||typeof l=="number"?p.values.fill(l):typeof l=="boolean"&&p.values.fill(+l);for(let h=0;h<s;h++){const m=[];let g=0;for(let y=0;y<i;y++){const v=d[h*i+y];m.push(v),g+=v*a[y]}if(g<0||g>=r/o)throw new Error(`Invalid indices: ${m} does not index into ${n}`);for(let y=0;y<o;y++)u?p.values[g*o+y]+=f[h*o+y]:p.values[g*o+y]=e.rank===0?f[0]:f[h*o+y]}return p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rNe=ga(t=>1/(1+Math.exp(-t))),pY=Et(s0,t=>1/(1+Math.exp(-t))),oNe={kernelName:s0,backendName:"cpu",kernelFunc:pY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hY(t,e,n,r,o){const s=_R(r,e,n),i=ne(n),a=Fe(r);if(s){const d=IR(e,a);return o==="string"?t.slice(d,d+i):t.subarray(d,d+i)}const l=o==="string"?nl(t):t,u=Qe(r,o,l),c=Qe(n,o);for(let d=0;d<c.size;++d){const f=c.indexToLoc(d),p=f.map((h,m)=>h+e[m]);c.set(u.get(...p),...f)}return o==="string"?pK(c.values):c.values}function Vc(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{begin:s,size:i}=r;Ne(o,"slice");const[a,l]=Rk(o,s,i);CR(o,a,l);const u=n.data.get(o.dataId).values,c=hY(u,a,l,o.shape,o.dtype);return n.makeTensorInfo(l,o.dtype,c)}const sNe={kernelName:nk,backendName:"cpu",kernelFunc:Vc};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mY(t,e,n,r,o,s,i){const a=e[0],l=s[0],u=new Array(l),c=new Array(a),d=e[1];if(l===0){if(a!==0)throw new Error(eK(a));const g=_n(n,0),y=_n(o,0);return[g,[0,d],y,u,c]}let f=!0,p=0;const h=new Array(l).fill(0);for(let g=0;g<a;++g){const y=t[g*d];if(y<0)throw new Error(tK(g,y));if(y>=l)throw new Error(nK(g,y,l));++h[y],f=f&&y>=p,p=y}let m=!0;for(let g=0;g<l;++g){const y=h[g]===0;u[g]=y,m=m&&!y,h[g]=Math.max(h[g],1),g>0&&(h[g]+=h[g-1])}if(m&&f){const g=t,y=r;for(let v=0;v<a;++v)c[v]=v;return[g,[a,d],y,u,c]}else{const g=h[l-1],y=_n(n,g*d),v=_n(o,g),b=new Array(l).fill(0);for(let x=0;x<a;++x){const w=t[x*d],S=b[w],k=(w===0?0:h[w-1])+S;b[w]++;for(let $=0;$<d;++$)y[k*d+$]=t[x*d+$];v[k]=r[x],c[x]=k}for(let x=0;x<l;++x)if(b[x]===0){const S=x===0?0:h[x-1];y[S*d+0]=x;for(let k=1;k<d;++k)y[S*d+k]=0;v[S]=i}return[y,[g,d],v,u,c]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gY(t,e,n,r,o){const s=ne(r),i=e[0],a=o.length,l=[];let u=1,c=-1;for(let g=0;g<a;++g){const y=o[g];if(y===-1){if(c!==-1)throw new Error(rK(c,g));c=g,l.push(1)}else{if(y<0)throw new Error(oK(g,y));u*=y,l.push(y)}}if(c!==-1){if(u<=0)throw new Error(sK());const g=Math.trunc(s/u);if(u*g!==s)throw new Error(iK(r,l));l[c]=g}if(ne(l)!==s)throw new Error(aK(r,l));const f=r.length,p=[];if(f>0){p[f-1]=1;for(let g=f-2;g>=0;--g)p[g]=p[g+1]*r[g+1]}const h=[];if(a>0){h[a-1]=1;for(let g=a-2;g>=0;--g)h[g]=h[g+1]*l[g+1]}const m=_n(n,i*a);for(let g=0;g<i;++g){let y=0;for(let v=0;v<f;++v)y+=t[g*f+v]*p[v];for(let v=0;v<a;++v)m[g*a+v]=Math.trunc(y/h[v]),y%=h[v]}return[m,[i,a],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SD(t,e,n,r,o,s=!1,i=0){const a=r.length,l=[e[0],t.length/e[0]],u=l[1],d=a>0?o[a-1]+1:0;if(d<0)throw new Error(AI());const f=e.slice();f[0]=d;const p=f.reduce((b,x)=>b*x,1),h=_n(n,p);if(a===0)return d>0&&h.fill(i),[h,f];if(d<=0)throw new Error(AI());let m=0,g=1,y=0,v=o[m];for(;;){let b=0;if(g<a){if(b=o[g],v===b){++g;continue}if(v>=b)throw new Error(lK())}if(v<0||v>=d)throw new Error(uK(v,d));v>y&&h.fill(i,y*u,v*u);for(let x=m;x<g;++x){const w=r[x];if(w<0||w>=l[0])throw new Error(cK(x,r[x],l[0]));for(let S=0;S<u;S++)h[v*u+S]+=t[w*u+S]}if(s)for(let x=0;x<u;x++)h[v*u+x]/=g-m;if(m=g,++g,y=v+1,v=b,g>a)break}return y<d&&h.fill(i,y*u,d*u),[h,f]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iNe=ga(t=>Math.sqrt(t)),aNe=Et(a0,t=>Math.sqrt(t)),lNe={kernelName:a0,backendName:"cpu",kernelFunc:aNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yY=An((t,e)=>{const n=t-e;return n*n}),uNe=Xn(l0,yY),cNe={kernelName:l0,backendName:"cpu",kernelFunc:uNe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vY=ga((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:o}=e;return t.replace(new RegExp(n,r?"g":""),o)}),dNe=Eu(ak,vY),fNe={kernelName:ak,backendName:"cpu",kernelFunc:dNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bY(t,e,n,r){const o=Qe(t,e.dtype);for(let s=0;s<o.size;s++){const i=o.indexToLoc(s),a=new Array(i.length);for(let l=0;l<a.length;l++)a[l]=i[l]*n[l]+r[l];o.set(e.get(...a),...i)}return o}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pNe{constructor(e,n,r,o,s,i){this.separator=Hl(e),this.nGramWidths=n,this.leftPad=Hl(r),this.rightPad=Hl(o),this.padWidth=s,this.preserveShort=i}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,o,s,i){for(let a=0;a<s;++a){const l=this.getPadWidth(i),u=Math.max(0,l-a),c=Math.max(0,l-(s-(a+1))),d=i-(u+c),f=n+(u>0?0:a-l);let p=0;p+=u*this.leftPad.length;for(let v=0;v<d;++v)p+=e[f+v].length;p+=c*this.rightPad.length;const h=u+c+d-1;p+=h*this.separator.length,r[o+a]=new Uint8Array(p);const m=r[o+a];let g=0;const y=v=>v.forEach(b=>m[g++]=b);for(let v=0;v<u;++v)y(this.leftPad),y(this.separator);for(let v=0;v<d-1;++v)y(e[f+v]),y(this.separator);if(d>0){y(e[f+d-1]);for(let v=0;v<c;++v)y(this.separator),y(this.rightPad)}else{for(let v=0;v<c-1;++v)y(this.rightPad),y(this.separator);y(this.rightPad)}}}compute(e,n){const r=e.length,o=n.length;if(o>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let u=1;u<o;++u){let c=n[u]>=l;if(c=c&&n[u]<=r,!c)throw new Error(`Invalid split value ${n[u]}, must be in [${l}, ${r}]`);l=n[u]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const s=o-1,i=_n("int32",o);if(r===0||o===0){const l=new Array(r);for(let u=0;u<=s;++u)i[u]=0;return[l,i]}i[0]=0;for(let l=1;l<=s;++l){const u=n[l]-n[l-1];let c=0;this.nGramWidths.forEach(d=>{c+=this.getNumNGrams(u,d)}),this.preserveShort&&u>0&&c===0&&(c=1),i[l]=i[l-1]+c}const a=new Array(i[s]);for(let l=0;l<s;++l){const u=n[l];let c=i[l];if(this.nGramWidths.forEach(d=>{const f=n[l+1]-n[l],p=this.getNumNGrams(f,d);this.createNGrams(e,u,a,c,p,d),c+=p}),this.preserveShort&&c===i[l]){const d=n[l+1]-n[l];if(d===0)continue;const f=d+2*this.padWidth;this.createNGrams(e,u,a,c,1,f)}}return[a,i]}}function xY(t,e,n,r,o,s,i,a){return new pNe(n,r,o,s,i,a).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hNe(t,e,n,r){if(!t.length)return;if(e.length===0){for(let s=0;s<t.length;++s)r.push(t.subarray(s,s+1));return}if(e.length===1){const s=e[0];let i=t.indexOf(s);for(;i!==-1;){const a=t.subarray(0,i);(!n||a.length!==0)&&r.push(a),t=t.subarray(i+1),i=t.indexOf(s)}(!n||t.length!==0)&&r.push(t);return}let o=0;for(let s=0;s<t.length+1;s++)if(s===t.length||e.indexOf(t[s])!==-1){const i=t.subarray(o,s);(!n||i.length!==0)&&r.push(i),o=s+1}}function wY(t,e,n){const r=t.length,o=[];let s=0,i=0;const a=new Array(r);for(let f=0;f<r;++f){const p=o.length;hNe(t[f],e,n,o);const h=o.length-p;a[f]=h,s+=h,i=Math.max(i,h)}const l=_n("int32",s*2),u=new Array(s),c=[r,i];let d=0;for(let f=0;f<r;++f)for(let p=0;p<a[f];++p)l[d*2]=f,l[d*2+1]=p,u[d]=o[d],++d;return[l,u,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SY(t,e){const n=_n("int32",t.length);for(let r=0;r<t.length;++r)n[r]=Eye(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kY=An((t,e)=>t-e),mNe=vD((t,e,n,r)=>({real:t-n,imag:e-r})),kD=Xn(u0,kY,mNe),gNe={kernelName:u0,backendName:"cpu",kernelFunc:kD};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Y(t,e){const n=new Array(t.rank);for(let o=0;o<n.length;o++)n[o]=t.shape[o]*e[o];const r=Qe(n,t.dtype);for(let o=0;o<r.values.length;++o){const s=r.indexToLoc(o),i=new Array(t.rank);for(let l=0;l<i.length;l++)i[l]=s[l]%t.shape[l];const a=t.locToIndex(i);r.values[o]=t.values[a]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qh=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function CY(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const a=r-n+1,l=e-n+1,u=Math.log(a),c=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*c*(a-c)/a)*Math.sign(l-a/2),f=Math.max(n,Math.floor(e-l*c/a+d)),p=Math.min(r,Math.floor(e+(a-l)*c/a+d));CY(t,e,f,p)}const o=t[e];let s=n,i=r;for(Cd(t,n,e),qh(t[r],o)>0&&Cd(t,n,r);s<i;){for(Cd(t,s,i),s++,i--;qh(t[s],o)<0;)s=s+1;for(;qh(t[i],o)>0;)i=i-1}qh(t[n],o)===0?Cd(t,n,i):(i=i+1,Cd(t,i,r)),i<=e&&(n=i+1),e<=i&&(r=i-1)}}function TY(t,e,n,r,o){const s=e[e.length-1],[i,a]=[t.length/s,s],l=yr(n,i*r),u=yr("int32",i*r);for(let d=0;d<i;d++){const f=d*a,p=t.subarray(f,f+a);let h=new Array(p.length);p.forEach((v,b)=>h[b]={value:v,index:b}),r<h.length&&(CY(h,r),h=h.slice(0,r)),o&&h.sort(qh);const m=d*r,g=l.subarray(m,m+r),y=u.subarray(m,m+r);for(let v=0;v<r;v++)g[v]=h[v].value,y[v]=h[v].index}const c=e.slice();return c[c.length-1]=r,[Qe(c,n,l),Qe(c,"int32",u)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Y(t,e,n,r){const o=rt(e,n)[0],s=[1,n[0],1];for(let h=0;h<o;h++)s[0]*=n[h];s[1]=n[o];for(let h=o+1;h<n.length;h++)s[2]*=n[h];const i=new Map,a=new Int32Array(n[o]),l=new Un(s,r,t),u=[],c=s[0]===1&&s[2]===1;for(let h=0;h<n[o];h++){let m;if(c)m=t[h].toString();else{const y=[];for(let v=0;v<s[0];v++)for(let b=0;b<s[2];b++)y.push(l.get(v,h,b));m=y.join(",")}const g=i.get(m);if(g!=null)a[h]=g;else{const y=i.size;i.set(m,y),a[h]=y,u.push(h)}}const d=s.slice();d[1]=i.size;const f=new Un(d,r);u.forEach((h,m)=>{for(let g=0;g<s[0];g++)for(let y=0;y<s[2];y++)f.set(l.get(g,h,y),g,m,y)});const p=n.slice();return p[o]=d[1],{outputValues:f.values,outputShape:p,indices:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yNe=Object.freeze(Object.defineProperty({__proto__:null,addImpl:FX,bincountImpl:bD,bincountReduceImpl:MX,bitwiseAndImpl:LX,castImpl:DX,ceilImpl:zX,concatImpl:BX,equalImpl:jX,expImpl:WX,expm1Impl:GX,floorDivImpl:qX,floorImpl:HX,gatherNdImpl:KX,gatherV2Impl:XX,greaterEqualImpl:ZX,greaterImpl:YX,lessEqualImpl:JX,lessImpl:QX,linSpaceImpl:eY,logImpl:tY,maxImpl:nY,maximumImpl:rY,minimumImpl:oY,multiplyImpl:xD,negImpl:sY,notEqualImpl:iY,prodImpl:aY,raggedGatherImpl:lY,raggedRangeImpl:uY,raggedTensorToTensorImpl:cY,rangeImpl:dY,rsqrtImpl:fY,scatterImpl:lc,sigmoidImpl:rNe,simpleAbsImpl:RX,sliceImpl:hY,sparseFillEmptyRowsImpl:mY,sparseReshapeImpl:gY,sparseSegmentReductionImpl:SD,sqrtImpl:iNe,squaredDifferenceImpl:yY,staticRegexReplaceImpl:vY,stridedSliceImpl:bY,stringNGramsImpl:xY,stringSplitImpl:wY,stringToHashBucketFastImpl:SY,subImpl:kY,tileImpl:$Y,topKImpl:TY,transposeImpl:wD,uniqueImpl:_Y},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */t9("cpu",()=>new Kk,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IY=Et(Oy,t=>t>=0?t:Math.exp(t)-1),vNe={kernelName:Oy,backendName:"cpu",kernelFunc:IY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NY(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{alpha:s}=r;Ne([o],"leakyRelu");const i=ne(o.shape),a=n.data.get(o.dataId).values,l=yr("float32",i);for(let u=0;u<a.length;u++)l[u]=a[u]<0?s*a[u]:a[u];return n.makeTensorInfo(o.shape,"float32",l)}const bNe={kernelName:ES,backendName:"cpu",kernelFunc:NY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xNe=An((t,e)=>t<0?e*t:t);function EY(t){const{inputs:e,backend:n}=t,{x:r,alpha:o}=e;Ne([r,o],"prelu");const s=n.data.get(r.dataId).values,i=n.data.get(o.dataId).values,[a,l]=xNe(r.shape,o.shape,s,i,"float32");return n.makeTensorInfo(l,"float32",a)}const wNe={kernelName:XS,backendName:"cpu",kernelFunc:EY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AY=Et(Zy,t=>Math.max(0,t)),SNe={kernelName:Zy,backendName:"cpu",kernelFunc:AY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OY=Et(Qy,t=>Math.min(Math.max(0,t),6)),kNe={kernelName:Qy,backendName:"cpu",kernelFunc:OY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n1(t,e,n,r,o){if(n==="linear")return pa({inputs:{x:e},backend:t});if(n==="relu")return AY({inputs:{x:e},backend:t});if(n==="elu")return IY({inputs:{x:e},backend:t});if(n==="relu6")return OY({inputs:{x:e},backend:t});if(n==="prelu")return EY({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return NY({inputs:{x:e},backend:t,attrs:{alpha:o}});if(n==="sigmoid")return pY({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xt(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{shape:s}=r,i=ne(o.shape),a=I8(s,i),l=ne(a);A(i===l,()=>`The new shape (${a}) has ${l} elements and the old shape (${o.shape}) has ${i} elements. The new shape and old shape must have the same number of elements.`),n.incRef(o.dataId);const u=n.data.get(o.dataId);if(u.complexTensorInfos!=null){const c=u.complexTensorInfos.real,d=u.complexTensorInfos.imag;c.shape=a,d.shape=a}return{dataId:o.dataId,shape:a,dtype:o.dtype}}const $Ne={kernelName:ZS,backendName:"cpu",kernelFunc:Xt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PY(t){const{inputs:e,backend:n,attrs:r}=t,{a:o,b:s}=e,{transposeA:i,transposeB:a}=r;Ne([o,s],"matMul");const l=o.shape.length,u=s.shape.length,c=i?o.shape[l-2]:o.shape[l-1],d=a?s.shape[u-1]:s.shape[u-2],f=i?o.shape[l-1]:o.shape[l-2],p=a?s.shape[u-2]:s.shape[u-1],h=o.shape.slice(0,-2),m=s.shape.slice(0,-2),g=ne(h),y=ne(m),b=Xe(o.shape.slice(0,-2),s.shape.slice(0,-2)).concat([f,p]);A(c===d,()=>`Error in matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${o.shape} and ${s.shape} and transposeA=${i} and transposeB=${a} must match.`);const x=i?[g,c,f]:[g,f,c],w=a?[y,p,d]:[y,d,p],S=Xt({inputs:{x:o},backend:n,attrs:{shape:x}}),k=Xt({inputs:{x:s},backend:n,attrs:{shape:w}}),$=i?S.shape[1]:S.shape[2],C=i?S.shape[2]:S.shape[1],I=a?k.shape[1]:k.shape[2],E=Math.max(g,y),O=n.data.get(S.dataId).values,R=n.data.get(k.dataId).values,z=Fe(S.shape),L=Fe(k.shape),[B,D,F]=i?[z[0],1,z[1]]:[z[0],z[1],1],[j,G,Y]=a?[1,L[1],L[0]]:[L[1],1,L[0]],X=C*I,ee=Qe([E,C,I],S.dtype),ie=ee.values,se=n.blockSize;for(let de=0;de<E;de++){const me=de%g,le=de%y;for(let oe=0;oe<C;oe+=se){const fe=Math.min(oe+se,C);for(let pe=0;pe<I;pe+=se){const Q=Math.min(pe+se,I);for(let _e=0;_e<$;_e+=se){const Ee=Math.min(_e+se,$);for(let De=oe;De<fe;De++)for(let Pe=pe;Pe<Q;Pe++){let He=0;for(let st=_e;st<Ee;st++){const nn=O[me*B+De*D+st*F],gt=R[st*j+Pe*G+le*Y];He+=nn*gt}ie[de*X+(De*I+Pe)]+=He}}}}}return n.disposeIntermediateTensorInfo(S),n.disposeIntermediateTensorInfo(k),n.makeTensorInfo(b,ee.dtype,ee.values)}const CNe={kernelName:hS,backendName:"cpu",kernelFunc:PY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TNe(t){const{inputs:e,backend:n,attrs:r}=t,{a:o,b:s,bias:i,preluActivationWeights:a}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=r;let f,p,h;const m=[];f=PY({inputs:{a:o,b:s},attrs:{transposeA:l,transposeB:u},backend:n}),i&&(p=Hf({inputs:{a:f,b:i},backend:n}),m.push(f),f=p),c&&(h=n1(n,f,c,a,d),m.push(f),f=h);for(const y of m)n.disposeIntermediateTensorInfo(y);return f}const _Ne={kernelName:Rx,backendName:"cpu",kernelFunc:TNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const INe=Et(by,t=>Math.acos(t)),NNe={kernelName:by,backendName:"cpu",kernelFunc:INe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ENe=Et(xy,t=>Math.acosh(t)),ANe={kernelName:xy,backendName:"cpu",kernelFunc:ENe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ONe(t){const{inputs:e,backend:n}=t,r=e;Ne(e,"addN");const o=r.map(a=>n.data.get(a.dataId).values),s=Qe(r[0].shape,r[0].dtype),i=s.values;for(let a=0;a<r.length;a++){const l=o[a];for(let u=0;u<i.length;u++)i[u]+=l[u]}return n.makeTensorInfo(s.shape,s.dtype,s.values)}const PNe={kernelName:uS,backendName:"cpu",kernelFunc:ONe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r;Ne(o,"all");const a=rt(s,o.shape);let l=a;const u=gn(l,o.shape.length);let c=o;u!=null&&(c=po({inputs:{x:o},backend:n,attrs:{perm:u}}),l=Nn(l.length,o.shape.length)),wr("all",l,c.shape.length);const[d,f]=ar(c.shape,l),p=ne(f),h=Rr(ne(d),c.dtype),m=n.data.get(c.dataId).values;for(let y=0;y<h.length;++y){const v=y*p;let b=m[v];for(let x=0;x<p;++x){const w=m[v+x];b=b&&w}h[y]=b}u!=null&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(d,c.dtype,h);if(i){const y=In(d,a),v=Xt({inputs:{x:g},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(g),v}return g}const DNe={kernelName:kO,backendName:"cpu",kernelFunc:RNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r;Ne(o,"any");const a=rt(s,o.shape);let l=a;const u=gn(l,o.shape.length);let c=o;u!=null&&(c=po({inputs:{x:o},backend:n,attrs:{perm:u}}),l=Nn(l.length,o.shape.length)),wr("any",l,c.shape.length);const[d,f]=ar(c.shape,l),p=ne(f),h=Rr(ne(d),c.dtype),m=n.data.get(c.dataId).values;for(let y=0;y<h.length;++y){const v=y*p;let b=m[v];for(let x=0;x<p;++x){const w=m[v+x];b=b||w}h[y]=b}u!=null&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(d,c.dtype,h);if(i){const y=In(d,a),v=Xt({inputs:{x:g},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(g),v}return g}const MNe={kernelName:$O,backendName:"cpu",kernelFunc:FNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s}=r;Ne(o,"argMax");let i=rt(s,o.shape);const a=gn(i,o.shape.length);let l=o;const u=[];a!=null&&(l=po({inputs:{x:o},backend:n,attrs:{perm:a}}),u.push(l),i=Nn(i.length,l.shape.length)),i=[i[0]],wr("argMax",i,l.shape.length);const[c,d]=ar(l.shape,i),f=ne(c),p=Rr(f,"int32"),h=ne(d),m=n.data.get(l.dataId).values;for(let g=0;g<p.length;++g){const y=g*h;let v=m[y],b=0;for(let x=0;x<h;++x){const w=m[y+x];w>v&&(v=w,b=x)}p[g]=b}return u.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(c,"int32",p)}const zNe={kernelName:cS,backendName:"cpu",kernelFunc:LNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s}=r;Ne(o,"argMin");let i=rt(s,o.shape);const a=gn(i,o.shape.length);let l=o;const u=[];a!=null&&(l=po({inputs:{x:o},backend:n,attrs:{perm:a}}),u.push(l),i=Nn(i.length,l.shape.length)),i=[i[0]],wr("argMin",i,l.shape.length);const[c,d]=ar(l.shape,i),f=ne(c),p=Rr(f,"int32"),h=ne(d),m=n.data.get(l.dataId).values;for(let g=0;g<p.length;++g){const y=g*h;let v=m[y],b=0;for(let x=0;x<h;++x){const w=m[y+x];w<v&&(v=w,b=x)}p[g]=b}return u.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(c,"int32",p)}const jNe={kernelName:dS,backendName:"cpu",kernelFunc:BNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VNe=Et(wy,t=>Math.asin(t)),WNe={kernelName:wy,backendName:"cpu",kernelFunc:VNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UNe=Et(Sy,t=>Math.asinh(t)),GNe={kernelName:Sy,backendName:"cpu",kernelFunc:UNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HNe=Et(ky,t=>Math.atan(t)),qNe={kernelName:ky,backendName:"cpu",kernelFunc:HNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KNe=An((t,e)=>Math.atan2(t,e)),XNe=Xn(Cy,KNe),YNe={kernelName:Cy,backendName:"cpu",kernelFunc:XNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZNe=Et($y,t=>Math.atanh(t)),QNe={kernelName:$y,backendName:"cpu",kernelFunc:ZNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $D(t,e,n,r,o,s){const i=o.strideHeight,a=o.strideWidth,l=o.dilationHeight,u=o.dilationWidth,c=o.effectiveFilterHeight,d=o.effectiveFilterWidth,f=o.padInfo.top,p=o.padInfo.left,h=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=Qe(o.outShape,n),g=m.values,y=o.outShape[1]*o.outShape[2]*o.outShape[3],v=o.outShape[2]*o.outShape[3],b=o.outShape[3];for(let x=0;x<o.batchSize;++x){const w=x*y,S=x*r[0];for(let k=0;k<o.inChannels;++k)for(let $=0;$<o.outHeight;++$){const C=$*i-f,I=Math.max(0,C),E=Math.min(o.inHeight,c+C),O=w+$*v;for(let R=0;R<o.outWidth;++R){const z=R*a-p,L=Math.max(0,z),B=Math.min(o.inWidth,d+z);let D=h,F=0,j=0;for(let Y=I;Y<E;Y+=l){const X=S+Y*r[1];for(let ee=L;ee<B;ee+=u){const ie=X+ee*r[2],se=t[ie+k];s==="max"&&se>D?D=se:s==="avg"&&(F+=se,j++)}if(isNaN(D))break}const G=O+R*b+k;g[G]=s==="avg"?F/j:D}}}return m}function RY(t,e,n,r,o=!1,s=!1){const i=Qe(r.outShape,"int32"),a=r.strideHeight,l=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterHeight,f=r.effectiveFilterWidth,p=r.padInfo.top,h=r.padInfo.left,m=Qe(e,n,t);for(let g=0;g<r.batchSize;++g)for(let y=0;y<r.inChannels;++y)for(let v=0;v<r.outHeight;++v){const b=v*a-p;let x=b;for(;x<0;)x+=u;const w=Math.min(r.inHeight,d+b);for(let S=0;S<r.outWidth;++S){const k=S*l-h;let $=k;for(;$<0;)$+=c;const C=Math.min(r.inWidth,f+k);let I=Number.NEGATIVE_INFINITY,E=-1;for(let O=x;O<w;O+=u){const R=O-b;for(let z=$;z<C;z+=c){const L=z-k,B=m.get(g,O,z,y);B>I&&(I=B,o?E=s?((g*r.inHeight+O)*r.inWidth+z)*r.inChannels+y:(O*r.inWidth+z)*r.inChannels+y:E=R*f+L)}}i.set(E,g,v,S,y)}}return i}function DY(t,e,n,r,o,s){const i=o.strideDepth,a=o.strideHeight,l=o.strideWidth,u=o.dilationDepth,c=o.dilationHeight,d=o.dilationWidth,f=o.effectiveFilterDepth,p=o.effectiveFilterHeight,h=o.effectiveFilterWidth,m=o.padInfo.front,g=o.padInfo.top,y=o.padInfo.left,v=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=Qe(o.outShape,n),x=b.values,w=o.outShape[1]*o.outShape[2]*o.outShape[3]*o.outShape[4],S=o.outShape[2]*o.outShape[3]*o.outShape[4],k=o.outShape[3]*o.outShape[4],$=o.outShape[4];for(let C=0;C<o.batchSize;++C){const I=C*w,E=C*r[0];for(let O=0;O<o.inChannels;++O)for(let R=0;R<o.outDepth;++R){const z=R*i-m;let L=z;for(;L<0;)L+=u;const B=Math.min(o.inDepth,f+z),D=I+R*S;for(let F=0;F<o.outHeight;++F){const j=F*a-g;let G=j;for(;G<0;)G+=c;const Y=Math.min(o.inHeight,p+j),X=D+F*k;for(let ee=0;ee<o.outWidth;++ee){const ie=ee*l-y;let se=ie;for(;se<0;)se+=d;const de=Math.min(o.inWidth,h+ie),me=X+ee*$;let le=v,oe=0,fe=0;for(let Q=L;Q<B;Q+=u){const _e=E+Q*r[1];for(let Ee=G;Ee<Y;Ee+=c){const De=_e+Ee*r[2];for(let Pe=se;Pe<de;Pe+=d){const He=De+Pe*r[3],st=t[He+O];if(s==="max"&&st>le?le=st:s==="avg"&&(oe+=st,fe++),isNaN(le))break}if(isNaN(le))break}if(isNaN(le))break}const pe=me+O;x[pe]=s==="avg"?oe/Math.max(fe,1):le}}}}return b}function JNe(t,e){const n=Qe(e.outShape,"int32"),r=e.strideDepth,o=e.strideHeight,s=e.strideWidth,i=e.dilationDepth,a=e.dilationHeight,l=e.dilationWidth,u=e.effectiveFilterDepth,c=e.effectiveFilterHeight,d=e.effectiveFilterWidth,f=e.padInfo.front,p=e.padInfo.top,h=e.padInfo.left;for(let m=0;m<e.batchSize;++m)for(let g=0;g<e.inChannels;++g)for(let y=0;y<e.outDepth;++y){const v=y*r-f;let b=v;for(;b<0;)b+=i;const x=Math.min(e.inDepth,u+v);for(let w=0;w<e.outHeight;++w){const S=w*o-p;let k=S;for(;k<0;)k+=a;const $=Math.min(e.inHeight,c+S);for(let C=0;C<e.outWidth;++C){const I=C*s-h;let E=I;for(;E<0;)E+=l;const O=Math.min(e.inWidth,d+I);let R=Number.NEGATIVE_INFINITY,z=-1;for(let L=b;L<x;L+=i){const B=L-v;for(let D=k;D<$;D+=a){const F=D-S;for(let j=E;j<O;j+=l){const G=j-I,Y=t.get(m,L,D,j,g);Y>=R&&(R=Y,z=B*c*d+F*c+G)}}}n.set(z,m,y,w,C,g)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e;Ne(o,"avgPool");const{filterSize:s,strides:i,pad:a,dimRoundingMode:l}=r,u=1;A(xr(i,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=Ys(o.shape,s,i,u,a,l);let d;if(c.filterWidth===1&&c.filterHeight===1&&ct(c.inShape,c.outShape))d=pa({inputs:{x:o},backend:n});else{const f=n.data.get(o.dataId).values,p=Fe(o.shape),h=$D(f,o.shape,o.dtype,p,c,"avg");d=n.makeTensorInfo(c.outShape,o.dtype,h.values)}return d}const tEe={kernelName:fS,backendName:"cpu",kernelFunc:eEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{filterSize:s,strides:i,pad:a,dimRoundingMode:l,dataFormat:u}=r;Ne(o,"avgPool3d");const c=dl(o.shape,s,i,1,a,l,u),d=n.data.get(o.dataId).values,f=DY(d,o.shape,o.dtype,Fe(o.shape),c,"avg");return n.makeTensorInfo(f.shape,"float32",f.values)}const rEe={kernelName:pS,backendName:"cpu",kernelFunc:nEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oEe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:s}=e,{filterSize:i,strides:a,pad:l,dimRoundingMode:u}=r;Ne([o,s],"avgPool3DGrad");const c=dl(s.shape,i,a,1,l,u),d=c.strideDepth,f=c.strideHeight,p=c.strideWidth,h=c.filterDepth,m=c.filterHeight,g=c.filterWidth,y=c.dilationDepth,v=c.dilationHeight,b=c.dilationWidth,x=c.effectiveFilterDepth,w=c.effectiveFilterHeight,S=c.effectiveFilterWidth,k=x-1-c.padInfo.front,$=S-1-c.padInfo.left,C=w-1-c.padInfo.top,I=Qe(s.shape,"float32"),E=1/(h*m*g),O=n.bufferSync(o);for(let R=0;R<c.batchSize;++R)for(let z=0;z<c.inChannels;++z)for(let L=0;L<c.inDepth;++L)for(let B=0;B<c.inHeight;++B)for(let D=0;D<c.inWidth;++D){const F=L-k,j=B-C,G=D-$;let Y=0;for(let X=0;X<x;X+=y){const ee=(F+X)/d;if(!(ee<0||ee>=c.outDepth||Math.floor(ee)!==ee))for(let ie=0;ie<w;ie+=v){const se=(j+ie)/f;if(!(se<0||se>=c.outHeight||Math.floor(se)!==se))for(let de=0;de<S;de+=b){const me=(G+de)/p;if(me<0||me>=c.outWidth||Math.floor(me)!==me)continue;const le=O.get(R,ee,se,me,z);Y+=le}}}I.set(Y*E,R,L,B,D,z)}return n.makeTensorInfo(I.shape,I.dtype,I.values)}const sEe={kernelName:TO,backendName:"cpu",kernelFunc:oEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iEe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:s}=e,i=s;Ne([o,s],"avgPoolGrad");const{filterSize:a,strides:l,pad:u}=r,c=Ys(i.shape,a,l,1,u),d=c.strideHeight,f=c.strideWidth,p=c.filterHeight,h=c.filterWidth,m=c.dilationHeight,g=c.dilationWidth,y=c.effectiveFilterHeight,v=c.effectiveFilterWidth,b=v-1-c.padInfo.left,x=y-1-c.padInfo.top,w=Qe(i.shape,"float32"),S=1/(p*h),k=n.data.get(o.dataId).values,$=Qe(o.shape,"float32",k);for(let C=0;C<c.batchSize;++C)for(let I=0;I<c.inChannels;++I)for(let E=0;E<c.inHeight;++E)for(let O=0;O<c.inWidth;++O){const R=E-x,z=O-b;let L=0;for(let B=0;B<y;B+=m){const D=(R+B)/d;if(!(D<0||D>=c.outHeight||Math.floor(D)!==D))for(let F=0;F<v;F+=g){const j=(z+F)/f;if(j<0||j>=c.outWidth||Math.floor(j)!==j)continue;const G=$.get(C,D,j,I);L+=G}}w.set(L*S,C,E,O,I)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const aEe={kernelName:CO,backendName:"cpu",kernelFunc:iEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,scale:s,offset:i,mean:a,variance:l}=e;A(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),A(i==null||a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),A(s==null||a.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Ne([o,a,l,s,i],"batchNorm");let{varianceEpsilon:u}=r;u==null&&(u=.001);const c=n.data.get(o.dataId).values,d=n.data.get(a.dataId).values,f=n.data.get(l.dataId).values,p=s?n.data.get(s.dataId).values:new Float32Array([1]),h=i?n.data.get(i.dataId).values:new Float32Array([0]),m=new Float32Array(c.length),g=h.length,y=p.length,v=f.length,b=d.length;let x=0,w=0,S=0,k=0;for(let $=0;$<c.length;++$)m[$]=h[x++]+(c[$]-d[w++])*p[S++]/Math.sqrt(f[k++]+u),x>=g&&(x=0),w>=b&&(w=0),S>=y&&(S=0),k>=v&&(k=0);return n.makeTensorInfo(o.shape,o.dtype,m)}const uEe={kernelName:_S,backendName:"cpu",kernelFunc:lEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{blockShape:s,crops:i}=r;Ne([o],"batchToSpaceND");const a=s.reduce((y,v)=>y*v),l=S0(o.shape,s,a),u=k0(l.length,s.length),c=$0(o.shape,s,a),d=PR(i,s.length),f=RR(c,i,s.length),p=Xt({inputs:{x:o},backend:n,attrs:{shape:l}}),h=po({inputs:{x:p},backend:n,attrs:{perm:u}}),m=Xt({inputs:{x:h},backend:n,attrs:{shape:c}}),g=Vc({inputs:{x:m},backend:n,attrs:{begin:d,size:f}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}const dEe={kernelName:mS,backendName:"cpu",kernelFunc:cEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,weights:s}=e,{size:i}=r,a=n.data.get(o.dataId).values,l=n.data.get(s.dataId).values,u=bD(a,l,s.dtype,s.shape,i);return n.makeTensorInfo([i],s.dtype,u)}const pEe={kernelName:_O,backendName:"cpu",kernelFunc:fEe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hEe(t){const{inputs:e,backend:n}=t,{s0:r,s1:o}=e,s=n.data.get(r.dataId).values,i=n.data.get(o.dataId).values,a=Xe(Array.from(s),Array.from(i));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const mEe={kernelName:IO,backendName:"cpu",kernelFunc:hEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gEe=Et(Iy,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),yEe={kernelName:Iy,backendName:"cpu",kernelFunc:gEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vEe=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(ne(e.shape)),o=n.data.get(e.dataId),s=o.complexTensorInfos.real,i=o.complexTensorInfos.imag,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values;for(let u=0;u<a.length;u++){const c=a[u],d=l[u];r[u]=Math.hypot(c,d)}return n.makeOutput(r,e.shape,"float32")},bEe={kernelName:yS,backendName:"cpu",kernelFunc:vEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qf(t){const{inputs:e,backend:n}=t,{input:r}=e,o=n.data.get(r.dataId).complexTensorInfos.imag,s=n.data.get(o.dataId).values;return n.makeTensorInfo(o.shape,o.dtype,s)}const xEe={kernelName:qO,backendName:"cpu",kernelFunc:qf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kf(t){const{inputs:e,backend:n,attrs:r}=t,{axis:o}=r,s=rt(o,e[0].shape)[0],i=e.map(m=>m.shape);ER(i,s);let a=sa(e.map(m=>m.shape),s);if(ne(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(m=>ne(m.shape)>0);if(l.length===1)return pa({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const m=l.map(x=>jc({inputs:{input:x},backend:n})),g=l.map(x=>qf({inputs:{input:x},backend:n})),y=Kf({inputs:m,backend:n,attrs:{axis:s}}),v=Kf({inputs:g,backend:n,attrs:{axis:s}}),b=$o({inputs:{real:y,imag:v},backend:n});return m.forEach(x=>n.disposeIntermediateTensorInfo(x)),g.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),b}const u=l.map(m=>{const y=[-1,ne(m.shape.slice(s))];return Xt({inputs:{x:m},backend:n,attrs:{shape:y}})}),c=u.map(m=>({vals:n.data.get(m.dataId).values,shape:m.shape}));a=sa(u.map(m=>m.shape),1);const d=u[0].shape[0]===1,f=BX(c,a,e[0].dtype,d),p=sa(l.map(m=>m.shape),s),h=n.makeTensorInfo(p,e[0].dtype,f);return u.forEach(m=>n.disposeIntermediateTensorInfo(m)),h}const wEe={kernelName:vS,backendName:"cpu",kernelFunc:Kf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FY(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s}=e,{strides:i,pad:a,dataFormat:l,dilations:u,dimRoundingMode:c}=r;Ne([o,s],"conv2d");const d=fl(l),f=ir(o.shape,s.shape,i,u,a,c,!1,d),p=f.filterHeight,h=f.filterWidth,m=f.dilationHeight,g=f.dilationWidth,y=f.padInfo.left,v=f.padInfo.top,b=f.dataFormat==="channelsLast",x=new Un(f.outShape,o.dtype),w=Fe(o.shape),S=Fe(s.shape),k=w[0],$=b?w[1]:w[2],C=b?w[2]:1,I=b?1:w[1],E=x.strides[0],O=b?x.strides[1]:x.strides[2],R=b?x.strides[2]:1,z=b?1:x.strides[1],L=n.data.get(o.dataId).values,B=n.data.get(s.dataId).values,D=x.values;for(let F=0;F<f.batchSize;++F){const j=F*k,G=F*E;for(let Y=0;Y<f.outHeight;++Y){const X=G+Y*O,ee=Y*f.strideHeight-v;for(let ie=0;ie<p;++ie){const se=ee+ie*m;if(se<0||se>=f.inHeight)continue;const de=ie*S[0],me=j+se*$;for(let le=0;le<f.outWidth;++le){const oe=X+le*R,fe=le*f.strideWidth-y;for(let pe=0;pe<h;++pe){const Q=fe+pe*g;if(Q<0||Q>=f.inWidth)continue;const _e=de+pe*S[1],Ee=me+Q*C;let De=_e;for(let Pe=0;Pe<f.inChannels;++Pe){const He=L[Ee+Pe*I];for(let st=0;st<f.outChannels;++st)D[oe+st*z]+=He*B[De+st];De+=f.outChannels}}}}}}return n.makeTensorInfo(x.shape,x.dtype,D)}const SEe={kernelName:bS,backendName:"cpu",kernelFunc:FY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,dy:s}=e,{strides:i,pad:a,dataFormat:l,dimRoundingMode:u,filterShape:c}=r;Ne([o,s],"conv2dBackpropFilter");const d=fl(l),f=ir(o.shape,c,i,1,a,u,!1,d),{strideHeight:p,strideWidth:h,filterHeight:m,filterWidth:g}=f,y=f.dataFormat==="channelsLast",v=new Un(f.filterShape,"float32"),b=f.padInfo.left,x=f.padInfo.top,w=n.data.get(o.dataId).values,S=n.data.get(s.dataId).values,k=new Un(o.shape,o.dtype,w),$=new Un(s.shape,s.dtype,S);for(let C=0;C<m;++C){const I=Math.max(0,Math.ceil((x-C)/p)),E=Math.min(f.outHeight,(f.inHeight+x-C)/p);for(let O=0;O<g;++O){const R=Math.max(0,Math.ceil((b-O)/h)),z=Math.min(f.outWidth,(f.inWidth+b-O)/h);for(let L=0;L<f.inChannels;++L)for(let B=0;B<f.outChannels;++B){let D=0;for(let F=0;F<f.batchSize;++F)for(let j=I;j<E;++j){const G=C+j*p-x;for(let Y=R;Y<z;++Y){const X=O+Y*h-b;y?D+=k.get(F,G,X,L)*$.get(F,j,Y,B):D+=k.get(F,L,G,X)*$.get(F,B,j,Y)}}v.set(D,C,O,L,B)}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const $Ee={kernelName:EO,backendName:"cpu",kernelFunc:kEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CEe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,filter:s}=e,{inputShape:i,strides:a,pad:l,dataFormat:u,dimRoundingMode:c}=r;Ne([o,s],"conv2dBackpropInput");const d=Fe(s.shape),f=Fe(o.shape);let p=fl(u);const h=ir(i,s.shape,a,1,l,c,!1,p),m=new Un(h.inShape,"float32"),g=m.values,y=n.data.get(o.dataId).values,v=n.data.get(s.dataId).values,[b,x,w]=d,{batchSize:S,filterHeight:k,filterWidth:$,inChannels:C,inHeight:I,inWidth:E,outChannels:O,outHeight:R,outWidth:z,strideHeight:L,strideWidth:B}=h;p=h.dataFormat;const D=k-1-h.padInfo.top,F=$-1-h.padInfo.left,j=p==="channelsLast",G=m.strides[0],Y=j?m.strides[1]:m.strides[2],X=j?m.strides[2]:1,ee=j?1:m.strides[1],ie=f[0],se=j?f[1]:f[2],de=j?f[2]:1,me=j?1:f[1];for(let le=0;le<S;++le)for(let oe=0;oe<C;++oe)for(let fe=0;fe<I;++fe){const pe=fe-D,Q=Math.max(0,Math.ceil(pe/L)),_e=Math.min(R,(k+pe)/L);for(let Ee=0;Ee<E;++Ee){const De=Ee-F,Pe=Math.max(0,Math.ceil(De/B)),He=Math.min(z,($+De)/B);let st=0;for(let gt=Q;gt<_e;++gt){const it=gt*L-pe;for(let At=Pe;At<He;++At){const ur=At*B-De,$n=ie*le+se*gt+de*At,It=b*(k-1-it)+x*($-1-ur)+w*oe;for(let cr=0;cr<O;++cr){const On=y[$n+me*cr],$t=v[It+cr];st+=On*$t}}}const nn=G*le+Y*fe+X*Ee+ee*oe;g[nn]=st}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const TEe={kernelName:xS,backendName:"cpu",kernelFunc:CEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ee(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s}=e,{strides:i,pad:a,dilations:l}=r;Ne([o,s],"conv3d");const u=$u(o.shape,s.shape,i,l,a),{filterDepth:c,filterHeight:d,filterWidth:f,dilationDepth:p,dilationHeight:h,dilationWidth:m,padInfo:g}=u,y=g.front,v=g.left,b=g.top,x=new Un(u.outShape,o.dtype),w=n.data.get(o.dataId).values,S=n.data.get(s.dataId).values,k=x.values,$=Fe(o.shape),C=Fe(s.shape);for(let I=0;I<u.batchSize;++I){const E=I*$[0],O=I*x.strides[0];for(let R=0;R<u.outDepth;++R){const z=O+R*x.strides[1],L=R*u.strideDepth-y;for(let B=0;B<c;++B){const D=L+B*p;if(D<0||D>=u.inDepth)continue;const F=B*C[0],j=E+D*$[1];for(let G=0;G<u.outHeight;++G){const Y=z+G*x.strides[2],X=G*u.strideHeight-b;for(let ee=0;ee<d;++ee){const ie=X+ee*h;if(ie<0||ie>=u.inHeight)continue;const se=F+ee*C[1],de=j+ie*$[2];for(let me=0;me<u.outWidth;++me){const le=Y+me*u.outChannels,oe=me*u.strideWidth-v;for(let fe=0;fe<f;++fe){const pe=oe+fe*m;if(pe<0||pe>=u.inWidth)continue;const Q=se+fe*C[2],_e=de+pe*u.inChannels;let Ee=Q;for(let De=0;De<u.inChannels;++De){const Pe=w[_e+De];for(let He=0;He<u.outChannels;++He)k[le+He]+=Pe*S[Ee+He];Ee+=u.outChannels}}}}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const IEe={kernelName:wS,backendName:"cpu",kernelFunc:_Ee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,dy:s}=e,{strides:i,pad:a,filterShape:l}=r;Ne([o,s],"conv3dBackpropFilterV2");const u=Fe(o.shape),c=Fe(s.shape),d=$u(o.shape,l,i,1,a),f=d.strideDepth,p=d.strideHeight,h=d.strideWidth,m=d.filterDepth,g=d.filterHeight,y=d.filterWidth,v=new Un(d.filterShape,"float32"),b=v.values,[x,w,S,k]=v.strides,$=n.data.get(s.dataId).values,[C,I,E,O]=c,R=n.data.get(o.dataId).values,[z,L,B,D]=u,F=d.padInfo.front,j=d.padInfo.left,G=d.padInfo.top;for(let Y=0;Y<m;++Y){const X=Math.max(0,Math.ceil((F-Y)/f)),ee=Math.min(d.outDepth,(d.inDepth+F-Y)/f),ie=Y*x;for(let se=0;se<g;++se){const de=Math.max(0,Math.ceil((G-se)/p)),me=Math.min(d.outHeight,(d.inHeight+G-se)/p),le=se*w+ie;for(let oe=0;oe<y;++oe){const fe=Math.max(0,Math.ceil((j-oe)/h)),pe=Math.min(d.outWidth,(d.inWidth+j-oe)/h),Q=oe*S+le;for(let _e=0;_e<d.inChannels;++_e){const Ee=_e*k+Q;for(let De=0;De<d.outChannels;++De){let Pe=0;for(let He=0;He<d.batchSize;++He){const st=He*z,nn=He*C;for(let gt=X;gt<ee;++gt){const At=(Y+gt*f-F)*L+st,ur=gt*I+nn;for(let $n=de;$n<me;++$n){const cr=(se+$n*p-G)*B+At,On=$n*E+ur;for(let $t=fe;$t<pe;++$t){const pd=(oe+$t*h-j)*D+cr,Ei=$t*O+On;Pe+=R[pd+_e]*$[Ei+De]}}}}b[Ee+De]=Pe}}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const EEe={kernelName:AO,backendName:"cpu",kernelFunc:NEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AEe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,filter:s}=e,{pad:i,strides:a,inputShape:l}=r;Ne([o],"conv3dBackpropInputV2");const u=Fe(o.shape),c=Fe(s.shape),d=$u(l,s.shape,a,1,i),f=new Un(d.inShape,"float32"),p=f.values,[h,m,g,y]=f.strides,v=n.data.get(o.dataId).values,[b,x,w,S]=u,k=n.data.get(s.dataId).values,[$,C,I,E]=c,{batchSize:O,filterDepth:R,filterHeight:z,filterWidth:L,inChannels:B,inDepth:D,inHeight:F,inWidth:j,outChannels:G,outDepth:Y,outHeight:X,outWidth:ee,strideDepth:ie,strideHeight:se,strideWidth:de}=d,me=R-1-d.padInfo.front,le=z-1-d.padInfo.top,oe=L-1-d.padInfo.left;for(let fe=0;fe<O;++fe)for(let pe=0;pe<B;++pe)for(let Q=0;Q<D;++Q){const _e=Q-me,Ee=Math.max(0,Math.ceil(_e/ie)),De=Math.min(Y,(R+_e)/ie);for(let Pe=0;Pe<F;++Pe){const He=Pe-le,st=Math.max(0,Math.ceil(He/se)),nn=Math.min(X,(z+He)/se);for(let gt=0;gt<j;++gt){const it=gt-oe,At=Math.max(0,Math.ceil(it/de)),ur=Math.min(ee,(L+it)/de);let $n=0;for(let It=Ee;It<De;++It){const cr=It*ie-_e;for(let On=st;On<nn;++On){const $t=On*se-He;for(let qo=At;qo<ur;++qo){const pd=qo*de-it,Ei=b*fe+x*It+w*On+S*qo,Z0=$*(R-1-cr)+C*(z-1-$t)+I*(L-1-pd)+E*pe;for(let wt=0;wt<G;++wt){const vo=v[Ei+wt],Q0=k[Z0+wt];$n+=vo*Q0}}}}p[h*fe+m*Q+g*Pe+y*gt+pe]=$n}}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}const OEe={kernelName:OO,backendName:"cpu",kernelFunc:AEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PEe=Et(Ny,t=>Math.cos(t)),REe={kernelName:Ny,backendName:"cpu",kernelFunc:PEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DEe=Et(Ey,t=>Math.cosh(t)),FEe={kernelName:Ey,backendName:"cpu",kernelFunc:DEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MEe(t){const{inputs:e,backend:n,attrs:r}=t,{image:o,boxes:s,boxInd:i}=e,{cropSize:a,method:l,extrapolationValue:u}=r,[c,d,f,p]=o.shape,h=s.shape[0],[m,g]=a,y=Qe([h,m,g,p],"float32"),v=n.data.get(s.dataId).values,b=n.data.get(i.dataId).values,x=n.data.get(o.dataId).values,w=Fe(o.shape),S=Fe(y.shape);for(let k=0;k<h;k++){const $=k*4,C=v[$],I=v[$+1],E=v[$+2],O=v[$+3],R=b[k];if(R>=c)continue;const z=m>1?(E-C)*(d-1)/(m-1):0,L=g>1?(O-I)*(f-1)/(g-1):0;for(let B=0;B<m;B++){const D=m>1?C*(d-1)+B*z:.5*(C+E)*(d-1);if(D<0||D>d-1){for(let F=0;F<g;F++)for(let j=0;j<p;j++){const G=j+F*S[2]+B*S[1]+k*S[0];y.values[G]=u}continue}if(l==="bilinear"){const F=Math.floor(D),j=Math.ceil(D),G=D-F;for(let Y=0;Y<g;Y++){const X=g>1?I*(f-1)+Y*L:.5*(I+O)*(f-1);if(X<0||X>f-1){for(let de=0;de<p;de++){const me=de+Y*S[2]+B*S[1]+k*S[0];y.values[me]=u}continue}const ee=Math.floor(X),ie=Math.ceil(X),se=X-ee;for(let de=0;de<p;de++){let me=de+ee*w[2]+F*w[1]+R*w[0];const le=x[me];me=de+ie*w[2]+F*w[1]+R*w[0];const oe=x[me];me=de+ee*w[2]+j*w[1]+R*w[0];const fe=x[me];me=de+ie*w[2]+j*w[1]+R*w[0];const pe=x[me],Q=le+(oe-le)*se,_e=fe+(pe-fe)*se;me=de+Y*S[2]+B*S[1]+k*S[0],y.values[me]=Q+(_e-Q)*G}}}else for(let F=0;F<g;++F){const j=g>1?I*(f-1)+F*L:.5*(I+O)*(f-1);if(j<0||j>f-1){for(let X=0;X<p;X++){const ee=X+F*S[2]+B*S[1]+k*S[0];y.values[ee]=u}continue}const G=Math.round(j),Y=Math.round(D);for(let X=0;X<p;X++){const ee=X+G*w[2]+Y*w[1]+R*w[0],ie=X+F*S[2]+B*S[1]+k*S[0];y.values[ie]=x[ee]}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const LEe={kernelName:RO,backendName:"cpu",kernelFunc:MEe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,exclusive:i,reverse:a}=r;Ne(o,"cumprod");const l=gn([s],o.shape.length);let u=o;l!=null&&(u=po({inputs:{x:o},backend:n,attrs:{perm:l}}));const c=Nn(1,o.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const d=Fo(u.dtype,"int32"),f=wO(ne(u.shape),d),p=n.data.get(u.dataId).values,h=u.shape[u.shape.length-1],m=a?(y,v)=>y+h-v-1:(y,v)=>y+v;for(let y=0;y<p.length;y+=h)for(let v=0;v<h;v++){const b=m(y,v);if(v===0)f[b]=i?1:p[b];else{const x=m(y,v-1);f[b]=i?p[x]*f[x]:p[b]*f[x]}}const g=n.makeTensorInfo(u.shape,d,f);if(l!=null){const y=Cu(l),v=po({inputs:{x:g},backend:n,attrs:{perm:y}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(u),v}return g}const BEe={kernelName:PO,backendName:"cpu",kernelFunc:zEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,exclusive:i,reverse:a}=r;Ne(o,"cumsum");const l=gn([s],o.shape.length);let u=o;l!=null&&(u=po({inputs:{x:o},backend:n,attrs:{perm:l}}));const c=Nn(1,o.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const d=Fo(u.dtype,"int32"),f=Rr(ne(u.shape),d),p=n.data.get(u.dataId).values,h=u.shape[u.shape.length-1],m=a?(y,v)=>y+h-v-1:(y,v)=>y+v;for(let y=0;y<p.length;y+=h)for(let v=0;v<h;v++){const b=m(y,v);if(v===0)f[b]=i?0:p[b];else{const x=m(y,v-1);f[b]=i?p[x]+f[x]:p[b]+f[x]}}const g=n.makeTensorInfo(u.shape,d,f);if(l!=null){const y=Cu(l),v=po({inputs:{x:g},backend:n,attrs:{perm:y}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(u),v}return g}const VEe={kernelName:SS,backendName:"cpu",kernelFunc:jEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,weights:s}=e,{size:i,binaryOutput:a}=r;if(o.shape.length===1){const l=n.data.get(o.dataId).values,u=n.data.get(s.dataId).values,c=bD(l,u,s.dtype,s.shape,i);return n.makeTensorInfo([i],s.dtype,c)}else if(o.shape.length===2){const l=n.bufferSync(o),u=n.bufferSync(s),c=MX(l,u,i,a);return n.makeTensorInfo(c.shape,s.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}const UEe={kernelName:DO,backendName:"cpu",kernelFunc:WEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{blockSize:s,dataFormat:i}=r;A(i==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${i}`);const a=o.shape[0],l=o.shape[1],u=o.shape[2],c=o.shape[3],d=l*s,f=u*s,p=c/(s*s),h=n.data.get(o.dataId).values,m=new Float32Array(a*d*f*p);let g=0;for(let y=0;y<a;++y)for(let v=0;v<d;++v){const b=Math.floor(v/s),x=v%s;for(let w=0;w<f;++w){const S=Math.floor(w/s),k=w%s,$=(x*s+k)*p;for(let C=0;C<p;++C){const E=C+$+c*(S+u*(b+l*y));m[g++]=h[E]}}}return n.makeTensorInfo([a,d,f,p],o.dtype,m)}const HEe={kernelName:FO,backendName:"cpu",kernelFunc:GEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MY(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s}=e,{strides:i,pad:a,dilations:l,dimRoundingMode:u}=r;Ne([o,s],"depthwiseConv2DNative");const c=Fe(o.shape),d=Fe(s.shape);let f=l;f==null&&(f=[1,1]),A(xr(i,f),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${f}'`);const p=ir(o.shape,s.shape,i,f,a,u,!0),{filterHeight:h,filterWidth:m,dilationHeight:g,dilationWidth:y,padInfo:v}=p,b=v.left,x=v.top,w=p.outChannels/p.inChannels,S=new Un(p.outShape,o.dtype),k=n.data.get(o.dataId).values,$=n.data.get(s.dataId).values,C=S.values;for(let I=0;I<p.batchSize;++I){const E=I*c[0],O=I*S.strides[0];for(let R=0;R<p.outHeight;++R){const z=O+R*S.strides[1],L=R*p.strideHeight-x;for(let B=0;B<h;++B){const D=L+B*g;if(D<0||D>=p.inHeight)continue;const F=B*d[0],j=E+D*c[1];for(let G=0;G<p.outWidth;++G){const Y=z+G*S.strides[2],X=G*p.strideWidth-b;for(let ee=0;ee<m;++ee){const ie=X+ee*y;if(ie<0||ie>=p.inWidth)continue;const se=F+ee*d[1],de=j+ie*p.inChannels;let me=Y,le=se;for(let oe=0;oe<p.inChannels;++oe){const fe=k[de+oe];for(let pe=0;pe<w;++pe)C[me+pe]+=fe*$[le+pe];me+=w,le+=w}}}}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const qEe={kernelName:kS,backendName:"cpu",kernelFunc:MY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,dy:s}=e,{strides:i,dilations:a,pad:l,dimRoundingMode:u,filterShape:c}=r;Ne([o,s],"depthwiseConv2dNativeBackpropFilter");const d=ir(o.shape,c,i,a,l,u,!0),{strideHeight:f,strideWidth:p,filterHeight:h,filterWidth:m}=d,g=new Un(d.filterShape,"float32"),y=d.padInfo.left,v=d.padInfo.top,b=d.outChannels/d.inChannels,x=n.data.get(o.dataId).values,w=new Un(o.shape,o.dtype,x),S=n.data.get(s.dataId).values,k=new Un(s.shape,s.dtype,S);for(let $=0;$<h;++$){const C=Math.max(0,Math.ceil((v-$)/f)),I=Math.min(d.outHeight,(d.inHeight+v-$)/f);for(let E=0;E<m;++E){const O=Math.max(0,Math.ceil((y-E)/p)),R=Math.min(d.outWidth,(d.inWidth+y-E)/p);for(let z=0;z<d.outChannels;++z){const L=Math.trunc(z/b),B=z%b;let D=0;for(let F=0;F<d.batchSize;++F)for(let j=C;j<I;++j){const G=$+j*f-v;for(let Y=O;Y<R;++Y){const X=E+Y*p-y;D+=w.get(F,G,X,L)*k.get(F,j,Y,z)}}g.set(D,$,E,L,B)}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const XEe={kernelName:MO,backendName:"cpu",kernelFunc:KEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YEe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,filter:s}=e,{strides:i,dilations:a,pad:l,dimRoundingMode:u,inputShape:c}=r;Ne([o,s],"depthwiseConv2DNativeBackpropInput");const d=Fe(o.shape),f=Fe(s.shape),p=ir(c,s.shape,i,a,l,u,!0),h=new Un(p.inShape,"float32"),m=h.values,[g,y,v]=h.strides,b=n.data.get(o.dataId).values,[x,w,S]=d,k=n.data.get(s.dataId).values,[$,C,I]=f,{batchSize:E,filterHeight:O,filterWidth:R,inChannels:z,inHeight:L,inWidth:B,outChannels:D,outHeight:F,outWidth:j,strideHeight:G,strideWidth:Y}=p,X=O-1-p.padInfo.top,ee=R-1-p.padInfo.left,ie=D/z;for(let se=0;se<E;++se)for(let de=0;de<z;++de)for(let me=0;me<L;++me){const le=me-X,oe=Math.max(0,Math.ceil(le/G)),fe=Math.min(F,(O+le)/G);for(let pe=0;pe<B;++pe){const Q=pe-ee,_e=Math.max(0,Math.ceil(Q/Y)),Ee=Math.min(j,(R+Q)/Y);let De=0;for(let Pe=oe;Pe<fe;++Pe){const He=Pe*G-le;for(let st=_e;st<Ee;++st){const nn=st*Y-Q,gt=x*se+w*Pe+S*st,it=$*(O-1-He)+C*(R-1-nn)+I*de;for(let At=0;At<ie;++At){const ur=de*ie+At,$n=b[gt+ur],It=k[it+At];De+=$n*It}}}m[g*se+y*me+v*pe+de]=De}}return n.makeTensorInfo(h.shape,h.dtype,h.values)}const ZEe={kernelName:LO,backendName:"cpu",kernelFunc:YEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QEe(t){const{inputs:e,backend:n}=t,{x:r}=e,o=ne(r.shape),s=n.data.get(r.dataId).values,i=Qe([o,o],r.dtype),a=i.values;for(let u=0;u<s.length;u++)a[u*o+u]=s[u];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,i.dtype,i.values)}const JEe={kernelName:zO,backendName:"cpu",kernelFunc:QEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eAe={kernelName:$S,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:o}=t,{strides:s,pad:i,dilations:a}=n,l=e,u=l.data.get(r.dataId).values,c=r.shape.length,d=l.data.get(o.dataId).values,f=o.shape.length,{batchSize:p,inHeight:h,inWidth:m,inChannels:g,outHeight:y,outWidth:v,padInfo:b,strideHeight:x,strideWidth:w,filterHeight:S,filterWidth:k,dilationHeight:$,dilationWidth:C,outShape:I}=m0(r.shape,o.shape,s,i,"NHWC",a),E=ne(I),O=I.length,R=_n(r.dtype,E);for(let L=0;L<p;++L)for(let B=0;B<y;++B){const D=B*x-b.top;for(let F=0;F<v;++F){const j=F*w-b.left;for(let G=0;G<g;++G){let Y=Number.MIN_SAFE_INTEGER;for(let ee=0;ee<S;++ee){const ie=D+ee*$;if(ie>=0&&ie<h)for(let se=0;se<k;++se){const de=j+se*C;if(de>=0&&de<m){const me=ra([L,ie,de,G],c,Fe(r.shape)),le=ra([ee,se,G],f,Fe(o.shape)),oe=u[me]+d[le];oe>Y&&(Y=oe)}}}const X=ra([L,B,F,G],O,Fe(I));R[X]=Y}}}return{dataId:l.write(Qc(R,r.dtype),I,r.dtype),shape:I,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tAe={kernelName:pI,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:o,dy:s}=t,{strides:i,pad:a,dilations:l}=n,u=e,c=zs(r.shape,u.data.get(r.dataId).values),d=zs(o.shape,u.data.get(o.dataId).values),{batchSize:f,inHeight:p,inWidth:h,inChannels:m,outHeight:g,outWidth:y,padInfo:v,strideHeight:b,strideWidth:x,filterHeight:w,filterWidth:S,dilationHeight:k,dilationWidth:$,outShape:C}=m0(r.shape,o.shape,i,a,"NHWC",l);A(s.rank===C.length,()=>`Error in ${pI}, dy must have the same rank as output ${C.length}, but got ${s.rank}`);const I=zs(C,u.data.get(s.dataId).values),E=A8(o.shape,o.dtype);for(let R=0;R<f;++R)for(let z=0;z<g;++z){const L=z*b-v.top;for(let B=0;B<y;++B){const D=B*x-v.left;for(let F=0;F<m;++F){let j=Number.MIN_SAFE_INTEGER,G=0,Y=0;for(let X=0;X<w;++X){const ee=L+X*k;if(ee>=0&&ee<p)for(let ie=0;ie<S;++ie){const se=D+ie*$;if(se>=0&&se<h){const de=c[R][ee][se][F]+d[X][ie][F];de>j&&(j=de,G=X,Y=ie)}}}E[G][Y][F]+=I[R][z][B][F]}}}return{dataId:u.write(Qc(E,r.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nAe={kernelName:fI,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:o,dy:s}=t,{strides:i,pad:a,dilations:l}=n,u=e,c=zs(r.shape,u.data.get(r.dataId).values),d=zs(o.shape,u.data.get(o.dataId).values),{batchSize:f,inHeight:p,inWidth:h,inChannels:m,outHeight:g,outWidth:y,padInfo:v,strideHeight:b,strideWidth:x,filterHeight:w,filterWidth:S,dilationHeight:k,dilationWidth:$,outShape:C}=m0(r.shape,o.shape,i,a,"NHWC",l);A(s.rank===C.length,()=>`Error in ${fI}, dy must have the same rank as output ${C.length}, but got ${s.rank}`);const I=zs(C,u.data.get(s.dataId).values),E=A8(r.shape,r.dtype);for(let R=0;R<f;++R)for(let z=0;z<g;++z){const L=z*b-v.top;for(let B=0;B<y;++B){const D=B*x-v.left;for(let F=0;F<m;++F){let j=Number.MIN_SAFE_INTEGER,G=L<0?0:L,Y=D<0?0:D;for(let X=0;X<w;++X){const ee=L+X*k;if(ee>=0&&ee<p)for(let ie=0;ie<S;++ie){const se=D+ie*$;if(se>=0&&se<h){const de=c[R][ee][se][F]+d[X][ie][F];de>j&&(j=de,G=ee,Y=se)}}}E[R][G][Y][F]+=I[R][z][B][F]}}}return{dataId:u.write(Qc(E,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rAe(t){const{inputs:e,backend:n,attrs:r}=t,{image:o}=e,{canvas:s,options:i}=r,{contextOptions:a,imageOptions:l}=i||{},u=(l==null?void 0:l.alpha)||1,c=(a==null?void 0:a.contextType)||"2d";if(c!=="2d")throw new Error(`Context type ${a.contextType} is not supported by the CPU backend.`);const d=s.getContext(c,(a==null?void 0:a.contextAttributes)||{});if(d==null)throw new Error(`Could not get the context with ${c} type.`);const[f,p]=o.shape.slice(0,2),h=o.shape.length===2?1:o.shape[2],m=n.data.get(o.dataId).values,g=o.dtype==="float32"?255:1,y=new Uint8ClampedArray(p*f*4);for(let b=0;b<f*p;++b){const x=[0,0,0,255*u];for(let S=0;S<h;S++){const k=m[b*h+S];if(o.dtype==="float32"){if(k<0||k>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${k}.`)}else if(o.dtype==="int32"&&(k<0||k>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${k}.`);h===1?(x[0]=k*g,x[1]=k*g,x[2]=k*g):x[S]=k*g}const w=b*4;y[w+0]=Math.round(x[0]),y[w+1]=Math.round(x[1]),y[w+2]=Math.round(x[2]),y[w+3]=Math.round(x[3])}s.width=p,s.height=f;const v=new ImageData(y,p,f);return d.putImageData(v,0,0),o}const oAe={kernelName:bye,backendName:"cpu",kernelFunc:rAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P0(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r;Ne(o,"sum");let a;o.dtype==="bool"?a=pu({inputs:{x:o},backend:n,attrs:{dtype:"int32"}}):a=pa({inputs:{x:o},backend:n});const l=a.shape.length,u=rt(s,a.shape),c=gn(u,l);let d=u,f=a;c!=null&&(f=po({inputs:{x:a},backend:n,attrs:{perm:c}}),d=Nn(d.length,l)),wr("sum",d,f.shape.length);const[p,h]=ar(f.shape,d),m=Fo(f.dtype,"int32");let g=e1(n,p,m);const y=ne(h),v=n.data.get(g.dataId).values,b=n.data.get(f.dataId).values;for(let x=0;x<v.length;++x){const w=x*y;let S=0;for(let k=0;k<y;++k)S+=b[w+k];v[x]=S}if(i){const x=In(g.shape,u),w=g;g=Xt({inputs:{x:g},backend:n,attrs:{shape:x}}),n.disposeIntermediateTensorInfo(w)}return n.disposeIntermediateTensorInfo(a),c!=null&&n.disposeIntermediateTensorInfo(f),g}const sAe={kernelName:rk,backendName:"cpu",kernelFunc:P0};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iAe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:o}=r,s=e,{allDims:i,summedDims:a,idDims:l}=VR(o,s.length);UR(i.length,l,s);const{path:u,steps:c}=GR(a,l),d=c.length;let f=null,p=i.length;const h=[];for(let m=0;m<d;++m){for(const g of c[m]){const{permutationIndices:y,expandDims:v}=WR(p,l[g]);let b;HR(y)?b=s[g]:(b=po({inputs:{x:s[g]},backend:n,attrs:{perm:y}}),h.push(b));const x=b.shape.slice();for(let w=0;w<v.length;++w)x.splice(v[w],0,1);ct(b.shape,x)||(b=Xt({inputs:{x:b},backend:n,attrs:{shape:x}}),h.push(b)),f===null?f=b:(f=Xk({inputs:{a:b,b:f},backend:n}),h.push(f))}m<d-1&&(u[m]>=0&&(f=P0({inputs:{x:f},backend:n,attrs:{axis:u[m]-(i.length-p),keepDims:!1}}),h.push(f)),p--)}for(const m of h)m!==f&&n.disposeIntermediateTensorInfo(m);return f}const aAe={kernelName:BO,backendName:"cpu",kernelFunc:iAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lAe(t){const{inputs:e,backend:n}=t,{dy:r,y:o}=e;Ne([r,o],"eluGrad");const s=new Float32Array(ne(o.shape)),i=n.data.get(o.dataId).values,a=n.data.get(r.dataId).values;for(let l=0;l<i.length;++l){const u=i[l];u>=0?s[l]=a[l]:s[l]=a[l]*(u+1)}return n.makeTensorInfo(o.shape,"float32",s)}const uAe={kernelName:jO,backendName:"cpu",kernelFunc:lAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cAe=DR,dAe=FR,fAe=MR,pAe=LR,hAe=zR,mAe=BR,gAe=Et(Py,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+cAe*n);return e*(1-((((mAe*r+hAe)*r+pAe)*r+fAe)*r+dAe)*r*Math.exp(-n*n))}),yAe={kernelName:Py,backendName:"cpu",kernelFunc:gAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r1(t){const{inputs:e,backend:n,attrs:r}=t,{input:o}=e,{dim:s}=r,i=o.shape.length,a=o.shape.slice();let l=s;return s<0&&(A(-(i+1)<=s,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+s+1),a.splice(l,0,1),Xt({inputs:{x:o},backend:n,attrs:{shape:a}})}const vAe={kernelName:TS,backendName:"cpu",kernelFunc:r1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bAe=An((t,e)=>t/e),CD=Xn(Ay,bAe),JI={kernelName:Ay,backendName:"cpu",kernelFunc:CD};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LY(t,e,n){const r=t.shape,o=r[0],s=r[1],i=n.data.get(t.dataId),a=i.complexTensorInfos.real,l=i.complexTensorInfos.imag,u=[o,s],c=ne(u),d=yr("float32",c),f=yr("float32",c);for(let g=0;g<o;g++){const y=Vc({inputs:{x:a},backend:n,attrs:{begin:[g,0],size:[1,s]}}),v=Vc({inputs:{x:l},backend:n,attrs:{begin:[g,0],size:[1,s]}}),b=$o({inputs:{real:y,imag:v},backend:n}),{real:x,imag:w}=xAe(b,e,n),S=tl(x,w);for(let k=0;k<s;k++){const $=jR(S,k);d[g*s+k]=$.real,f[g*s+k]=$.imag}n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(b)}const p=n.makeTensorInfo(u,"float32",d),h=n.makeTensorInfo(u,"float32",f),m=$o({inputs:{real:p,imag:h},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),m}function xAe(t,e,n){const r=ne(t.shape),o=n.data.get(t.dataId),s=n.data.get(o.complexTensorInfos.real.dataId).values,i=n.data.get(o.complexTensorInfos.imag.dataId).values;if(wAe(r)){const a=e2(s,i,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const u=n.makeTensorInfo(l,"float32",a.real),c=n.makeTensorInfo(l,"float32",a.imag),d=n.makeTensorInfo([],"float32",wu(r,"float32")),f=pa({inputs:{x:d},backend:n}),p=JI.kernelFunc({inputs:{a:u,b:d},backend:n}),h=JI.kernelFunc({inputs:{a:c,b:f},backend:n}),m=n.data.get(p.dataId).values,g=n.data.get(h.dataId).values;return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),{real:m,imag:g}}return a}else{const a=tl(s,i),l=SAe(a,r,e);return Kq(l)}}function wAe(t){return(t&t-1)===0}function e2(t,e,n,r,o){if(n===1)return{real:t,imag:e};const s=tl(t,e),i=n/2,a=Xq(s),l=a.real,u=a.imag,c=[l.length],d=o.makeTensorInfo(c,"float32",l),f=o.makeTensorInfo(c,"float32",u),p=$o({inputs:{real:d,imag:f},backend:o}),h=Yq(s),m=h.real,g=h.imag,y=[m.length],v=o.makeTensorInfo(y,"float32",m),b=o.makeTensorInfo(y,"float32",g),x=$o({inputs:{real:v,imag:b},backend:o}),w=e2(l,u,i,r,o),S=w.real,k=w.imag,$=[S.length],C=o.makeTensorInfo($,"float32",S),I=o.makeTensorInfo($,"float32",k),E=$o({inputs:{real:C,imag:I},backend:o}),O=e2(m,g,i,r,o),R=O.real,z=O.imag,L=[R.length],B=o.makeTensorInfo(L,"float32",R),D=o.makeTensorInfo(L,"float32",z),F=$o({inputs:{real:B,imag:D},backend:o}),j=Qq(n,r),G=[j.real.length],Y=o.makeTensorInfo(G,"float32",j.real),X=o.makeTensorInfo(G,"float32",j.imag),ee=$o({inputs:{real:Y,imag:X},backend:o}),ie=Xk({inputs:{a:ee,b:F},backend:o}),se=Hf({inputs:{a:E,b:ie},backend:o}),de=kD({inputs:{a:E,b:ie},backend:o}),me=jc({inputs:{input:se},backend:o}),le=jc({inputs:{input:de},backend:o}),oe=qf({inputs:{input:se},backend:o}),fe=qf({inputs:{input:de},backend:o}),pe=Kf({inputs:[me,le],backend:o,attrs:{axis:0}}),Q=Kf({inputs:[oe,fe],backend:o,attrs:{axis:0}}),_e=o.data.get(pe.dataId).values,Ee=o.data.get(Q.dataId).values;return o.disposeIntermediateTensorInfo(d),o.disposeIntermediateTensorInfo(f),o.disposeIntermediateTensorInfo(p),o.disposeIntermediateTensorInfo(v),o.disposeIntermediateTensorInfo(b),o.disposeIntermediateTensorInfo(x),o.disposeIntermediateTensorInfo(C),o.disposeIntermediateTensorInfo(I),o.disposeIntermediateTensorInfo(E),o.disposeIntermediateTensorInfo(B),o.disposeIntermediateTensorInfo(D),o.disposeIntermediateTensorInfo(F),o.disposeIntermediateTensorInfo(Y),o.disposeIntermediateTensorInfo(X),o.disposeIntermediateTensorInfo(ee),o.disposeIntermediateTensorInfo(ie),o.disposeIntermediateTensorInfo(se),o.disposeIntermediateTensorInfo(de),o.disposeIntermediateTensorInfo(me),o.disposeIntermediateTensorInfo(oe),o.disposeIntermediateTensorInfo(le),o.disposeIntermediateTensorInfo(fe),o.disposeIntermediateTensorInfo(pe),o.disposeIntermediateTensorInfo(Q),{real:_e,imag:Ee}}function SAe(t,e,n){const r=new Float32Array(e*2);for(let o=0;o<e;o++){let s=0,i=0;for(let a=0;a<e;a++){const l=Jq(o*a,e,n),u=jR(t,a);s+=u.real*l.real-u.imag*l.imag,i+=u.real*l.imag+u.imag*l.real}n&&(s/=e,i/=e),Zq(r,s,i,o)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kAe(t){const{inputs:e,backend:n}=t,{input:r}=e,o=ne(r.shape),s=r.shape[r.shape.length-1],i=o/s,a=Xt({inputs:{x:r},backend:n,attrs:{shape:[i,s]}}),l=LY(a,!1,n),u=Xt({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}const $Ae={kernelName:VO,backendName:"cpu",kernelFunc:kAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TD(t){const{backend:e,attrs:n}=t,{shape:r,value:o,dtype:s}=n,i=s||Ip(o),a=_n(i,ne(r));return TAe(a,o,i),e.makeTensorInfo(r,i,a)}const CAe={kernelName:WO,backendName:"cpu",kernelFunc:TD};function TAe(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ae={kernelName:UO,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,o=n,s=yr(r.dtype,ne(r.shape)),[i,a,l,u]=r.shape,c=o.data.get(r.dataId).values;for(let f=0;f<i;f++){const p=f*l*a*u;for(let h=0;h<a;h++){const m=h*(l*u);for(let g=0;g<l;g++){const y=g*u;for(let v=0;v<u;v++){const b=Math.round(l-g-1),x=p+m+y+v;let w=c[x];if(b>=0&&b<l){const S=b*u,k=p+m+S+v;w=c[k]}s[x]=w}}}}return{dataId:o.write(s,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s,bias:i,preluActivationWeights:a}=e,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:f,activation:p,leakyreluAlpha:h}=r;let m=FY({inputs:{x:o,filter:s},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:f}});if(i){const g=m;if(c==="NCHW"&&i.shape.length===1&&i.shape[0]!==1){const y=Xt({inputs:{x:i},backend:n,attrs:{shape:[i.shape[0],1,1]}});m=Hf({inputs:{a:m,b:y},backend:n}),n.disposeIntermediateTensorInfo(y)}else m=Hf({inputs:{a:m,b:i},backend:n});n.disposeIntermediateTensorInfo(g)}if(p){const g=m;if(c==="NCHW"&&p==="prelu"&&a.shape.length===1&&a.shape[0]!==1){const y=Xt({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});m=n1(n,m,p,y,h),n.disposeIntermediateTensorInfo(y)}else m=n1(n,m,p,a,h);n.disposeIntermediateTensorInfo(g)}return m}const NAe={kernelName:Dx,backendName:"cpu",kernelFunc:IAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s,bias:i,preluActivationWeights:a}=e,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:f,activation:p,leakyreluAlpha:h}=r;let m=MY({inputs:{x:o,filter:s},backend:n,attrs:{strides:l,pad:u,dilations:d,dimRoundingMode:f}});if(i){const g=m;m=Hf({inputs:{a:m,b:i},backend:n}),n.disposeIntermediateTensorInfo(g)}if(p){const g=m;m=n1(n,m,p,a,h),n.disposeIntermediateTensorInfo(g)}return m}const AAe={kernelName:Fx,backendName:"cpu",kernelFunc:EAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OAe(t){const{inputs:e,backend:n}=t,{params:r,indices:o}=e,s=ne(r.shape),i=o.shape,a=i[i.length-1],[l,u,c,d]=$R(r,o);if(u===0)return n.makeTensorInfo(l,r.dtype,[]);const f=n.data.get(o.dataId).values,p=n.bufferSync(r),h=KX(f,p,r.dtype,u,a,c,d,r.shape,s);return n.makeTensorInfo(l,r.dtype,h.values)}const PAe={kernelName:GO,backendName:"cpu",kernelFunc:OAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,indices:s}=e,{axis:i,batchDims:a}=r;Ne([o,s],"gatherV2");const l=rt(i,o.shape)[0],u=n.data.get(s.dataId).values,c=o.shape[l];for(let x=0;x<u.length;++x){const w=u[x];A(w<=c-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${c-1}]`)}let d=a;a==null&&(d=0);const f=ne(s.shape),p=KR(o,s,l,d),h=Xt({inputs:{x:o},backend:n,attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]}}),m=Xt({inputs:{x:s},backend:n,attrs:{shape:[p.batchSize,f/p.batchSize]}}),g=[p.batchSize,p.outerSize,f/p.batchSize,p.sliceSize],y=n.bufferSync(m),v=n.bufferSync(h),b=XX(v,y,g);return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(p.outputShape,b.dtype,b.values)}const DAe={kernelName:IS,backendName:"cpu",kernelFunc:RAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FAe(t){const{inputs:e,backend:n}=t,{input:r}=e,o=ne(r.shape),s=r.shape[r.shape.length-1],i=o/s,a=Xt({inputs:{x:r},backend:n,attrs:{shape:[i,s]}}),l=LY(a,!0,n),u=Xt({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}const MAe={kernelName:HO,backendName:"cpu",kernelFunc:FAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LAe=Et(By,t=>Number.isFinite(t)?1:0,"bool"),zAe={kernelName:By,backendName:"cpu",kernelFunc:LAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BAe=Et(jy,t=>Math.abs(t)===1/0?1:0,"bool"),jAe={kernelName:jy,backendName:"cpu",kernelFunc:BAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VAe=Et(Vy,t=>Number.isNaN(t)?1:0,"bool"),WAe={kernelName:Vy,backendName:"cpu",kernelFunc:VAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UAe(t){const{backend:e,attrs:n}=t,{start:r,stop:o,num:s}=n,i=eY(r,o,s);return e.makeTensorInfo([i.length],"float32",i)}const GAe={kernelName:KO,backendName:"cpu",kernelFunc:UAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HAe=Et(Uy,t=>Math.log1p(t)),qAe={kernelName:Uy,backendName:"cpu",kernelFunc:HAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KAe=An((t,e)=>t&&e),XAe=Xn(PS,KAe,null,"bool"),YAe={kernelName:PS,backendName:"cpu",kernelFunc:XAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZAe=Et(RS,t=>t?0:1,"bool"),QAe={kernelName:RS,backendName:"cpu",kernelFunc:ZAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JAe=An((t,e)=>t||e),eOe=Xn(DS,JAe,null,"bool"),tOe={kernelName:DS,backendName:"cpu",kernelFunc:eOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{depthRadius:s,bias:i,alpha:a,beta:l}=r;Ne(o,"LRN");const u=o.shape[3],c=u-1,d=n.data.get(o.dataId).values,f=ne(o.shape),p=new Float32Array(f);function h(m){const g=m%u;let y=m-g+Math.max(0,g-s);const v=m-g+Math.min(g+s,c);let b=0;for(;y<=v;y++){const x=d[y];b+=x*x}return b}for(let m=0;m<f;m++){const g=h(m),y=d[m]*Math.pow(i+a*g,-l);p[m]=y}return n.makeTensorInfo(o.shape,o.dtype,p)}const rOe={kernelName:FS,backendName:"cpu",kernelFunc:nOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,y:s,dy:i}=e,{depthRadius:a,bias:l,alpha:u,beta:c}=r;Ne(i,"LRNGrad");const d=ne(i.shape),f=i.shape[3],p=n.data.get(i.dataId).values,h=n.data.get(o.dataId).values,m=n.data.get(s.dataId).values,g=new Float32Array(d),y=d;for(let v=0;v<y;v++){const b=v%f,x=v-b+Math.max(0,b-a),w=v-b+Math.min(f,b+a+1);let S=0;for(let k=x;k<w;k++)S+=Math.pow(h[k],2);S=u*S+l;for(let k=x;k<w;k++){let $=-2*u*c*h[k]*m[v]/S;v===k&&($+=Math.pow(S,-c)),$*=p[v],g[k]+=$}}return n.makeTensorInfo(i.shape,o.dtype,g)}const sOe={kernelName:XO,backendName:"cpu",kernelFunc:oOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zY(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{reductionIndices:s,keepDims:i}=r,a=n;let l=o.shape;const u=l.length,c=rt(s,l);let d=c;const f=gn(d,u);let p=a.data.get(o.dataId).values;if(f!=null){const x=new Array(u);for(let w=0;w<x.length;w++)x[w]=l[f[w]];p=wD(p,l,o.dtype,f,x),d=Nn(d.length,u),l=x}Ne(o,"max"),wr("max",d,u);const[h,m]=ar(l,d),g=ne(m),y=nY(p,g,h,o.dtype),v=a.write(y,h,o.dtype);let b=h;return i&&(b=In(h,c)),{dataId:v,shape:b,dtype:o.dtype}}const iOe={kernelName:MS,backendName:"cpu",kernelFunc:zY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e;Ne(o,"maxPool");const{filterSize:s,strides:i,pad:a,dimRoundingMode:l}=r,u=1;A(xr(i,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=Ys(o.shape,s,i,u,a,l);let d;if(c.filterWidth===1&&c.filterHeight===1&&ct(c.inShape,c.outShape))d=pa({inputs:{x:o},backend:n});else{const f=n.data.get(o.dataId).values,p=Fe(o.shape),h=$D(f,o.shape,o.dtype,p,c,"max");d=n.makeTensorInfo(c.outShape,o.dtype,h.values)}return d}const lOe={kernelName:LS,backendName:"cpu",kernelFunc:aOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{filterSize:s,strides:i,pad:a,dimRoundingMode:l,dataFormat:u}=r;Ne(o,"maxPool3d");const c=dl(o.shape,s,i,1,a,l,u),d=n.data.get(o.dataId).values,f=DY(d,o.shape,o.dtype,Fe(o.shape),c,"max");return n.makeTensorInfo(f.shape,"float32",f.values)}const cOe={kernelName:zS,backendName:"cpu",kernelFunc:uOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dOe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:s}=e,{filterSize:i,strides:a,pad:l,dimRoundingMode:u}=r;Ne([o,s],"maxPool3DGrad");const c=dl(s.shape,i,a,1,l,u),d=n.bufferSync(s),f=JNe(d,c),p=c.strideDepth,h=c.strideHeight,m=c.strideWidth,g=c.dilationDepth,y=c.dilationHeight,v=c.dilationWidth,b=c.effectiveFilterDepth,x=c.effectiveFilterHeight,w=c.effectiveFilterWidth,S=b-1-c.padInfo.front,k=w-1-c.padInfo.left,$=x-1-c.padInfo.top,C=Qe(s.shape,"float32"),I=n.bufferSync(o);for(let E=0;E<c.batchSize;++E)for(let O=0;O<c.inChannels;++O)for(let R=0;R<c.inDepth;++R)for(let z=0;z<c.inHeight;++z)for(let L=0;L<c.inWidth;++L){const B=R-S,D=z-$,F=L-k;let j=0;for(let G=0;G<b;G+=g){const Y=(B+G)/p;if(!(Y<0||Y>=c.outDepth||Math.floor(Y)!==Y))for(let X=0;X<x;X+=y){const ee=(D+X)/h;if(!(ee<0||ee>=c.outHeight||Math.floor(ee)!==ee))for(let ie=0;ie<w;ie+=v){const se=(F+ie)/m;if(se<0||se>=c.outWidth||Math.floor(se)!==se)continue;const de=b*x*w-1-f.get(E,Y,ee,se,O),me=G*x*w+X*w+ie,le=de===me?1:0;if(le===0)continue;const oe=I.get(E,Y,ee,se,O);j+=oe*le}}}C.set(j,E,R,z,L,O)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const fOe={kernelName:ZO,backendName:"cpu",kernelFunc:dOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pOe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:s,output:i}=e,a=s;Ne([s,i],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=r,f=Ys(a.shape,l,u,1,c,d),p=n.data.get(a.dataId).values,h=Qe(f.outShape,a.dtype,RY(p,a.shape,a.dtype,f).values),m=f.strideHeight,g=f.strideWidth,y=f.dilationHeight,v=f.dilationWidth,b=f.effectiveFilterHeight,x=f.effectiveFilterWidth,w=x-1-f.padInfo.left,S=b-1-f.padInfo.top,k=Qe(a.shape,"float32"),$=n.data.get(o.dataId).values,C=Qe(o.shape,"float32",$);for(let I=0;I<f.batchSize;++I)for(let E=0;E<f.inChannels;++E)for(let O=0;O<f.inHeight;++O)for(let R=0;R<f.inWidth;++R){const z=O-S,L=R-w;let B=0;for(let D=0;D<b;D+=y){const F=(z+D)/m;if(!(F<0||F>=f.outHeight||Math.floor(F)!==F))for(let j=0;j<x;j+=v){const G=(L+j)/g;if(G<0||G>=f.outWidth||Math.floor(G)!==G)continue;const Y=b*x-1-h.get(I,F,G,E),X=D*x+j,ee=Y===X?1:0;if(ee===0)continue;const ie=C.get(I,F,G,E);B+=ie*ee}}k.set(B,I,O,R,E)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const hOe={kernelName:YO,backendName:"cpu",kernelFunc:pOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mOe(t,e,n,r,o){const s=Fe(e),i=$D(t,e,n,s,o,"max"),a=RY(t,e,n,o,!0,r);return[i.values,a.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gOe={kernelName:QO,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:o,strides:s,pad:i,includeBatchInIndex:a}=e,l=n;Ne(r,"MaxPoolWithArgmax");const u=l.data.get(r.dataId).values,c=Ys(r.shape,o,s,[1,1],i),[d,f]=mOe(u,r.shape,r.dtype,a,c),p=l.write(d,c.outShape,r.dtype),h=l.write(f,c.outShape,r.dtype);return[{dataId:p,shape:c.outShape,dtype:r.dtype},{dataId:h,shape:c.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r,a=rt(s,o.shape),u=ar(o.shape,a)[1],c=ne(u),d=[],f=n.makeTensorInfo([],"float32",new Float32Array([c]));d.push(f);const p=pu({inputs:{x:o},backend:n,attrs:{dtype:"float32"}});d.push(p);const h=CD({inputs:{a:p,b:f},backend:n});d.push(h);const m=P0({inputs:{x:h},backend:n,attrs:{axis:s,keepDims:i}});return d.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}const vOe={kernelName:BS,backendName:"cpu",kernelFunc:yOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r;Ne(o,"min");const a=rt(s,o.shape);let l=a;const u=gn(l,o.shape.length);let c=o;u!=null&&(c=po({inputs:{x:o},backend:n,attrs:{perm:u}}),l=Nn(l.length,o.shape.length)),wr("min",l,c.shape.length);const[d,f]=ar(c.shape,l),p=ne(f),h=Rr(ne(d),c.dtype),m=n.data.get(c.dataId).values;for(let y=0;y<h.length;++y){const v=y*p;let b=m[v];for(let x=0;x<p;++x){const w=m[v+x];(Number.isNaN(w)||w<b)&&(b=w)}h[y]=b}u!=null&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(d,c.dtype,h);if(i){const y=In(d,a),v=Xt({inputs:{x:g},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(g),v}return g}const xOe={kernelName:jS,backendName:"cpu",kernelFunc:bOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{paddings:s,mode:i}=r;Ne(o,"mirrorPad");const a=s.map((b,x)=>b[0]+o.shape[x]+b[1]),l=s.map(b=>b[0]),u=s.map((b,x)=>b[0]+o.shape[x]),c=i==="reflect"?0:1,d=n.data.get(o.dataId).values,f=o.shape.length,p=Fe(o.shape),h=ne(a),m=a.length,g=Fe(a),y=yr(o.dtype,h);for(let b=0;b<h;b++){let x=Np(b,m,g);for(let S=0;S<m;S++)x[S]<l[S]?x[S]=l[S]*2-x[S]-c:x[S]>=u[S]&&(x[S]=(u[S]-1)*2-x[S]+c);x=x.map((S,k)=>S-l[k]);const w=ra(x,f,p);y[b]=d[w]}return{dataId:n.write(y,a,o.dtype),shape:a,dtype:o.dtype}}const SOe={kernelName:VS,backendName:"cpu",kernelFunc:wOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kOe=An((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),$Oe=Xn(qy,kOe),COe={kernelName:qy,backendName:"cpu",kernelFunc:$Oe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BY(t){const{inputs:e,backend:n,attrs:r}=t,{logits:o}=e,{dim:s}=r,i=o.shape.length;let a=s;if(a===-1&&(a=i-1),a!==i-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${i} and dim was ${a}`);const l=rt([a],o.shape),u=zY({inputs:{x:o},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),c=In(u.shape,l),d=Xt({inputs:{x:u},backend:n,attrs:{shape:c}}),f=kD({inputs:{a:o,b:d},backend:n}),p=UX({inputs:{x:f},backend:n}),h=P0({inputs:{x:p},backend:n,attrs:{axis:l,keepDims:!1}}),m=Xt({inputs:{x:h},backend:n,attrs:{shape:c}}),g=CD({inputs:{a:p,b:m},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}const TOe={kernelName:ik,backendName:"cpu",kernelFunc:BY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Oe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:o}=e,{numSamples:s,seed:i,normalized:a}=r;Ne(o,"multinomial");const l=a?o:BY({inputs:{logits:o},backend:n,attrs:{dim:-1}}),u=l.shape[0],c=l.shape[1],d=n.data.get(l.dataId).values,f=[u,s],p=Rr(ne(f),"int32");for(let h=0;h<u;++h){const m=h*c,g=new Float32Array(c-1);g[0]=d[m];for(let b=1;b<g.length;++b)g[b]=g[b-1]+d[m+b];const y=$k.alea(i.toString()),v=h*s;for(let b=0;b<s;++b){const x=y();p[v+b]=g.length;for(let w=0;w<g.length;w++)if(x<g[w]){p[v+b]=w;break}}}return a||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(f,"int32",p)}const IOe={kernelName:JO,backendName:"cpu",kernelFunc:_Oe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NOe=gR;function EOe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:o,scores:s}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l}=r;Ne(o,"NonMaxSuppression");const u=n.data.get(o.dataId).values,c=n.data.get(s.dataId).values,{selectedIndices:d}=NOe(u,c,i,a,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const AOe={kernelName:eP,backendName:"cpu",kernelFunc:EOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OOe=yR;function POe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:o,scores:s}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:u}=r;Ne(o,"NonMaxSuppressionPadded");const c=n.data.get(o.dataId).values,d=n.data.get(s.dataId).values,{selectedIndices:f,validOutputs:p}=OOe(c,d,i,a,l,u);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}const ROe={kernelName:tP,backendName:"cpu",kernelFunc:POe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DOe=vR;function FOe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:o,scores:s}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,softNmsSigma:u}=r;Ne(o,"NonMaxSuppressionWithScore");const c=n.data.get(o.dataId).values,d=n.data.get(s.dataId).values,f=i,p=a,h=l,m=u,{selectedIndices:g,selectedScores:y}=DOe(c,d,f,p,h,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}const MOe={kernelName:nP,backendName:"cpu",kernelFunc:FOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LOe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:o}=e,{dtype:s,depth:i,onValue:a,offValue:l}=r;Ne(o,"oneHot");const u=ne(o.shape),c=new Float32Array(u*i);c.fill(l);const d=n.data.get(o.dataId).values;for(let f=0;f<u;++f)d[f]>=0&&d[f]<i&&(c[f*i+d[f]]=a);return n.makeTensorInfo([...o.shape,i],s,c)}const zOe={kernelName:HS,backendName:"cpu",kernelFunc:LOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o1(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const o=jc({inputs:{input:r},backend:n}),s=o1({inputs:{x:o},backend:n}),i=qf({inputs:{input:r},backend:n}),a=o1({inputs:{x:i},backend:n}),l=$o({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return TD({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const BOe={kernelName:ck,backendName:"cpu",kernelFunc:o1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jY(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const o=jc({inputs:{input:r},backend:n}),s=jY({inputs:{x:o},backend:n}),i=qf({inputs:{input:r},backend:n}),a=o1({inputs:{x:i},backend:n}),l=$o({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return TD({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const jOe={kernelName:GS,backendName:"cpu",kernelFunc:jY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VY(t){const{inputs:e,backend:n,attrs:r}=t,{axis:o}=r;if(e.length===1)return r1({inputs:{input:e[0]},backend:n,attrs:{dim:o}});const s=e[0].shape,i=e[0].dtype;e.forEach(c=>{Wo(s,c.shape,"All tensors passed to stack must have matching shapes"),A(i===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(c=>{const d=r1({inputs:{input:c},backend:n,attrs:{dim:o}});return a.push(d),d}),u=Kf({inputs:l,backend:n,attrs:{axis:o}});return a.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const VOe={kernelName:qS,backendName:"cpu",kernelFunc:VY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{paddings:s,constantValue:i}=r;Ne(o,"pad");const a=s.map((v,b)=>v[0]+o.shape[b]+v[1]),l=s.map(v=>v[0]),u=n.data.get(o.dataId).values,c=ne(o.shape),d=o.shape.length,f=Fe(o.shape),p=ne(a),h=a.length,m=Fe(a),g=yr(o.dtype,p);i!==0&&g.fill(i);for(let v=0;v<c;v++){const x=Np(v,d,f).map((S,k)=>S+l[k]),w=ra(x,h,m);g[w]=u[v]}return{dataId:n.write(g,a,o.dtype),shape:a,dtype:o.dtype}}const WY={kernelName:KS,backendName:"cpu",kernelFunc:WOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UOe=An((t,e)=>Math.pow(t,e)),GOe=Xn(Xy,UOe),HOe={kernelName:Xy,backendName:"cpu",kernelFunc:GOe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qOe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:o,paramsDenseValues:s,indices:i}=e,{outputRaggedRank:a}=r,l=o.map(y=>n.data.get(y.dataId).values),u=o.map(y=>y.shape),c=n.data.get(s.dataId).values,d=n.data.get(i.dataId).values,[f,p,h]=lY(l,u,c,s.shape,s.dtype,d,i.shape),m=f.map(y=>n.makeTensorInfo([y.length],"int32",y)),g=n.makeTensorInfo(h,s.dtype,p);return m.concat([g])}const KOe={kernelName:rP,backendName:"cpu",kernelFunc:qOe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XOe(t){const{inputs:e,backend:n}=t,{starts:r,limits:o,deltas:s}=e,i=n.data.get(r.dataId).values,a=n.data.get(o.dataId).values,l=n.data.get(s.dataId).values,[u,c]=uY(i,r.shape,r.dtype,a,o.shape,l,s.shape),d=n.makeTensorInfo([u.length],"int32",u),f=n.makeTensorInfo([c.length],r.dtype,c);return[d,f]}const YOe={kernelName:oP,backendName:"cpu",kernelFunc:XOe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZOe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:o,values:s,defaultValue:i,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,u=n.data.get(o.dataId).values,c=n.data.get(s.dataId).values,d=n.data.get(i.dataId).values,f=a.map(g=>n.data.get(g.dataId).values),p=a.map(g=>g.shape),[h,m]=cY(u,o.shape,c,s.shape,s.dtype,d,i.shape,f,p,l);return n.makeTensorInfo(h,s.dtype,m)}const QOe={kernelName:sP,backendName:"cpu",kernelFunc:ZOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JOe(t){const{backend:e,attrs:n}=t,{start:r,stop:o,dtype:s,step:i}=n,a=dY(r,o,i,s);return e.makeTensorInfo([a.length],s,a)}const ePe={kernelName:iP,backendName:"cpu",kernelFunc:JOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tPe=Et(Yy,t=>1/t),nPe={kernelName:Yy,backendName:"cpu",kernelFunc:tPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rPe(t){const{inputs:e,backend:n,attrs:r}=t,{images:o}=e,{alignCorners:s,halfPixelCenters:i,size:a}=r;Ne(o,"resizeBilinear");const l=Fe(o.shape),[u,c]=a,[d,f,p,h]=o.shape,m=n.data.get(o.dataId).values,g=new Float32Array(ne([d,u,c,h])),y=[s&&u>1?f-1:f,s&&c>1?p-1:p],v=[s&&u>1?u-1:u,s&&c>1?c-1:c];let b=0;const x=y[0]/v[0],w=y[1]/v[1];for(let S=0;S<d;S++)for(let k=0;k<u;k++){let $;i?$=x*(k+.5)-.5:$=x*k;const C=Math.max(0,Math.floor($)),I=$-C,E=Math.min(f-1,Math.ceil($)),O=S*l[0]+C*l[1],R=S*l[0]+E*l[1];for(let z=0;z<c;z++){let L;i?L=w*(z+.5)-.5:L=w*z;const B=Math.max(0,Math.floor(L)),D=L-B,F=Math.min(p-1,Math.ceil(L)),j=O+B*l[2],G=R+B*l[2],Y=O+F*l[2],X=R+F*l[2];for(let ee=0;ee<h;ee++){const ie=m[j+ee],se=m[G+ee],de=m[Y+ee],me=m[X+ee],le=ie+(de-ie)*D,oe=se+(me-se)*D,fe=le+(oe-le)*I;g[b++]=fe}}}return n.makeTensorInfo([d,u,c,h],"float32",g)}const oPe={kernelName:JS,backendName:"cpu",kernelFunc:rPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sPe(t){const{inputs:e,backend:n,attrs:r}=t,{images:o,dy:s}=e,{alignCorners:i}=r;Ne([s,o],"resizeBilinearGrad");const a=Fe(o.shape),[l,u,c,d]=o.shape,[,f,p]=s.shape,h=new Float32Array(l*u*c*d),m=[i&&f>1?u-1:u,i&&p>1?c-1:c],g=[i&&f>1?f-1:f,i&&p>1?p-1:p],y=m[0]/g[0],v=m[1]/g[1],b=n.data.get(s.dataId).values;let x=0;for(let w=0;w<l;w++){const S=w*a[0];for(let k=0;k<f;k++){const $=k*y,C=Math.floor($),I=Math.min(Math.ceil($),u-1),E=S+C*a[1],O=S+I*a[1],R=$-C,z=1-R;for(let L=0;L<p;L++){const B=L*v,D=Math.floor(B),F=Math.min(Math.ceil(B),c-1),j=B-D,G=1-j,Y=E+D*a[2],X=E+F*a[2],ee=O+D*a[2],ie=O+F*a[2],se=z*G,de=z*j,me=R*G,le=R*j;for(let oe=0;oe<d;oe++){const fe=b[x++];h[Y+oe]+=fe*se,h[X+oe]+=fe*de,h[ee+oe]+=fe*me,h[ie+oe]+=fe*le}}}}return n.makeTensorInfo([l,c,u,d],"float32",h)}const iPe={kernelName:uP,backendName:"cpu",kernelFunc:sPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aPe(t){const{inputs:e,backend:n,attrs:r}=t,{images:o}=e,{alignCorners:s,halfPixelCenters:i,size:a}=r;Ne(o,"resizeNearestNeighbor");const l=Fe(o.shape),[u,c]=a,[d,f,p,h]=o.shape,m=n.data.get(o.dataId).values,g=new Float32Array(d*u*c*h),y=[s&&u>1?f-1:f,s&&c>1?p-1:p],v=[s&&u>1?u-1:u,s&&c>1?c-1:c],b=y[0]/v[0],x=y[1]/v[1];let w=0;for(let S=0;S<d;S++){const k=S*l[0];for(let $=0;$<u;$++){const C=i?b*($+.5):b*$;let I=Math.min(f-1,s?Math.round(C):Math.floor(C));i&&(I=Math.max(0,I));const E=k+I*l[1];for(let O=0;O<c;O++){const R=i?x*(O+.5):x*O;let z=Math.min(p-1,s?Math.round(R):Math.floor(R));i&&(z=Math.max(0,z));const L=E+z*l[2];for(let B=0;B<h;B++){const D=m[L+B];g[w++]=D}}}}return n.makeTensorInfo([d,u,c,h],o.dtype,g)}const lPe={kernelName:QS,backendName:"cpu",kernelFunc:aPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uPe(t){const{inputs:e,backend:n,attrs:r}=t,{images:o,dy:s}=e,{alignCorners:i}=r;Ne([s,o],"resizeNearestNeighborGrad");const a=Fe(o.shape),l=Fe(s.shape),[u,c,d,f]=o.shape,[,p,h]=s.shape,m=new Float32Array(u*c*d*f),g=n.data.get(s.dataId).values,y=[i&&p>1?c-1:c,i&&h>1?d-1:d],v=[i&&p>1?p-1:p,i&&h>1?h-1:h],b=y[0]/v[0],x=y[1]/v[1],w=1/b,S=1/x,k=Math.ceil(w)*2+2,$=Math.ceil(S)*2+2;for(let C=0;C<u;C++){const I=C*a[0];for(let E=0;E<c;E++){const O=I+E*a[1],R=Math.floor(E*w),z=Math.floor(R-k/2);for(let L=0;L<d;L++){const B=O+L*a[2],D=Math.floor(L*S),F=Math.floor(D-$/2);for(let j=0;j<f;j++){let G=0;for(let Y=0;Y<k;Y++){const X=Y+z;if(X<0||X>=p)continue;const ee=I+X*l[1],ie=X*b,se=Math.min(c-1,i?Math.round(ie):Math.floor(ie));if(E===se)for(let de=0;de<$;de++){const me=de+F;if(me<0||me>=h)continue;const le=ee+me*l[2],oe=me*x,fe=Math.min(d-1,i?Math.round(oe):Math.floor(oe));L===fe&&(G+=g[le+j])}}m[B+j]=G}}}}return n.makeTensorInfo(o.shape,o.dtype,m)}const cPe={kernelName:lP,backendName:"cpu",kernelFunc:uPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{dims:s}=r;Ne(o,"reverse");const i=o.shape.length,a=rt(s,o.shape);if(i===0)return pa({inputs:{x:o},backend:n});const l=new Un(o.shape,o.dtype),u=n.bufferSync(o);for(let c=0;c<l.size;c++){const d=l.indexToLoc(c),f=d.slice();a.forEach(p=>f[p]=o.shape[p]-1-f[p]),l.set(u.get(...f),...d)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const fPe={kernelName:ek,backendName:"cpu",kernelFunc:dPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pPe={kernelName:TP,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:o,fillValue:s,center:i}=e,a=n,l=yr(r.dtype,ne(r.shape)),[u,c,d,f]=r.shape,[p,h]=OR(i,c,d),m=255,g=Math.sin(o),y=Math.cos(o),v=a.data.get(r.dataId).values;for(let x=0;x<u;x++){const w=x*d*c*f;for(let S=0;S<c;S++){const k=S*(d*f);for(let $=0;$<d;$++){const C=$*f;for(let I=0;I<f;I++){const E=[u,S,$,I],O=E[2],R=E[1];let z=(O-p)*y-(R-h)*g,L=(O-p)*g+(R-h)*y;z=Math.round(z+p),L=Math.round(L+h);let B=s;if(typeof s!="number"&&(I===3?B=m:B=s[I]),z>=0&&z<d&&L>=0&&L<c){const F=L*(d*f),j=z*f,G=w+F+j+I;B=v[G]}const D=w+k+C+I;l[D]=B}}}}return{dataId:a.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hPe=Et(Jy,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),mPe={kernelName:Jy,backendName:"cpu",kernelFunc:hPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gPe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:o,updates:s}=e,{shape:i}=r,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=rd(s,o,i),f=!0,p=n.bufferSync(o),h=n.bufferSync(s),m=lc(p,h,i,d,u,l,a,c,0,f);return n.makeTensorInfo(i,m.dtype,m.values)}const yPe={kernelName:cP,backendName:"cpu",kernelFunc:gPe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vPe(t,e){let n=0,r=t.length,o=0;for(;n<r;)o=Math.floor((n+r)/2),t[o]<e?n=o+1:r=o;return r}function bPe(t,e){let n=0,r=t.length,o=0;for(;n<r;)o=Math.floor((n+r)/2),t[o]<=e?n=o+1:r=o;return r}function xPe(t,e,n,r,o,s){const i=_n("int32",n*o);for(let a=0;a<n;++a){const l=t.slice(a*r,(a+1)*r),u=a*o;for(let c=0;c<o;++c)i[u+c]=s==="left"?vPe(l,e[c+u]):bPe(l,e[c+u])}return i}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wPe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:o,values:s}=e,{side:i}=r,a=n.data.get(o.dataId).values,l=n.data.get(s.dataId).values,u=xPe(a,l,o.shape[0],o.shape[1],s.shape[1],i);return n.makeTensorInfo(s.shape,"int32",u)}const SPe={kernelName:fP,backendName:"cpu",kernelFunc:wPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kPe(t){const{inputs:e,backend:n}=t,{condition:r,t:o,e:s}=e;Ne([r,o,s],"select");const i=r.shape.length,a=n.data.get(r.dataId).values,l=n.data.get(o.dataId).values,u=n.data.get(s.dataId).values,c=Fo(o.dtype,s.dtype),d=Rr(ne(o.shape),c);let f=0;const p=i===0||i>1||o.shape.length===1?1:ne(o.shape.slice(1));for(let h=0;h<a.length;h++)for(let m=0;m<p;m++)a[h]===1?d[f++]=l[h]:d[f++]=u[h];return n.makeTensorInfo(o.shape,c,d)}const $Pe={kernelName:tk,backendName:"cpu",kernelFunc:kPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CPe=Fk,TPe=Mk,_Pe=Et(t0,t=>t>=0?TPe*t:CPe*(Math.exp(t)-1)),IPe={kernelName:t0,backendName:"cpu",kernelFunc:_Pe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NPe=Et(o0,t=>t<0?-1:t>0?1:0),EPe={kernelName:o0,backendName:"cpu",kernelFunc:NPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const APe=Et(n0,t=>Math.sin(t)),OPe={kernelName:n0,backendName:"cpu",kernelFunc:APe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PPe=Et(r0,t=>Math.sinh(t)),RPe={kernelName:r0,backendName:"cpu",kernelFunc:PPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DPe=11920928955078125e-23,RB=Math.log(DPe)+2,FPe=Et(i0,t=>{const e=t>-RB,n=t<RB,r=Math.exp(t);let o;return n?o=r:e?o=t:o=Math.log(1+r),o}),MPe={kernelName:i0,backendName:"cpu",kernelFunc:FPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{blockShape:s,paddings:i}=r;Ne([o],"spaceToBatchND");const a=ne(s),l=[[0,0]];l.push(...i);for(let S=1+s.length;S<o.shape.length;++S)l.push([0,0]);const u=WY.kernelFunc({inputs:{x:o},backend:n,attrs:{paddings:l,constantValue:0}}),c=S0(u.shape,s,a,!1),d=k0(c.length,s.length,!1),f=$0(u.shape,s,a,!1),m=Xt({inputs:{x:u},backend:n,attrs:{shape:c}}),v=po({inputs:{x:m},backend:n,attrs:{perm:d}}),w=Xt({inputs:{x:v},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),w}const zPe={kernelName:ok,backendName:"cpu",kernelFunc:LPe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BPe(t){const{inputs:e,backend:n}=t,{indices:r,values:o,denseShape:s,defaultValue:i}=e;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(o.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${o.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);const a=n.data.get(r.dataId).values,l=n.data.get(o.dataId).values,u=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values[0],[d,f,p,h,m]=mY(a,r.shape,r.dtype,l,o.dtype,u,c);return[n.makeTensorInfo(f,r.dtype,d),n.makeTensorInfo([f[0]],o.dtype,p),n.makeTensorInfo([h.length],"bool",new Uint8Array(h.map(g=>Number(g)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}const jPe={kernelName:pP,backendName:"cpu",kernelFunc:BPe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VPe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:o,newShape:s}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(o.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${o.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const i=Array.from(n.data.get(o.dataId).values),a=n.data.get(r.dataId).values,l=Array.from(n.data.get(s.dataId).values),[u,c,d]=gY(a,r.shape,r.dtype,i,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([d.length],s.dtype,new Int32Array(d))]}const WPe={kernelName:hP,backendName:"cpu",kernelFunc:VPe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UPe(t){const{inputs:e,backend:n}=t,{data:r,indices:o,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${o.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${s.shape}`);if(o.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(r.dataId).values,a=n.data.get(o.dataId).values,l=n.data.get(s.dataId).values,[u,c]=SD(i,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(c,r.dtype,u)}const GPe={kernelName:mP,backendName:"cpu",kernelFunc:UPe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HPe(t){const{inputs:e,backend:n}=t,{data:r,indices:o,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${o.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${s.shape}`);if(o.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(r.dataId).values,a=n.data.get(o.dataId).values,l=n.data.get(s.dataId).values,[u,c]=SD(i,r.shape,r.dtype,a,l);return n.makeTensorInfo(c,r.dtype,u)}const qPe={kernelName:gP,backendName:"cpu",kernelFunc:HPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KPe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:o,sparseValues:s,defaultValue:i}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:f}=rd(s,o,a),p=!1,h=n.bufferSync(o);let m;switch(s.dtype){case"bool":{const g=n.bufferSync(s),y=!!n.data.get(i.dataId).values[0];m=lc(h,g,a,f,c,u,l,d,y,p);break}case"float32":{const g=n.bufferSync(s),y=n.data.get(i.dataId).values[0];m=lc(h,g,a,f,c,u,l,d,y,p);break}case"int32":{const g=n.bufferSync(s),y=n.data.get(i.dataId).values[0];m=lc(h,g,a,f,c,u,l,d,y,p);break}case"string":{const g=n.bufferSync(s),y=ru(n.data.get(i.dataId).values[0]);m=lc(h,g,a,f,c,u,l,d,y,p);break}default:throw new Error(`Unsupported type ${s.dtype}`)}return n.makeTensorInfo(a,m.dtype,m.values)}const XPe={kernelName:yP,backendName:"cpu",kernelFunc:KPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{numOrSizeSplits:s,axis:i}=r,a=rt(i,o.shape)[0],l=qR(o,s,a),u=new Array(o.shape.length).fill(0),c=o.shape.slice();return l.map(d=>{const f=[...c];f[a]=d;const p=Vc({inputs:{x:o},backend:n,attrs:{begin:u,size:f}});return u[a]+=d,p})}const ZPe={kernelName:sk,backendName:"cpu",kernelFunc:YPe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QPe={kernelName:vP,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;Ne(n,"square");const o=r.data.get(n.dataId).values,s=new Float32Array(o.length);for(let a=0;a<o.length;++a){const l=o[a];s[a]=l*l}return{dataId:r.write(s,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JPe=Et(p0,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),eRe={kernelName:p0,backendName:"cpu",kernelFunc:JPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{begin:s,end:i,strides:a,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:f}=r;Ne(o,"stridedSlice");const{finalShapeSparse:p,finalShape:h,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:v,end:b,strides:x}=NR(o.shape,s,i,a,l,u,c,d,f);let w;if(m)w=Xt({inputs:{x:o},backend:n,attrs:{shape:h}});else if(g||y){A(o.shape.length>=1,()=>`Input must have rank at least 1, got: ${o.shape.length}`);const S=TR(v,b,x),k=Vc({inputs:{x:o},backend:n,attrs:{begin:v,size:S}});w=Xt({inputs:{x:k},backend:n,attrs:{shape:h}}),n.disposeIntermediateTensorInfo(k)}else{const S=n.bufferSync(o),k=bY(p,S,x,v);w=n.makeTensorInfo(h,k.dtype,k.values)}return w}const nRe={kernelName:bP,backendName:"cpu",kernelFunc:tRe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rRe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:o,nGramWidths:s,leftPad:i,rightPad:a,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:d}=e,f=n.data.get(c.dataId).values,p=n.data.get(d.dataId).values,[h,m]=xY(f,p,o,s,i,a,l,u);return[n.makeTensorInfo([h.length],"string",h),n.makeTensorInfo(d.shape,"int32",m)]}const oRe={kernelName:xP,backendName:"cpu",kernelFunc:rRe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sRe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:o}=r,{input:s,delimiter:i}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values[0],[u,c,d]=wY(a,l,o),f=c.length;return[n.makeTensorInfo([f,2],"int32",u),n.makeTensorInfo([f],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const iRe={kernelName:wP,backendName:"cpu",kernelFunc:sRe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aRe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:o}=r,{input:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");const i=n.data.get(s.dataId).values,a=SY(i,o);return n.makeTensorInfo(s.shape,"int32",a)}const lRe={kernelName:SP,backendName:"cpu",kernelFunc:aRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uRe=Et(c0,t=>Math.tan(t)),cRe={kernelName:c0,backendName:"cpu",kernelFunc:uRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dRe=Et(d0,t=>Math.tanh(t)),fRe={kernelName:d0,backendName:"cpu",kernelFunc:dRe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pRe(t){const{inputs:e,backend:n}=t,{tensor:r,indices:o,updates:s}=e,{sliceRank:i,numUpdates:a,sliceSize:l,strides:u,outputSize:c}=rd(s,o,r.shape),d=!1,f=n.bufferSync(o),p=n.bufferSync(s),h=n.bufferSync(r),m=lc(f,p,r.shape,c,l,a,i,u,h,d);return n.makeTensorInfo(r.shape,m.dtype,m.values)}const hRe={kernelName:dP,backendName:"cpu",kernelFunc:pRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{reps:s}=r;Ne(o,"tile");const i=$Y(n.bufferSync(o),s);return n.makeTensorInfo(i.shape,i.dtype,i.values)}const gRe={kernelName:f0,backendName:"cpu",kernelFunc:mRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{k:s,sorted:i}=r;Ne(o,"topk");const a=n.data.get(o.dataId).values,[l,u]=TY(a,o.shape,o.dtype,s,i);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}const vRe={kernelName:kP,backendName:"cpu",kernelFunc:yRe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bRe(t){const{inputs:e,attrs:n,backend:r}=t,{image:o,transforms:s}=e,{interpolation:i,fillMode:a,fillValue:l,outputShape:u}=n,[c,d,f,p]=o.shape,[h,m]=u??[d,f],g=[c,h,m,p],y=Fe(o.shape),v=y[0],b=y[1],x=y[2],w=Fe(g),S=w[0],k=w[1],$=w[2],C=yr(o.dtype,ne(g));C.fill(l);const I=r.data.get(o.dataId).values,E=r.data.get(s.dataId).values;for(let R=0;R<c;++R){const z=s.shape[0]===1?E:E.subarray(R*8,R*8+8);for(let L=0;L<h;++L)for(let B=0;B<m;++B)for(let D=0;D<p;++D){let F;const j=z[6]*B+z[7]*L+1;if(j===0)continue;const G=(z[0]*B+z[1]*L+z[2])/j,Y=(z[3]*B+z[4]*L+z[5])/j,X=DB(G,f,a),ee=DB(Y,d,a);switch(i){case"nearest":F=CRe(I,d,f,v,b,x,R,ee,X,D,l);break;case"bilinear":F=TRe(I,d,f,v,b,x,R,ee,X,D,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${i}`)}const ie=R*S+L*k+B*$+D;C[ie]=F}return r.makeTensorInfo(g,o.dtype,C)}return{dataId:r.write(C,g,o.dtype),shape:o.shape,dtype:o.dtype}}const xRe={kernelName:$P,backendName:"cpu",kernelFunc:bRe};function DB(t,e,n){switch(n){case"reflect":return wRe(t,e);case"wrap":return SRe(t,e);case"nearest":return $Re(t,e);case"constant":default:return kRe(t)}}function wRe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return Ec(0,n,e-1)}function SRe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return Ec(0,n,e-1)}function kRe(t,e){return t}function $Re(t,e){return Ec(0,t,e-1)}function Kh(t,e,n,r,o,s,i,a,l,u,c){const d=i*r+a*o+l*s+u;return 0<=a&&a<e&&0<=l&&l<n?t[d]:c}function CRe(t,e,n,r,o,s,i,a,l,u,c){const d=Math.round(a),f=Math.round(l);return Kh(t,e,n,r,o,s,i,d,f,u,c)}function TRe(t,e,n,r,o,s,i,a,l,u,c){const d=Math.floor(a),f=Math.floor(l),p=d+1,h=f+1,m=(h-l)*Kh(t,e,n,r,o,s,i,d,f,u,c)+(l-f)*Kh(t,e,n,r,o,s,i,d,h,u,c),g=(h-l)*Kh(t,e,n,r,o,s,i,p,f,u,c)+(l-f)*Kh(t,e,n,r,o,s,i,p,h,u,c);return(p-a)*m+(a-d)*g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Re(t){const{inputs:e,attrs:n,backend:r}=t,{axis:o}=n,{x:s}=e;Ne(s,"unique");const i=r.data.get(s.dataId).values,{outputValues:a,outputShape:l,indices:u}=_Y(i,o,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,a),r.makeTensorInfo([u.length],"int32",u)]}const IRe={kernelName:CP,backendName:"cpu",kernelFunc:_Re};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NRe(t){const{inputs:e,backend:n,attrs:r}=t,{value:o}=e;let{axis:s}=r;s<0&&(s+=o.shape.length);const i=o.shape.length,a=o.shape[s],l=new Array(i-1);let u=0;for(let p=0;p<i;p++)p!==s&&(l[u++]=o.shape[p]);const c=new Array(i).fill(0),d=o.shape.slice();d[s]=1;const f=new Array(a);for(let p=0;p<f.length;p++){c[s]=p;const h=Vc({inputs:{x:o},backend:n,attrs:{begin:c,size:d}});f[p]=Xt({inputs:{x:h},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(h)}return f}const ERe={kernelName:lk,backendName:"cpu",kernelFunc:NRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ARe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,segmentIds:s}=e,{numSegments:i}=r;Ne(o,"unsortedSegmentSum");const a=o.shape.length,l=s.shape.length,u=[],c=[],d=a-l;let f=s;for(let h=0;h<d;++h){const m=r1({inputs:{input:f},backend:n,attrs:{dim:h+1}});f=m,c.push(m)}for(let h=0;h<i;++h){const m=wu(h,"int32"),g=n.makeTensorInfo([],"int32",m),y=VX({inputs:{a:g,b:f},backend:n}),v=pu({inputs:{x:y},backend:n,attrs:{dtype:"float32"}}),b=Xk({inputs:{a:v,b:o},backend:n}),x=P0({inputs:{x:b},backend:n,attrs:{axis:0,keepDims:!1}});u.push(x),c.push(g),c.push(y),c.push(v),c.push(b),c.push(x)}const p=VY({inputs:u,backend:n,attrs:{axis:0}});return c.forEach(h=>n.disposeIntermediateTensorInfo(h)),p}const ORe={kernelName:uk,backendName:"cpu",kernelFunc:ARe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PRe=[_Ne,a2e,NNe,ANe,p2e,PNe,DNe,MNe,zNe,jNe,WNe,GNe,qNe,YNe,QNe,tEe,rEe,sEe,aEe,CNe,uEe,dEe,pEe,m2e,mEe,d2e,y2e,yEe,l2e,bEe,wEe,SEe,$Ee,TEe,IEe,EEe,OEe,REe,FEe,LEe,BEe,VEe,UEe,HEe,qEe,XEe,ZEe,JEe,eAe,tAe,nAe,oAe,aAe,vNe,uAe,v2e,yAe,b2e,vAe,w2e,$Ae,CAe,_Ae,k2e,C2e,NAe,AAe,PAe,DAe,_2e,N2e,u2e,MAe,xEe,zAe,jAe,WAe,bNe,A2e,P2e,GAe,D2e,qAe,YAe,QAe,tOe,rOe,sOe,iOe,M2e,lOe,cOe,fOe,hOe,gOe,vOe,xOe,z2e,SOe,COe,IOe,j2e,W2e,AOe,ROe,MOe,G2e,zOe,jOe,VOe,WY,HOe,wNe,K2e,KOe,YOe,QOe,ePe,c2e,JI,nPe,SNe,kNe,$Ne,oPe,iPe,lPe,cPe,fPe,pPe,mPe,nNe,yPe,SPe,$Pe,IPe,oNe,EPe,OPe,RPe,sNe,TOe,MPe,zPe,jPe,WPe,GPe,qPe,XPe,ZPe,lNe,QPe,cNe,fNe,eRe,nRe,oRe,iRe,lRe,gNe,sAe,cRe,fRe,hRe,gRe,vRe,xRe,H2e,IRe,ERe,ORe,BOe];for(const t of PRe)R8(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ec={},Bv={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function RRe(t,e){ec[t]=e}function Ci(t,e){if(!(t in ec)||e!=null){const r=FRe(t,e);if(r!==null)ec[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=ec[t];return n==null||n.isContextLost()?(delete ec[t],Ci(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),ec[t])}function DRe(t){if(!J().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function FRe(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??DRe(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete ec[t]},!1),J().getBool("SOFTWARE_WEBGL_ENABLED")&&(Bv.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",Bv)||n.getContext("experimental-webgl",Bv):n.getContext("webgl2",Bv)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var dg;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(dg||(dg={}));var es;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(es||(es={}));var mr;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(mr||(mr={}));function R0(t,e){return[e,t]}function MRe(t,e){return t*e}function jv(t){const e=ne(t),n=Math.ceil(e/4);return lI(n)}function Mp(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function LRe(t,e){const[n,r]=Mp(t,e);return n*r*4}function _D(t,e){const n=t;let r,o,s,i,a,l,u,c,d,f;return J().getNumber("WEBGL_VERSION")===2?(r=n.R32F,o=n.R16F,s=n.RGBA16F,i=n.RGBA32F,a=n.RED,u=4,c=1,d=n.HALF_FLOAT,f=n.FLOAT,l=n.RGBA8):(r=t.RGBA,o=t.RGBA,s=t.RGBA,i=n.RGBA,a=t.RGBA,u=4,c=4,d=e!=null?e.HALF_FLOAT_OES:null,f=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:o,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:i,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:d,textureTypeFloat:f}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Se(t,e){const n=e();return J().getBool("DEBUG")&&zRe(t),n}function zRe(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+WRe(t,e))}const BRe=596e-10,jRe=65504;function VRe(t){return!!(J().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||BRe<Math.abs(t)&&Math.abs(t)<jRe)}function WRe(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function Vv(t,e){return ml(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function URe(t,e){const n=ml(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Se(t,()=>t.shaderSource(n,e)),Se(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function GRe(t,e){const n=ml(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Se(t,()=>t.shaderSource(n,e)),Se(t,()=>t.compileShader(n)),J().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw UY(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const HRe=/ERROR: [0-9]+:([0-9]+):/g;function UY(t,e){const n=HRe.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],o=t.split(`
`),s=o.length.toString().length+2,i=o.map((d,f)=>uf((f+1).toString(),s)+d);let a=0;for(let d=0;d<i.length;d++)a=Math.max(i[d].length,a);const l=i.slice(0,r-1),u=i.slice(r-1,r),c=i.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${uf(u[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join(`
`))}function qRe(t){return ml(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function KRe(t,e){if(Se(t,()=>t.linkProgram(e)),!J().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function aT(t,e){if(Se(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function XRe(t,e){const n=ml(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Se(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),Se(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function YRe(t,e){const n=ml(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Se(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),Se(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function ZRe(t){return ml(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function QRe(t,e){const n=J().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,o=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+o+".")}}function JRe(t){return ml(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function FB(t,e,n,r,o,s,i){const a=t.getAttribLocation(e,n);return a===-1?!1:(Se(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),Se(t,()=>t.vertexAttribPointer(a,o,t.FLOAT,!1,s,i)),Se(t,()=>t.enableVertexAttribArray(a)),!0)}function eDe(t,e,n){sDe(t,n),Se(t,()=>t.activeTexture(t.TEXTURE0+n)),Se(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function tDe(t,e,n){return ml(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function nDe(t,e,n){return t.getUniformLocation(e,n)}function rDe(t,e,n,r){Se(t,()=>eDe(t,e,r)),Se(t,()=>t.uniform1i(n,r))}function lT(t,e,n){Se(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),Se(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function MB(t,e){Se(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),Se(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function Wv(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+oDe(t,e))}function oDe(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function ml(t,e,n){const r=Se(t,()=>e());if(r==null)throw new Error(n);return r}function sDe(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const o=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${o}.`)}}function Xf(t,e=2){return ne(t.slice(0,t.length-e))}function Yf(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function Uv(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[Xf(t),...Yf(t)]),e}function iDe(t,e=!1){let n=J().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=J().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&J().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((a,l)=>l>=t.length-2?xO(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=xu(t).newShape);let o=ne(t),s=null;t.length<=1&&o<=n?s=[1,o]:t.length===2&&t[0]<=n&&t[1]<=n?s=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?s=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?s=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?s=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(s=[t[0],t[1]*t[2]*t[3]]);const i=s!=null&&Math.max(...s)>r&&Math.min(...s)<=(e?2:1)&&Math.min(...s)>0;if(s==null||i)if(e){const a=Xf(t);let l=2,u=2;t.length&&([l,u]=Yf(t)),o=a*(l/2)*(u/2),s=lI(o).map(c=>c*2)}else s=lI(o);return s}function Gv(t){return t%2===0}function s1(t,e){if(t=t.slice(-2),e=e.slice(-2),ct(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||Gv(n)&&Gv(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&Gv(t[0])&&Gv(e[0])}let uT,cT;function aDe(t){if(uT==null){const e=Ci(t);uT=e.getParameter(e.MAX_TEXTURE_SIZE)}return uT}function lDe(t){if(cT==null){const e=Ci(t);cT=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,cT)}function uDe(t){if(t===0)return 0;let e;const n=Ci(t);return Rs(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:Rs(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function Rs(t,e){return t.getExtension(e)!=null}function LB(t){try{if(Ci(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function cDe(t){if(t===0)return!1;const e=Ci(t);if(t===1){if(!Rs(e,"OES_texture_float"))return!1}else if(!Rs(e,"EXT_color_buffer_float"))return!1;return t2(e)}function dDe(t){if(t===0)return!1;const e=Ci(t);if(t===1){if(!Rs(e,"OES_texture_float")||!Rs(e,"WEBGL_color_buffer_float"))return!1}else{if(Rs(e,"EXT_color_buffer_float"))return t2(e);const r="EXT_color_buffer_half_float";if(Rs(e,r)){const o=e.getExtension(r);return fDe(e,o)}return!1}return t2(e)}function t2(t){const e=_D(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(s),i}function fDe(t,e){const n=_D(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(i),a}function pDe(t){return t!==2?!1:Ci(t).fenceSync!=null}function D0(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&A(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ae=J();Ae.registerFlag("HAS_WEBGL",()=>Ae.getNumber("WEBGL_VERSION")>0);Ae.registerFlag("WEBGL_VERSION",()=>LB(2)?2:LB(1)?1:0);Ae.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Ae.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Ae.get("WEBGL_VERSION")===2);Ae.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Ae.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Ae.registerFlag("WEBGL_PACK",()=>Ae.getBool("HAS_WEBGL"));Ae.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Ae.getBool("WEBGL_PACK"));Ae.registerFlag("WEBGL_PACK_CLIP",()=>Ae.getBool("WEBGL_PACK"));Ae.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Ae.getBool("WEBGL_PACK"));Ae.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Ae.getBool("WEBGL_PACK"));Ae.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Ae.getBool("WEBGL_PACK"));Ae.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Ae.getBool("WEBGL_PACK"));Ae.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Ae.getBool("WEBGL_PACK"));Ae.registerFlag("WEBGL_PACK_REDUCE",()=>Ae.getBool("WEBGL_PACK"));Ae.registerFlag("WEBGL_LAZILY_UNPACK",()=>Ae.getBool("WEBGL_PACK"));Ae.registerFlag("WEBGL_CONV_IM2COL",()=>Ae.getBool("WEBGL_PACK"));Ae.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>Ae.getBool("WEBGL_PACK"));Ae.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>aDe(Ae.getNumber("WEBGL_VERSION")));Ae.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>lDe(Ae.getNumber("WEBGL_VERSION")));Ae.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=Ae.getNumber("WEBGL_VERSION");return t===0?0:uDe(t)});Ae.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Ae.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!Z8());Ae.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>cDe(Ae.getNumber("WEBGL_VERSION")));Ae.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Ae.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Ae.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Ae.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>dDe(Ae.getNumber("WEBGL_VERSION")));Ae.registerFlag("WEBGL_FENCE_API_ENABLED",()=>pDe(Ae.getNumber("WEBGL_VERSION")));Ae.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Ae.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Ae.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});Ae.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>Z8()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});Ae.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Ae.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Ae.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Ae.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);Ae.registerFlag("WEBGL_EXP_CONV",()=>!1);Ae.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Ae.getBool("IS_TEST"));Ae.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);Ae.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);Ae.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);Ae.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function to(){let t,e,n,r,o,s,i,a,l,u;return J().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",o="texture",s="outputColor",i="out vec4 outputColor;",a=J().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",u=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",o="texture2D",s="gl_FragColor",i="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,u=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:o,output:s,defineOutput:i,defineSpecialNaN:a,defineSpecialInf:l,defineRound:u}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function id(t,e,n="index"){const r=Fe(e);return r.map((o,s)=>{const i=`int ${t[s]} = ${n} / ${o}`,a=s===r.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * ${o}`:`index -= ${t[s]} * ${o}`;return`${i}; ${a};`}).join("")}function Yk(t,e,n="index"){const r=Fe(e);return r.map((o,s)=>{const i=`int ${t[s]} = ${n} / outShapeStrides[${s}]`,a=s===r.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * outShapeStrides[${s}]`:`index -= ${t[s]} * outShapeStrides[${s}]`;return`${i}; ${a};`}).join("")}function hDe(t,e){const n=t.length,r=t.map(s=>`${e}[${s}]`),o=new Array(n-1);o[n-2]=r[n-1];for(let s=n-3;s>=0;--s)o[s]=`(${o[s+1]} * ${r[s+1]})`;return o}function mDe(t,e,n="index"){const r=t.map((s,i)=>i),o=hDe(r,e);return o.map((s,i)=>{const a=`int ${t[i]} = ${n} / ${o[i]}`,l=i===o.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${o[i]}`:`index -= ${t[i]} * ${o[i]}`;return`${a}; ${l};`}).join("")}function ID(t){const e=Fe(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function ND(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const GY=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:HY}=Oke;function gDe(t,e,n){const r=[];if(t.forEach(p=>{const h=ne(p.shapeInfo.logicalShape);if(p.shapeInfo.isUniform?r.push(`uniform float ${p.name}${h>1?`[${h}]`:""};`):(r.push(`uniform sampler2D ${p.name};`),r.push(`uniform int offset${p.name};`)),n.enableShapeUniforms){const{uniformShape:m}=ED(n.packedInputs,p.shapeInfo.logicalShape,p.shapeInfo.texShape);switch(m.length){case 1:r.push(`uniform int ${p.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${p.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${p.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${p.name}Shape;`);break}r.push(`uniform ivec2 ${p.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(p=>{r.push(`uniform ${p.type} ${p.name}${p.arrayIndex?`[${p.arrayIndex}]`:""};`)});const o=r.join(`
`),s=t.map(p=>yDe(p,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),i=e.texShape,a=to(),l=xDe(a);let u,c,d=kDe(a);return e.isPacked?(u=vDe(e.logicalShape,i,n.enableShapeUniforms),c=SDe(a)):(u=bDe(e.logicalShape,i,n.enableShapeUniforms),c=wDe(a)),n.packedInputs&&(d+=_De),[d,l,c,o,u,s,n.userCode].join(`
`)}function Lp(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return zDe(t,e);case 1:return jDe(t,e);case 2:return WDe(t,e);case 3:return GDe(t,e);case 4:return qDe(t,e);case 5:return KDe(t);case 6:return XDe(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function qY(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return LDe(t);case 1:return BDe(t,e);case 2:return VDe(t,e);case 3:return UDe(t,e);default:return HDe(t,e)}}function yDe(t,e,n=!1,r){let o="";n?o+=qY(t,r):o+=Lp(t,r);const s=t.shapeInfo.logicalShape,i=e.logicalShape;return s.length<=i.length&&(n?o+=YDe(t,e):o+=ZDe(t,e)),o}function vDe(t,e,n){switch(t.length){case 0:return KY();case 1:return IDe(t,e,n);case 2:return FDe(t,e,n);case 3:return EDe(t,e,n);default:return ODe(t,e,n)}}function bDe(t,e,n){switch(t.length){case 0:return KY();case 1:return NDe(t,e,n);case 2:return MDe(t,e,n);case 3:return ADe(t,e,n);case 4:return PDe(t,e,n);case 5:return RDe(t,e);case 6:return DDe(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function xDe(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function wDe(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function SDe(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function kDe(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${$De}
    ${CDe}
    ${TDe}
  `}const $De=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,CDe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,TDe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,_De=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function KY(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function IDe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function NDe(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function EDe(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],o=Math.ceil(t[2]/2),s=o*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec3(b, r, c);
    }
  `}function ADe(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${Yk(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=id(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function ODe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],o=Math.ceil(t[t.length-1]/2),s=o*Math.ceil(t[t.length-2]/2);let i=s,a="",l="b, r, c";for(let u=2;u<t.length-1;u++)i*=t[t.length-u-1],a=`
      int b${u} = index / ${i};
      index -= b${u} * ${i};
    `+a,l=`b${u}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${a}

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec${t.length}(${l});
    }
  `}function PDe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${Yk(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=id(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function RDe(t,e){const n=id(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function DDe(t,e){const n=id(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function FDe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(ct(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const o=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec2(r, c);
    }
  `}function MDe(t,e,n){return ct(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function ad(t){return`offset${t}`}function LDe(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=to();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function zDe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[o,s]=t.shapeInfo.texShape;if(o===1&&s===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const i=ad(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${i});
      return sampleTexture(${n}, uv);
    }
  `;const[a,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${a}, ${l}, ${i});
      return sampleTexture(${n}, uv);
    }
  `}function BDe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t.shapeInfo.texShape,s=to();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${s.texture2D}(${n}, uv);
    }
  `;const i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${i[0]}, ${i[1]}, index);
      return ${s.texture2D}(${n}, uv);
    }
  `}function jDe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${zp(t)}
      }
    `;const o=t.shapeInfo.texShape,s=o[0],i=o[1];if(i===1&&s===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=ad(n);return i===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${s}.0);
        return sampleTexture(${n}, uv);
      }
    `:s===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${i}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${a});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${s}, ${i}, index + ${a});
      return sampleTexture(${n}, uv);
    }
  `}function VDe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape,i=s[0],a=s[1],l=to();if(s!=null&&ct(n,s))return e?`
      vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${i}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${o}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],c=Math.ceil(n[1]/2);return`
    vec4 ${o}(int row, int col) {
      vec2 uv = packedUVfrom2D(${c}, ${u[0]}, ${u[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function WDe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape;if(s!=null&&ct(n,s)){if(e)return`
      float ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const f=s[0],p=s[1];return`
    float ${o}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${p}.0, ${f}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:i,keptDims:a}=xu(n),l=i;if(l.length<n.length){const f=Bp(t,l),p=["row","col"];return`
      ${Lp(f,e)}
      float ${o}(int row, int col) {
        return ${o}(${jp(p,a)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${o}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${zp(t)}
      }
    `;const u=s[0],c=s[1],d=ad(r);return c===1?e?`
      float ${o}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${o}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);
      return sampleTexture(${r}, uv);
    }
  `:u===1?e?`
      float ${o}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${o}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${o}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${o}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${u}, ${c}, index);
    return sampleTexture(${r}, uv);
  }
`}function UDe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape,i=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];if(n[0]===1){const f=n.slice(1),p=[1,2],h=Bp(t,f),m=["b","row","col"];return`
        ${qY(h,e)}
        vec4 ${o}(int b, int row, int col) {
          return ${o}(${jp(m,p)});
        }
      `}const a=to();if(e)return`
    vec4 ${o}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `;const l=i[0],u=i[1],c=Math.ceil(n[2]/2),d=c*Math.ceil(n[1]/2);return`
    vec4 ${o}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${u}, ${d}, ${c}, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `}function GDe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[1]*n[2],i=n[2],{newShape:a,keptDims:l}=xu(n),u=a;if(u.length<n.length){const m=Bp(t,u),g=["row","col","depth"];return`
        ${Lp(m,e)}
        float ${o}(int row, int col, int depth) {
          return ${o}(${jp(g,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${s}, ${i}, 1)));
        ${zp(t)}
      }
    `;const c=t.shapeInfo.texShape,d=c[0],f=c[1],p=t.shapeInfo.flatOffset;if(f===s&&p==null)return e?`
      float ${o}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${o}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${i}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${f}.0, ${d}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(f===i&&p==null)return e?`
      float ${o}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${o}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${f}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `;const h=ad(r);return e?`
    float ${o}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${h};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${o}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${s} + col * ${i} + depth + ${h};
        vec2 uv = uvFromFlat(${d}, ${f}, index);
        return sampleTexture(${r}, uv);
      }
  `}function HDe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=to();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${o.texture2D}(${n}, uv);
    }
  `;const s=t.shapeInfo.logicalShape,i=s.length,a=t.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],u=l[0],c=l[1],d=Math.ceil(s[i-1]/2);let f=d*Math.ceil(s[i-2]/2),p="int b, int row, int col",h=`b * ${f} + (row / 2) * ${d} + (col / 2)`;for(let m=2;m<i-1;m++)p=`int b${m}, `+p,f*=s[i-m-1],h=`b${m} * ${f} + `+h;return`
    vec4 ${r}(${p}) {
      int index = ${h};
      int texR = index / ${c};
      int texC = index - texR * ${c};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${u});
      return ${o.texture2D}(${n}, uv);
    }
  `}function qDe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[3],i=n[2]*s,a=n[1]*i,{newShape:l,keptDims:u}=xu(n);if(l.length<n.length){const v=Bp(t,l),b=["row","col","depth","depth2"];return`
      ${Lp(v,e)}
      float ${o}(int row, int col, int depth, int depth2) {
        return ${o}(${jp(b,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${i}, ${s}, 1)));
        ${zp(t)}
      }
    `;const c=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,f=d[0],p=d[1],h=`int stride2 = ${r}Shape[3];`,m=`int stride1 = ${r}Shape[2] * stride2;`,g=`int stride0 = ${r}Shape[1] * stride1;`;if(p===a&&c==null)return e?`
      float ${o}(int row, int col, int depth, int depth2) {
        ${h}
        ${m}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${i}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${f}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(p===s&&c==null)return e?`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${f}.0);
        return sampleTexture(${r}, uv);
      }
    `;const y=ad(r);return e?`
    float ${o}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${h}
      ${m}
      ${g}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${y});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${o}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${i} +
          depth * ${s} + depth2;
      vec2 uv = uvFromFlat(${f}, ${p}, index + ${y});
      return sampleTexture(${r}, uv);
    }
  `}function KDe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e[4],s=e[3]*o,i=e[2]*s,a=e[1]*i,{newShape:l,keptDims:u}=xu(e);if(l.length<e.length){const m=Bp(t,l),g=["row","col","depth","depth2","depth3"];return`
      ${Lp(m)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${jp(g,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${i}, ${s}, ${o})) +
          depth3;
        ${zp(t)}
      }
    `;const c=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,f=d[0],p=d[1];if(p===a&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${i}, ${s}, ${o}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(p===o&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;const h=ad(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${i} + depth * ${s} +
          depth2 * ${o} + depth3 + ${h};
      vec2 uv = uvFromFlat(${f}, ${p}, index);
      return sampleTexture(${n}, uv);
    }
  `}function XDe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:o,keptDims:s}=xu(e);if(o.length<e.length){const g=Bp(t,o),y=["row","col","depth","depth2","depth3","depth4"];return`
      ${Lp(g)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${jp(y,s)});
      }
    `}const i=e[5],a=e[4]*i,l=e[3]*a,u=e[2]*l,c=e[1]*u;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${c}, ${u}, ${l}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${i}, 1)));
        ${zp(t)}
      }
    `;const d=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,p=f[0],h=f[1];if(h===c&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${u}, ${l}, ${a}, ${i})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(h===i&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;const m=ad(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${c} + col * ${u} + depth * ${l} +
          depth2 * ${a} + depth3 * ${i} + depth4 + ${m};
      vec2 uv = uvFromFlat(${p}, ${h}, index);
      return sampleTexture(${n}, uv);
    }
  `}function zp(t){const e=t.name,n=ne(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function YDe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",s=t.shapeInfo.logicalShape.length,i=e.logicalShape.length,a=HY(t.shapeInfo.logicalShape,e.logicalShape),l=Rt(i),u=i-s;let c;const d=["x","y","z","w","u","v"];s===0?c="":i<2&&a.length>=1?c="coords = 0;":c=a.map(v=>`coords.${d[v+u]} = 0;`).join(`
`);let f="";i<2&&s>0?f="coords":f=t.shapeInfo.logicalShape.map((v,b)=>`coords.${d[b+u]}`).join(", ");let p="return outputValue;";const m=ne(t.shapeInfo.logicalShape)===1,y=ne(e.logicalShape)===1;if(s===1&&!m&&!y)p=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(m&&!y)i===1?p=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:p=`
        return vec4(outputValue.x);
      `;else if(a.length){const v=s-2,b=s-1;a.indexOf(v)>-1&&a.indexOf(b)>-1?p="return vec4(outputValue.x);":a.indexOf(v)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(b)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${o}() {
      ${l} coords = getOutputCoords();
      ${c}
      vec4 outputValue = get${r}(${f});
      ${p}
    }
  `}function ZDe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",s=e.texShape,i=t.shapeInfo.texShape,a=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&a===l&&t.shapeInfo.flatOffset==null&&ct(i,s))return`
      float ${o}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const u=Rt(l),c=HY(t.shapeInfo.logicalShape,e.logicalShape),d=l-a;let f;const p=["x","y","z","w","u","v"];a===0?f="":l<2&&c.length>=1?f="coords = 0;":f=c.map(m=>`coords.${p[m+d]} = 0;`).join(`
`);let h="";return l<2&&a>0?h="coords":h=t.shapeInfo.logicalShape.map((m,g)=>`coords.${p[g+d]}`).join(", "),`
    float ${o}() {
      ${u} coords = getOutputCoords();
      ${f}
      return get${r}(${h});
    }
  `}function Rt(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function ED(t,e,n){const{newShape:r,keptDims:o}=xu(e),s=e.length,i=t&&s===3&&e[0]===1,a=i?e.slice(1):r,l=!t&&s>1&&!ct(e,n)&&r.length<s||i;return{useSqueezeShape:l,uniformShape:l?a:e,keptDims:o}}function Bp(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function jp(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QDe(t,e,n,r){const o=n.map((c,d)=>{const f={logicalShape:c.shape,texShape:c.isUniform?null:c.texData.texShape,isUniform:c.isUniform,isPacked:c.isUniform?!1:c.texData.isPacked,flatOffset:null};return c.texData!=null&&c.texData.slice!=null&&c.texData.slice.flatOffset>0&&(f.flatOffset=c.texData.slice.flatOffset),{name:e.variableNames[d],shapeInfo:f}}),s=o.map(c=>c.shapeInfo),i={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},a=gDe(o,i,e),l=GRe(t.gl,a),u=t.createProgram(l);return J().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:a,webGLProgram:u,inShapeInfos:s,outShapeInfo:i,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(u),Object.assign({program:e,fragmentShader:l,source:a,webGLProgram:u,inShapeInfos:s,outShapeInfo:i},XY(t,e,u)))}function XY(t,e,n){const r=[],o=[];let s,i,a,l=null,u=null;u=t.getUniformLocation(n,"NAN",!1),J().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(n,"INFINITY",!1));const c=!1;for(const d of e.variableNames){const f={name:d,uniform:t.getUniformLocation(n,d,c),offset:t.getUniformLocation(n,`offset${d}`,c)};e.enableShapeUniforms&&(f.shape=t.getUniformLocation(n,`${d}Shape`,c),f.texShape=t.getUniformLocation(n,`${d}TexShape`,c)),r.push(f)}if(e.enableShapeUniforms&&(s=t.getUniformLocation(n,"outShape",c),a=t.getUniformLocation(n,"outShapeStrides",c),i=t.getUniformLocation(n,"outTexShape",c)),e.customUniforms)for(const d of e.customUniforms)o.push(t.getUniformLocation(n,d.name,c));return{variablesLocations:r,customUniformLocations:o,infLoc:l,nanLoc:u,outShapeLocation:s,outShapeStridesLocation:a,outTexShapeLocation:i}}function zB(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const o=n.logicalShape,s=e[r],i=s.shape;if(!ct(o,i))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${o} and ${i} must match`);if(n.isUniform&&s.isUniform)return;const a=n.texShape,l=s.isUniform?null:s.texData.texShape;if(!ct(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function JDe(t,e,n,r,o){e.program.enableShapeUniforms||(zB(e.inShapeInfos,n),zB([e.outShapeInfo],[r]));const s=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(s.texture,i[0],i[1]):t.setOutputMatrixTexture(s.texture,i[0],i[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),J().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<n.length;++l){const u=n[l],{uniform:c,offset:d,shape:f,texShape:p}=e.variablesLocations[l];if(f){const{uniformShape:h}=ED(e.program.packedInputs,u.shape,u.texData.texShape);switch(h.length){case 1:t.gl.uniform1iv(f,new Int32Array(h));break;case 2:t.gl.uniform2iv(f,new Int32Array(h));break;case 3:t.gl.uniform3iv(f,new Int32Array(h));break;case 4:t.gl.uniform4iv(f,new Int32Array(h));break}}if(p&&t.gl.uniform2i(p,u.texData.texShape[0],u.texData.texShape[1]),c!=null){if(u.isUniform){if(ne(u.shape)<2)t.gl.uniform1f(c,u.uniformValues[0]);else{let h=u.uniformValues;h instanceof Float32Array||(h=new Float32Array(h)),t.gl.uniform1fv(c,h)}continue}u.texData.slice!=null&&d!=null&&t.gl.uniform1i(d,u.texData.slice.flatOffset),t.setInputMatrixTexture(u.texData.texture.texture,c,l)}}const a=e.outShapeLocation;if(a)switch(r.shape.length){case 1:t.gl.uniform1iv(a,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(a,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(a,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(a,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=Fe(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&o)for(let l=0;l<e.program.customUniforms.length;++l){const u=e.program.customUniforms[l],c=e.customUniformLocations[l],d=o[l];if(u.type==="float")t.gl.uniform1fv(c,d);else if(u.type==="vec2")t.gl.uniform2fv(c,d);else if(u.type==="vec3")t.gl.uniform3fv(c,d);else if(u.type==="vec4")t.gl.uniform4fv(c,d);else if(u.type==="int")t.gl.uniform1iv(c,d);else if(u.type==="ivec2")t.gl.uniform2iv(c,d);else if(u.type==="ivec3")t.gl.uniform3iv(c,d);else if(u.type==="ivec4")t.gl.uniform4iv(c,d);else throw Error(`uniform type ${u.type} is not supported yet.`)}t.executeProgram()}function eFe(t,e,n){let r="";e.concat(n).forEach(i=>{const a=i.texData!=null&&i.texData.slice!=null&&i.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!i.isUniform){const l=i.texData.texShape,{useSqueezeShape:u,uniformShape:c,keptDims:d}=ED(t.packedInputs,i.shape,l);let f="",p="",h="";if(c.length===1&&t.packedInputs){const w=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];f=`${w[0]>1}_${w[1]>1}`}else if(c.length===2&&!t.packedInputs)p=`${c[0]>1}_${c[1]>1}`;else if(c.length>2&&!t.packedInputs){const w=Fe(c);h=`${w[0]===l[1]}_${w[w.length-1]===l[1]}`}const m=i.shape.length,g=c.length===2&&ct(i.shape,l),y=ne(i.shape)===1,v=Vf(i.shape,n.shape),b=!t.packedInputs&&m===n.shape.length&&ct(l,n.texData.texShape),x=t.packedInputs||c.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${m}_${b}_${u?d:""}_${c.length}_${y}_${v}_${g}_${f}_${p}_${h}_${x}_${a}`}else{const l=i.isUniform?"uniform":i.texData.texShape;r+=`${i.shape}_${l}_${a}`}});const o=t.userCode;let s=t.constructor.name;return s+="_"+r+"_"+o+`${J().getNumber("WEBGL_VERSION")}`,s}function Fr(t){return J().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tFe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=dg.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=to();this.outputShape=e,this.enableShapeUniforms=Fr(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?Yk(["r","c","d"],e):id(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nFe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=dg.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=to();this.outputShape=e,this.enableShapeUniforms=Fr(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?Yk(["r","c","d"],e):id(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rFe{constructor(e){this.variableNames=["A"],this.outTexUsage=es.DOWNLOAD;const n=to();this.outputShape=e,this.userCode=`
      ${GY}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oFe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=es.DOWNLOAD;const n=to();this.outputShape=e,this.userCode=`
      ${GY}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sFe={R:0,G:1,B:2,A:3};class BB{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const o=to();this.outputShape=e,this.enableShapeUniforms=Fr(this.outputShape.length);let s="result";n&&(s="floor(result * 255. + 0.5)");let i="";for(let a=0;a<r.length;a++){const l=r[a];i+=`
          if(offset == ${a}) {
            result = values[${sFe[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?ND():ID(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${o.texture2D}(A, uv);
          ${i}
        }
        ${o.output} = vec4(${s}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iFe{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=to();this.outputShape=e,this.enableShapeUniforms=Fr(this.outputShape.length);let o="",s="result";n&&(s="floor(result * 255. + 0.5)");for(let i=0;i<=1;i++)for(let a=0;a<=1;a++){const l=i*2+a;o+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${i} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${i};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?ND():ID(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${o}

          ${r.output} = ${s};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aFe(t){const e=to(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return URe(t,n)}function lFe(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return XRe(t,e)}function uFe(t){const e=new Uint16Array([0,1,2,2,1,3]);return YRe(t,e)}function F0(t,e,n,r,o,s){QRe(e,n);const i=ZRe(t),a=t.TEXTURE_2D;return Se(t,()=>t.bindTexture(a,i)),Se(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),Se(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),Se(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),Se(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),J().getNumber("WEBGL_VERSION")===1?Se(t,()=>t.texImage2D(a,0,r,e,n,0,o,s,null)):Se(t,()=>t.texStorage2D(a,1,r,e,n)),Se(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:i,texShape:[n,e]}}function YY(t){return t.internalFormatFloat}function cFe(t,e,n,r){const[o,s]=R0(e,n);return F0(t,o,s,YY(r),r.textureFormatFloat,t.FLOAT)}function ZY(t){return t.internalFormatHalfFloat}function dFe(t,e,n,r){const[o,s]=R0(e,n);return F0(t,o,s,ZY(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function QY(t){return t.downloadTextureFormat}function fFe(t,e,n,r){const[o,s]=R0(e,n);return F0(t,o,s,QY(r),t.RGBA,t.UNSIGNED_BYTE)}function JY(t){return t.internalFormatPackedFloat}function pFe(t,e,n,r){const[o,s]=Mp(e,n);return F0(t,o,s,JY(r),t.RGBA,t.FLOAT)}function eZ(t){return t.internalFormatPackedHalfFloat}function hFe(t,e,n,r){const[o,s]=Mp(e,n);return F0(t,o,s,eZ(r),t.RGBA,r.textureTypeHalfFloat)}function mFe(t,e,n){return Se(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),FB(t,e,"clipSpacePos",n,3,20,0)&&FB(t,e,"uv",n,2,20,12)}function gFe(t,e,n,r,o,s){Se(t,()=>t.bindTexture(t.TEXTURE_2D,e));let i,a,l;o instanceof Uint8Array?(i=new Uint8Array(n*r*4),a=t.UNSIGNED_BYTE,l=t.RGBA):(i=new Float32Array(n*r*4),a=t.FLOAT,l=s.internalFormatPackedFloat),i.set(o),J().getNumber("WEBGL_VERSION")===2?Se(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,a,i)):Se(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,a,i)),Se(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function yFe(t,e,n){Se(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?J().getNumber("WEBGL_VERSION")===2?Se(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):Se(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):J().getNumber("WEBGL_VERSION")===2?Se(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):Se(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),Se(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function vFe(t,e,n,r){const o=t.createBuffer();Se(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,o));const a=4*4*e*n;return Se(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)),Se(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),Se(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),o}function bFe(t,e,n){const r=t,o=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,o),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),o}function xFe(t,e,n,r){const[o,s]=R0(e,n),i=4,a=new Uint8Array(MRe(e*n,i));return Se(t,()=>t.readPixels(0,0,o,s,r.downloadTextureFormat,t.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function wFe(t,e,n,r,o,s,i,a){const l=t,u=new Float32Array(LRe(s,i));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function SFe(t,e,n){const r=new Float32Array(e*n*4);return Se(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dT{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=J().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,RRe(n,e)):this.gl=Ci(n),e=this.gl,J().getNumber("WEBGL_VERSION")===2){const s=e;this.createVertexArray=()=>Se(s,()=>s.createVertexArray()),this.bindVertexArray=i=>Se(s,()=>s.bindVertexArray(i)),this.deleteVertexArray=i=>Se(s,()=>s.deleteVertexArray(i)),this.getVertexArray=()=>Se(s,()=>s.getParameter(s.VERTEX_ARRAY_BINDING))}else if(e!=null){const s=e.getExtension("OES_vertex_array_object");if(s==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Se(e,()=>s.createVertexArrayOES()),this.bindVertexArray=i=>Se(e,()=>s.bindVertexArrayOES(i)),this.deleteVertexArray=i=>Se(e,()=>s.deleteVertexArrayOES(i)),this.getVertexArray=()=>Se(e,()=>e.getParameter(s.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const o="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),J().getNumber("WEBGL_VERSION")===1){const s="OES_texture_float",i="OES_texture_half_float";if(this.textureFloatExtension=Vv(this.gl,s),Rs(this.gl,i))this.textureHalfFloatExtension=Vv(this.gl,i);else if(J().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Rs(this.gl,o))this.colorBufferHalfFloatExtension=Vv(this.gl,o);else if(J().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Rs(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(Rs(this.gl,o))this.colorBufferHalfFloatExtension=this.gl.getExtension(o);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=lFe(this.gl),this.indexBuffer=uFe(this.gl),this.framebuffer=JRe(this.gl),this.textureConfig=_D(this.gl,this.textureHalfFloatExtension)}get debug(){return J().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;Se(e,()=>e.finish()),Se(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),Se(e,()=>e.deleteFramebuffer(this.framebuffer)),Se(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),Se(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),Se(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),cFe(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),dFe(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),fFe(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),yFe(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,o){this.throwIfDisposed(),gFe(this.gl,e,n,r,o,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),hFe(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),pFe(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(MB(this.gl,this.framebuffer),this.outputTexture=null),Se(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>xFe(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,o,s,i){return wFe(this.gl,e,n,r,o,s,i,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return bFe(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const o=vFe(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),o}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(J().getBool("WEBGL_FENCE_API_ENABLED")){const o=e,s=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const i=o.clientWaitSync(s,0,0);return i===o.ALREADY_SIGNALED||i===o.CONDITION_SATISFIED},n=s}else J().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,J().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>SFe(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=aFe(n));const r=qRe(n);Se(n,()=>n.attachShader(r,this.vertexShader)),Se(n,()=>n.attachShader(r,e)),KRe(n,r);const o=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&aT(n,o),o}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;Se(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),mFe(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(Se(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&aT(this.gl,this.program),Se(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?tDe(this.gl,e,n):nDe(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),Se(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),rDe(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[o,s]=Mp(n,r);this.setOutputMatrixTextureDriver(e,o,s)}setOutputMatrixWriteRegion(e,n,r,o){this.setOutputMatrixWriteRegionDriver(r,e,o,n)}setOutputPackedMatrixWriteRegion(e,n,r,o){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&aT(this.gl,this.program),Wv(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Se(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Se(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Vv(this.gl,J().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(J().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,o=this.getQueryTimerExtensionWebGL2(),s=r.createQuery();return r.beginQuery(o.TIME_ELAPSED_EXT,s),s}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(J().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await bz(()=>this.disposed||this.isQueryAvailable(e,J().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,J().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,o=this.getQueryTimerExtensionWebGL2(),s=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),s&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),o=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=kFe(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in J().platform&&(r=J().platform.setTimeoutCustom.bind(J().platform)),bz(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),lT(this.gl,e,this.framebuffer),this.debug&&Wv(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(lT(this.gl,this.outputTexture,this.framebuffer),this.debug&&Wv(this.gl)):MB(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const o=this.gl;lT(o,e,this.framebuffer),this.debug&&Wv(o),this.outputTexture=e,Se(o,()=>o.viewport(0,0,n,r)),Se(o,()=>o.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,o){this.throwIfDisposed(),Se(this.gl,()=>this.gl.scissor(e,n,r,o))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function kFe(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:$Fe,bincountImpl:tZ,bincountReduceImpl:CFe,bitwiseAndImpl:TFe,castImpl:_Fe,ceilImpl:IFe,concatImpl:NFe,equalImpl:EFe,expImpl:AFe,expm1Impl:OFe,floorImpl:PFe,gatherNdImpl:RFe,gatherV2Impl:DFe,greaterImpl:FFe,greaterEqualImpl:MFe,lessImpl:LFe,lessEqualImpl:zFe,linSpaceImpl:BFe,logImpl:jFe,maxImpl:VFe,maximumImpl:WFe,minimumImpl:UFe,multiplyImpl:GFe,negImpl:HFe,notEqualImpl:qFe,prodImpl:KFe,raggedGatherImpl:XFe,raggedRangeImpl:YFe,raggedTensorToTensorImpl:ZFe,rangeImpl:QFe,rsqrtImpl:JFe,scatterImpl:eMe,sigmoidImpl:tMe,simpleAbsImpl:nZ,sliceImpl:nMe,sparseFillEmptyRowsImpl:rMe,sparseReshapeImpl:oMe,sparseSegmentReductionImpl:rZ,sqrtImpl:sMe,staticRegexReplaceImpl:iMe,stridedSliceImpl:aMe,stringNGramsImpl:lMe,stringSplitImpl:uMe,stringToHashBucketFastImpl:cMe,subImpl:dMe,tileImpl:fMe,topKImpl:pMe,transposeImpl:AD,uniqueImpl:hMe}=yNe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oZ(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function Xr(t,e){return e===1?[t]:oZ(t,e)}function mMe(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gMe{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=Fr(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=Xr("rc",this.rank),r=Rt(this.rank),o=this.getOutOfBoundsCondition(n),s=this.getSetup(n),i=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${o}) {
            setOutput(vec4(0));
          } else {
            ${s}

            setOutput(vec4(${i}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let o=0;o<=1;o++){let s=`${r===0?"r":"rp1"}, ${o===0?"c":"cp1"}`;for(let i=2;i<this.rank;i++)s=`${e[e.length-1-i]},`+s;n.push(s)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],o=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${o};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sZ{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=Fr(this.outputShape.length);let r="";for(let o=0;o<4;o++){let s="thisRC = rc;";o%2===1&&(s+="thisRC.z += 1;"),o>1&&(s+="thisRC.y += 1;"),r+=`
        ${s}
        ${o>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${o}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${o>0?"}":""}
      `}this.userCode=`
      ${yMe(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?ND():ID(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function yMe(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?mDe(["r","c","d"],"inputShape"):id(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vMe{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const o=VB(n,r),s=WB(e,o,r);s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextures||(this.usedTextures[s]=[]);const i=jB(e,o,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[s].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();const l=this.freeTextures[s].pop();return this.usedTextures[s].push(l),l}let a;return o===mr.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):o===mr.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):o===mr.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):o===mr.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):o===mr.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[s].push(a),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),a}releaseTexture(e,n,r,o){if(this.freeTextures==null)return;const s=VB(r,o),i=WB(n,s,o);i in this.freeTextures||(this.freeTextures[i]=[]);const a=jB(n,s,this.gpgpu.gl,this.gpgpu.textureConfig,o),l=J().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=a):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const u=this.usedTextures[i],c=u&&u.indexOf(e);if(c==null||c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u[c]=u[u.length-1],u.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function bMe(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function jB(t,e,n,r,o){const s=xMe(e,r);let i;if(o){const[l,u]=Mp(t[0],t[1]);i=l*u}else{const[l,u]=R0(t[0],t[1]);i=l*u}const a=bMe(n,s);return i*a}function xMe(t,e){switch(t){case mr.PACKED_2X2_FLOAT32:return JY(e);case mr.PACKED_2X2_FLOAT16:return eZ(e);case mr.UNPACKED_FLOAT32:return YY(e);case mr.UNPACKED_FLOAT16:return ZY(e);case mr.PACKED_4X1_UNSIGNED_BYTE:return QY(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function wMe(t){return J().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?mr.PACKED_2X2_FLOAT32:mr.UNPACKED_FLOAT32:t?mr.PACKED_2X2_FLOAT16:mr.UNPACKED_FLOAT16}function VB(t,e){if(t===es.UPLOAD)return mr.PACKED_2X2_FLOAT32;if(t===es.RENDER||t==null)return wMe(e);if(t===es.DOWNLOAD||t===es.PIXELS)return mr.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function WB(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ki{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=Fr(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const Qs="if (isnan(x)) return x;",SMe="return x;",UB="return abs(x);",kMe="return (x >= 0.0) ? x : (exp(x) - 1.0);",$Me=Qs+`
  return (x < 0.0) ? 0.0 : x;
`,CMe=Qs+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Cl="return x;",TMe="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Me="return x;",IMe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,NMe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,EMe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,AMe="return 1.0 / (1.0 + exp(-1.0 * x));";class Rl{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=Fr(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OMe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=Fr(this.outputShape.length);const n=e.length,r=Xr("rc",n),o=Rt(n),s=mMe(n,r),i=r.slice(-2),a=n<=1?"rc":`vec2(${i.join(",")})`;this.userCode=`
      void main() {
        ${o} rc = getOutputCoords();
        vec4 packedInput = getA(${s});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PMe=pR,RMe=1e-7,DMe=1e-4,Hv={};function FMe(t){return t in Hv||(Hv[t]={}),Hv[t]}const MMe=J().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),LMe=600;function zMe(){return J().global.screen==null?1024:J().global.screen.height*J().global.screen.width*window.devicePixelRatio*LMe/1024/1024}class Zk extends bO{nextDataId(){return Zk.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!J().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof dT)n=e;else{const r=Ci(J().getNumber("WEBGL_VERSION"),e);n=new dT(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=Ci(J().getNumber("WEBGL_VERSION"));n=new dT(r),this.binaryCache=FMe(J().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new vMe(this.gpgpu),this.numMBBeforeWarning=zMe(),this.texData=new _8(this,Di())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,o,s,i){const a=this.makeTensorInfo(n,r),l=this.texData.get(a.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[o,s]},l.texShape=[o,s];const u=Uv(n),c=new BB(u,!1,i),d=this.runWebGLProgram(c,[a],r,[[o,s]]);return d.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(a),d.dataId}write(e,n,r){if((J().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||J().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const o={id:this.nextDataId()};return this.texData.set(o,{shape:n,dtype:r,values:e,usage:es.UPLOAD,refCount:1}),o}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,o,s){if(J().getBool("DEBUG")&&this.checkNumericalProblems(n),o==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:o,values:n,usage:es.UPLOAD,refCount:s})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:o,complexTensorInfos:s,slice:i,shape:a,isPacked:l}=n;if(i!=null){let f;l?f=new Rl(a,Cl):f=new Ki(a,Cl);const p=this.runWebGLProgram(f,[{dataId:e,shape:a,dtype:o}],o),h=this.readSync(p.dataId);return this.disposeIntermediateTensorInfo(p),h}if(r!=null)return this.convertAndCacheOnCPU(e);if(o==="string")return r;const u=this.activeTimers!=null;let c;u&&(c=oo());let d;if(o==="complex64"){const f=this.readSync(s.real.dataId),p=this.readSync(s.imag.dataId);d=tl(f,p)}else d=this.getValuesFromTexture(e);return u&&(this.downloadWaitMs+=oo()-c),this.convertAndCacheOnCPU(e,d)}async read(e){if(this.pendingRead.has(e)){const h=this.pendingRead.get(e);return new Promise(m=>h.push(m))}const n=this.texData.get(e),{values:r,shape:o,slice:s,dtype:i,complexTensorInfos:a,isPacked:l}=n;if(s!=null){let h;l?h=new Rl(o,Cl):h=new Ki(o,Cl);const m=this.runWebGLProgram(h,[{dataId:e,shape:o,dtype:i}],i),g=this.read(m.dataId);return this.disposeIntermediateTensorInfo(m),g}if(r!=null)return this.convertAndCacheOnCPU(e);if(J().getBool("DEBUG")&&!J().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&J().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u=null,c;if(i!=="complex64"&&J().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(e);const h=this.texData.get(c.dataId);u=this.gpgpu.createBufferFromTexture(h.texture.texture,...jv(o))}this.pendingRead.set(e,[]),i!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(i==="complex64"){const h=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),m=h[0],g=h[1];d=tl(m,g)}else if(u==null)d=this.getValuesFromTexture(e);else{const h=ne(o);d=this.gpgpu.downloadFloat32MatrixFromBuffer(u,h)}if(c!=null&&this.disposeIntermediateTensorInfo(c),u!=null){const h=this.gpgpu.gl;Se(h,()=>h.deleteBuffer(u))}const f=this.convertAndCacheOnCPU(e,d),p=this.pendingRead.get(e);return this.pendingRead.delete(e),p.forEach(h=>h(f)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Di().removeDataId(e,this),this.pendingDeletes--),f}readToGPU(e,n={}){const r=this.texData.get(e),{values:o,shape:s,slice:i,dtype:a,isPacked:l,texture:u}=r;if(a==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(i!=null){let p;l?p=new Rl(s,Cl):p=new Ki(s,Cl);const h=this.runWebGLProgram(p,[{dataId:e,shape:s,dtype:a}],a),m=this.readToGPU(h,n);return this.disposeIntermediateTensorInfo(h),m}if(u==null)throw o!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(e,n.customTexShape),d=Di().makeTensorFromTensorInfo(c),f=this.texData.get(c.dataId);return Object.assign({tensorRef:d},f.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(o=>ru(o));return Qe(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Qe(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!VRe(r))throw J().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:o}=this.texData.get(e),s=ne(n);if(J().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const f=this.decode(e),p=this.texData.get(f.dataId),h=this.gpgpu.downloadMatrixFromPackedTexture(p.texture.texture,...jv(n)).subarray(0,s);return this.disposeIntermediateTensorInfo(f),h}const i=J().getBool("WEBGL_PACK")&&o===!0,a=i?Uv(n):n,l=i?new oFe(a):new rFe(a),u=this.runWebGLProgram(l,[{shape:a,dtype:r,dataId:e}],"float32"),c=this.texData.get(u.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,s);return this.disposeIntermediateTensorInfo(u),d}timerAvailable(){return J().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let o=!1;this.programTimersStack==null?(this.programTimersStack=r,o=!0):this.activeTimers.push(r),this.activeTimers=r,e();const s=ou(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),i=ou(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,o&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(J().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(s);a.kernelMs=sye(l),a.getExtraProfileInfo=()=>l.map((u,c)=>({name:i[c],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return J().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:oo(),endMs:null}}endTimer(e){return J().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=oo(),e)}async getQueryTime(e){if(J().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:o,usage:s,isPacked:i,slice:a}=this.texData.get(e),l=a&&a.origDataId||e,u=this.dataRefCount.get(l);u>1?this.dataRefCount.set(l,u-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(o,r),this.textureManager.releaseTexture(n,o,s,i)));const c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=MMe){return J().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&ne(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){Zo("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return PMe(e.shape,n)}packedUnaryOp(e,n,r){const o=new Rl(e.shape,n),s=this.compileAndRun(o,[e],r);return Di().makeTensorFromTensorInfo(s)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const o=nZ(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,o)}if(J().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,UB,e.dtype);const n=new Ki(e.shape,UB),r=this.compileAndRun(n,[e]);return Di().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let o;if(n==="string"&&r!=null&&r.length>0&&vy(r[0])){const s=r.map(i=>Hl(i));o=this.write(s,e,n)}else o=this.write(r,e,n);return this.texData.get(o).usage=null,{dataId:o,shape:e,dtype:n}}makeOutput(e,n,r){return Di().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new OMe(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new gMe(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[Xf(e.shape),...Yf(e.shape)],o={dtype:e.dtype,shape:r,dataId:e.dataId},s=[Xf(n),...Yf(n)],i=new sZ(s,r),a=!0,l=[r],u=this.runWebGLProgram(i,[o],e.dtype,l,a);return{dataId:u.dataId,shape:n,dtype:u.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:o,shape:s,dtype:i}=r;if(n!=null){const f=ne(s),p=n[0]*n[1]*4;A(f<=p,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const a=Uv(s);let l;o?l=new nFe(a):l=new tFe(a);const u=!0,c=[n??jv(a)],d=this.runWebGLProgram(l,[{shape:a,dtype:i,dataId:e}],i,c,u,n);return{dtype:i,shape:s,dataId:d.dataId}}runWebGLProgram(e,n,r,o,s=!1,i){const a=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(a.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===dg.DENSE){const y=i??jv(e.outputShape);l.texShape=y.map(v=>v*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),ne(a.shape)===0)return l.values=yr(a.dtype,0),a;const u=[],c=n.map(y=>{if(y.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let v=this.texData.get(y.dataId);if(v.texture==null){if(!e.packedInputs&&ne(y.shape)<=J().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:y.shape,texData:null,isUniform:!0,uniformValues:v.values};e.packedInputs&&(v.isPacked=!0,v.shape=y.shape)}if(this.uploadToGPU(y.dataId),!!v.isPacked!=!!e.packedInputs)y=v.isPacked?this.unpackTensor(y):this.packTensor(y),u.push(y),v=this.texData.get(y.dataId);else if(v.isPacked&&!s1(v.shape,y.shape)){const b=y,x=y.shape;y.shape=v.shape,y=this.packedReshape(y,x),u.push(y),v=this.texData.get(y.dataId),b.shape=x}return{shape:y.shape,texData:v,isUniform:!1}});this.uploadToGPU(a.dataId);const d={shape:a.shape,texData:l,isUniform:!1},f=eFe(e,c,d),p=this.getAndSaveBinary(f,()=>QDe(this.gpgpu,e,c,d)),h=this.activeTimers!=null;let m;h&&(m=this.startTimer()),J().get("ENGINE_COMPILE_ONLY")||JDe(this.gpgpu,p,c,d,o),u.forEach(y=>this.disposeIntermediateTensorInfo(y)),h&&(m=this.endTimer(m),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(m)}));const g=J().getNumber("WEBGL_FLUSH_THRESHOLD");if(g>0){const y=oo();y-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=y)}if(!J().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&s===!1){const y=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),y}return a}compileAndRun(e,n,r,o,s=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,o,s)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(J().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Z(()=>{if(!J().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=J().getBool("DEBUG");J().set("DEBUG",!1);const n=this.abs(Me(1e-8)).dataSync()[0];if(J().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?RMe:DMe}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:o,values:s,texture:i,usage:a,isPacked:l}=n;if(i!=null)return;const u=this.activeTimers!=null;let c;u&&(c=oo());let d=n.texShape;if(d==null&&(d=iDe(r,l),n.texShape=d),s!=null){const f=Uv(r);let p,h=d[1],m=d[0];const g=s instanceof Uint8Array||s instanceof Uint8ClampedArray;(l||!g)&&([h,m]=Mp(d[0],d[1])),l?p=new iFe(f,g):p=new BB(f,g);const y=g?[m,h]:d,v=this.makeTensorInfo(y,o),b=this.texData.get(v.dataId);g?b.usage=es.PIXELS:b.usage=es.UPLOAD,b.texShape=y,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(v.dataId),h,m,s);const x=[[m,h]],S=this.runWebGLProgram(p,[v],o,x,!0),k=this.texData.get(S.dataId);n.texShape=k.texShape,n.isPacked=k.isPacked,n.usage=k.usage,J().get("ENGINE_COMPILE_ONLY")?this.disposeData(S.dataId):(n.texture=k.texture,n.values=null,this.texData.delete(S.dataId)),this.disposeIntermediateTensorInfo(v),u&&(this.uploadWaitMs+=oo()-c)}else{const f=this.acquireTexture(d,a,o,l);n.texture=f}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:o}=r;return n!=null&&(r.values=BMe(n,o)),r.values}acquireTexture(e,n,r,o){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const s=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${s} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,o)}computeBytes(e,n){return e[0]*e[1]*Px(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(o=>{try{this.checkCompletion_(n),o(!0)}catch(s){throw s}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await Wq(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(UY(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:o,nanLoc:s,outShapeLocation:i,outShapeStridesLocation:a,outTexShapeLocation:l}=XY(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=o,e.nanLoc=s,e.outShapeLocation=i,e.outShapeStridesLocation=a,e.outTexShapeLocation=l}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:o,height:s,width:i,channels:a}=e,l=Di().backend;if(!l.gpgpu.gl.isTexture(o))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const u=l.writeTexture(o,n,r,s,i,a);return Di().makeTensorFromDataId(u,n,r,l)}}Zk.nextDataId=0;function BMe(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q8()&&t9("webgl",()=>new Zk,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OD=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class Wc{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=Xe(n,r),this.enableShapeUniforms=Fr(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ld=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class Vp{constructor(e,n,r,o=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Xe(n,r);const s=this.outputShape.length;this.enableShapeUniforms=Fr(s);let i="";if(o)if(s===0||ne(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          ${Rt(s)} coords = getOutputCoords();
        `,s===1)this.enableShapeUniforms?i+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:i+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=Xr("coords",s);this.enableShapeUniforms?i+=`
            bool nextRowOutOfBounds =
              (${l[s-2]} + 1) >= outShape[${s} - 2];
            bool nextColOutOfBounds =
              (${l[s-1]} + 1) >= outShape[${s} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:i+=`
            bool nextRowOutOfBounds =
              (${l[s-2]} + 1) >= ${this.outputShape[s-2]};
            bool nextColOutOfBounds =
              (${l[s-1]} + 1) >= ${this.outputShape[s-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${i}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jo(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const jMe={kernelName:zy,backendName:"webgl",kernelFunc:jo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Au(t){const{inputs:e,backend:n}=t,{real:r,imag:o}=e,s=n.makeTensorInfo(r.shape,"complex64"),i=n.texData.get(s.dataId),a=jo({inputs:{x:r},backend:n}),l=jo({inputs:{x:o},backend:n});return i.complexTensorInfos={real:a,imag:l},s}const VMe={kernelName:NO,backendName:"webgl",kernelFunc:Au};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iZ="return (a < 0.) ? b * a : a;",aZ=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function WMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{alpha:s}=r,i=n.makeTensorInfo([],"float32",wu(s,"float32")),a=J().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Vp(aZ,o.shape,i.shape):new Wc(iZ,o.shape,i.shape),l=n.runWebGLProgram(a,[o,i],"float32");return n.disposeIntermediateTensorInfo(i),l}const UMe={kernelName:ES,backendName:"webgl",kernelFunc:WMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lZ="return (a < 0.) ? b * a : a;",uZ=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function GMe(t){const{inputs:e,backend:n}=t,{x:r,alpha:o}=e,s=J().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Vp(uZ,r.shape,o.shape):new Wc(lZ,r.shape,o.shape);return n.runWebGLProgram(s,[r,o],"float32")}const HMe={kernelName:XS,backendName:"webgl",kernelFunc:GMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wp="if (isnan(x)) return x;";function mt({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:o,backend:s})=>{const{x:i}=o,a=s,l=r||i.dtype;if(a.shouldExecuteOnCPU([i])&&n!=null){const d=a.texData.get(i.dataId),f=n(d.values,l);return a.makeTensorInfo(i.shape,l,f)}const u=J().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let c;return u?c=new Rl(i.shape,e):c=new Ki(i.shape,t),a.runWebGLProgram(c,[i],l)}}function kr({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:o,dtype:s}){return({inputs:i,backend:a})=>{const{a:l,b:u}=i,c=a;if(r&&l.dtype==="complex64"){const h=c.texData.get(l.dataId),m=c.texData.get(u.dataId),[g,y]=[[h.complexTensorInfos.real,m.complexTensorInfos.real],[h.complexTensorInfos.imag,m.complexTensorInfos.imag]].map(b=>{const[x,w]=b,S={dataId:x.dataId,dtype:x.dtype,shape:l.shape},k={dataId:w.dataId,dtype:w.dtype,shape:u.shape},$=new Wc(t,l.shape,u.shape);return c.runWebGLProgram($,[S,k],Fo(x.dtype,w.dtype))}),v=Au({inputs:{real:g,imag:y},backend:c});return c.disposeIntermediateTensorInfo(g),c.disposeIntermediateTensorInfo(y),v}const d=s||Fo(l.dtype,u.dtype);if((l.dtype==="string"||u.dtype==="string"||c.shouldExecuteOnCPU([l,u]))&&o!=null){const h=c.texData.get(l.dataId).values,m=c.texData.get(u.dataId).values,g=l.dtype==="string"?nl(h):h,y=l.dtype==="string"?nl(m):m,[v,b]=o(l.shape,u.shape,g,y,d),x=c.makeTensorInfo(b,d),w=c.texData.get(x.dataId);return w.values=v,x}const f=J().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let p;return f?p=new Vp(e,l.shape,u.shape,n):p=new Wc(t,l.shape,u.shape),c.runWebGLProgram(p,[l,u],d)}}function fg(t,e=!1){if(t==="linear")return e?_Me:SMe;if(t==="relu")return e?NMe:$Me;if(t==="elu")return e?IMe:kMe;if(t==="relu6")return e?EMe:CMe;if(t==="prelu")return e?uZ:lZ;if(t==="leakyrelu")return e?aZ:iZ;if(t==="sigmoid")return e?AMe:TMe;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cZ{constructor(e,n,r,o=!1,s=!1,i=!1,a=null,l=!1,u=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=Fr(this.outputShape.length);const c=o?e[1]:e[2],d=Math.ceil(c/2),f=o?"i * 2, rc.y":"rc.y, i * 2",p=s?"rc.z, i * 2":"i * 2, rc.z",h=o?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=s?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let g="",y="";a&&(l?g=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:u?g=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:g=`vec4 activation(vec4 x) {
          ${a}
        }`,y="result = activation(result);");const v=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");let b="rc.x",x="rc.x";e[0]<n[0]?b=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(x=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${g}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${b};
        int batchB = ${x};
        for (int i = 0; i < ${d}; i++) {
          vec4 a = getMatrixA(batchA, ${f});
          vec4 b = getMatrixB(batchB, ${p});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${h[0]} * ${m[0]});
          result += (${h[1]} * ${m[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${v}

        ${y}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GB={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class HB{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Xe(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qB="return a * b;";function PD(t){const{inputs:e,backend:n}=t,{a:r,b:o}=e,s=Fo(r.dtype,o.dtype);if(r.dtype==="complex64"){const a=n.texData.get(r.dataId),l=n.texData.get(o.dataId),u=new HB(GB.REAL,r.shape,o.shape),c=new HB(GB.IMAG,r.shape,o.shape),d=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:r.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:o.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:o.shape}],f=n.runWebGLProgram(u,d,"float32"),p=n.runWebGLProgram(c,d,"float32"),h=Au({inputs:{real:f,imag:p},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),h}if(n.shouldExecuteOnCPU([r,o])){const a=n.texData.get(r.dataId),l=n.texData.get(o.dataId),[u,c]=GFe(r.shape,o.shape,a.values,l.values,s),d=n.makeTensorInfo(c,s),f=n.texData.get(d.dataId);return f.values=u,d}let i;return J().getBool("WEBGL_PACK_BINARY_OPERATIONS")?i=new Vp(qB,r.shape,o.shape):i=new Wc(qB,r.shape,o.shape),n.runWebGLProgram(i,[r,o],s)}const qMe={kernelName:Ky,backendName:"webgl",kernelFunc:PD};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KMe(t,e,n){const r=[Xf(t.shape),...Yf(t.shape)],o={dtype:t.dtype,shape:r,dataId:t.dataId},s=[Xf(e),...Yf(e)],i=new sZ(s,r),a=!0,l=[r],u=n.runWebGLProgram(i,[o],t.dtype,l,a);return{dataId:u.dataId,shape:e,dtype:u.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ge(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{shape:s}=r,i=n,a=ne(o.shape),l=I8(s,a),u=ne(l);A(a===u,()=>`The new shape (${l}) has ${u} elements and the old shape (${o.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);const c=i.texData.get(o.dataId);return c.isPacked&&!s1(o.shape,l)&&!(c.texture!==null&&s1(c.shape,l))?KMe(o,l,i):(i.incRef(o.dataId),{dataId:o.dataId,shape:l,dtype:o.dtype})}const XMe={kernelName:ZS,backendName:"webgl",kernelFunc:ge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KB{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:o,inSize:s,outSize:i}=e;this.outputShape=[o,i];const a=Math.floor(r/4)*4,l=r%4;let u="sumValue += dot(values, ones);";if(n!=null){const d=1/n;u=`sumValue += dot(values * ${Lf(d)?d.toPrecision(2):d}, ones);`}let c="";s%r>0&&(c=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${c}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${u}
        }

        int inIdx = inOffset + ${a};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${u}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${u}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${u}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YMe{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:o,inSize:s,outSize:i}=e;this.outputShape=[o,i];let a="0.0",l="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",l="min"):n==="max"&&(a="-1.0 / 1e-20",l="max");let u=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?u="sumValue":n==="prod"?u="prodValue":n==="all"?u="allValue":n==="any"&&(u="anyValue");const c=Math.floor(r/4)*4,d=r%4;let f=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,p="vec4";n==="all"?(a="1.0",f=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,p="bvec4"):n==="any"&&(a="0.0",f=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,p="bvec4");let h="";s%r>0&&(h=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          ${p} values = ${p}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${f}
        }

        int inIdx = inOffset + ${c};
        if (${d===1}) {
          ${p} values = ${p}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${d===2}) {
          ${p} values = ${p}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${d===3}) {
          ${p} values = ${p}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${f}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZMe(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=Dk(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function ud(t,e,n,r){const o=ZMe(t.shape);let s=t;for(let i=0;i<o.length;i++){const{inSize:a,windowSize:l,outSize:u}=o[i];let c,d;n==="mean"?c=i===0?new KB({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:u},a):new KB({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:u}):c=new YMe({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:u},n),d=s,s=r.runWebGLProgram(c,[s],e),d.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(d)}return s}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QMe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let i=0;i<r.length;i++)r[i]=e[n[i]];this.outputShape=r,this.rank=r.length;const o=Rt(this.rank),s=JMe(n);this.userCode=`
    void main() {
      ${o} resRC = getOutputCoords();
      setOutput(getA(${s}));
    }
    `}}function JMe(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let o=0;o<t.length;o++)r[t[o]]=n[o];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eLe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let c=0;c<r.length;c++)r[c]=e[n[c]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const o=Rt(this.rank),s=oZ("rc",this.rank),i=new Array(this.rank);for(let c=0;c<n.length;c++)i[n[c]]=s[c];const a=`vec2(${i.slice(-2).join()})`,l=`++${s[this.rank-1]} < ${r[this.rank-1]}`,u=`getChannel(getA(${i.join()}), ${a})`;this.userCode=`
    void main() {
      ${o} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${u};
      if(${l}) {
        result[1] = ${u};
      }
      --${s[this.rank-1]};
      if(++${s[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${u};
        if(${l}) {
          result[3] = ${u};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qk(t,e,n){const r=J().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new eLe(t.shape,e):new QMe(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tLe(t,e,n,r){const o=e,s=t.shape.length,i=rt(o,t.shape);let a=i;const l=gn(a,s),u=l!=null;let c=t;u&&(c=Qk(t,l,r),a=Nn(a.length,s)),wr("sum",a,s);const[d,f]=ar(c.shape,a);let p=d;n&&(p=In(d,i));const h=ne(f),g=ne(t.shape)/h,y=ge({inputs:{x:c},attrs:{shape:[g,h]},backend:r}),v=IP(t.dtype),b=ud(y,v,"sum",r),x=ge({inputs:{x:b},attrs:{shape:p},backend:r});return r.disposeIntermediateTensorInfo(y),r.disposeIntermediateTensorInfo(b),u&&r.disposeIntermediateTensorInfo(c),x}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jk(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r;return tLe(o,s,i,n)}const nLe={kernelName:rk,backendName:"webgl",kernelFunc:Jk};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jr(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{perm:s}=r,i=n,a=o.shape.length,l=new Array(a);for(let c=0;c<l.length;c++)l[c]=o.shape[s[c]];let u;if(i.shouldExecuteOnCPU([o])){const d=i.texData.get(o.dataId).values,f=AD(d,o.shape,o.dtype,s,l);u=i.makeTensorInfo(l,o.dtype);const p=i.texData.get(u.dataId);p.values=f}else u=Qk(o,s,i);return u}const rLe={kernelName:cf,backendName:"webgl",kernelFunc:Jr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dZ=1e3;function i1({a:t,b:e,transposeA:n,transposeB:r,backend:o,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:a=0,activation:l=null}){const u=t.shape.length,c=e.shape.length,d=n?t.shape[u-2]:t.shape[u-1],f=r?e.shape[c-1]:e.shape[c-2],p=n?t.shape[u-1]:t.shape[u-2],h=r?e.shape[c-2]:e.shape[c-1],m=t.shape.slice(0,-2),g=e.shape.slice(0,-2),y=ne(m),v=ne(g),x=Xe(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([p,h]);A(d===f,()=>`Error in matMul: inner shapes (${d}) and (${f}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const w=n?[y,d,p]:[y,p,d],S=r?[v,h,f]:[v,f,h],k=ge({inputs:{x:t},backend:o,attrs:{shape:w}}),$=ge({inputs:{x:e},backend:o,attrs:{shape:S}}),C=[k,$],I=Math.max(y,v),E=n?k.shape[1]:k.shape[2],O=s!=null,R=i!=null,z=l==="leakyrelu",L=l!=null?fg(l,!0):null,B=O||R||z||L!=null;let D;if((p===1||h===1)&&E>dZ&&B===!1){let j=k,G=$;n&&(j=Jr({inputs:{x:k},backend:o,attrs:{perm:[0,2,1]}}),C.push(j)),r&&(G=Jr({inputs:{x:$},backend:o,attrs:{perm:[0,2,1]}}),C.push(G));const Y=h!==1,X=h===1;let ee=j;Y&&(ee=ge({inputs:{x:j},backend:o,attrs:{shape:[I,E,1]}}),C.push(ee));const ie=h===1?2:1;let se=G;X&&(se=ge({inputs:{x:G},backend:o,attrs:{shape:[I,1,E]}}),C.push(se));const de=PD({inputs:{a:ee,b:se},backend:o});D=Jk({inputs:{x:de},backend:o,attrs:{axis:ie,keepDims:!0}}),C.push(de)}else{const j=Fo(t.dtype,e.dtype),G=new cZ(w,S,[I,p,h],n,r,O,L,R,z),Y=[k,$];if(s!=null&&Y.push(s),R&&Y.push(i),z){const X=o.makeTensorInfo([],"float32",wu(a,"float32"));Y.push(X),C.push(X)}D=o.runWebGLProgram(G,Y,j)}const F=ge({inputs:{x:D},backend:o,attrs:{shape:x}});C.push(D);for(const j of C)o.disposeIntermediateTensorInfo(j);return F}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oLe(t){const{inputs:e,backend:n,attrs:r}=t,{a:o,b:s,bias:i,preluActivationWeights:a}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=r;return i1({a:o,b:s,transposeA:l,transposeB:u,backend:n,bias:i,preluActivationWeights:a,leakyreluAlpha:d,activation:c})}const sLe={kernelName:Rx,backendName:"webgl",kernelFunc:oLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XB="return abs(x);";function iLe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const s=n.texData.get(r.dataId),i=nZ(s.values);return n.makeTensorInfo(r.shape,r.dtype,i)}let o;return J().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new Rl(r.shape,XB):o=new Ki(r.shape,XB),n.runWebGLProgram(o,[r],r.dtype)}const aLe={kernelName:lS,backendName:"webgl",kernelFunc:iLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lLe=Qs+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,uLe=mt({opSnippet:lLe}),cLe={kernelName:by,backendName:"webgl",kernelFunc:uLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dLe=Qs+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,fLe=mt({opSnippet:dLe}),pLe={kernelName:xy,backendName:"webgl",kernelFunc:fLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YB="return a + b;",hLe=kr({opSnippet:YB,packedOpSnippet:YB,supportsComplex:!0,cpuKernelImpl:$Fe}),mLe={kernelName:Ep,backendName:"webgl",kernelFunc:hLe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gLe{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((s,i)=>`T${i}`);const r=[];this.variableNames.forEach(s=>{r.push(`float v${s} = get${s}AtOutCoords();`)});const o=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${o};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yLe{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((s,i)=>`T${i}`);const r=[];this.variableNames.forEach(s=>{r.push(`vec4 v${s} = get${s}AtOutCoords();`)});const o=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${o};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Db(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return jo({inputs:{x:r[0]},backend:n});if(r.length>J().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),u=Db({inputs:r.slice(0,l),backend:n}),c=Db({inputs:r.slice(l),backend:n});return Db({inputs:[u,c],backend:n})}const o=r.map(l=>l.dtype).reduce((l,u)=>Fo(l,u)),s=r.map(l=>l.shape),a=J().getBool("WEBGL_PACK")?new yLe(r[0].shape,s):new gLe(r[0].shape,s);return n.runWebGLProgram(a,r,o)}const vLe={kernelName:uS,backendName:"webgl",kernelFunc:Db};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r,a=o.shape.length,l=rt(s,o.shape);let u=l;const c=gn(u,a);let d=o;c!=null&&(d=Jr({inputs:{x:o},backend:n,attrs:{perm:c}}),u=Nn(u.length,a)),wr("all",u,a);const[f,p]=ar(d.shape,u),h=ne(p),m=ge({inputs:{x:d},backend:n,attrs:{shape:[-1,h]}}),g=ud(m,m.dtype,"all",n);let y;if(i){const v=In(f,l);y=ge({inputs:{x:g},backend:n,attrs:{shape:v}})}else y=ge({inputs:{x:g},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(d),y}const xLe={kernelName:kO,backendName:"webgl",kernelFunc:bLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r,a=o.shape.length,l=rt(s,o.shape);let u=l;const c=gn(u,a);let d=o;c!=null&&(d=Jr({inputs:{x:o},backend:n,attrs:{perm:c}}),u=Nn(u.length,a)),wr("any",u,a);const[f,p]=ar(d.shape,u),h=ne(p),m=ge({inputs:{x:d},backend:n,attrs:{shape:[-1,h]}}),g=ud(m,m.dtype,"any",n);let y;if(i){const v=In(f,l);y=ge({inputs:{x:g},backend:n,attrs:{shape:v}})}else y=ge({inputs:{x:g},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(d),y}const SLe={kernelName:$O,backendName:"webgl",kernelFunc:wLe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kLe{constructor(e,n,r){this.variableNames=["A"];const{windowSize:o,batchSize:s,outSize:i}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[s,i];const a=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${o};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${o}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $Le{constructor(e,n,r,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,A(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const s=e[e.length-1],i=Math.ceil(s/n);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),o||this.variableNames.push("bestIndicesA");const a=this.outputShape,l=a.length,u=Rt(l),c=Xr("coords",l);let d,f;if(i===1){f=l+1;const $=Rt(f);d=`
        ${$} sourceLocR = ${$}(${c.join()}, 0);
        ++${c[l-1]};
        ${$} sourceLocG = ${$}(${c.join()}, 0);
        ++${c[l-2]};
        ${$} sourceLocA = ${$}(${c.join()}, 0);
        --${c[l-1]};
        ${$} sourceLocB = ${$}(${c.join()}, 0);
        --${c[l-2]};`}else f=l,d=`
        ${u} sourceLocR = coords;
        ++${c[l-1]};
        ${u} sourceLocG = coords;
        ++${c[l-2]};
        ${u} sourceLocA = coords;
        --${c[l-1]};
        ${u} sourceLocB = coords;
        --${c[l-2]};`;const p=["x","y","z","w","u","v"].slice(0,f),h="."+p[f-1],m=p.map($=>"int "+$),g=Xr("sourceLocR",f-1).concat("inIdx.r"),y=Xr("sourceLocG",f-1).concat("inIdx.g"),v=Xr("sourceLocB",f-1).concat("inIdx.b"),b=Xr("sourceLocA",f-1).concat("inIdx.a"),x=r==="max"?"greaterThan":"lessThan",w=o?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${g.join()}),
                             getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${b.join()})));`,S=`vec4(
            getAChannel(${g.join()}),
            hasNextCol ? getAChannel(${y.join()}) : 0.,
            hasNextRow ? getAChannel(${v.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${b.join()}) : 0.)`,k=o?"":`
      float getBestIndicesAChannel(${m.join()}) {
        return getChannel(getBestIndicesA(${p.join()}),
                                          vec2(${p.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${m.join()}) {
        return getChannel(getA(${p.join()}),
                               vec2(${p.slice(-2).join()}));
      }
      ${k}
      void main() {
        ${u} coords = getOutputCoords();
        bool hasNextCol = ${c[l-1]} < ${a[l-1]-1};
        bool hasNextRow = ${c[l-2]} < ${a[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${h}, sourceLocG${h},
          sourceLocB${h}, sourceLocA${h}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${S};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${w}
          vec4 candidate = ${S};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${x}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fZ(t,e,n,r=null){let o=e.shape[0],s=e.shape[1];r!=null&&(o=r.shape[0],s=r.shape[1]);const i=Dk(s),a={windowSize:i,inSize:s,batchSize:o,outSize:Math.ceil(s/i)},l=new kLe(a,n,r==null),u=[e];r!=null&&u.push(r);const c=t.runWebGLProgram(l,u,"int32");if(c.shape[1]===1)return c;const d=fZ(t,e,n,c);return t.disposeIntermediateTensorInfo(c),d}function pZ(t,e,n,r=null){const o=r!=null?r.shape:e.shape,s=o[o.length-1],i=Dk(s),a=new $Le(o,i,n,r==null),l=r==null?[e]:[e,r],u=t.runWebGLProgram(a,l,"int32");if(u.shape.length===e.shape.length){const c=pZ(t,e,n,u);return t.disposeIntermediateTensorInfo(u),c}return u}function hZ(t,e,n,r){const o=[n];if(wr("arg"+r.charAt(0).toUpperCase()+r.slice(1),o,e.shape.length),!J().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const s=[],i=t.texData.get(e.dataId),a=i!==null&&i.isPacked;let l=e;a&&(l=t.unpackTensor(e),s.push(l));const[u,c]=ar(l.shape,o),d=ne(c),f=ge({inputs:{x:l},backend:t,attrs:{shape:[-1,d]}});s.push(f);const p=fZ(t,f,r);s.push(p);const h=ge({inputs:{x:p},backend:t,attrs:{shape:u}});return s.forEach(m=>t.disposeIntermediateTensorInfo(m)),h}return pZ(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s}=r;let i=rt(s,o.shape);const a=gn(i,o.shape.length);let l=o;const u=[];a!=null&&(l=Jr({inputs:{x:o},backend:n,attrs:{perm:a}}),u.push(l),i=Nn(i.length,l.shape.length)),wr("argMax",[i[0]],l.shape.length);const c=hZ(n,l,i[0],"max");return u.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const TLe={kernelName:cS,backendName:"webgl",kernelFunc:CLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Le(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s}=r;let i=rt(s,o.shape);const a=gn(i,o.shape.length);let l=o;const u=[];a!=null&&(l=Jr({inputs:{x:o},backend:n,attrs:{perm:a}}),u.push(l),i=Nn(i.length,l.shape.length)),wr("argMin",[i[0]],l.shape.length);const c=hZ(n,l,i[0],"min");return u.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const ILe={kernelName:dS,backendName:"webgl",kernelFunc:_Le};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NLe=Qs+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,ELe=mt({opSnippet:NLe}),ALe={kernelName:wy,backendName:"webgl",kernelFunc:ELe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OLe=Qs+"return log(x + sqrt(x * x + 1.0));",PLe=mt({opSnippet:OLe}),RLe={kernelName:Sy,backendName:"webgl",kernelFunc:PLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DLe=Qs+`
  return atan(x);
`,FLe=mt({opSnippet:DLe}),MLe={kernelName:ky,backendName:"webgl",kernelFunc:FLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LLe=OD+`
  return atan(a, b);
`,zLe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+ld+`
  return result;
`,BLe=kr({opSnippet:LLe,packedOpSnippet:zLe}),jLe={kernelName:Cy,backendName:"webgl",kernelFunc:BLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VLe=Qs+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,WLe=mt({opSnippet:VLe}),ULe={kernelName:$y,backendName:"webgl",kernelFunc:WLe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pg{constructor(e,n,r,o=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,a=e.strideHeight,l=e.strideWidth,u=e.dilationHeight,c=e.dilationWidth,d=e.effectiveFilterHeight,f=e.effectiveFilterWidth,p=e.padInfo.top,h=e.padInfo.left;this.outputShape=e.outShape;const m=n==="avg",g=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,y=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let v="0.0";if(m||(v="-1.0 / 1e-20"),r){const $=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${l});
        const ivec2 pads = ivec2(${p}, ${h});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${u}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f};
                wC += ${c}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${$} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${o?s?g:y:`wR * ${f} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const b="max";let x=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(x="avgValue / max(count, 1.0)");const w=Math.floor(i/4)*4,S=i%4,k=`
      if (${m}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${b}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${l});
      const ivec2 pads = ivec2(${p}, ${h});
      const float initializationValue = ${v};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${v});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${u}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${w}; wC += 4) {
            int xC = xCCorner + wC * ${c};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              getValue(batch, xR, xC + 3 * ${c}, d)
            );

            ${k}
          }

          int xC = xCCorner + ${w};
          if (${S===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${k}
          } else if (${S===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              initializationValue,
              initializationValue
            );

            ${k}
          } else if (${S===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              initializationValue
            );

            ${k}
          }
        }
        setOutput(${x});
      }
    `}}class RD{constructor(e,n,r,o=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,a=e.strideDepth,l=e.strideHeight,u=e.strideWidth,c=e.dilationDepth,d=e.dilationHeight,f=e.dilationWidth,p=e.effectiveFilterDepth,h=e.effectiveFilterHeight,m=e.effectiveFilterWidth,g=e.padInfo.front,y=e.padInfo.top,v=e.padInfo.left;this.outputShape=e.outShape;const b=n==="avg";let x="0.0";if(b||(x="-1.0 / 1e-20"),r){const I=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${l}, ${u});
        const ivec3 pads = ivec3(${g}, ${y}, ${v});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${p};
              wD += ${c}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${h};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${m};
                  wC += ${f}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${I} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${o?s?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${h} * ${m} +
                      wR * ${m} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const w="max";let S=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(S="avgValue / max(count, 1.0)");const k=Math.floor(i/4)*4,$=i%4,C=`
      if (${b}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${w}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${l}, ${u});
      const ivec3 pads = ivec3(${g}, ${y}, ${v});
      const float initializationValue = ${x};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${x});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${p};
            wD += ${c}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${h};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${k}; wC += 4) {
              int xC = xCCorner + wC * ${f};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                getValue(batch, xD, xR, xC + 3 * ${f}, ch)
              );

              ${C}
            }

            int xC = xCCorner + ${k};
            if (${$===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${C}
            } else if (${$===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                initializationValue,
                initializationValue
              );

              ${C}
            } else if (${$===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                initializationValue
              );

              ${C}
            }
          }
        }
        setOutput(${S});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e;D0(o,"avgPool");const{filterSize:s,strides:i,pad:a,dimRoundingMode:l}=r,u=1;A(xr(i,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=Ys(o.shape,s,i,u,a,l);if(c.filterWidth===1&&c.filterHeight===1&&ct(c.inShape,c.outShape))return jo({inputs:{x:o},backend:n});const d=new pg(c,"avg",!1);return n.runWebGLProgram(d,[o],"float32")}const HLe={kernelName:fS,backendName:"webgl",kernelFunc:GLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{filterSize:s,strides:i,pad:a,dimRoundingMode:l,dataFormat:u}=r,c=[1,1,1],d=dl(o.shape,s,i,c,a,l,u),f=new RD(d,"avg",!1);return n.runWebGLProgram(f,[o],"float32")}const KLe={kernelName:pS,backendName:"webgl",kernelFunc:qLe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XLe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,o=e.strideHeight,s=e.strideWidth,i=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=l-1-e.padInfo.top,d=u-1-e.padInfo.left,f=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${c}, ${d});
      const float avgMultiplier = float(${f});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${u};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class YLe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,o=e.filterWidth,s=e.strideDepth,i=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,d=e.effectiveFilterDepth,f=e.effectiveFilterHeight,p=e.effectiveFilterWidth,h=d-1-e.padInfo.front,m=f-1-e.padInfo.top,g=p-1-e.padInfo.left,y=1/(n*r*o);this.userCode=`
      const ivec3 pads = ivec3(${h}, ${m}, ${g});
      const float avgMultiplier = float(${y});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${s}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${f};
              wR += ${u}) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${p};
                wC += ${c}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZLe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:s}=e,i=s,{filterSize:a,strides:l,pad:u,dimRoundingMode:c}=r,d=[1,1,1],f=dl(i.shape,a,l,d,u,c),p=new YLe(f);return n.runWebGLProgram(p,[o],i.dtype)}const QLe={kernelName:TO,backendName:"webgl",kernelFunc:ZLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JLe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:s}=e,i=s;D0([o,s],"avgPoolGrad");const{filterSize:a,strides:l,pad:u}=r,c=Ys(i.shape,a,l,1,u),d=new XLe(c);return n.runWebGLProgram(d,[o],i.dtype)}const e3e={kernelName:CO,backendName:"webgl",kernelFunc:JLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t3e(t){const{inputs:e,backend:n,attrs:r}=t,{a:o,b:s}=e,{transposeA:i,transposeB:a}=r;return i1({a:o,b:s,transposeA:i,transposeB:a,backend:n})}const n3e={kernelName:hS,backendName:"webgl",kernelFunc:t3e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class r3e{constructor(e,n,r,o,s,i){this.outputShape=[],this.variableNames=["x","mean","variance"],Xe(e,n),Xe(e,r);let a="0.0";o!=null&&(Xe(e,o),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";s!=null&&(Xe(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${i}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class o3e{constructor(e,n,r,o,s,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Xe(e,n),Xe(e,r);let a="vec4(0.0)";o!=null&&(Xe(e,o),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";s!=null&&(Xe(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${i}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s3e=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:o,variance:s,offset:i,scale:a}=t;A(o.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),A(i==null||o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),A(a==null||o.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const u=[r,o,s];let c=null;i!=null&&(c=i.shape,u.push(i));let d=null;a!=null&&(d=a.shape,u.push(a));const f=J().getBool("WEBGL_PACK_NORMALIZATION")?new o3e(r.shape,o.shape,s.shape,c,d,l):new r3e(r.shape,o.shape,s.shape,c,d,l);return e.runWebGLProgram(f,u,u[0].dtype)},i3e={kernelName:_S,backendName:"webgl",kernelFunc:s3e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class a3e{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=Rt(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=l3e(this.rank);let o;const s=e.map((i,a)=>`sourceLoc.${n2[a]} = start[${a}] + coords.${n2[a]};`);o=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${s.join(`
`)}
      `,this.userCode=`
      void main() {
        ${o}
        setOutput(getSource(${r}));
      }
    `}}const n2=["x","y","z","w","u","v"];function l3e(t){if(t===1)return"sourceLoc";if(t<=6)return n2.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class u3e{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=Rt(this.rank),r=Xr("coords",this.rank),o=Xr("sourceLoc",this.rank),s=this.rank===1?"sourceLoc":`vec2(${o.slice(-2).join()})`,i=`getChannel(getSource(${o.join()}), ${s})`,a=`
      result.x = ${i};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${o[this.rank-1]};
        result.y = ${i};
        --${o[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${o[this.rank-2]};
        result.z = ${i};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${o[this.rank-1]};
          result.w = ${i};
        }
      }
    `,u=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((c,d)=>`start[${d}]`).join()});`:e.map((c,d)=>`${o[d]} = ${r[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${u}
        vec4 result = vec4(0.);
        ${a}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c3e(t,e,n,r){const o=r.texData.get(t.dataId),s=r.makeTensorInfo(n,t.dtype),i=r.texData.get(s.dataId);Object.assign(i,o),i.refCount=1,i.shape=n,i.dtype=t.dtype;let a=IR(e,Fe(t.shape));o.slice&&(a+=o.slice.flatOffset),i.slice={flatOffset:a,origDataId:o.slice&&o.slice.origDataId||t.dataId};const l=r.dataRefCount.get(i.slice.origDataId)||1;return r.dataRefCount.set(i.slice.origDataId,l+1),s}function Up(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{begin:s,size:i}=r,[a,l]=Rk(o,s,i);if(CR(o,a,l),ne(l)===0)return n.makeTensorInfo(l,o.dtype,[]);if(n.shouldExecuteOnCPU([o])||o.dtype==="string"){const d=n.texData.get(o.dataId),f=nMe(d.values,a,l,o.shape,o.dtype);return n.makeTensorInfo(l,o.dtype,f)}const{isPacked:u}=n.texData.get(o.dataId),c=_R(o.shape,a,l);if(u||!c){const d=J().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new u3e(l):new a3e(l),f=[a];return n.runWebGLProgram(d,[o],o.dtype,f)}return n.uploadToGPU(o.dataId),c3e(o,a,l,n)}const d3e={kernelName:nk,backendName:"webgl",kernelFunc:Up};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f3e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{blockShape:s,crops:i}=r;A(o.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=s.reduce((v,b)=>v*b),l=S0(o.shape,s,a),u=k0(l.length,s.length),c=$0(o.shape,s,a),d=PR(i,s.length),f=RR(c,i,s.length),p=[],h=ge({inputs:{x:o},backend:n,attrs:{shape:l}}),m=Jr({inputs:{x:h},backend:n,attrs:{perm:u}}),g=ge({inputs:{x:m},backend:n,attrs:{shape:c}}),y=Up({inputs:{x:g},backend:n,attrs:{begin:d,size:f}});return p.push(h),p.push(m),p.push(g),p.forEach(v=>n.disposeIntermediateTensorInfo(v)),y},p3e={kernelName:mS,backendName:"webgl",kernelFunc:f3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,weights:s}=e,{size:i}=r,a=n.readSync(o.dataId),l=n.readSync(s.dataId),u=tZ(a,l,s.dtype,s.shape,i);return n.makeTensorInfo([i],s.dtype,u)}const m3e={kernelName:_O,backendName:"webgl",kernelFunc:h3e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g3e=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,y3e=`
  return float(int(a.r) & int(b.r));
`;function v3e(t){const{inputs:e,backend:n}=t,{a:r,b:o}=e,s=J().getBool("WEBGL_PACK_BINARY_OPERATIONS"),i=J().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,o])||i===1){const l=n.texData.get(r.dataId).values,u=n.texData.get(o.dataId).values,[c,d]=TFe(r.shape,o.shape,l,u,r.dtype),f=n.makeTensorInfo(d,r.dtype),p=n.texData.get(f.dataId);return p.values=c,f}let a;return s?a=new Vp(g3e,r.shape,o.shape,!1):a=new Wc(y3e,r.shape,o.shape),n.runWebGLProgram(a,[r,o],r.dtype)}const b3e={kernelName:gS,backendName:"webgl",kernelFunc:v3e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x3e(t){const{inputs:e,backend:n}=t,{s0:r,s1:o}=e,s=n.readSync(r.dataId),i=n.readSync(o.dataId),a=Xe(Array.from(s),Array.from(i));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const w3e={kernelName:IO,backendName:"webgl",kernelFunc:x3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S3e="return float(a != b);",mZ=kr({opSnippet:S3e,cpuKernelImpl:qFe,dtype:"bool"}),k3e={kernelName:US,backendName:"webgl",kernelFunc:mZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M0(t){const{inputs:e,backend:n}=t,{input:r}=e,o=n.texData.get(r.dataId);return jo({inputs:{x:o.complexTensorInfos.real},backend:n})}const $3e={kernelName:aP,backendName:"webgl",kernelFunc:M0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C3e="return float(int(x));";function T3e(t,e){const n=new Ki(t.shape,C3e),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r2(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{dtype:s}=r;if(s==="complex64"){if(o.dtype==="complex64")return jo({inputs:{x:o},backend:n});const i=Bn(o.shape),a=r2({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),l=Au({inputs:{real:a,imag:i},backend:n});return i.dispose(),n.disposeIntermediateTensorInfo(a),l}if(o.dtype==="complex64"){const i=M0({inputs:{input:o},backend:n}),a=r2({inputs:{x:i},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(i),a}if(!N8(o.dtype,s)){const i=jo({inputs:{x:o},backend:n});return{dataId:i.dataId,shape:i.shape,dtype:s}}if(n.shouldExecuteOnCPU([o])){const i=n.texData.get(o.dataId).values,[a,l,u]=_Fe(i,o.shape,o.dtype,s);return n.makeTensorInfo(a,l,u)}if(s==="int32")return T3e(o,n);if(s==="bool"){const i=n.makeTensorInfo([],"bool",yr("bool",1)),l=mZ({inputs:{a:o,b:i},backend:n});return n.disposeIntermediateTensorInfo(i),l}throw new Error(`Error in Cast: failed to cast ${o.dtype} to ${s}`)}const _3e={kernelName:Ty,backendName:"webgl",kernelFunc:r2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZB="return ceil(x);",I3e=mt({opSnippet:ZB,packedOpSnippet:ZB,cpuKernelImpl:IFe}),N3e={kernelName:_y,backendName:"webgl",kernelFunc:I3e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class E3e{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class A3e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{clipValueMin:s,clipValueMax:i}=r;let a;J().getBool("WEBGL_PACK_CLIP")?a=new A3e(o.shape):a=new E3e(o.shape);const l=[[s],[i]];return n.runWebGLProgram(a,[o],o.dtype,l)}const P3e={kernelName:Iy,backendName:"webgl",kernelFunc:O3e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class R3e{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QB(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function D3e(t){const{inputs:e,backend:n}=t,{x:r}=e,o=n.texData.get(r.dataId),s=new R3e(r.shape),i=[QB(r,o.complexTensorInfos.real),QB(r,o.complexTensorInfos.imag)];return n.runWebGLProgram(s,i,i[0].dtype)}const F3e={kernelName:yS,backendName:"webgl",kernelFunc:D3e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class M3e{constructor(e){this.outputShape=[],this.outputShape=sa(e,1),this.variableNames=e.map((i,a)=>`T${a}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let i=1;i<n.length;i++)n[i]=n[i-1]+e[i][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let i=1;i<n.length;i++){const a=n[i-1];r.push(`else if (yC < ${n[i]}) setOutput(getT${i}(yR, yC-${a}));`)}const o=n.length,s=n[n.length-1];r.push(`else setOutput(getT${o}(yR, yC-${s}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class L3e{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=sa(e,n);const r=this.outputShape,o=r.length,s=Rt(o),i=Xr("coords",o),a=["x","y","z","w","u","v"].slice(0,o);this.variableNames=e.map((m,g)=>`T${g}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let m=1;m<l.length;m++)l[m]=l[m-1]+e[m][n];const u=a[n],c=a.slice(-2),d=a.join();let f=`if (${u} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${c.join()}));
        }`;for(let m=1;m<l.length;m++){const g=l[m-1];f+=`
        if (${u} < ${l[m]}  && ${u} >= ${l[m-1]}) {
          return getChannel(
            getT${m}(${qv(a,u,g)}),
            vec2(${qv(c,u,g)}));
        }`}const p=l.length,h=l[l.length-1];f+=`
        return getChannel(
          getT${p}(${qv(a,u,h)}),
          vec2(${qv(c,u,h)}));`,this.userCode=`
      float getValue(${a.map(m=>"int "+m)}) {
        ${f}
      }

      void main() {
        ${s} coords = getOutputCoords();
        vec4 result = vec4(getValue(${i}), 0., 0., 0.);

        ${i[o-1]} = ${i[o-1]} + 1;
        if (${i[o-1]} < ${r[o-1]}) {
          result.g = getValue(${i});
        }

        ${i[o-2]} = ${i[o-2]} + 1;
        if (${i[o-2]} < ${r[o-2]}) {
          result.a = getValue(${i});
        }

        ${i[o-1]} = ${i[o-1]} - 1;
        if (${i[o-2]} < ${r[o-2]} &&
            ${i[o-1]} < ${r[o-1]}) {
          result.b = getValue(${i});
        }
        setOutput(result);
      }
    `}}function qv(t,e,n){const r=t.indexOf(e);return t.map((s,i)=>i===r?`${s} - ${n}`:s).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e$(t){const{inputs:e,backend:n}=t,{input:r}=e,o=n.texData.get(r.dataId);return jo({inputs:{x:o.complexTensorInfos.imag},backend:n})}const z3e={kernelName:qO,backendName:"webgl",kernelFunc:e$};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xh(t,e,n){const r=t[0].dtype;if(r==="complex64"){const p=t.map(v=>M0({inputs:{input:v},backend:n})),h=t.map(v=>e$({inputs:{input:v},backend:n})),m=Xh(p,e,n),g=Xh(h,e,n),y=Au({inputs:{real:m,imag:g},backend:n});return p.forEach(v=>n.disposeIntermediateTensorInfo(v)),h.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),y}let o=n.shouldExecuteOnCPU(t);if(r==="string"&&(o=!0),o){const p=t.map(x=>{const S=[-1,ne(x.shape.slice(e))];return ge({inputs:{x},backend:n,attrs:{shape:S}})}),h=p.map(x=>({vals:n.readSync(x.dataId),shape:x.shape})),m=sa(p.map(x=>x.shape),1),g=p[0].shape[0]===1,y=NFe(h,m,r,g),v=sa(t.map(x=>x.shape),e),b=n.makeTensorInfo(v,r,y);return p.forEach(x=>n.disposeIntermediateTensorInfo(x)),b}const s=t.filter(p=>ne(p.shape)>0),i=J().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&s[0].shape.length>1;if(s.length===1){const p=i?new Ki(t[0].shape,Cl):new Rl(t[0].shape,Cl);return n.runWebGLProgram(p,t,r)}const a=J().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(s.length>a){const p=[];for(let m=0;m<s.length;m+=a){const g=s.slice(m,m+a);p.push(Xh(g,e,n))}const h=Xh(p,e,n);for(const m of p)n.disposeIntermediateTensorInfo(m);return h}if(i){const p=new L3e(s.map(h=>h.shape),e);return n.runWebGLProgram(p,s,r)}const{tensors2D:l,outShape:u}=B3e(s,e,n),c=new M3e(l.map(p=>p.shape)),d=n.runWebGLProgram(c,l,r);l.forEach(p=>n.disposeIntermediateTensorInfo(p));const f=ge({inputs:{x:d},attrs:{shape:u},backend:n});return n.disposeIntermediateTensorInfo(d),f}function B3e(t,e,n){const r=sa(t.map(s=>s.shape),e);return{tensors2D:t.map(s=>ge({inputs:{x:s},attrs:{shape:[-1,ne(s.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gZ(t){const{inputs:e,backend:n,attrs:r}=t,{axis:o}=r,s=rt(o,e[0].shape)[0],i=e.map(u=>u.shape);ER(i,s);const a=sa(e.map(u=>u.shape),s);if(ne(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(u=>ne(u.shape)>0);return l.length===1?jo({inputs:{x:l[0]},backend:n}):Xh(l,s,n)}const j3e={kernelName:vS,backendName:"webgl",kernelFunc:gZ};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yZ{constructor(e,n=!1,r=null,o=!1,s=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const i=e.padInfo.top,a=e.padInfo.left,l=e.strideHeight,u=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,f=e.filterHeight,p=e.filterWidth,h=Math.floor(e.inChannels/4)*4,m=e.inChannels%4,g=e.dataFormat==="channelsLast",y=g?1:2,v=g?2:3,b=g?3:1;let x="",w="";r&&(o?x=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?x=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:x=`
          float activation(float x) {
            ${r}
          }
        `,w="result = activation(result);");const S=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${x}

      const ivec2 strides = ivec2(${l}, ${u});
      const ivec2 pads = ivec2(${i}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${b}];

        ivec2 xRCCorner =
            ivec2(coords[${y}], coords[${v}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${f}; wR++) {
          int xR = xRCorner + wR * ${c};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${p}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${h}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${g}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${m===1}) {

              if (${g}) {
                dotProd +=
                    getX(batch, xR, xC, ${h}) *
                    getW(wR, wC, ${h}, d2);
              } else {
                dotProd +=
                    getX(batch, ${h}, xR, xC) *
                    getW(wR, wC, ${h}, d2);
              }

            } else if (${m===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${h}, d2),
                getW(wR, wC, ${h} + 1, d2)
              );

              if (${g}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${h}),
                  getX(batch, xR, xC, ${h} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${h}, xR, xC),
                  getX(batch, ${h} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${m===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${h}, d2),
                getW(wR, wC, ${h} + 1, d2),
                getW(wR, wC, ${h} + 2, d2)
              );

              if (${g}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${h}),
                  getX(batch, xR, xC, ${h} + 1),
                  getX(batch, xR, xC, ${h} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${h}, xR, xC),
                  getX(batch, ${h} + 1, xR, xC),
                  getX(batch, ${h} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${S}
        ${w}
        setOutput(result);
      }
    `}}class V3e{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,o=e.padInfo.left,s=e.strideDepth,i=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,d=e.filterDepth,f=e.filterHeight,p=e.filterWidth,h=Math.floor(e.inChannels/4)*4,m=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${s}, ${i}, ${a});
      const ivec3 pads = ivec3(${n}, ${r}, ${o});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${f}; wR++) {
            int xR = xRCorner + wR * ${u};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${p}; wC++) {
              int xC = xCCorner + wC * ${c};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${h}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${m===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${h}) *
                  getW(wF, wR, wC, ${h}, d2);
              } else if (${m===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${h}),
                  getX(batch, xF, xR, xC, ${h} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${h}, d2),
                  getW(wF, wR, wC, ${h} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${m===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${h}),
                  getX(batch, xF, xR, xC, ${h} + 1),
                  getX(batch, xF, xR, xC, ${h} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${h}, d2),
                  getW(wF, wR, wC, ${h} + 1, d2),
                  getW(wF, wR, wC, ${h} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vZ{constructor(e,n=!1,r=null,o=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Fr(this.outputShape.length);const i=e.padInfo.left,a=e.strideWidth,l=e.dilationWidth,u=e.filterHeight,c=e.filterWidth,d=c;let f=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let g=0;g<c;g++)f+=`
           vec4 xTexelC${g*2};
           int xTexelC${g*2}Ready;
           vec4 xTexelC${g*2+1};
           int xTexelC${g*2+1}Ready;
           vec4 xC${g};`;f+=`
     for (int r = 0; r < ${u}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let g=0;g<c;g++)f+=`
           xTexelC${g*2} = vec4(0.0);
           xTexelC${g*2}Ready = 0;
           xTexelC${g*2+1} = vec4(0.0);
           xTexelC${g*2+1}Ready = 0;
           xC${g} = vec4(0.0);`;f+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let g=0;g<(d+1)/2;g++){const y=g*2;if(f+=`
           xC = xCCorner + ${y*l};
           `,a===1){if(y<c&&(i%2===1?(f+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }
               `,l===1&&y>0?f+=`
                 xC${y} = vec4(xTexelC${y-2}.zw, xTexelC${y}.xy);
                 `:f+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${y} = vec4(previous.zw, xTexelC${y}.xy);
                   } else {
                     xC${y} = vec4(0.0, 0.0, xTexelC${y}.xy);
                   }
                   `):f+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 xC${y} = xTexelC${y};
                 `,y+1<c)){const v=i%2===0?xO(l):l;l%2===0&&i%2===1||l%2!==0&&i%2!==1?(f+=`
                   xCOffset = xC + imod(pads[1], 2) + ${v};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                     xTexelC${y+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${y+1}.zw = vec2(0.0);
                     }
                     xTexelC${y+1}Ready = 1;
                   }
                   `,l>1?f+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${y+1} = vec4(previous.zw, xTexelC${y+1}.xy);
                     } else {
                      xC${y+1} = vec4(0.0, 0.0, xTexelC${y+1}.xy);
                     }
                     `:f+=`
                     xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.xy);
                     `):v===1?f+=`
                     xC${y+1} = xTexelC${y};
                     `:f+=`
                     xCOffset = xC + ${v};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                       xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${y+1}.zw = vec2(0.0);
                       }
                       xTexelC${y+1}Ready = 1;
                     }

                     xC${y+1} = xTexelC${y+1};
                     `}}else y<c&&(i%2===1?(f+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${y+1}Ready == 0) {
                   xTexelC${y+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${y+1}.zw = vec2(0.0);
                   }
                   xTexelC${y+1}Ready = 1;
                 }

                 xC${y} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
               `,y+1<c&&(f+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${y+1} = vec4(xTexelC${y+1}.xy, final.xy);
                 `)):(f+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                   xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y+1}.zw = vec2(0.);
                   }
                   xTexelC${y+1}Ready = 1;
                 }

                 xC${y} = vec4(
                   xTexelC${y}.xy, xTexelC${y+1}.xy);
               `,y+1<c&&(f+=`
                   xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
                 `)));y<c&&(f+=`
             wTexel = getW(r, ${y}, d1, d2);
             dotProd += xC${y}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${y}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,y+1<c&&(f+=`
               wTexel = getW(r, ${y+1}, d1, d2);
               dotProd += xC${y+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${y+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}f+=`
     }
   `,f+=`
     }
   `,f+=`
     }
   `;let p="",h="";r&&(o?p=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:s?p=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:p=`vec4 activation(vec4 x) {
           ${r}
         }`,h="result = activation(result);");const m=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${p}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${f}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${m}
         ${h}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class W3e{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=Fr(this.outputShape.length);const{dataFormat:r}=n,o=to(),s=r==="channelsLast",i=s?1:2,a=s?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let u="";for(let c=0;c<=1;c++)for(let d=0;d<=1;d++)u+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${c};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${i}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${s}) {
                  innerDims = vec2(d1, ch);
                  result[${c*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${c*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${u}

        ${o.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a1(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function bZ({x:t,filter:e,convInfo:n,backend:r,bias:o=null,preluActivationWeights:s=null,leakyreluAlpha:i=0,activation:a=null}){const l=t.shape,u=r.texData.get(t.dataId),c=n.inChannels,d=l[0]*l[1]*l[2],f=n.outChannels,p=n.dataFormat==="channelsLast",h=!1,m=!1;let g;const y=[];if(s!=null){const x=a1(s.shape,p);x!=null&&(s=ge({inputs:{x:s},backend:r,attrs:{shape:x}}),y.push(s))}if(o!=null){const x=a1(o.shape,p);x!=null&&(o=ge({inputs:{x:o},backend:r,attrs:{shape:x}}),y.push(o))}if(!((d===1||f===1)&&c>dZ)&&u.isPacked&&p&&u.texture!=null&&l[2]%2!==0&&ct(u.shape.slice(-3),l.slice(-3))){const x=l[0]*l[1]*(l[2]+1),w={dataId:t.dataId,shape:[1,x,n.inChannels],dtype:t.dtype},S=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,A(s1(u.shape,w.shape),()=>`packed reshape ${u.shape} to ${w.shape} isn't free`);const k=ge({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});y.push(k);const $=i1({a:w,b:k,backend:r,transposeA:h,transposeB:m,bias:o,activation:a,preluActivationWeights:s,leakyreluAlpha:i}),C=r.texData.get($.dataId);A(C.isPacked,()=>"batchMatMul result is expected to be packed"),u.shape=S,C.shape=n.outShape,g=jo({inputs:{x:$},backend:r}),g.shape=n.outShape,y.push($)}else{const x=n.outHeight*n.outWidth,w=ge({inputs:{x:t},backend:r,attrs:{shape:p?[n.batchSize,x,n.inChannels]:[n.batchSize,n.inChannels,x]}}),S=ge({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),k=i1({a:p?w:S,b:p?S:w,transposeA:!p,transposeB:m,backend:r,bias:o,activation:a,preluActivationWeights:s,leakyreluAlpha:i});g=ge({inputs:{x:k},backend:r,attrs:{shape:n.outShape}}),y.push(w),y.push(S),y.push(k)}for(const x of y)r.disposeIntermediateTensorInfo(x);return g}function xZ({x:t,filter:e,convInfo:n,backend:r,bias:o=null,preluActivationWeights:s=null,leakyreluAlpha:i=0,activation:a=null}){const{filterWidth:l,filterHeight:u,inChannels:c,outWidth:d,outHeight:f,dataFormat:p}=n,h=p==="channelsLast",m=l*u*c,g=f*d,y=[n.batchSize,m,g],v=!0,b=!1,x=[];if(s!=null){const F=a1(s.shape,h);F!=null&&(s=ge({inputs:{x:s},backend:r,attrs:{shape:F}}),x.push(s))}if(o!=null){const F=a1(o.shape,h);F!=null&&(o=ge({inputs:{x:o},backend:r,attrs:{shape:F}}),x.push(o))}const w=ge({inputs:{x:e},backend:r,attrs:{shape:[1,m,ne(e.shape)/m]}});x.push(w);const S=new W3e(y,n),k=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],$=r.runWebGLProgram(S,[t],"float32",k),C=ge({inputs:{x:$},backend:r,attrs:{shape:y}});x.push($),x.push(C);const I=o!=null,E=s!=null,O=a==="leakyrelu",R=a?fg(a,!0):null,z=new cZ(h?C.shape:w.shape,h?w.shape:C.shape,h?[n.batchSize,g,n.outChannels]:[n.batchSize,n.outChannels,g],v,b,I,R,E,O),L=h?[C,w]:[w,C];if(o&&L.push(o),E&&L.push(s),O){const F=r.makeTensorInfo([],"float32",wu(i,"float32"));L.push(F),x.push(F)}const B=r.runWebGLProgram(z,L,"float32"),D=ge({inputs:{x:B},backend:r,attrs:{shape:n.outShape}});x.push(B);for(const F of x)r.disposeIntermediateTensorInfo(F);return D}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s}=e,{strides:i,pad:a,dataFormat:l,dilations:u,dimRoundingMode:c}=r,d=fl(l),f=ir(o.shape,s.shape,i,u,a,c,!1,d);let p;if(f.filterHeight===1&&f.filterWidth===1&&f.dilationHeight===1&&f.dilationWidth===1&&f.strideHeight===1&&f.strideWidth===1&&(f.padInfo.type==="SAME"||f.padInfo.type==="VALID"))p=bZ({x:o,filter:s,convInfo:f,backend:n});else if(f.strideWidth<=2&&d==="channelsLast"&&J().getBool("WEBGL_EXP_CONV")){const m=new vZ(f),g=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];p=n.runWebGLProgram(m,[o,s],"float32",g)}else if(J().getBool("WEBGL_CONV_IM2COL"))p=xZ({x:o,filter:s,convInfo:f,backend:n});else{const m=new yZ(f);p=n.runWebGLProgram(m,[o,s],"float32")}const h=ge({inputs:{x:p},backend:n,attrs:{shape:f.outShape}});return n.disposeIntermediateTensorInfo(p),h}const G3e={kernelName:bS,backendName:"webgl",kernelFunc:U3e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class H3e{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,o=e.padInfo.top,s=e.padInfo.left,i=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${o};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${i?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class q3e{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,o=e.strideHeight,s=e.strideWidth,i=e.dataFormat==="channelsLast",a=n-1-e.padInfo.top,l=r-1-e.padInfo.left,u=i?1:2,c=i?2:3,d=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${u}], coords[${c}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${i}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class K3e{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,o=e.strideWidth,s=e.padInfo.front,i=e.padInfo.top,a=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${s};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${i};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${o} - ${a};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class X3e{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,o=e.filterWidth,s=e.strideDepth,i=e.strideHeight,a=e.strideWidth,l=n-1-e.padInfo.front,u=r-1-e.padInfo.top,c=o-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${u}, ${c});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${s}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${o}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${o} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,dy:s}=e,{strides:i,pad:a,dataFormat:l,dimRoundingMode:u,filterShape:c}=r,d=fl(l),f=ir(o.shape,c,i,1,a,u,!1,d),p=new H3e(f);return n.runWebGLProgram(p,[o,s],"float32")}const Z3e={kernelName:EO,backendName:"webgl",kernelFunc:Y3e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Q3e{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=Fr(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,o=n-1-e.padInfo.top,s=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J3e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,filter:s}=e,{inputShape:i,strides:a,pad:l,dataFormat:u,dimRoundingMode:c}=r,d=fl(u),f=ir(i,s.shape,a,1,l,c,!1,d);if(J().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){const p=[[f.strideHeight,f.strideWidth]],h=new Q3e(f);return n.runWebGLProgram(h,[o,s],"float32",p)}else{const p=new q3e(f);return n.runWebGLProgram(p,[o,s],"float32")}}const eze={kernelName:xS,backendName:"webgl",kernelFunc:J3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tze(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s}=e,{strides:i,pad:a,dilations:l}=r,u=$u(o.shape,s.shape,i,l,a),c=new V3e(u);return n.runWebGLProgram(c,[o,s],"float32")}const nze={kernelName:wS,backendName:"webgl",kernelFunc:tze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rze(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,dy:s}=e,{strides:i,pad:a,filterShape:l}=r,u=$u(o.shape,l,i,1,a),c=new K3e(u);return n.runWebGLProgram(c,[o,s],"float32")}const oze={kernelName:AO,backendName:"webgl",kernelFunc:rze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sze(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,filter:s}=e,{pad:i,strides:a,inputShape:l}=r,u=$u(l,s.shape,a,1,i),c=new X3e(u);return n.runWebGLProgram(c,[o,s],"float32")}const ize={kernelName:OO,backendName:"webgl",kernelFunc:sze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aze=Wp+`
  return cos(x);
`,lze=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${ld}
  return result;
`,uze=mt({opSnippet:aze,packedOpSnippet:lze}),cze={kernelName:Ny,backendName:"webgl",kernelFunc:uze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dze=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,fze=mt({opSnippet:dze}),pze={kernelName:Ey,backendName:"webgl",kernelFunc:fze};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hze{constructor(e,n,r,o,s){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[i,a,l,u]=e,[c]=n,[d,f]=r;this.outputShape=[c,d,f,u];const p=o==="bilinear"?1:0,[h,m]=[`${a-1}.0`,`${l-1}.0`],[g,y,v]=d>1?[`${(a-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${h} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${h}`],[b,x,w]=f>1?[`${(l-1)/(f-1)}`,"(x2-x1) * width_ratio",`x1*${m} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${m}`];this.userCode=`
      const float height_ratio = float(${g});
      const float width_ratio = float(${b});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${i}) {
          return;
        }

        float height_scale = ${y};
        float width_scale = ${x};

        float in_y = ${v};
        if( in_y < 0.0 || in_y > ${h} ) {
          setOutput(float(${s}));
          return;
        }
        float in_x = ${w};
        if( in_x < 0.0 || in_x > ${m} ) {
          setOutput(float(${s}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${p} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mze=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:o,boxes:s,boxInd:i}=e,{cropSize:a,method:l,extrapolationValue:u}=r,c=new hze(o.shape,s.shape,a,l,u);return n.runWebGLProgram(c,[o,s,i],"float32")},gze={kernelName:RO,backendName:"webgl",kernelFunc:mze};var hg;(function(t){t.Prod="*",t.Sum="+"})(hg||(hg={}));class JB{constructor(e,n,r,o){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const s=this.outputShape.length,i=this.op===hg.Prod?"1.0":"0.0",a=r?i:`getX(${ej(s,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let u="",c="";r?(u=o?`end != ${l-1}`:"end != 0",c=o?"end + 1":"end - 1"):(u=o?`end + pow2 < ${l}`:"end >= pow2",c=o?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Rt(s)} coords = getOutputCoords();
        int end = ${tj(s,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${u}) {
          int idx = ${c};
          ${tj(s,"coords",this.op)} = idx;
          val ${this.op}= getX(${ej(s,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function ej(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function tj(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wZ(t,e,n,r,o,s){const i=e.shape.length,a=gn([r],i);let l=e;a!=null&&(l=Jr({inputs:{x:e},backend:n,attrs:{perm:a}}));const u=Nn(1,i)[0];if(u!==i-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const c=l.shape[u];let d=jo({inputs:{x:l},backend:n});for(let f=0;f<=Math.ceil(Math.log2(c))-1;f++){const p=new JB(t,l.shape,!1,s),h=[[f]],m=d;d=n.runWebGLProgram(p,[d],d.dtype,h),n.disposeIntermediateTensorInfo(m)}if(o){const f=new JB(t,l.shape,o,s),p=d;d=n.runWebGLProgram(f,[d],d.dtype),n.disposeIntermediateTensorInfo(p)}if(a!=null){const f=Cu(a),p=Jr({inputs:{x:d},backend:n,attrs:{perm:f}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),p}return d}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yze(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,exclusive:i,reverse:a}=r;return wZ(hg.Prod,o,n,s,i,a)}const vze={kernelName:PO,backendName:"webgl",kernelFunc:yze};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bze(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,exclusive:i,reverse:a}=r;return wZ(hg.Sum,o,n,s,i,a)}const xze={kernelName:SS,backendName:"webgl",kernelFunc:bze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wze(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,weights:s}=e,{size:i,binaryOutput:a}=r;if(o.shape.length===1){const l=n.readSync(o.dataId),u=n.readSync(s.dataId),c=tZ(l,u,s.dtype,s.shape,i);return n.makeTensorInfo([i],s.dtype,c)}else if(o.shape.length===2){const l=n.bufferSync(o),u=n.bufferSync(s),c=CFe(l,u,i,a);return n.makeTensorInfo(c.shape,s.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}const Sze={kernelName:DO,backendName:"webgl",kernelFunc:wze};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kze{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ze(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{blockSize:s,dataFormat:i}=r,a=o.shape[0],l=i==="NHWC"?o.shape[1]:o.shape[2],u=i==="NHWC"?o.shape[2]:o.shape[3],c=i==="NHWC"?o.shape[3]:o.shape[1],d=l*s,f=u*s,p=c/(s*s),h=i==="NHWC"?[a,d,f,p]:[a,p,d,f],m=new kze(h,s,i);return n.runWebGLProgram(m,[o],o.dtype)}const Cze={kernelName:FO,backendName:"webgl",kernelFunc:$ze};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SZ{constructor(e,n=!1,r=null,o=!1,s=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Fr(this.outputShape.length);const i=e.filterHeight,a=e.filterWidth,l=e.outChannels/e.inChannels;let u="",c="";r&&(o?u=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?u=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:u=`
          float activation(float x) {
            ${r}
          }
        `,c="result = activation(result);");const d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${u}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${i}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${c}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kZ{constructor(e,n=!1,r=null,o=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Fr(this.outputShape.length);const i=e.outChannels/e.inChannels,a=e.padInfo.left,l=e.strideWidth,u=e.dilationWidth,c=e.filterHeight,d=e.filterWidth,f=d;let p=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let y=0;y<d;y++)p+=`
          vec4 xTexelC${y*2};
          int xTexelC${y*2}Ready;
          vec4 xTexelC${y*2+1};
          int xTexelC${y*2+1}Ready;
          vec4 xC${y};`;p+=`
    for (int r = 0; r < ${c}; r++) {
      `;for(let y=0;y<d;y++)p+=`
          xTexelC${y*2} = vec4(0.0);
          xTexelC${y*2}Ready = 0;
          xTexelC${y*2+1} = vec4(0.0);
          xTexelC${y*2+1}Ready = 0;
          xC${y} = vec4(0.0);`;p+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let y=0;y<(f+1)/2;y++){const v=y*2;if(p+=`
          xC = xCCorner + ${v*u};
          `,l===1){if(v<d&&(a%2===1?(p+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }
              `,u===1&&v>0?p+=`
                xC${v} = vec4(xTexelC${v-2}.zw, xTexelC${v}.xy);
                `:p+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${v} = vec4(previous.zw, xTexelC${v}.xy);
                  } else {
                    xC${v} = vec4(0.0, 0.0, xTexelC${v}.xy);
                  }
                  `):p+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                xC${v} = xTexelC${v};
                `,v+1<d)){const b=a%2===0?xO(u):u;u%2===0&&a%2===1||u%2!==0&&a%2!==1?(p+=`
                  xCOffset = xC + imod(pads[1], 2) + ${b};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                    xTexelC${v+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${v+1}.zw = vec2(0.0);
                    }
                    xTexelC${v+1}Ready = 1;
                  }
                  `,u>1?p+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${v+1} = vec4(previous.zw, xTexelC${v+1}.xy);
                    } else {
                     xC${v+1} = vec4(0.0, 0.0, xTexelC${v+1}.xy);
                    }
                    `:p+=`
                    xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.xy);
                    `):b===1?p+=`
                    xC${v+1} = xTexelC${v};
                    `:p+=`
                    xCOffset = xC + ${b};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                      xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${v+1}.zw = vec2(0.0);
                      }
                      xTexelC${v+1}Ready = 1;
                    }

                    xC${v+1} = xTexelC${v+1};
                    `}}else v<d&&(a%2===1?(p+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${v+1}Ready == 0) {
                  xTexelC${v+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${v+1}.zw = vec2(0.0);
                  }
                  xTexelC${v+1}Ready = 1;
                }

                xC${v} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
              `,v+1<d&&(p+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${v+1} = vec4(xTexelC${v+1}.xy, final.xy);
                `)):(p+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                  xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v+1}.zw = vec2(0.);
                  }
                  xTexelC${v+1}Ready = 1;
                }

                xC${v} = vec4(
                  xTexelC${v}.xy, xTexelC${v+1}.xy);
              `,v+1<d&&(p+=`
                  xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
                `)));v<d&&(p+=`
            wTexel = getW(r, ${v}, d1, q);
            dotProd += xC${v} * vec4(wTexel.xz, wTexel.xz);
          `,v+1<d&&(p+=`
              wTexel = getW(r, ${v+1}, d1, q);
              dotProd += xC${v+1} * vec4(wTexel.xz, wTexel.xz);
            `))}p+=`
    }
  `,p+=`
      }
    `;let h="",m="";r&&(o?h=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?h=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:h=`vec4 activation(vec4 x) {
          ${r}
        }`,m="result = activation(result);");const g=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${h}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${i};
        int q = d2 - d1 * ${i};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${p}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${g}
        ${m}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tze(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s}=e,{strides:i,pad:a,dilations:l,dimRoundingMode:u}=r;let c=l;c==null&&(c=[1,1]),A(xr(i,c),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const d=ir(o.shape,s.shape,i,c,a,u,!0);let f;J().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?f=new kZ(d):f=new SZ(d);const p=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(f,[o,s],"float32",p)}const _ze={kernelName:kS,backendName:"webgl",kernelFunc:Tze};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ize{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,o=e.padInfo.top,s=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${i} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${o};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Nze{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,o=e.strideHeight,s=e.strideWidth,i=n-1-e.padInfo.top,a=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eze(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,dy:s}=e,{strides:i,dilations:a,pad:l,dimRoundingMode:u,filterShape:c}=r,d=ir(o.shape,c,i,a,l,u,!0),f=new Ize(d);return n.runWebGLProgram(f,[o,s],"float32")}const Aze={kernelName:MO,backendName:"webgl",kernelFunc:Eze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oze(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,filter:s}=e,{strides:i,dilations:a,pad:l,dimRoundingMode:u,inputShape:c}=r,d=ir(c,s.shape,i,a,l,u,!0),f=new Nze(d);return n.runWebGLProgram(f,[o,s],"float32")}const Pze={kernelName:LO,backendName:"webgl",kernelFunc:Oze};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rze{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dze(t){const{inputs:e,backend:n}=t,{x:r}=e,o=[...r.shape,...r.shape],s=ne(r.shape),i=ge({inputs:{x:r},backend:n,attrs:{shape:[s]}}),a=new Rze(s),l=n.runWebGLProgram(a,[i],i.dtype),u=ge({inputs:{x:l},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(l),u}const Fze={kernelName:zO,backendName:"webgl",kernelFunc:Dze};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mze{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:o,strideHeight:s,strideWidth:i,filterHeight:a,filterWidth:l,dilationHeight:u,dilationWidth:c}=e,{top:d,left:f}=o;this.userCode=`
      const ivec2 strides = ivec2(${s}, ${i});
      const ivec2 pads = ivec2(${d}, ${f});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${u};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${c};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lze(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s}=e,{strides:i,pad:a,dilations:l}=r,u=m0(o.shape,s.shape,i,a,"NHWC",l);let c;const d=new Mze(u);c=n.runWebGLProgram(d,[o,s],"float32");const f=ge({inputs:{x:c},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(c),f}const zze={kernelName:$S,backendName:"webgl",kernelFunc:Lze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bze(t){const{inputs:e,backend:n,attrs:r}=t,{equation:o}=r,s=e,{allDims:i,summedDims:a,idDims:l}=VR(o,s.length);UR(i.length,l,s);const{path:u,steps:c}=GR(a,l),d=c.length;let f=null,p=i.length;const h=[];for(let m=0;m<d;++m){for(const g of c[m]){const{permutationIndices:y,expandDims:v}=WR(p,l[g]);let b;HR(y)?b=s[g]:(b=Jr({inputs:{x:s[g]},backend:n,attrs:{perm:y}}),h.push(b));const x=b.shape.slice();for(let w=0;w<v.length;++w)x.splice(v[w],0,1);ct(b.shape,x)||(b=ge({inputs:{x:b},backend:n,attrs:{shape:x}}),h.push(b)),f===null?f=b:(f=PD({inputs:{a:b,b:f},backend:n}),h.push(f))}m<d-1&&(u[m]>=0&&(f=Jk({inputs:{x:f},backend:n,attrs:{axis:u[m]-(i.length-p),keepDims:!1}}),h.push(f)),p--)}for(const m of h)m!==f&&n.disposeIntermediateTensorInfo(m);return f}const jze={kernelName:BO,backendName:"webgl",kernelFunc:Bze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vze="return (x >= 0.0) ? x : (exp(x) - 1.0);",Wze=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Uze=mt({opSnippet:Vze,packedOpSnippet:Wze}),Gze={kernelName:Oy,backendName:"webgl",kernelFunc:Uze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hze="return (b >= 0.0) ? a : a * (b + 1.0);",qze=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,Kze=t=>{const{inputs:e,backend:n}=t,{dy:r,y:o}=e,s=J().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Vp(qze,r.shape,o.shape):new Wc(Hze,r.shape,o.shape);return n.runWebGLProgram(s,[r,o],r.dtype)},Xze={kernelName:jO,backendName:"webgl",kernelFunc:Kze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yze=`
  return vec4(equal(a, b));
`,Zze="return float(a == b);",Qze=kr({opSnippet:Zze,packedOpSnippet:Yze,dtype:"bool",cpuKernelImpl:EFe}),Jze={kernelName:CS,backendName:"webgl",kernelFunc:Qze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eBe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${DR};
  float a1 = ${FR};
  float a2 = ${MR};
  float a3 = ${LR};
  float a4 = ${zR};
  float a5 = ${BR};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,tBe=mt({opSnippet:eBe}),nBe={kernelName:Py,backendName:"webgl",kernelFunc:tBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rBe=Wp+`
  return exp(x);
`,oBe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,$Z=mt({opSnippet:rBe,packedOpSnippet:oBe,cpuKernelImpl:AFe,dtype:"float32"}),sBe={kernelName:Ry,backendName:"webgl",kernelFunc:$Z};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o2(t){const{inputs:e,attrs:n,backend:r}=t,{dim:o}=n,{input:s}=e,i=s.shape.length,a=s.shape.slice();let l=o;return o<0&&(A(-(i+1)<=o,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+o+1),a.splice(l,0,1),ge({inputs:{x:s},backend:r,attrs:{shape:a}})}const iBe={kernelName:TS,backendName:"webgl",kernelFunc:o2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nj="return exp(x) - 1.0;",aBe=mt({opSnippet:nj,packedOpSnippet:nj,cpuKernelImpl:OFe}),lBe={kernelName:Dy,backendName:"webgl",kernelFunc:aBe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rj{constructor(e,n,r){this.variableNames=["real","imag"];const o=n[1];this.outputShape=n;const s=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,i=r?`${o}.0`:"1.0";let a;if(e==="real")a="return real * expR - imag * expI;";else if(e==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${s};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${o});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${o}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${i};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CZ(t,e,n){const r=n.texData.get(t.dataId),o=ne(t.shape),s=t.shape[t.shape.length-1],i=o/s,a=ge({inputs:{x:t},backend:n,attrs:{shape:[i,s]}}),l=a.shape,u=new rj("real",l,e),c=new rj("imag",l,e),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],f=n.runWebGLProgram(u,d,"float32"),p=n.runWebGLProgram(c,d,"float32"),h=Au({inputs:{real:f,imag:p},backend:n});n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p);const m=ge({inputs:{x:h},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(h),m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uBe(t){const{inputs:e,backend:n}=t,{input:r}=e;return CZ(r,!1,n)}const cBe={kernelName:VO,backendName:"webgl",kernelFunc:uBe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dBe{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L0(t){const{backend:e,attrs:n}=t,{shape:r,value:o}=n;let{dtype:s}=n;if(s=s||Ip(o),s==="string"){const i=_n(s,ne(r));return i.fill(o),e.makeTensorInfo(r,s,i)}else{const i=new dBe(r,o),a=[[o]];return e.runWebGLProgram(i,[],s,a)}}const fBe={kernelName:WO,backendName:"webgl",kernelFunc:L0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pBe{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hBe={kernelName:UO,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,o=new pBe(n.shape);return r.runWebGLProgram(o,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oj="return floor(x);",mBe=mt({opSnippet:oj,packedOpSnippet:oj,cpuKernelImpl:PFe}),gBe={kernelName:Fy,backendName:"webgl",kernelFunc:mBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yBe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,vBe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,bBe=kr({opSnippet:yBe,packedOpSnippet:vBe,dtype:"int32"}),xBe={kernelName:My,backendName:"webgl",kernelFunc:bBe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wBe{constructor(e){this.variableNames=["A"];const n=to(),[r,o]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${o}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SBe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=to(),[r,o]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${o}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kBe={kernelName:wye,backendName:"webgl",kernelFunc:$Be};let xd,fT=J().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function $Be(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:o}=e;const{numChannels:s}=r,i=typeof HTMLVideoElement<"u"&&o instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&o instanceof HTMLImageElement,[l,u]=i?[o.videoWidth,o.videoHeight]:[o.width,o.height],c=[u,l],d=[u,l,s];if(a||i){const m=J().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(xd==null||m!==fT)&&(fT=m,xd=document.createElement("canvas").getContext("2d",{willReadFrequently:fT})),xd.canvas.width=l,xd.canvas.height=u,xd.drawImage(o,0,0,l,u),o=xd.canvas}const f=n.makeTensorInfo(c,"int32");n.texData.get(f.dataId).usage=es.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(f.dataId),o);const p=J().getBool("WEBGL_PACK")?new SBe(d):new wBe(d),h=n.runWebGLProgram(p,[f],"int32");return n.disposeData(f.dataId),h}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s,bias:i,preluActivationWeights:a}=e,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:f,activation:p,leakyreluAlpha:h}=r,m=fl(c),g=ir(o.shape,s.shape,l,d,u,f,!1,m);let y;const v=[],b=i!=null,x=a!=null,w=p==="leakyrelu",S=()=>{const $=[o,s],C=(I,E)=>{if(E==="NCHW"&&I.shape.length===1&&I.shape[0]!==1){const O=ge({inputs:{x:I},backend:n,attrs:{shape:[I.shape[0],1,1]}});return v.push(O),O}return I};if(b&&$.push(C(i,c)),x&&$.push(C(a,c)),w){const I=n.makeTensorInfo([],"float32",wu(h,"float32"));$.push(I),v.push(I)}return $};if(g.filterHeight===1&&g.filterWidth===1&&g.dilationHeight===1&&g.dilationWidth===1&&g.strideHeight===1&&g.strideWidth===1&&(g.padInfo.type==="SAME"||g.padInfo.type==="VALID"))y=bZ({x:o,filter:s,convInfo:g,backend:n,bias:i,activation:p,preluActivationWeights:a,leakyreluAlpha:h});else if(g.strideWidth<=2&&m==="channelsLast"&&J().getBool("WEBGL_EXP_CONV")){const $=p?fg(p,!0):null,C=new vZ(g,b,$,x,w),I=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],E=S();y=n.runWebGLProgram(C,E,"float32",I)}else if(J().getBool("WEBGL_CONV_IM2COL"))y=xZ({x:o,filter:s,convInfo:g,backend:n,bias:i,activation:p,preluActivationWeights:a,leakyreluAlpha:h});else{const $=p?fg(p,!1):null,C=new yZ(g,b,$,x,w),I=S();y=n.runWebGLProgram(C,I,"float32")}const k=ge({inputs:{x:y},backend:n,attrs:{shape:g.outShape}});return v.push(y),v.forEach($=>n.disposeIntermediateTensorInfo($)),k}const TBe={kernelName:Dx,backendName:"webgl",kernelFunc:CBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Be(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s,bias:i,preluActivationWeights:a}=e,{strides:l,pad:u,dilations:c,dimRoundingMode:d,activation:f,leakyreluAlpha:p}=r,h=[];let m=c;m==null&&(m=[1,1]),A(xr(l,m),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${m}'`);const g=ir(o.shape,s.shape,l,m,u,d,!0),y=J().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,v=f?fg(f,y):null,b=[o,s],x=i!=null,w=a!=null,S=f==="leakyrelu";if(x&&b.push(i),w&&b.push(a),S){const I=n.makeTensorInfo([],"float32",wu(p,"float32"));b.push(I),h.push(I)}let k;y?k=new kZ(g,x,v,w,S):k=new SZ(g,x,v,w,S);const $=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],C=n.runWebGLProgram(k,b,"float32",$);return h.forEach(I=>n.disposeIntermediateTensorInfo(I)),C}const IBe={kernelName:Fx,backendName:"webgl",kernelFunc:_Be};class NBe{constructor(e,n,r,o){this.sliceDim=e,this.strides=n,this.paramsShape=o,this.variableNames=["x","indices"],this.outputShape=r;const s=Rt(r.length);let i=`
    int index;`;for(let a=0;a<this.sliceDim;a++)i+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${s} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${i}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EBe(t){const{inputs:e,backend:n}=t,{params:r,indices:o}=e,s=o.shape,i=s[s.length-1],a=ne(r.shape),[l,u,c,d]=$R(r,o),f=ge({inputs:{x:o},backend:n,attrs:{shape:[u,i]}}),p=ge({inputs:{x:r},backend:n,attrs:{shape:[ne(r.shape)/c,c]}});if(n.shouldExecuteOnCPU([r,o])||r.dtype==="string"){const y=n.readSync(o.dataId),v=n.bufferSync(r),b=RFe(y,v,r.dtype,u,i,c,d,r.shape,a);return n.makeTensorInfo(l,r.dtype,b.values)}const h=new NBe(i,d,[u,c],r.shape),m=n.runWebGLProgram(h,[p,f],p.dtype),g=ge({inputs:{x:m},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}const ABe={kernelName:GO,backendName:"webgl",kernelFunc:EBe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OBe{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=Rt(this.rank),o=PBe(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${o}));
      }
    `}}function PBe(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let o=0;o<t.length;o++)o===2?r.push("index"):r.push(`${n[o]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TZ(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,indices:s}=e,{axis:i,batchDims:a}=r,l=rt(i,o.shape)[0];if(J().get("DEBUG")){const v=n.readSync(s.dataId),b=o.shape[l];for(let x=0;x<v.length;++x){const w=v[x];A(w<=b-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${b-1}]`)}}const u=KR(o,s,l,a),c=ne(s.shape),d=[],f=ge({inputs:{x:o},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),p=ge({inputs:{x:s},backend:n,attrs:{shape:[u.batchSize,c/u.batchSize]}});d.push(f),d.push(p);const h=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([o,s])||o.dtype==="string"){const v=n.bufferSync(p),b=n.bufferSync(f),x=DFe(b,v,h);return d.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.makeTensorInfo(u.outputShape,x.dtype,x.values)}const m=new OBe(f.shape,h),g=n.runWebGLProgram(m,[f,p],f.dtype);d.push(g);const y=ge({inputs:{x:g},backend:n,attrs:{shape:u.outputShape}});return d.forEach(v=>n.disposeIntermediateTensorInfo(v)),y}const RBe={kernelName:IS,backendName:"webgl",kernelFunc:TZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DBe="return float(a > b);",FBe=`
  return vec4(greaterThan(a, b));
`,MBe=kr({opSnippet:DBe,packedOpSnippet:FBe,cpuKernelImpl:FFe,dtype:"bool"}),LBe={kernelName:NS,backendName:"webgl",kernelFunc:MBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zBe="return float(a >= b);",BBe=`
  return vec4(greaterThanEqual(a, b));
`,jBe=kr({opSnippet:zBe,packedOpSnippet:BBe,dtype:"bool",cpuKernelImpl:MFe}),VBe={kernelName:Ly,backendName:"webgl",kernelFunc:jBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WBe(t){const{inputs:e,backend:n}=t,{input:r}=e;return CZ(r,!0,n)}const UBe={kernelName:HO,backendName:"webgl",kernelFunc:WBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GBe="return float(!isnan(x) && !isinf(x));",HBe=mt({opSnippet:GBe,dtype:"bool"}),qBe={kernelName:By,backendName:"webgl",kernelFunc:HBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KBe="return float(isinf(x));",XBe=mt({opSnippet:KBe,dtype:"bool"}),YBe={kernelName:jy,backendName:"webgl",kernelFunc:XBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZBe="return float(isnan(x));",QBe=mt({opSnippet:ZBe,dtype:"bool"}),JBe={kernelName:Vy,backendName:"webgl",kernelFunc:QBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eje="return float(a < b);",tje=`
  return vec4(lessThan(a, b));
`,nje=kr({opSnippet:eje,packedOpSnippet:tje,cpuKernelImpl:LFe,dtype:"bool"}),rje={kernelName:AS,backendName:"webgl",kernelFunc:nje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oje="return float(a <= b);",sje=`
  return vec4(lessThanEqual(a, b));
`,ije=kr({opSnippet:oje,packedOpSnippet:sje,cpuKernelImpl:zFe,dtype:"bool"}),aje={kernelName:OS,backendName:"webgl",kernelFunc:ije};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lje(t){const{backend:e,attrs:n}=t,{start:r,stop:o,num:s}=n,i=BFe(r,o,s);return e.makeTensorInfo([i.length],"float32",i)}const uje={kernelName:KO,backendName:"webgl",kernelFunc:lje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cje=Wp+`
  return x < 0.0 ? 0./0. : log(x);
`,dje=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,fje=mt({opSnippet:cje,packedOpSnippet:dje,cpuKernelImpl:jFe}),pje={kernelName:Wy,backendName:"webgl",kernelFunc:fje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hje=Wp+`
  return log(1.0 + x);
`,mje=mt({opSnippet:hje}),gje={kernelName:Uy,backendName:"webgl",kernelFunc:mje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yje="return float(a >= 1.0 && b >= 1.0);",vje=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,bje=kr({opSnippet:yje,packedOpSnippet:vje,dtype:"bool"}),xje={kernelName:PS,backendName:"webgl",kernelFunc:bje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wje="return float(!(x >= 1.0));",Sje=mt({opSnippet:wje}),kje={kernelName:RS,backendName:"webgl",kernelFunc:Sje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $je="return float(a >= 1.0 || b >= 1.0);",Cje=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,Tje=kr({opSnippet:$je,packedOpSnippet:Cje,dtype:"bool"}),_je={kernelName:DS,backendName:"webgl",kernelFunc:Tje};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ije{constructor(e,n,r,o,s){this.variableNames=["x"],this.outputShape=[];const i=n,a=e[3]-1;this.outputShape=e;let l;const u=`float(${r}) + float(${o}) * sum`;s===.5?l=`inversesqrt(${u})`:s===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${i}; j <= ${i}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nje{constructor(e,n,r,o,s){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const i=n,a=e[3]-1;this.outputShape=e;let l;const u=`float(${r}) + float(${o}) * sum`;s===.5?l=`inversesqrt(${u})`:s===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${i};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${i}; j <= ${i}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Eje=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{depthRadius:s,bias:i,alpha:a,beta:l}=r,u=J().getBool("WEBGL_PACK_NORMALIZATION")?new Nje(o.shape,s,i,a,l):new Ije(o.shape,s,i,a,l);return n.runWebGLProgram(u,[o],o.dtype)},Aje={kernelName:FS,backendName:"webgl",kernelFunc:Eje};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Oje{constructor(e,n,r,o,s){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=o,this.beta=s,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${o}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${o})
                * float(${s})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${s});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pje=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:o,y:s,dy:i}=e,{depthRadius:a,bias:l,alpha:u,beta:c}=r,d=new Oje(o.shape,a,l,u,c);return n.runWebGLProgram(d,[o,s,i],o.dtype)},Rje={kernelName:XO,backendName:"webgl",kernelFunc:Pje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dje(t,e,n,r){const o=ne(e),i=ne(t.shape)/o,a=ge({inputs:{x:t},attrs:{shape:[i,o]},backend:r}),l=ud(a,t.dtype,"max",r),u=ge({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Z(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{reductionIndices:s,keepDims:i}=r,a=o.shape.length,l=rt(s,o.shape);let u=l;const c=gn(u,a),d=c!=null,f=n.shouldExecuteOnCPU([o]);let p=o;if(d){if(f){const b=n.texData.get(p.dataId).values,x=new Array(a);for(let k=0;k<x.length;k++)x[k]=o.shape[c[k]];const w=AD(b,o.shape,o.dtype,c,x);p=n.makeTensorInfo(x,o.dtype);const S=n.texData.get(p.dataId);S.values=w}else p=Qk(o,c,n);u=Nn(u.length,a)}wr("max",u,a);const[h,m]=ar(p.shape,u);let g=h;i&&(g=In(h,l));let y;if(f){const b=n.texData.get(p.dataId).values,x=VFe(b,ne(m),g,o.dtype);y=n.makeTensorInfo(g,o.dtype);const w=n.texData.get(y.dataId);w.values=x}else y=Dje(p,m,g,n);return d&&n.disposeIntermediateTensorInfo(p),y}const Fje={kernelName:MS,backendName:"webgl",kernelFunc:_Z};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mje=OD+`
  return max(a, b);
`,Lje=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+ld+`
  return result;
`,zje=kr({opSnippet:Mje,packedOpSnippet:Lje,cpuKernelImpl:WFe}),Bje={kernelName:Gy,backendName:"webgl",kernelFunc:zje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jje(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e;D0(o,"maxPool");const{filterSize:s,strides:i,pad:a,dimRoundingMode:l}=r,u=1;A(xr(i,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=Ys(o.shape,s,i,u,a,l);if(c.filterWidth===1&&c.filterHeight===1&&ct(c.inShape,c.outShape))return jo({inputs:{x:o},backend:n});const d=new pg(c,"max",!1);return n.runWebGLProgram(d,[o],o.dtype)}const Vje={kernelName:LS,backendName:"webgl",kernelFunc:jje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wje(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{filterSize:s,strides:i,pad:a,dataFormat:l,dimRoundingMode:u}=r,c=[1,1,1],d=dl(o.shape,s,i,c,a,u,l),f=new RD(d,"max",!1);return n.runWebGLProgram(f,[o],o.dtype)}const Uje={kernelName:zS,backendName:"webgl",kernelFunc:Wje};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Gje{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,o=e.dilationHeight,s=e.effectiveFilterHeight,i=e.effectiveFilterWidth,a=s-1-e.padInfo.top,l=i-1-e.padInfo.left,u=s*i-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${s};
          wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${i}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${u} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${i} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class Hje{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,i=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterDepth,u=e.effectiveFilterHeight,c=e.effectiveFilterWidth,d=l-1-e.padInfo.front,f=u-1-e.padInfo.top,p=c-1-e.padInfo.left,h=l*u*c-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${f}, ${p});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${s}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${u};
              wR += ${i}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${c};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${h} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${u} * ${c} +
                  wR * ${c} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qje(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:s}=e,i=s,{filterSize:a,strides:l,pad:u,dimRoundingMode:c}=r,d=[1,1,1],f=dl(i.shape,a,l,d,u,c),p=new RD(f,"max",!0),h=n.runWebGLProgram(p,[i],i.dtype),m=new Hje(f),g=n.runWebGLProgram(m,[o,h],i.dtype);return n.disposeIntermediateTensorInfo(h),g}const Kje={kernelName:ZO,backendName:"webgl",kernelFunc:qje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xje(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:s,output:i}=e,a=s;D0([s,i],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=r,f=Ys(a.shape,l,u,1,c,d),p=!0,h=new pg(f,"max",p),m=n.runWebGLProgram(h,[a],a.dtype),g=new Gje(f),y=n.runWebGLProgram(g,[o,m],a.dtype);return n.disposeIntermediateTensorInfo(m),y}const Yje={kernelName:YO,backendName:"webgl",kernelFunc:Xje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zje(t,e,n,r){let o=new pg(n,"max",!1);const s=r.runWebGLProgram(o,[t],"float32");o=new pg(n,"max",!0,!0,e);const i=r.runWebGLProgram(o,[t],"float32");return[s,i]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qje={kernelName:QO,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:o,strides:s,pad:i,includeBatchInIndex:a}=e,l=n;A(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const u=[1,1];A(xr(s,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${u}'`);const c=Ys(r.shape,o,s,u,i),[d,f]=Zje(r,a,c,l);return[d,f]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jje(t,e,n,r){const o=ne(e),i=ne(t.shape)/o,a=ge({inputs:{x:t},attrs:{shape:[i,o]},backend:r}),l=ud(a,"float32","mean",r),u=ge({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e4e={kernelName:BS,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:o,axis:s}=e,i=n,a=r.shape.length,l=rt(s,r.shape);let u=l;const c=gn(u,a),d=c!=null,f=i.shouldExecuteOnCPU([r]),p=[];let h=r;if(d){if(f){const x=i.texData.get(h.dataId).values,w=new Array(a);for(let $=0;$<w.length;$++)w[$]=r.shape[c[$]];const S=AD(x,r.shape,r.dtype,c,w);h=i.makeTensorInfo(w,r.dtype);const k=i.texData.get(h.dataId);k.values=S}else h=Qk(r,c,i);p.push(h),u=Nn(u.length,a)}wr("sum",u,a);const[m,g]=ar(h.shape,u);let y=m;o&&(y=In(m,l));const v=Jje(h,g,y,i);for(const b of p)i.disposeIntermediateTensorInfo(b);return v}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r,a=o.shape.length,l=rt(s,o.shape);let u=l;const c=gn(u,a);let d=o;c!=null&&(d=Jr({inputs:{x:o},backend:n,attrs:{perm:c}}),u=Nn(u.length,o.shape.length)),wr("min",u,a);const[f,p]=ar(d.shape,u),h=ne(p),m=ge({inputs:{x:d},backend:n,attrs:{shape:[-1,h]}}),g=ud(m,m.dtype,"min",n);let y;if(i){const v=In(f,l);y=ge({inputs:{x:g},backend:n,attrs:{shape:v}})}else y=ge({inputs:{x:g},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(d),y}const n4e={kernelName:jS,backendName:"webgl",kernelFunc:t4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r4e=OD+`
  return min(a, b);
`,o4e=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+ld+`
  return result;
`,s4e=kr({opSnippet:r4e,packedOpSnippet:o4e,cpuKernelImpl:UFe}),i4e={kernelName:Hy,backendName:"webgl",kernelFunc:s4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class a4e{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((c,d)=>c[0]+e[d]+c[1]);const o=e.length,s=Rt(o),i=n.map(c=>c[0]).join(","),a=n.map((c,d)=>c[0]+e[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o),u=r==="reflect"?0:1;if(o===1){this.userCode=`
        int start = ${i};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${u};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${u};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${i});
      ${s} end = ${s}(${a});

      void main() {
        ${s} outC = getOutputCoords();
        for (int i = 0; i < ${o}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${u};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${u};
          }
        }
        ${s} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class l4e{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((h,m)=>h[0]+e[m]+h[1]);const o=e.length,s=Rt(o),i=n.map(h=>h[0]).join(","),a=n.map((h,m)=>h[0]+e[m]).join(","),l=Xr("rc",o),u=Xr("source",o),c=`${l[o-1]} < ${this.outputShape[o-1]}`,d=o===1?"source":`vec2(${u.slice(-2).join()})`,f=r==="reflect"?0:1;let p="";if(o===1){const h=`
        ${s} source = rc;
        if (source < start) {
          source = start * 2 - source - ${f};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${f};
        }
        source -= start;
      `;p=`
        ${s} rc = outputLoc;
        ${h}
        result[0] = getChannel(getX(${u.join()}), ${d});
        ${l[o-1]} += 1;
        if(${c}) {
          ${h}
          result[1] = getChannel(getX(${u.join()}), ${d});
        }
      `}else{const h=`
        ${s} source = rc;
        ${s} lt = ${s}(lessThan(source, start));
        ${s} gte = ${s}(greaterThanEqual(source, end));
        ${s} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${f}) +
                gte * ((end - 1) * 2 - source + ${f});
        source -= start;
      `;p=`
        ${s} rc = outputLoc;
        ${h}
        result[0] = getChannel(getX(${u.join()}), ${d});
        ${l[o-1]} += 1;
        if(${c}) {
          ${h}
          result[1] = getChannel(getX(${u.join()}), ${d});
        }
        rc = outputLoc;
        ${l[o-2]} += 1;
        if(${l[o-2]} < ${this.outputShape[o-2]}) {
          ${h}
          result[2] = getChannel(getX(${u.join()}), ${d});
          ${l[o-1]} += 1;
          if(${c}) {
            ${h}
            result[3] = getChannel(getX(${u.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${s} start = ${s}(${i});
      const ${s} end = ${s}(${a});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u4e=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:o,mode:s}=n,i=J().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new l4e(r.shape,o,s):new a4e(r.shape,o,s);return e.runWebGLProgram(i,[r],r.dtype)},c4e={kernelName:VS,backendName:"webgl",kernelFunc:u4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d4e=`if (b == 0.0) return NAN;
  return mod(a, b);`,f4e=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+ld+`
  return result;
`,p4e=kr({opSnippet:d4e,packedOpSnippet:f4e}),h4e={kernelName:qy,backendName:"webgl",kernelFunc:p4e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class m4e{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g4e=`
if (a == b) {
  return 1.0;
};
return a / b;`,y4e=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,IZ=kr({opSnippet:g4e,packedOpSnippet:y4e,checkOutOfBounds:!0}),v4e={kernelName:Ay,backendName:"webgl",kernelFunc:IZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sj="return a - b;",NZ=kr({opSnippet:sj,packedOpSnippet:sj,supportsComplex:!0,cpuKernelImpl:dMe}),b4e={kernelName:u0,backendName:"webgl",kernelFunc:NZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EZ(t){const{inputs:e,backend:n,attrs:r}=t,{logits:o}=e,{dim:s}=r,i=rt([s],o.shape),a=_Z({inputs:{x:o},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),l=In(a.shape,i),u=ge({inputs:{x:a},backend:n,attrs:{shape:l}}),c=NZ({inputs:{a:o,b:u},backend:n}),d=$Z({inputs:{x:c},backend:n}),f=Jk({inputs:{x:d},backend:n,attrs:{axis:i,keepDims:!1}}),p=ge({inputs:{x:f},backend:n,attrs:{shape:l}}),h=IZ({inputs:{a:d,b:p},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),h}const x4e={kernelName:ik,backendName:"webgl",kernelFunc:EZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w4e(t){const{inputs:e,backend:n,attrs:r}=t,{logits:o}=e,{numSamples:s,seed:i,normalized:a}=r,l=a?o:EZ({inputs:{logits:o},backend:n,attrs:{dim:o.shape.length-1}}),u=l.shape[0],c=l.shape[1],d=new m4e(u,c,s),f=[[i]],p=n.runWebGLProgram(d,[l],"int32",f);return a||n.disposeIntermediateTensorInfo(l),p}const S4e={kernelName:JO,backendName:"webgl",kernelFunc:w4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k4e=Qs+`
  return -x;
`,$4e=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function C4e(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const s=n.texData.get(r.dataId),[i,a]=HFe(s.values,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,i)}let o;return J().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new Rl(r.shape,$4e):o=new Ki(r.shape,k4e),n.runWebGLProgram(o,[r],r.dtype)}const T4e={kernelName:WS,backendName:"webgl",kernelFunc:C4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _4e=gR;function I4e(t){Zo("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:o,scores:s}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l}=r,u=n.readSync(o.dataId),c=n.readSync(s.dataId),{selectedIndices:d}=_4e(u,c,i,a,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const N4e={kernelName:eP,backendName:"webgl",kernelFunc:I4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E4e=yR;function A4e(t){Zo("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:o,scores:s}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:u}=r,c=n.readSync(o.dataId),d=n.readSync(s.dataId),{selectedIndices:f,validOutputs:p}=E4e(c,d,i,a,l,u);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}const O4e={kernelName:tP,backendName:"webgl",kernelFunc:A4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P4e=vR;function R4e(t){Zo("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:o,scores:s}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,softNmsSigma:u}=r,c=n.readSync(o.dataId),d=n.readSync(s.dataId),f=i,p=a,h=l,m=u,{selectedIndices:g,selectedScores:y}=P4e(c,d,f,p,h,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}const D4e={kernelName:nP,backendName:"webgl",kernelFunc:R4e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class F4e{constructor(e,n,r,o){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${o}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M4e=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:o}=e,{dtype:s,depth:i,onValue:a,offValue:l}=r,u=ne(o.shape),c=new F4e(u,i,a,l),d=ge({inputs:{x:o},backend:n,attrs:{shape:[u]}}),f=n.runWebGLProgram(c,[d],s);n.disposeIntermediateTensorInfo(d);const p=[...o.shape,i],h=ge({inputs:{x:f},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(f),h},L4e={kernelName:HS,backendName:"webgl",kernelFunc:M4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l1(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const o=M0({inputs:{input:r},backend:n}),s=l1({inputs:{x:o},backend:n}),i=e$({inputs:{input:r},backend:n}),a=l1({inputs:{x:i},backend:n}),l=Au({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return L0({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const z4e={kernelName:ck,backendName:"webgl",kernelFunc:l1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AZ(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const o=M0({inputs:{input:r},backend:n}),s=AZ({inputs:{x:o},backend:n}),i=e$({inputs:{input:r},backend:n}),a=l1({inputs:{x:i},backend:n}),l=Au({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return L0({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const B4e={kernelName:GS,backendName:"webgl",kernelFunc:AZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j4e(t){const{inputs:e,backend:n,attrs:r}=t,{axis:o}=r;if(e.length===1)return o2({inputs:{input:e[0]},backend:n,attrs:{dim:o}});const s=e[0].shape,i=e[0].dtype;e.forEach(c=>{Wo(s,c.shape,"All tensors passed to stack must have matching shapes"),A(i===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(c=>{const d=o2({inputs:{input:c},backend:n,attrs:{dim:o}});return a.push(d),d}),u=gZ({inputs:l,backend:n,attrs:{axis:o}});return a.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const V4e={kernelName:qS,backendName:"webgl",kernelFunc:j4e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class W4e{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((u,c)=>u[0]+e[c]+u[1]);const o=e.length,s=Rt(o),i=n.map(u=>u[0]).join(","),a=n.map((u,c)=>u[0]+e[c]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o);if(o===1){this.userCode=`
        int start = ${i};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${i});
      ${s} end = ${s}(${a});

      void main() {
        ${s} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${s} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class U4e{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((m,g)=>m[0]+e[g]+m[1]);const o=e.length,s=Rt(o),i=n.map(m=>m[0]).join(","),a=n.map((m,g)=>m[0]+e[g]).join(","),l=Xr("rc",o),u=Xr("source",o),c=`${l[o-1]} < ${this.outputShape[o-1]}`,d=o===1?"source":`vec2(${u.slice(-2).join()})`,f=[`${s} rc = outputLoc;`,`${l[o-1]} += 1;
       if(${c}) {
      `,o===1?"":`}
       rc = outputLoc;
       ${l[o-2]} += 1;
       if(${l[o-2]} < ${this.outputShape[o-2]}) {`,o===1?"":`  ${l[o-1]} += 1;
         if(${c}) {`],p=o===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let h="";for(let m=0,g=o===1?2:4;m<g;m++)h+=`
        ${f[m]}
        if (${p}) {
          result[${m}] = float(value);
        } else {
          ${s} source = rc - start;
          result[${m}] = getChannel(getX(${u.join()}), ${d});
        }
      `;h+=o===1?"} ":"}}",this.userCode=`
      const ${s} start = ${s}(${i});
      const ${s} end = ${s}(${a});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OZ=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{paddings:s,constantValue:i}=r;if(ne(o.shape)===0){const u=s.map((c,d)=>c[0]+o.shape[d]+c[1]);return L0({backend:n,attrs:{shape:u,value:i,dtype:o.dtype}})}const a=J().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new U4e(o.shape,s,i):new W4e(o.shape,s,i),l=[[i]];return n.runWebGLProgram(a,[o],o.dtype,l)},G4e={kernelName:KS,backendName:"webgl",kernelFunc:OZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H4e=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,q4e=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+ld+`
  return result;
`,K4e=kr({opSnippet:H4e,packedOpSnippet:q4e}),X4e={kernelName:Xy,backendName:"webgl",kernelFunc:K4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r,a=o.shape.length,l=[],u=rt(s,o.shape);let c=u;const d=gn(c,a);let f=o;d!=null&&(f=Jr({inputs:{x:o},backend:n,attrs:{perm:d}}),c=Nn(c.length,a),l.push(f)),wr("prod",c,a);let p;if(n.shouldExecuteOnCPU([f])){const h=n.texData.get(f.dataId).values,{outVals:m,outShape:g,outDtype:y}=KFe(f.shape,f.dtype,h,c);p=n.makeTensorInfo(g,y,m)}else{const[h,m]=ar(f.shape,c),g=ne(m),y=ge({inputs:{x:f},backend:n,attrs:{shape:[-1,g]}}),v=IP(o.dtype),b=ud(y,v,"prod",n);p=ge({inputs:{x:b},backend:n,attrs:{shape:h}}),l.push(y),l.push(b)}if(i){l.push(p);const h=In(p.shape,u);p=ge({inputs:{x:p},backend:n,attrs:{shape:h}})}return l.forEach(h=>n.disposeIntermediateTensorInfo(h)),p}const Z4e={kernelName:YS,backendName:"webgl",kernelFunc:Y4e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q4e(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:o,paramsDenseValues:s,indices:i}=e,{outputRaggedRank:a}=r,l=o.map(y=>n.readSync(y.dataId)),u=o.map(y=>y.shape),c=n.readSync(s.dataId),d=n.readSync(i.dataId),[f,p,h]=XFe(l,u,c,s.shape,s.dtype,d,i.shape,a),m=f.map(y=>n.makeTensorInfo([y.length],"int32",y)),g=n.makeTensorInfo(h,s.dtype,p);return m.concat([g])}const J4e={kernelName:rP,backendName:"webgl",kernelFunc:Q4e};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eVe(t){const{inputs:e,backend:n}=t,{starts:r,limits:o,deltas:s}=e,i=n.readSync(r.dataId),a=n.readSync(o.dataId),l=n.readSync(s.dataId),[u,c]=YFe(i,r.shape,r.dtype,a,o.shape,l,s.shape),d=n.makeTensorInfo([u.length],"int32",u),f=n.makeTensorInfo([c.length],r.dtype,c);return[d,f]}const tVe={kernelName:oP,backendName:"webgl",kernelFunc:eVe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nVe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:o,values:s,defaultValue:i,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,u=n.readSync(o.dataId),c=n.readSync(s.dataId),d=n.readSync(i.dataId),f=a.map(g=>n.readSync(g.dataId)),p=a.map(g=>g.shape),[h,m]=ZFe(u,o.shape,c,s.shape,s.dtype,d,i.shape,f,p,l);return n.makeTensorInfo(h,s.dtype,m)}const rVe={kernelName:sP,backendName:"webgl",kernelFunc:nVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PZ=t=>{const{backend:e,attrs:n}=t,{start:r,stop:o,step:s,dtype:i}=n,a=QFe(r,o,s,i);return e.makeTensorInfo([a.length],i,a)},oVe={kernelName:iP,backendName:"webgl",kernelFunc:PZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sVe="return 1.0 / x;",iVe=mt({opSnippet:sVe}),aVe={kernelName:Yy,backendName:"webgl",kernelFunc:iVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lVe=Qs+`
  return (x < 0.0) ? 0.0 : x;
`,uVe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,cVe=mt({opSnippet:lVe,packedOpSnippet:uVe}),dVe={kernelName:Zy,backendName:"webgl",kernelFunc:cVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fVe=Qs+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,pVe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,hVe=mt({opSnippet:fVe,packedOpSnippet:pVe}),mVe={kernelName:Qy,backendName:"webgl",kernelFunc:hVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gVe{constructor(e,n,r,o,s){this.variableNames=["A"],this.outputShape=[];const[i,a,l,u]=e;this.outputShape=[i,n,r,u];const c=[o&&n>1?a-1:a,o&&r>1?l-1:l],d=[o&&n>1?n-1:n,o&&r>1?r-1:r];let f;s?f="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yVe{constructor(e,n,r,o,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,a,l,u]=e;this.outputShape=[i,n,r,u];const c=[o&&n>1?a-1:a,o&&r>1?l-1:l],d=[o&&n>1?n-1:n,o&&r>1?r-1:r];let f;s?f="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vVe(t){const{inputs:e,backend:n,attrs:r}=t,{images:o}=e,{alignCorners:s,halfPixelCenters:i,size:a}=r,[l,u]=a,c=J().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new yVe(o.shape,l,u,s,i):new gVe(o.shape,l,u,s,i);return n.runWebGLProgram(c,[o],"float32")}const bVe={kernelName:JS,backendName:"webgl",kernelFunc:vVe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xVe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,o,s]=n,[,i,a]=e,l=[r&&i>1?o-1:o,r&&a>1?s-1:s],u=[r&&i>1?i-1:i,r&&a>1?a-1:a],c=l[0]/u[0],d=l[1]/u[1],f=1/c,p=1/d,h=Math.ceil(f)*2+2,m=Math.ceil(p)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${d});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${p});

        const int winHeight = int(${h});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${o-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${s-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wVe(t){const{inputs:e,backend:n,attrs:r}=t,{images:o,dy:s}=e,{alignCorners:i}=r,a=new xVe(s.shape,o.shape,i);return n.runWebGLProgram(a,[s],s.dtype)}const SVe={kernelName:uP,backendName:"webgl",kernelFunc:wVe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kVe{constructor(e,n,r,o,s){this.variableNames=["A"],this.outputShape=[];const[i,a,l,u]=e;this.outputShape=[i,n,r,u];const c=[o&&n>1?a-1:a,o&&r>1?l-1:l],d=[o&&n>1?n-1:n,o&&r>1?r-1:r],f=o?"0.5":"0.0";let p;s?p="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":p="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${p};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $Ve{constructor(e,n,r,o,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,a,l,u]=e;this.outputShape=[i,n,r,u];const c=[o&&n>1?a-1:a,o&&r>1?l-1:l],d=[o&&n>1?n-1:n,o&&r>1?r-1:r],f=o?"0.5":"0.0";let p;s?p="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":p="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${p};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CVe(t){const{inputs:e,backend:n,attrs:r}=t,{images:o}=e,{alignCorners:s,halfPixelCenters:i,size:a}=r,[l,u]=a,c=J().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new $Ve(o.shape,l,u,s,i):new kVe(o.shape,l,u,s,i);return n.runWebGLProgram(c,[o],o.dtype)}const TVe={kernelName:QS,backendName:"webgl",kernelFunc:CVe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Ve{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,o,s]=n,[,i,a]=e,l=[r&&i>1?o-1:o,r&&a>1?s-1:s],u=[r&&i>1?i-1:i,r&&a>1?a-1:a],c=l[0]/u[0],d=l[1]/u[1],f=1/c,p=1/d,h=Math.ceil(f)*2+2,m=Math.ceil(p)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${d});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${p});

        const int winHeight = int(${h});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${u[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${u[1]}));

            int sourceNearestRow = int(min(
                float(int(${o}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IVe(t){const{inputs:e,backend:n,attrs:r}=t,{images:o,dy:s}=e,{alignCorners:i}=r,a=new _Ve(s.shape,o.shape,i);return n.runWebGLProgram(a,[s],s.dtype)}const NVe={kernelName:lP,backendName:"webgl",kernelFunc:IVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EVe{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const o=a=>n.indexOf(a)!==-1&&e[a]!==1?`${e[a]} - coords[${a}] - 1`:`coords[${a}]`,s=e.map((a,l)=>o(l)).join(","),i=Rt(r);this.userCode=`
      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${s}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AVe{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const o=Xr("rc",r),s=`${o[r-1]} + 1 < ${this.outputShape[r-1]}`,i=`${o[r-2]} + 1 < ${this.outputShape[r-2]}`,a=Rt(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${s}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(o.slice())};
          if(${s}){
            result.g = ${u(o.slice())};
          }
          if(${i}) {
            result.b = ${c(o.slice())};
            if(${s}) {
              result.a = ${d(o.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(h){return f(h)}function u(h){return h[r-1]="("+h[r-1]+" + 1)",f(h)}function c(h){return h[r-2]="("+h[r-2]+" + 1)",f(h)}function d(h){return h[r-1]="("+h[r-1]+" + 1)",h[r-2]="("+h[r-2]+" + 1)",f(h)}function f(h){const m=e.map((v,b)=>p(b,h)),g=m.join(","),y=m.slice(-2).join(",");return`getChannel(getX(${g}), vec2(${y}))`}function p(h,m){return n.indexOf(h)!==-1&&e[h]!==1?`${e[h]} - ${m[h]} - 1`:`${m[h]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{dims:s}=r,i=o.shape.length,a=rt(s,o.shape);if(i===0)return jo({inputs:{x:o},backend:n});const l=J().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new AVe(o.shape,a):new EVe(o.shape,a);return n.runWebGLProgram(l,[o],o.dtype)}const PVe={kernelName:ek,backendName:"webgl",kernelFunc:OVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RVe{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],o=e[2];this.outputShape=e;let s="";typeof n=="number"?s=`float outputValue = ${n.toFixed(2)};`:s=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${s}
          if(coordX >= 0 && coordX < ${o} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DVe={kernelName:TP,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:o,fillValue:s,center:i}=e,a=n,l=new RVe(r.shape,s),[u,c]=OR(i,r.shape[1],r.shape[2]),d=[[u,c,Math.sin(o),Math.cos(o)]];return a.runWebGLProgram(l,[r],r.dtype,d)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FVe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,MVe=mt({opSnippet:FVe}),LVe={kernelName:Jy,backendName:"webgl",kernelFunc:MVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zVe="return inversesqrt(x);",BVe=mt({opSnippet:zVe,cpuKernelImpl:JFe}),jVe={kernelName:e0,backendName:"webgl",kernelFunc:BVe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DD{constructor(e,n,r,o,s,i,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;const u=Rt(s.length),c=Rt(i.length);let d="";r===1?d="i":r===2&&(d="i, j");const f=`getIndices(${d})`;let p="";o===1?p="i":o===2&&(p="i, coords[1]");const h=`getUpdates(${p})`;let m="";l&&(m="coords[0], coords[1]");const g=`getDefaultValue(${m})`,y=n>1?"strides[j]":"strides";this.userCode=`
        ${u} strides = ${u}(${s});

        void main() {
          ${c} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${f});
              flattenedIndex += index * ${y};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${h};
              found = true;
            }
          }
          setOutput(mix(${g}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VVe{constructor(e,n,r,o,s,i,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=i;const u=Rt(s.length),c=Rt(i.length);let d="";r===1?d="i":r===2&&(d="i, j");const f=`getIndices(${d})`;let p="";o===1?p="i":o===2&&(p="i, coords[1]");const h=`getUpdates(${p})`;let m="";l&&(m="coords[0], coords[1]");const g=`getDefaultValue(${m})`,y=n>1?"strides[j]":"strides",v=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${u} strides = ${u}(${s});

        void main() {
          ${c} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${f});
              flattenedIndex += index.xz * ${y};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${v};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${h};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${g}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WVe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:o,updates:s}=e,{shape:i}=r,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=rd(s,o,i),f=[d/u,u];if(d===0)return n.makeTensorInfo(i,o.dtype);const p=ge({inputs:{x:o},backend:n,attrs:{shape:[l,a]}}),h=ge({inputs:{x:s},backend:n,attrs:{shape:[l,u]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0]));let g;J().getBool("WEBGL_PACK")?g=new VVe(l,a,p.shape.length,h.shape.length,c,f):g=new DD(l,a,p.shape.length,h.shape.length,c,f);const y=n.runWebGLProgram(g,[h,p,m],h.dtype),v=ge({inputs:{x:y},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(m),v}const UVe={kernelName:cP,backendName:"webgl",kernelFunc:WVe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GVe{constructor(e,n,r,o){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const s="while (left < right) {",i=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,a=J().getNumber("WEBGL_VERSION")===2?s:i,l=o==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HVe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:o,values:s}=e,{side:i}=r,a=new GVe(o.shape[0],o.shape[1],s.shape[1],i),l=[[o.shape[1]]];return n.runWebGLProgram(a,[o,s],"int32",l)}const qVe={kernelName:fP,backendName:"webgl",kernelFunc:HVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KVe{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let o,s;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)s="resRC",o="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],u=[];for(let c=0;c<n.length;c++)u.push(`${a[c]}`),c<e&&l.push(`${a[c]}`);o=l.join(),s=u.join()}const i=Rt(r);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        float cVal = getC(${o});
        if (cVal >= 1.0) {
          setOutput(getA(${s}));
        } else {
          setOutput(getB(${s}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XVe(t){const{inputs:e,backend:n}=t,{condition:r,t:o,e:s}=e,i=new KVe(r.shape.length,o.shape,o.shape.length);return n.runWebGLProgram(i,[r,o,s],Fo(o.dtype,s.dtype))}const YVe={kernelName:tk,backendName:"webgl",kernelFunc:XVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZVe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${Fk};
  float scale = ${Mk};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,QVe=mt({opSnippet:ZVe}),JVe={kernelName:t0,backendName:"webgl",kernelFunc:QVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eWe=Wp+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,tWe=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,nWe=mt({opSnippet:eWe,packedOpSnippet:tWe,cpuKernelImpl:tMe}),rWe={kernelName:s0,backendName:"webgl",kernelFunc:nWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oWe=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,sWe=mt({opSnippet:oWe}),iWe={kernelName:o0,backendName:"webgl",kernelFunc:sWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aWe=Wp+`
  return sin(x);
`,lWe=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${ld}
  return result;
`,uWe=mt({opSnippet:aWe,packedOpSnippet:lWe}),cWe={kernelName:n0,backendName:"webgl",kernelFunc:uWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dWe=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,fWe=mt({opSnippet:dWe}),pWe={kernelName:r0,backendName:"webgl",kernelFunc:fWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hWe=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,mWe=mt({opSnippet:hWe}),gWe={kernelName:i0,backendName:"webgl",kernelFunc:mWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yWe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{blockShape:s,paddings:i}=r;A(o.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=s.reduce((y,v)=>y*v),l=[[0,0]];l.push(...i);for(let y=1+s.length;y<o.shape.length;++y)l.push([0,0]);const u=[],c=OZ({inputs:{x:o},backend:n,attrs:{paddings:l,constantValue:0}}),d=S0(c.shape,s,a,!1),f=k0(d.length,s.length,!1),p=$0(c.shape,s,a,!1),h=ge({inputs:{x:c},backend:n,attrs:{shape:d}}),m=Jr({inputs:{x:h},backend:n,attrs:{perm:f}}),g=ge({inputs:{x:m},backend:n,attrs:{shape:p}});return u.push(c),u.push(h),u.push(m),u.forEach(y=>n.disposeIntermediateTensorInfo(y)),g},vWe={kernelName:ok,backendName:"webgl",kernelFunc:yWe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bWe(t){const{inputs:e,backend:n}=t,{indices:r,values:o,denseShape:s,defaultValue:i}=e;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(o.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${o.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);const a=n.readSync(r.dataId),l=n.readSync(o.dataId),u=n.readSync(s.dataId),c=n.readSync(i.dataId)[0],[d,f,p,h,m]=rMe(a,r.shape,r.dtype,l,o.dtype,u,c);return[n.makeTensorInfo(f,r.dtype,d),n.makeTensorInfo([f[0]],o.dtype,p),n.makeTensorInfo([h.length],"bool",new Uint8Array(h.map(g=>Number(g)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}const xWe={kernelName:pP,backendName:"webgl",kernelFunc:bWe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wWe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:o,newShape:s}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(o.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${o.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const i=Array.from(n.readSync(o.dataId)),a=n.readSync(r.dataId),l=Array.from(n.readSync(s.dataId)),[u,c,d]=oMe(a,r.shape,r.dtype,i,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([d.length],s.dtype,new Int32Array(d))]}const SWe={kernelName:hP,backendName:"webgl",kernelFunc:wWe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kWe(t){const{inputs:e,backend:n}=t,{data:r,indices:o,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${o.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${s.shape}`);const i=n.readSync(r.dataId),a=n.readSync(o.dataId),l=n.readSync(s.dataId),[u,c]=rZ(i,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(c,r.dtype,u)}const $We={kernelName:mP,backendName:"webgl",kernelFunc:kWe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CWe(t){const{inputs:e,backend:n}=t,{data:r,indices:o,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${o.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${s.shape}`);const i=n.readSync(r.dataId),a=n.readSync(o.dataId),l=n.readSync(s.dataId),[u,c]=rZ(i,r.shape,r.dtype,a,l);return n.makeTensorInfo(c,r.dtype,u)}const TWe={kernelName:gP,backendName:"webgl",kernelFunc:CWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _We(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:o,sparseValues:s,defaultValue:i}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:f}=rd(s,o,a),p=!1;if(s.dtype==="string"){const y=n.bufferSync(o),v=n.bufferSync(s),b=ru(n.readSync(i.dataId)[0]),x=eMe(y,v,a,f,c,u,l,d,b,p);return n.makeTensorInfo(a,x.dtype,x.values)}const h=new DD(u,l,o.shape.length,s.shape.length,d,[f,1],p),m=n.runWebGLProgram(h,[s,o,i],s.dtype),g=ge({inputs:{x:m},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(m),g}const IWe={kernelName:yP,backendName:"webgl",kernelFunc:_We};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{numOrSizeSplits:s,axis:i}=r,a=rt(i,o.shape)[0],l=qR(o,s,a),u=o.shape.length,c=new Array(u).fill(0),d=o.shape.slice();return l.map(f=>{const p=[...d];p[a]=f;const h=Up({inputs:{x:o},backend:n,attrs:{begin:c,size:p}});return c[a]+=f,h})}const EWe={kernelName:sk,backendName:"webgl",kernelFunc:NWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ij="return sqrt(x);",AWe=mt({opSnippet:ij,packedOpSnippet:ij,cpuKernelImpl:sMe}),OWe={kernelName:a0,backendName:"webgl",kernelFunc:AWe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PWe="return x * x;",RWe=mt({opSnippet:PWe}),DWe={kernelName:vP,backendName:"webgl",kernelFunc:RWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aj="return (a - b) * (a - b);",FWe=kr({opSnippet:aj,packedOpSnippet:aj}),MWe={kernelName:l0,backendName:"webgl",kernelFunc:FWe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e;if(o.dtype!=="string")throw new Error("Input must be of datatype string");const s=n.readSync(o.dataId),i=nl(s),a=iMe(i,"string",r);return n.makeTensorInfo(o.shape,"string",a)}const zWe={kernelName:ak,backendName:"webgl",kernelFunc:LWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BWe({inputs:t,attrs:e,backend:n}){const{x:r}=t,o=Qs+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,s=new Ki(r.shape,o);return n.runWebGLProgram(s,[r],r.dtype)}const jWe={kernelName:p0,backendName:"webgl",kernelFunc:BWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VWe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const o=r.length,s=Rt(r.length),i=Rt(r.length);let a="";if(o===1)a="coords * strides + begin";else{let l=0;a=r.map((u,c)=>(l++,r.length===1?`coords * strides[${c}] + begin[${c}]`:`coords[${l-1}] * strides[${c}] + begin[${c}]`)).join(",")}this.userCode=`
      ${s} begin = ${s}(${e});
      ${s} strides = ${s}(${n});

      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{begin:s,end:i,strides:a,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:f}=r,{finalShapeSparse:p,finalShape:h,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:v,end:b,strides:x}=NR(o.shape,s,i,a,l,u,c,d,f);let w;if(m)w=ge({inputs:{x:o},backend:n,attrs:{shape:h}});else if(g||y){A(o.shape.length>=1,()=>`Input must have rank at least 1, got: ${o.shape.length}`);const k=TR(v,b,x),$=Up({inputs:{x:o},backend:n,attrs:{begin:v,size:k}});w=ge({inputs:{x:$},backend:n,attrs:{shape:h}}),n.disposeIntermediateTensorInfo($)}else if(n.shouldExecuteOnCPU([o])){const $=n.readSync(o.dataId),C=Qe(o.shape,o.dtype,$),I=aMe(p,C,x,v);w=n.makeTensorInfo(h,o.dtype,I.values)}else{const $=new VWe(v,x,p);w=n.runWebGLProgram($,[o],o.dtype)}const S=ge({inputs:{x:w},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(w),S}const UWe={kernelName:bP,backendName:"webgl",kernelFunc:WWe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GWe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:o,nGramWidths:s,leftPad:i,rightPad:a,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:d}=e,f=n.readSync(c.dataId),p=n.readSync(d.dataId),[h,m]=lMe(f,p,o,s,i,a,l,u);return[n.makeTensorInfo([h.length],"string",h),n.makeTensorInfo(d.shape,"int32",m)]}const HWe={kernelName:xP,backendName:"webgl",kernelFunc:GWe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qWe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:o}=r,{input:s,delimiter:i}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const a=n.readSync(s.dataId),l=n.readSync(i.dataId)[0],[u,c,d]=uMe(a,l,o),f=c.length;return[n.makeTensorInfo([f,2],"int32",u),n.makeTensorInfo([f],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const KWe={kernelName:wP,backendName:"webgl",kernelFunc:qWe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XWe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:o}=r,{input:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");const i=n.readSync(s.dataId),a=cMe(i,o);return n.makeTensorInfo(s.shape,"int32",a)}const YWe={kernelName:SP,backendName:"webgl",kernelFunc:XWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZWe="return tan(x);",QWe=mt({opSnippet:ZWe}),JWe={kernelName:c0,backendName:"webgl",kernelFunc:QWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e5e=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,t5e=mt({opSnippet:e5e}),n5e={kernelName:d0,backendName:"webgl",kernelFunc:t5e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r5e(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:o,indices:s,updates:i}=e,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=rd(i,s,o.shape),f=[d/u,u];if(d===0)return n.makeTensorInfo(o.shape,s.dtype);const p=ge({inputs:{x:s},backend:n,attrs:{shape:[l,a]}}),h=ge({inputs:{x:i},backend:n,attrs:{shape:[l,u]}}),m=ge({inputs:{x:o},backend:n,attrs:{shape:f}}),g=new DD(l,a,p.shape.length,h.shape.length,c,f,!1,!0),y=n.runWebGLProgram(g,[h,p,m],m.dtype),v=ge({inputs:{x:y},backend:n,attrs:{shape:o.shape}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),v}const o5e={kernelName:dP,backendName:"webgl",kernelFunc:r5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class s5e{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let i=0;i<r.length;i++)r[i]=e[i]*n[i];this.outputShape=r,this.rank=r.length;const o=Rt(this.rank),s=i5e(e);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        setOutput(getA(${s}));
      }
    `}}function i5e(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let o=0;o<t.length;o++)r.push(`imod(${n[o]}, ${t[o]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RZ(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{reps:s}=r;if(o.dtype==="string"||o.shape.length>5){const l=n.readSync(o.dataId),u=o.dtype==="string"?l.map(f=>ru(f)):l,c=Qe(o.shape,o.dtype,u),d=fMe(c,s);return n.makeTensorInfo(d.shape,d.dtype,d.values)}const i=new s5e(o.shape,s);return n.runWebGLProgram(i,[o],o.dtype)}const a5e={kernelName:f0,backendName:"webgl",kernelFunc:RZ};class l5e{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class u5e{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bu(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function lj(t){let e=1;for(;e<t;)e*=2;return e}function c5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{k:s,sorted:i}=r,a=J().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=J().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=o.shape,c=u[u.length-1];if(n.shouldExecuteOnCPU([o])||c<a||s>l){const I=n.readSync(o.dataId),[E,O]=pMe(I,u,o.dtype,s,i);return[n.makeTensorInfo(E.shape,E.dtype,E.values),n.makeTensorInfo(O.shape,O.dtype,O.values)]}if(s===0)return u[u.length-1]=0,[n.makeTensorInfo(u,o.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(c===1)return[o,L0({attrs:{shape:u,dtype:"int32",value:0},backend:n})];const d=n.texData.get(o.dataId),f=d!==null&&d.isPacked,p=f?n.unpackTensor(o):o,m=ne(u)/c,g=ge({inputs:{x:p},attrs:{shape:[m,c]},backend:n});f&&Bu(n,p);const y=lj(s),v=lj(c);let b=null;const x=()=>b===null?[g,g]:[g,b],w=(I,E,O)=>{const R=x(),z=new l5e(O),B=[[c],[b===null?1:0],[Number.NEGATIVE_INFINITY],[I],[E]],D=b;b=n.runWebGLProgram(z,R,"int32",B),Bu(n,D)};for(let I=1;I<y;I*=2){const E=I*2;for(let O=I;O>=1;O/=2)w(E,O,[m,v])}for(let I=v;I>y;I/=2){const E=x(),O=new u5e([m,I/2]),z=[[c],[b===null?1:0],[y]],L=b;b=n.runWebGLProgram(O,E,"int32",z),Bu(n,L);const B=y/2,D=B*2;for(let F=B;F>=1;F/=2)w(D,F,b.shape)}let S=b;b=Up({inputs:{x:b},backend:n,attrs:{begin:0,size:[m,s]}}),Bu(n,S);let k=TZ({inputs:{x:g,indices:b},backend:n,attrs:{axis:1,batchDims:1}});Bu(n,g);const $=u.slice(0,-1);$.push(s),S=b,b=ge({inputs:{x:b},attrs:{shape:$},backend:n}),Bu(n,S);const C=k;return k=ge({inputs:{x:k},attrs:{shape:$},backend:n}),Bu(n,C),[k,b]}const d5e={kernelName:kP,backendName:"webgl",kernelFunc:c5e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class f5e{constructor(e,n,r,o,s,i){this.variableNames=["Image","Transforms"],this.outputShape=i;const a=r==="nearest"?1:2;let l;switch(o){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${s});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${s});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p5e(t){const{inputs:e,backend:n,attrs:r}=t,{image:o,transforms:s}=e,{interpolation:i,fillMode:a,fillValue:l,outputShape:u}=r,[c,d,f,p]=o.shape,[h,m]=u??[d,f],g=[c,h,m,p],y=new f5e(d,f,i,a,l,g);return n.runWebGLProgram(y,[o,s],"float32")}const h5e={kernelName:$P,backendName:"webgl",kernelFunc:p5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m5e(t){const{inputs:e,attrs:n,backend:r}=t,{axis:o}=n,{x:s}=e;D0(s,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const i=r.readSync(s.dataId),{outputValues:a,outputShape:l,indices:u}=hMe(i,o,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,a),r.makeTensorInfo([u.length],"int32",u)]}const g5e={kernelName:CP,backendName:"webgl",kernelFunc:m5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y5e(t){const{inputs:e,backend:n,attrs:r}=t,{value:o}=e;let{axis:s}=r;s<0&&(s+=o.shape.length);const i=o,a=i.shape.length,l=o.shape[s],u=new Array(a-1);let c=0;for(let m=0;m<a;m++)m!==s&&(u[c++]=i.shape[m]);const d=[],f=new Array(a).fill(0),p=i.shape.slice();p[s]=1;const h=new Array(l);for(let m=0;m<h.length;m++){f[s]=m;const g=Up({inputs:{x:i},backend:n,attrs:{begin:f,size:p}}),y=ge({inputs:{x:g},backend:n,attrs:{shape:u}});h[m]=y,d.push(g)}return d.forEach(m=>n.disposeIntermediateTensorInfo(m)),h}const v5e={kernelName:lk,backendName:"webgl",kernelFunc:y5e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class b5e{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,o=e.batchSize,s=e.inSize,i=e.numSegments,a=i*Math.ceil(s/r);this.outputShape=[o,a];const l="0.0",u="sumValue",c=Math.floor(r/4)*4,d=r%4,f=`
        sumValue += dot(values, segFilter);
    `;let p="";s%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `);let h="";s%r>0&&(h=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${h}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${i})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${i})));

        float sumValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${f}
        }

        int inIdx = inOffset + ${c};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${f}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${f}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${f}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,segmentIds:s}=e,{numSegments:i}=r,a=o.shape.length,l=[];let u=0;const c=gn([u],a);let d=o;c!=null&&(d=Jr({inputs:{x:o},backend:n,attrs:{perm:c}}),l.push(d),u=Nn(1,a)[0]);const f=fK(d.shape,u,i),p=ne([d.shape[u]]),h=ge({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}});l.push(h);const m=IP(o.dtype),g=(x,w,S,k,$)=>{const C=x.shape[0],I=x.shape[1],E=dK(I,$),O={windowSize:E,inSize:I,batchSize:C,numSegments:$},R=new b5e(O,w),z=n.compileAndRun(R,[x,S],k);if(l.push(z),z.shape[1]===$)return z;const L=PZ({backend:n,attrs:{start:0,stop:$,step:1,dtype:"float32"}}),B=RZ({inputs:{x:L},backend:n,attrs:{reps:[I/E]}});return l.push(L),l.push(B),g(z,w,B,k,$)},y=g(h,"unsortedSegmentSum",s,m,i),v=ge({inputs:{x:y},backend:n,attrs:{shape:f}});let b=v;if(c!=null){l.push(v);const x=Cu(c);b=Jr({inputs:{x:b},backend:n,attrs:{perm:x}})}return l.forEach(x=>n.disposeIntermediateTensorInfo(x)),b}const w5e={kernelName:uk,backendName:"webgl",kernelFunc:x5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S5e=[sLe,aLe,cLe,pLe,mLe,vLe,xLe,SLe,TLe,ILe,ALe,RLe,MLe,jLe,ULe,HLe,KLe,QLe,e3e,n3e,i3e,p3e,m3e,b3e,w3e,_3e,N3e,P3e,VMe,F3e,j3e,G3e,Z3e,eze,nze,oze,ize,cze,pze,gze,vze,xze,Sze,Cze,_ze,Aze,Pze,Fze,zze,jze,Gze,Xze,Jze,nBe,sBe,iBe,lBe,cBe,fBe,hBe,gBe,xBe,kBe,TBe,IBe,ABe,RBe,LBe,VBe,jMe,UBe,z3e,qBe,YBe,JBe,UMe,rje,aje,uje,pje,gje,xje,kje,_je,Aje,Rje,Fje,Bje,Vje,Uje,Kje,Yje,Qje,e4e,n4e,i4e,c4e,h4e,S4e,qMe,T4e,N4e,O4e,D4e,k3e,L4e,B4e,V4e,G4e,X4e,HMe,Z4e,J4e,tVe,rVe,oVe,$3e,v4e,aVe,dVe,mVe,XMe,bVe,SVe,TVe,NVe,PVe,DVe,LVe,jVe,UVe,qVe,YVe,JVe,rWe,iWe,cWe,pWe,d3e,x4e,gWe,vWe,xWe,SWe,$We,TWe,IWe,EWe,OWe,DWe,MWe,zWe,jWe,UWe,HWe,KWe,YWe,b4e,nLe,JWe,n5e,o5e,a5e,d5e,h5e,rLe,g5e,v5e,w5e,z4e];for(const t of S5e)R8(t);/**
    * @license
    * Copyright 2021 Google LLC. All Rights Reserved.
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    * http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    * =============================================================================
    */function mm(t,e,n,r){return new(n||(n=Promise))(function(o,s){function i(u){try{l(r.next(u))}catch(c){s(c)}}function a(u){try{l(r.throw(u))}catch(c){s(c)}}function l(u){var c;u.done?o(u.value):(c=u.value,c instanceof n?c:new n(function(d){d(c)})).then(i,a)}l((r=r.apply(t,[])).next())})}function gm(t,e){var n,r,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(u){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){i=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(c[0]===6&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(t,i)}catch(d){c=[6,d],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,u])}}}var DZ=function(t){for(var e=[],n=0,r=t;n<r.length;n++){var o=r[n];e.push(o)}return e},uj=function(){return function(){this.parent=null,this.children={},this.end=!1,this.word=[[],0,0]}}(),k5e=function(){function t(){this.root=new uj}return t.prototype.insert=function(e,n,r){for(var o=this.root,s=DZ(e),i=0;i<s.length;i++)o.children[s[i]]||(o.children[s[i]]=new uj,o.children[s[i]].parent=o,o.children[s[i]].word[0]=o.word[0].concat(s[i])),o=o.children[s[i]],i===s.length-1&&(o.end=!0,o.word[1]=n,o.word[2]=r)},t.prototype.commonPrefixSearch=function(e){for(var n=[],r=this.root.children[e[0]],o=0;o<e.length&&r;o++)r.end&&n.push(r.word),r=r.children[e[o+1]];return n.length||n.push([[e[0]],0,0]),n},t}(),cj="";function $5e(t){var e=t.normalize("NFKC");return e.length>0?cj+e.replace(/ /g,cj):e}var C5e=6,T5e=function(){function t(e,n){n===void 0&&(n=C5e),this.vocabulary=e,this.reservedSymbolsCount=n,this.trie=new k5e;for(var r=this.reservedSymbolsCount;r<this.vocabulary.length;r++)this.trie.insert(this.vocabulary[r][0],this.vocabulary[r][1],r)}return t.prototype.encode=function(e){var n=[],r=[],o=[];e=$5e(e);for(var s=DZ(e),i=0;i<=s.length;i++)n.push({}),r.push(0),o.push(0);for(i=0;i<s.length;i++)for(var a=this.trie.commonPrefixSearch(s.slice(i)),l=0;l<a.length;l++){var u=a[l],c={key:u[0],score:u[1],index:u[2]};n[i+(d=u[0].length)][i]==null&&(n[i+d][i]=[]),n[i+d][i].push(c)}for(var d=0;d<=s.length;d++)for(var f in n[d]){var p=n[d][f];for(l=0;l<p.length;l++){var h=p[l],m=h.score+o[d-h.key.length];(o[d]===0||m>=o[d])&&(o[d]=m,r[d]=p[l].index)}}for(var g=[],y=r.length-1;y>0;)g.push(r[y]),y-=this.vocabulary[r[y]][0].length;var v=[],b=!1;for(i=0;i<g.length;i++){var x=g[i];b&&x===0||v.push(x),b=x===0}return v.reverse()},t}();function _5e(t){return mm(this,void 0,void 0,function(){return gm(this,function(e){switch(e.label){case 0:return[4,Oye(t)];case 1:return[2,e.sent().json()]}})})}var I5e="https://storage.googleapis.com/tfjs-models/savedmodel/universal_sentence_encoder";function N5e(t){return mm(this,void 0,void 0,function(){var e;return gm(this,function(n){switch(n.label){case 0:return[4,(e=new E5e).load(t)];case 1:return n.sent(),[2,e]}})})}var E5e=function(){function t(){}return t.prototype.loadModel=function(e){return mm(this,void 0,void 0,function(){return gm(this,function(n){return[2,e?IB(e):IB("https://tfhub.dev/tensorflow/tfjs-model/universal-sentence-encoder-lite/1/default/1",{fromTFHub:!0})]})})},t.prototype.load=function(e){return e===void 0&&(e={}),mm(this,void 0,void 0,function(){var n,r,o;return gm(this,function(s){switch(s.label){case 0:return[4,Promise.all([this.loadModel(e.modelUrl),_5e(e.vocabUrl||I5e+"/vocab.json")])];case 1:return n=s.sent(),r=n[0],o=n[1],this.model=r,this.tokenizer=new T5e(o),[2]}})})},t.prototype.embed=function(e){return mm(this,void 0,void 0,function(){var n,r,o,s,i,a,l,u,c=this;return gm(this,function(d){switch(d.label){case 0:for(typeof e=="string"&&(e=[e]),n=e.map(function(f){return c.tokenizer.encode(f)}),r=n.map(function(f,p){return f.map(function(h,m){return[p,m]})}),o=[],s=0;s<r.length;s++)o=o.concat(r[s]);return i=yc(o,[o.length,2],"int32"),a=Nr(ou(n),"int32"),l={indices:i,values:a},[4,this.model.executeAsync(l)];case 1:return u=d.sent(),i.dispose(),a.dispose(),[2,u]}})})},t}();function A5e(t,e){const n=yc(t),r=n.mean(0),o=n.sub(r),[s,i]=xR.qr(o.transpose()),a=s.slice([0,0],[-1,2]),l=tt(o,a),u=l.arraySync();return n.dispose(),r.dispose(),o.dispose(),s.dispose(),i.dispose(),a.dispose(),l.dispose(),u.map((c,d)=>({x:c[0],y:c[1],label:e[d]}))}function FZ(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=FZ(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function _t(){for(var t,e,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=FZ(t))&&(r&&(r+=" "),r+=e);return r}var O5e=Array.isArray,Ho=O5e,P5e=typeof pi=="object"&&pi&&pi.Object===Object&&pi,MZ=P5e,R5e=MZ,D5e=typeof self=="object"&&self&&self.Object===Object&&self,F5e=R5e||D5e||Function("return this")(),ya=F5e,M5e=ya,L5e=M5e.Symbol,z0=L5e,dj=z0,LZ=Object.prototype,z5e=LZ.hasOwnProperty,B5e=LZ.toString,$h=dj?dj.toStringTag:void 0;function j5e(t){var e=z5e.call(t,$h),n=t[$h];try{t[$h]=void 0;var r=!0}catch{}var o=B5e.call(t);return r&&(e?t[$h]=n:delete t[$h]),o}var V5e=j5e,W5e=Object.prototype,U5e=W5e.toString;function G5e(t){return U5e.call(t)}var H5e=G5e,fj=z0,q5e=V5e,K5e=H5e,X5e="[object Null]",Y5e="[object Undefined]",pj=fj?fj.toStringTag:void 0;function Z5e(t){return t==null?t===void 0?Y5e:X5e:pj&&pj in Object(t)?q5e(t):K5e(t)}var gl=Z5e;function Q5e(t){return t!=null&&typeof t=="object"}var yl=Q5e,J5e=gl,eUe=yl,tUe="[object Symbol]";function nUe(t){return typeof t=="symbol"||eUe(t)&&J5e(t)==tUe}var Gp=nUe,rUe=Ho,oUe=Gp,sUe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,iUe=/^\w*$/;function aUe(t,e){if(rUe(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||oUe(t)?!0:iUe.test(t)||!sUe.test(t)||e!=null&&t in Object(e)}var FD=aUe;function lUe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Ou=lUe;const Hp=Dt(Ou);var uUe=gl,cUe=Ou,dUe="[object AsyncFunction]",fUe="[object Function]",pUe="[object GeneratorFunction]",hUe="[object Proxy]";function mUe(t){if(!cUe(t))return!1;var e=uUe(t);return e==fUe||e==pUe||e==dUe||e==hUe}var MD=mUe;const ut=Dt(MD);var gUe=ya,yUe=gUe["__core-js_shared__"],vUe=yUe,pT=vUe,hj=function(){var t=/[^.]+$/.exec(pT&&pT.keys&&pT.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function bUe(t){return!!hj&&hj in t}var xUe=bUe,wUe=Function.prototype,SUe=wUe.toString;function kUe(t){if(t!=null){try{return SUe.call(t)}catch{}try{return t+""}catch{}}return""}var zZ=kUe,$Ue=MD,CUe=xUe,TUe=Ou,_Ue=zZ,IUe=/[\\^$.*+?()[\]{}|]/g,NUe=/^\[object .+?Constructor\]$/,EUe=Function.prototype,AUe=Object.prototype,OUe=EUe.toString,PUe=AUe.hasOwnProperty,RUe=RegExp("^"+OUe.call(PUe).replace(IUe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function DUe(t){if(!TUe(t)||CUe(t))return!1;var e=$Ue(t)?RUe:NUe;return e.test(_Ue(t))}var FUe=DUe;function MUe(t,e){return t==null?void 0:t[e]}var LUe=MUe,zUe=FUe,BUe=LUe;function jUe(t,e){var n=BUe(t,e);return zUe(n)?n:void 0}var cd=jUe,VUe=cd,WUe=VUe(Object,"create"),t$=WUe,mj=t$;function UUe(){this.__data__=mj?mj(null):{},this.size=0}var GUe=UUe;function HUe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var qUe=HUe,KUe=t$,XUe="__lodash_hash_undefined__",YUe=Object.prototype,ZUe=YUe.hasOwnProperty;function QUe(t){var e=this.__data__;if(KUe){var n=e[t];return n===XUe?void 0:n}return ZUe.call(e,t)?e[t]:void 0}var JUe=QUe,e6e=t$,t6e=Object.prototype,n6e=t6e.hasOwnProperty;function r6e(t){var e=this.__data__;return e6e?e[t]!==void 0:n6e.call(e,t)}var o6e=r6e,s6e=t$,i6e="__lodash_hash_undefined__";function a6e(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=s6e&&e===void 0?i6e:e,this}var l6e=a6e,u6e=GUe,c6e=qUe,d6e=JUe,f6e=o6e,p6e=l6e;function qp(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}qp.prototype.clear=u6e;qp.prototype.delete=c6e;qp.prototype.get=d6e;qp.prototype.has=f6e;qp.prototype.set=p6e;var h6e=qp;function m6e(){this.__data__=[],this.size=0}var g6e=m6e;function y6e(t,e){return t===e||t!==t&&e!==e}var LD=y6e,v6e=LD;function b6e(t,e){for(var n=t.length;n--;)if(v6e(t[n][0],e))return n;return-1}var n$=b6e,x6e=n$,w6e=Array.prototype,S6e=w6e.splice;function k6e(t){var e=this.__data__,n=x6e(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():S6e.call(e,n,1),--this.size,!0}var $6e=k6e,C6e=n$;function T6e(t){var e=this.__data__,n=C6e(e,t);return n<0?void 0:e[n][1]}var _6e=T6e,I6e=n$;function N6e(t){return I6e(this.__data__,t)>-1}var E6e=N6e,A6e=n$;function O6e(t,e){var n=this.__data__,r=A6e(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var P6e=O6e,R6e=g6e,D6e=$6e,F6e=_6e,M6e=E6e,L6e=P6e;function Kp(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Kp.prototype.clear=R6e;Kp.prototype.delete=D6e;Kp.prototype.get=F6e;Kp.prototype.has=M6e;Kp.prototype.set=L6e;var r$=Kp,z6e=cd,B6e=ya,j6e=z6e(B6e,"Map"),zD=j6e,gj=h6e,V6e=r$,W6e=zD;function U6e(){this.size=0,this.__data__={hash:new gj,map:new(W6e||V6e),string:new gj}}var G6e=U6e;function H6e(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var q6e=H6e,K6e=q6e;function X6e(t,e){var n=t.__data__;return K6e(e)?n[typeof e=="string"?"string":"hash"]:n.map}var o$=X6e,Y6e=o$;function Z6e(t){var e=Y6e(this,t).delete(t);return this.size-=e?1:0,e}var Q6e=Z6e,J6e=o$;function eGe(t){return J6e(this,t).get(t)}var tGe=eGe,nGe=o$;function rGe(t){return nGe(this,t).has(t)}var oGe=rGe,sGe=o$;function iGe(t,e){var n=sGe(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var aGe=iGe,lGe=G6e,uGe=Q6e,cGe=tGe,dGe=oGe,fGe=aGe;function Xp(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Xp.prototype.clear=lGe;Xp.prototype.delete=uGe;Xp.prototype.get=cGe;Xp.prototype.has=dGe;Xp.prototype.set=fGe;var BD=Xp,BZ=BD,pGe="Expected a function";function jD(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(pGe);var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],s=n.cache;if(s.has(o))return s.get(o);var i=t.apply(this,r);return n.cache=s.set(o,i)||s,i};return n.cache=new(jD.Cache||BZ),n}jD.Cache=BZ;var jZ=jD;const hGe=Dt(jZ);var mGe=jZ,gGe=500;function yGe(t){var e=mGe(t,function(r){return n.size===gGe&&n.clear(),r}),n=e.cache;return e}var vGe=yGe,bGe=vGe,xGe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wGe=/\\(\\)?/g,SGe=bGe(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(xGe,function(n,r,o,s){e.push(o?s.replace(wGe,"$1"):r||n)}),e}),kGe=SGe;function $Ge(t,e){for(var n=-1,r=t==null?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}var VD=$Ge,yj=z0,CGe=VD,TGe=Ho,_Ge=Gp,IGe=1/0,vj=yj?yj.prototype:void 0,bj=vj?vj.toString:void 0;function VZ(t){if(typeof t=="string")return t;if(TGe(t))return CGe(t,VZ)+"";if(_Ge(t))return bj?bj.call(t):"";var e=t+"";return e=="0"&&1/t==-IGe?"-0":e}var NGe=VZ,EGe=NGe;function AGe(t){return t==null?"":EGe(t)}var WZ=AGe,OGe=Ho,PGe=FD,RGe=kGe,DGe=WZ;function FGe(t,e){return OGe(t)?t:PGe(t,e)?[t]:RGe(DGe(t))}var UZ=FGe,MGe=Gp,LGe=1/0;function zGe(t){if(typeof t=="string"||MGe(t))return t;var e=t+"";return e=="0"&&1/t==-LGe?"-0":e}var s$=zGe,BGe=UZ,jGe=s$;function VGe(t,e){e=BGe(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[jGe(e[n++])];return n&&n==r?t:void 0}var WD=VGe,WGe=WD;function UGe(t,e,n){var r=t==null?void 0:WGe(t,e);return r===void 0?n:r}var GZ=UGe;const js=Dt(GZ);function GGe(t){return t==null}var HGe=GGe;const lt=Dt(HGe);var qGe=gl,KGe=Ho,XGe=yl,YGe="[object String]";function ZGe(t){return typeof t=="string"||!KGe(t)&&XGe(t)&&qGe(t)==YGe}var QGe=ZGe;const B0=Dt(QGe);var HZ={exports:{}},Mt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UD=Symbol.for("react.element"),GD=Symbol.for("react.portal"),i$=Symbol.for("react.fragment"),a$=Symbol.for("react.strict_mode"),l$=Symbol.for("react.profiler"),u$=Symbol.for("react.provider"),c$=Symbol.for("react.context"),JGe=Symbol.for("react.server_context"),d$=Symbol.for("react.forward_ref"),f$=Symbol.for("react.suspense"),p$=Symbol.for("react.suspense_list"),h$=Symbol.for("react.memo"),m$=Symbol.for("react.lazy"),eHe=Symbol.for("react.offscreen"),qZ;qZ=Symbol.for("react.module.reference");function Js(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case UD:switch(t=t.type,t){case i$:case l$:case a$:case f$:case p$:return t;default:switch(t=t&&t.$$typeof,t){case JGe:case c$:case d$:case m$:case h$:case u$:return t;default:return e}}case GD:return e}}}Mt.ContextConsumer=c$;Mt.ContextProvider=u$;Mt.Element=UD;Mt.ForwardRef=d$;Mt.Fragment=i$;Mt.Lazy=m$;Mt.Memo=h$;Mt.Portal=GD;Mt.Profiler=l$;Mt.StrictMode=a$;Mt.Suspense=f$;Mt.SuspenseList=p$;Mt.isAsyncMode=function(){return!1};Mt.isConcurrentMode=function(){return!1};Mt.isContextConsumer=function(t){return Js(t)===c$};Mt.isContextProvider=function(t){return Js(t)===u$};Mt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===UD};Mt.isForwardRef=function(t){return Js(t)===d$};Mt.isFragment=function(t){return Js(t)===i$};Mt.isLazy=function(t){return Js(t)===m$};Mt.isMemo=function(t){return Js(t)===h$};Mt.isPortal=function(t){return Js(t)===GD};Mt.isProfiler=function(t){return Js(t)===l$};Mt.isStrictMode=function(t){return Js(t)===a$};Mt.isSuspense=function(t){return Js(t)===f$};Mt.isSuspenseList=function(t){return Js(t)===p$};Mt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===i$||t===l$||t===a$||t===f$||t===p$||t===eHe||typeof t=="object"&&t!==null&&(t.$$typeof===m$||t.$$typeof===h$||t.$$typeof===u$||t.$$typeof===c$||t.$$typeof===d$||t.$$typeof===qZ||t.getModuleId!==void 0)};Mt.typeOf=Js;HZ.exports=Mt;var tHe=HZ.exports,nHe=gl,rHe=yl,oHe="[object Number]";function sHe(t){return typeof t=="number"||rHe(t)&&nHe(t)==oHe}var KZ=sHe;const iHe=Dt(KZ);var aHe=KZ;function lHe(t){return aHe(t)&&t!=+t}var uHe=lHe;const j0=Dt(uHe);var hi=function(e){return e===0?0:e>0?1:-1},uc=function(e){return B0(e)&&e.indexOf("%")===e.length-1},we=function(e){return iHe(e)&&!j0(e)},sr=function(e){return we(e)||B0(e)},cHe=0,V0=function(e){var n=++cHe;return"".concat(e||"").concat(n)},Uc=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!we(e)&&!B0(e))return r;var s;if(uc(e)){var i=e.indexOf("%");s=n*parseFloat(e.slice(0,i))/100}else s=+e;return j0(s)&&(s=r),o&&s>n&&(s=n),s},Nl=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},dHe=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},o=0;o<n;o++)if(!r[e[o]])r[e[o]]=!0;else return!0;return!1},Vi=function(e,n){return we(e)&&we(n)?function(r){return e+r*(n-e)}:function(){return n}};function u1(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):js(r,e))===n})}var fHe=function(e){if(!e||!e.length)return null;for(var n=e.length,r=0,o=0,s=0,i=0,a=1/0,l=-1/0,u=0,c=0,d=0;d<n;d++)u=e[d].cx||0,c=e[d].cy||0,r+=u,o+=c,s+=u*c,i+=u*u,a=Math.min(a,u),l=Math.max(l,u);var f=n*i!==r*r?(n*s-r*o)/(n*i-r*r):0;return{xmin:a,xmax:l,a:f,b:(o-f*r)/n}};function gf(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function s2(t){"@babel/helpers - typeof";return s2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s2(t)}var pHe=["viewBox","children"],hHe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],xj=["points","pathLength"],hT={svg:pHe,polygon:xj,polyline:xj},HD=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],c1=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(N.isValidElement(e)&&(r=e.props),!Hp(r))return null;var o={};return Object.keys(r).forEach(function(s){HD.includes(s)&&(o[s]=n||function(i){return r[s](r,i)})}),o},mHe=function(e,n,r){return function(o){return e(n,r,o),null}},mg=function(e,n,r){if(!Hp(e)||s2(e)!=="object")return null;var o=null;return Object.keys(e).forEach(function(s){var i=e[s];HD.includes(s)&&typeof i=="function"&&(o||(o={}),o[s]=mHe(i,n,r))}),o},gHe=["children"],yHe=["children"];function wj(t,e){if(t==null)return{};var n=vHe(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function vHe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Sj={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},Wa=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},kj=null,mT=null,qD=function t(e){if(e===kj&&Array.isArray(mT))return mT;var n=[];return N.Children.forEach(e,function(r){lt(r)||(tHe.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),mT=n,kj=e,n};function rs(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(o){return Wa(o)}):r=[Wa(e)],qD(t).forEach(function(o){var s=js(o,"type.displayName")||js(o,"type.name");r.indexOf(s)!==-1&&n.push(o)}),n}function Yo(t,e){var n=rs(t,e);return n&&n[0]}var $j=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,o=n.height;return!(!we(r)||r<=0||!we(o)||o<=0)},bHe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],xHe=function(e){return e&&e.type&&B0(e.type)&&bHe.indexOf(e.type)>=0},wHe=function(e,n,r,o){var s,i=(s=hT==null?void 0:hT[o])!==null&&s!==void 0?s:[];return!ut(e)&&(o&&i.includes(n)||hHe.includes(n))||r&&HD.includes(n)},yt=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var o=e;if(N.isValidElement(e)&&(o=e.props),!Hp(o))return null;var s={};return Object.keys(o).forEach(function(i){var a;wHe((a=o)===null||a===void 0?void 0:a[i],i,n,r)&&(s[i]=o[i])}),s},i2=function t(e,n){if(e===n)return!0;var r=N.Children.count(e);if(r!==N.Children.count(n))return!1;if(r===0)return!0;if(r===1)return Cj(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var o=0;o<r;o++){var s=e[o],i=n[o];if(Array.isArray(s)||Array.isArray(i)){if(!t(s,i))return!1}else if(!Cj(s,i))return!1}return!0},Cj=function(e,n){if(lt(e)&&lt(n))return!0;if(!lt(e)&&!lt(n)){var r=e.props||{},o=r.children,s=wj(r,gHe),i=n.props||{},a=i.children,l=wj(i,yHe);return o&&a?gf(s,l)&&i2(o,a):!o&&!a?gf(s,l):!1}return!1},Tj=function(e,n){var r=[],o={};return qD(e).forEach(function(s,i){if(xHe(s))r.push(s);else if(s){var a=Wa(s.type),l=n[a]||{},u=l.handler,c=l.once;if(u&&(!c||!o[a])){var d=u(s,a,i);r.push(d),o[a]=!0}}}),r},SHe=function(e){var n=e&&e.type;return n&&Sj[n]?Sj[n]:null},kHe=function(e,n){return qD(n).indexOf(e)},$He=["children","width","height","viewBox","className","style","title","desc"];function a2(){return a2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a2.apply(this,arguments)}function CHe(t,e){if(t==null)return{};var n=THe(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function THe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function l2(t){var e=t.children,n=t.width,r=t.height,o=t.viewBox,s=t.className,i=t.style,a=t.title,l=t.desc,u=CHe(t,$He),c=o||{width:n,height:r,x:0,y:0},d=_t("recharts-surface",s);return K.createElement("svg",a2({},yt(u,!0,"svg"),{className:d,width:n,height:r,style:i,viewBox:"".concat(c.x," ").concat(c.y," ").concat(c.width," ").concat(c.height)}),K.createElement("title",null,a),K.createElement("desc",null,l),e)}var _He=["children","className"];function u2(){return u2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u2.apply(this,arguments)}function IHe(t,e){if(t==null)return{};var n=NHe(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function NHe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var xn=K.forwardRef(function(t,e){var n=t.children,r=t.className,o=IHe(t,_He),s=_t("recharts-layer",r);return K.createElement("g",u2({className:s},yt(o,!0),{ref:e}),n)}),Ua=function(e,n){for(var r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s]};function EHe(t,e,n){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),n=n>o?o:n,n<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(o);++r<o;)s[r]=t[r+e];return s}var AHe=EHe,OHe=AHe;function PHe(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:OHe(t,e,n)}var RHe=PHe,DHe="\\ud800-\\udfff",FHe="\\u0300-\\u036f",MHe="\\ufe20-\\ufe2f",LHe="\\u20d0-\\u20ff",zHe=FHe+MHe+LHe,BHe="\\ufe0e\\ufe0f",jHe="\\u200d",VHe=RegExp("["+jHe+DHe+zHe+BHe+"]");function WHe(t){return VHe.test(t)}var XZ=WHe;function UHe(t){return t.split("")}var GHe=UHe,YZ="\\ud800-\\udfff",HHe="\\u0300-\\u036f",qHe="\\ufe20-\\ufe2f",KHe="\\u20d0-\\u20ff",XHe=HHe+qHe+KHe,YHe="\\ufe0e\\ufe0f",ZHe="["+YZ+"]",c2="["+XHe+"]",d2="\\ud83c[\\udffb-\\udfff]",QHe="(?:"+c2+"|"+d2+")",ZZ="[^"+YZ+"]",QZ="(?:\\ud83c[\\udde6-\\uddff]){2}",JZ="[\\ud800-\\udbff][\\udc00-\\udfff]",JHe="\\u200d",eQ=QHe+"?",tQ="["+YHe+"]?",e8e="(?:"+JHe+"(?:"+[ZZ,QZ,JZ].join("|")+")"+tQ+eQ+")*",t8e=tQ+eQ+e8e,n8e="(?:"+[ZZ+c2+"?",c2,QZ,JZ,ZHe].join("|")+")",r8e=RegExp(d2+"(?="+d2+")|"+n8e+t8e,"g");function o8e(t){return t.match(r8e)||[]}var s8e=o8e,i8e=GHe,a8e=XZ,l8e=s8e;function u8e(t){return a8e(t)?l8e(t):i8e(t)}var c8e=u8e,d8e=RHe,f8e=XZ,p8e=c8e,h8e=WZ;function m8e(t){return function(e){e=h8e(e);var n=f8e(e)?p8e(e):void 0,r=n?n[0]:e.charAt(0),o=n?d8e(n,1).join(""):e.slice(1);return r[t]()+o}}var g8e=m8e,y8e=g8e,v8e=y8e("toUpperCase"),b8e=v8e;const g$=Dt(b8e);function Zt(t){return function(){return t}}const nQ=Math.cos,d1=Math.sin,Ni=Math.sqrt,f1=Math.PI,y$=2*f1,f2=Math.PI,p2=2*f2,Ku=1e-6,x8e=p2-Ku;function rQ(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function w8e(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return rQ;const n=10**e;return function(r){this._+=r[0];for(let o=1,s=r.length;o<s;++o)this._+=Math.round(arguments[o]*n)/n+r[o]}}class S8e{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?rQ:w8e(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,o){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+o}`}bezierCurveTo(e,n,r,o,s,i){this._append`C${+e},${+n},${+r},${+o},${this._x1=+s},${this._y1=+i}`}arcTo(e,n,r,o,s){if(e=+e,n=+n,r=+r,o=+o,s=+s,s<0)throw new Error(`negative radius: ${s}`);let i=this._x1,a=this._y1,l=r-e,u=o-n,c=i-e,d=a-n,f=c*c+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>Ku)if(!(Math.abs(d*l-u*c)>Ku)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let p=r-i,h=o-a,m=l*l+u*u,g=p*p+h*h,y=Math.sqrt(m),v=Math.sqrt(f),b=s*Math.tan((f2-Math.acos((m+f-g)/(2*y*v)))/2),x=b/v,w=b/y;Math.abs(x-1)>Ku&&this._append`L${e+x*c},${n+x*d}`,this._append`A${s},${s},0,0,${+(d*p>c*h)},${this._x1=e+w*l},${this._y1=n+w*u}`}}arc(e,n,r,o,s,i){if(e=+e,n=+n,r=+r,i=!!i,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(o),l=r*Math.sin(o),u=e+a,c=n+l,d=1^i,f=i?o-s:s-o;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>Ku||Math.abs(this._y1-c)>Ku)&&this._append`L${u},${c}`,r&&(f<0&&(f=f%p2+p2),f>x8e?this._append`A${r},${r},0,1,${d},${e-a},${n-l}A${r},${r},0,1,${d},${this._x1=u},${this._y1=c}`:f>Ku&&this._append`A${r},${r},0,${+(f>=f2)},${d},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,o){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+o}h${-r}Z`}toString(){return this._}}function KD(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new S8e(e)}function XD(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function oQ(t){this._context=t}oQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function v$(t){return new oQ(t)}function sQ(t){return t[0]}function iQ(t){return t[1]}function aQ(t,e){var n=Zt(!0),r=null,o=v$,s=null,i=KD(a);t=typeof t=="function"?t:t===void 0?sQ:Zt(t),e=typeof e=="function"?e:e===void 0?iQ:Zt(e);function a(l){var u,c=(l=XD(l)).length,d,f=!1,p;for(r==null&&(s=o(p=i())),u=0;u<=c;++u)!(u<c&&n(d=l[u],u,l))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+t(d,u,l),+e(d,u,l));if(p)return s=null,p+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:Zt(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:Zt(+l),a):e},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Zt(!!l),a):n},a.curve=function(l){return arguments.length?(o=l,r!=null&&(s=o(r)),a):o},a.context=function(l){return arguments.length?(l==null?r=s=null:s=o(r=l),a):r},a}function Kv(t,e,n){var r=null,o=Zt(!0),s=null,i=v$,a=null,l=KD(u);t=typeof t=="function"?t:t===void 0?sQ:Zt(+t),e=typeof e=="function"?e:Zt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?iQ:Zt(+n);function u(d){var f,p,h,m=(d=XD(d)).length,g,y=!1,v,b=new Array(m),x=new Array(m);for(s==null&&(a=i(v=l())),f=0;f<=m;++f){if(!(f<m&&o(g=d[f],f,d))===y)if(y=!y)p=f,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),h=f-1;h>=p;--h)a.point(b[h],x[h]);a.lineEnd(),a.areaEnd()}y&&(b[f]=+t(g,f,d),x[f]=+e(g,f,d),a.point(r?+r(g,f,d):b[f],n?+n(g,f,d):x[f]))}if(v)return a=null,v+""||null}function c(){return aQ().defined(o).curve(i).context(s)}return u.x=function(d){return arguments.length?(t=typeof d=="function"?d:Zt(+d),r=null,u):t},u.x0=function(d){return arguments.length?(t=typeof d=="function"?d:Zt(+d),u):t},u.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:Zt(+d),u):r},u.y=function(d){return arguments.length?(e=typeof d=="function"?d:Zt(+d),n=null,u):e},u.y0=function(d){return arguments.length?(e=typeof d=="function"?d:Zt(+d),u):e},u.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:Zt(+d),u):n},u.lineX0=u.lineY0=function(){return c().x(t).y(e)},u.lineY1=function(){return c().x(t).y(n)},u.lineX1=function(){return c().x(r).y(e)},u.defined=function(d){return arguments.length?(o=typeof d=="function"?d:Zt(!!d),u):o},u.curve=function(d){return arguments.length?(i=d,s!=null&&(a=i(s)),u):i},u.context=function(d){return arguments.length?(d==null?s=a=null:a=i(s=d),u):s},u}class lQ{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function k8e(t){return new lQ(t,!0)}function $8e(t){return new lQ(t,!1)}const YD={draw(t,e){const n=Ni(e/f1);t.moveTo(n,0),t.arc(0,0,n,0,y$)}},C8e={draw(t,e){const n=Ni(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},uQ=Ni(1/3),T8e=uQ*2,_8e={draw(t,e){const n=Ni(e/T8e),r=n*uQ;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},I8e={draw(t,e){const n=Ni(e),r=-n/2;t.rect(r,r,n,n)}},N8e=.8908130915292852,cQ=d1(f1/10)/d1(7*f1/10),E8e=d1(y$/10)*cQ,A8e=-nQ(y$/10)*cQ,O8e={draw(t,e){const n=Ni(e*N8e),r=E8e*n,o=A8e*n;t.moveTo(0,-n),t.lineTo(r,o);for(let s=1;s<5;++s){const i=y$*s/5,a=nQ(i),l=d1(i);t.lineTo(l*n,-a*n),t.lineTo(a*r-l*o,l*r+a*o)}t.closePath()}},gT=Ni(3),P8e={draw(t,e){const n=-Ni(e/(gT*3));t.moveTo(0,n*2),t.lineTo(-gT*n,-n),t.lineTo(gT*n,-n),t.closePath()}},vs=-.5,bs=Ni(3)/2,h2=1/Ni(12),R8e=(h2/2+1)*3,D8e={draw(t,e){const n=Ni(e/R8e),r=n/2,o=n*h2,s=r,i=n*h2+n,a=-s,l=i;t.moveTo(r,o),t.lineTo(s,i),t.lineTo(a,l),t.lineTo(vs*r-bs*o,bs*r+vs*o),t.lineTo(vs*s-bs*i,bs*s+vs*i),t.lineTo(vs*a-bs*l,bs*a+vs*l),t.lineTo(vs*r+bs*o,vs*o-bs*r),t.lineTo(vs*s+bs*i,vs*i-bs*s),t.lineTo(vs*a+bs*l,vs*l-bs*a),t.closePath()}};function F8e(t,e){let n=null,r=KD(o);t=typeof t=="function"?t:Zt(t||YD),e=typeof e=="function"?e:Zt(e===void 0?64:+e);function o(){let s;if(n||(n=s=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return o.type=function(s){return arguments.length?(t=typeof s=="function"?s:Zt(s),o):t},o.size=function(s){return arguments.length?(e=typeof s=="function"?s:Zt(+s),o):e},o.context=function(s){return arguments.length?(n=s??null,o):n},o}function p1(){}function h1(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function dQ(t){this._context=t}dQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:h1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:h1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function M8e(t){return new dQ(t)}function fQ(t){this._context=t}fQ.prototype={areaStart:p1,areaEnd:p1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:h1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function L8e(t){return new fQ(t)}function pQ(t){this._context=t}pQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:h1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function z8e(t){return new pQ(t)}function hQ(t){this._context=t}hQ.prototype={areaStart:p1,areaEnd:p1,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function B8e(t){return new hQ(t)}function _j(t){return t<0?-1:1}function Ij(t,e,n){var r=t._x1-t._x0,o=e-t._x1,s=(t._y1-t._y0)/(r||o<0&&-0),i=(n-t._y1)/(o||r<0&&-0),a=(s*o+i*r)/(r+o);return(_j(s)+_j(i))*Math.min(Math.abs(s),Math.abs(i),.5*Math.abs(a))||0}function Nj(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function yT(t,e,n){var r=t._x0,o=t._y0,s=t._x1,i=t._y1,a=(s-r)/3;t._context.bezierCurveTo(r+a,o+a*e,s-a,i-a*n,s,i)}function m1(t){this._context=t}m1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:yT(this,this._t0,Nj(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,yT(this,Nj(this,n=Ij(this,t,e)),n);break;default:yT(this,this._t0,n=Ij(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function mQ(t){this._context=new gQ(t)}(mQ.prototype=Object.create(m1.prototype)).point=function(t,e){m1.prototype.point.call(this,e,t)};function gQ(t){this._context=t}gQ.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,o,s){this._context.bezierCurveTo(e,t,r,n,s,o)}};function j8e(t){return new m1(t)}function V8e(t){return new mQ(t)}function yQ(t){this._context=t}yQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=Ej(t),o=Ej(e),s=0,i=1;i<n;++s,++i)this._context.bezierCurveTo(r[0][s],o[0][s],r[1][s],o[1][s],t[i],e[i]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function Ej(t){var e,n=t.length-1,r,o=new Array(n),s=new Array(n),i=new Array(n);for(o[0]=0,s[0]=2,i[0]=t[0]+2*t[1],e=1;e<n-1;++e)o[e]=1,s[e]=4,i[e]=4*t[e]+2*t[e+1];for(o[n-1]=2,s[n-1]=7,i[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=o[e]/s[e-1],s[e]-=r,i[e]-=r*i[e-1];for(o[n-1]=i[n-1]/s[n-1],e=n-2;e>=0;--e)o[e]=(i[e]-o[e+1])/s[e];for(s[n-1]=(t[n]+o[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-o[e+1];return[o,s]}function W8e(t){return new yQ(t)}function b$(t,e){this._context=t,this._t=e}b$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function U8e(t){return new b$(t,.5)}function G8e(t){return new b$(t,0)}function H8e(t){return new b$(t,1)}function Zf(t,e){if((i=t.length)>1)for(var n=1,r,o,s=t[e[0]],i,a=s.length;n<i;++n)for(o=s,s=t[e[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(o[r][1])?o[r][0]:o[r][1]}function m2(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function q8e(t,e){return t[e]}function K8e(t){const e=[];return e.key=t,e}function X8e(){var t=Zt([]),e=m2,n=Zf,r=q8e;function o(s){var i=Array.from(t.apply(this,arguments),K8e),a,l=i.length,u=-1,c;for(const d of s)for(a=0,++u;a<l;++a)(i[a][u]=[0,+r(d,i[a].key,u,s)]).data=d;for(a=0,c=XD(e(i));a<l;++a)i[c[a]].index=a;return n(i,c),i}return o.keys=function(s){return arguments.length?(t=typeof s=="function"?s:Zt(Array.from(s)),o):t},o.value=function(s){return arguments.length?(r=typeof s=="function"?s:Zt(+s),o):r},o.order=function(s){return arguments.length?(e=s==null?m2:typeof s=="function"?s:Zt(Array.from(s)),o):e},o.offset=function(s){return arguments.length?(n=s??Zf,o):n},o}function Y8e(t,e){if((r=t.length)>0){for(var n,r,o=0,s=t[0].length,i;o<s;++o){for(i=n=0;n<r;++n)i+=t[n][o][1]||0;if(i)for(n=0;n<r;++n)t[n][o][1]/=i}Zf(t,e)}}function Z8e(t,e){if((o=t.length)>0){for(var n=0,r=t[e[0]],o,s=r.length;n<s;++n){for(var i=0,a=0;i<o;++i)a+=t[i][n][1]||0;r[n][1]+=r[n][0]=-a/2}Zf(t,e)}}function Q8e(t,e){if(!(!((i=t.length)>0)||!((s=(o=t[e[0]]).length)>0))){for(var n=0,r=1,o,s,i;r<s;++r){for(var a=0,l=0,u=0;a<i;++a){for(var c=t[e[a]],d=c[r][1]||0,f=c[r-1][1]||0,p=(d-f)/2,h=0;h<a;++h){var m=t[e[h]],g=m[r][1]||0,y=m[r-1][1]||0;p+=g-y}l+=d,u+=p*d}o[r-1][1]+=o[r-1][0]=n,l&&(n-=u/l)}o[r-1][1]+=o[r-1][0]=n,Zf(t,e)}}function gg(t){"@babel/helpers - typeof";return gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gg(t)}var J8e=["type","size","sizeType"];function g2(){return g2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},g2.apply(this,arguments)}function Aj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Oj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Aj(Object(n),!0).forEach(function(r){e9e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Aj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function e9e(t,e,n){return e=t9e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function t9e(t){var e=n9e(t,"string");return gg(e)=="symbol"?e:e+""}function n9e(t,e){if(gg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(gg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function r9e(t,e){if(t==null)return{};var n=o9e(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function o9e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var vQ={symbolCircle:YD,symbolCross:C8e,symbolDiamond:_8e,symbolSquare:I8e,symbolStar:O8e,symbolTriangle:P8e,symbolWye:D8e},s9e=Math.PI/180,i9e=function(e){var n="symbol".concat(g$(e));return vQ[n]||YD},a9e=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var o=18*s9e;return 1.25*e*e*(Math.tan(o)-Math.tan(o*2)*Math.pow(Math.tan(o),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},l9e=function(e,n){vQ["symbol".concat(g$(e))]=n},x$=function(e){var n=e.type,r=n===void 0?"circle":n,o=e.size,s=o===void 0?64:o,i=e.sizeType,a=i===void 0?"area":i,l=r9e(e,J8e),u=Oj(Oj({},l),{},{type:r,size:s,sizeType:a}),c=function(){var g=i9e(r),y=F8e().type(g).size(a9e(s,a,r));return y()},d=u.className,f=u.cx,p=u.cy,h=yt(u,!0);return f===+f&&p===+p&&s===+s?K.createElement("path",g2({},h,{className:_t("recharts-symbols",d),transform:"translate(".concat(f,", ").concat(p,")"),d:c()})):null};x$.registerSymbol=l9e;function Qf(t){"@babel/helpers - typeof";return Qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qf(t)}function y2(){return y2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},y2.apply(this,arguments)}function Pj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function u9e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Pj(Object(n),!0).forEach(function(r){yg(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function c9e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d9e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xQ(r.key),r)}}function f9e(t,e,n){return e&&d9e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function p9e(t,e,n){return e=g1(e),h9e(t,bQ()?Reflect.construct(e,n||[],g1(t).constructor):e.apply(t,n))}function h9e(t,e){if(e&&(Qf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m9e(t)}function m9e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bQ=function(){return!!t})()}function g1(t){return g1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},g1(t)}function g9e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v2(t,e)}function v2(t,e){return v2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},v2(t,e)}function yg(t,e,n){return e=xQ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xQ(t){var e=y9e(t,"string");return Qf(e)=="symbol"?e:e+""}function y9e(t,e){if(Qf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Qf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var xs=32,ZD=function(t){function e(){return c9e(this,e),p9e(this,e,arguments)}return g9e(e,t),f9e(e,[{key:"renderIcon",value:function(r){var o=this.props.inactiveColor,s=xs/2,i=xs/6,a=xs/3,l=r.inactive?o:r.color;if(r.type==="plainline")return K.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:s,x2:xs,y2:s,className:"recharts-legend-icon"});if(r.type==="line")return K.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(s,"h").concat(a,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*a,",").concat(s,`
            H`).concat(xs,"M").concat(2*a,",").concat(s,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(a,",").concat(s),className:"recharts-legend-icon"});if(r.type==="rect")return K.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(xs/8,"h").concat(xs,"v").concat(xs*3/4,"h").concat(-xs,"z"),className:"recharts-legend-icon"});if(K.isValidElement(r.legendIcon)){var u=u9e({},r);return delete u.legendIcon,K.cloneElement(r.legendIcon,u)}return K.createElement(x$,{fill:l,cx:s,cy:s,size:xs,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,o=this.props,s=o.payload,i=o.iconSize,a=o.layout,l=o.formatter,u=o.inactiveColor,c={x:0,y:0,width:xs,height:xs},d={display:a==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(p,h){var m=p.formatter||l,g=_t(yg(yg({"recharts-legend-item":!0},"legend-item-".concat(h),!0),"inactive",p.inactive));if(p.type==="none")return null;var y=ut(p.value)?null:p.value;Ua(!ut(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var v=p.inactive?u:p.color;return K.createElement("li",y2({className:g,style:d,key:"legend-item-".concat(h)},mg(r.props,p,h)),K.createElement(l2,{width:i,height:i,viewBox:c,style:f},r.renderIcon(p)),K.createElement("span",{className:"recharts-legend-item-text",style:{color:v}},m?m(y,p,h):y))})}},{key:"render",value:function(){var r=this.props,o=r.payload,s=r.layout,i=r.align;if(!o||!o.length)return null;var a={padding:0,margin:0,textAlign:s==="horizontal"?i:"left"};return K.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}])}(N.PureComponent);yg(ZD,"displayName","Legend");yg(ZD,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var v9e=r$;function b9e(){this.__data__=new v9e,this.size=0}var x9e=b9e;function w9e(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var S9e=w9e;function k9e(t){return this.__data__.get(t)}var $9e=k9e;function C9e(t){return this.__data__.has(t)}var T9e=C9e,_9e=r$,I9e=zD,N9e=BD,E9e=200;function A9e(t,e){var n=this.__data__;if(n instanceof _9e){var r=n.__data__;if(!I9e||r.length<E9e-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new N9e(r)}return n.set(t,e),this.size=n.size,this}var O9e=A9e,P9e=r$,R9e=x9e,D9e=S9e,F9e=$9e,M9e=T9e,L9e=O9e;function Yp(t){var e=this.__data__=new P9e(t);this.size=e.size}Yp.prototype.clear=R9e;Yp.prototype.delete=D9e;Yp.prototype.get=F9e;Yp.prototype.has=M9e;Yp.prototype.set=L9e;var wQ=Yp,z9e="__lodash_hash_undefined__";function B9e(t){return this.__data__.set(t,z9e),this}var j9e=B9e;function V9e(t){return this.__data__.has(t)}var W9e=V9e,U9e=BD,G9e=j9e,H9e=W9e;function y1(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new U9e;++e<n;)this.add(t[e])}y1.prototype.add=y1.prototype.push=G9e;y1.prototype.has=H9e;var SQ=y1;function q9e(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var kQ=q9e;function K9e(t,e){return t.has(e)}var $Q=K9e,X9e=SQ,Y9e=kQ,Z9e=$Q,Q9e=1,J9e=2;function eqe(t,e,n,r,o,s){var i=n&Q9e,a=t.length,l=e.length;if(a!=l&&!(i&&l>a))return!1;var u=s.get(t),c=s.get(e);if(u&&c)return u==e&&c==t;var d=-1,f=!0,p=n&J9e?new X9e:void 0;for(s.set(t,e),s.set(e,t);++d<a;){var h=t[d],m=e[d];if(r)var g=i?r(m,h,d,e,t,s):r(h,m,d,t,e,s);if(g!==void 0){if(g)continue;f=!1;break}if(p){if(!Y9e(e,function(y,v){if(!Z9e(p,v)&&(h===y||o(h,y,n,r,s)))return p.push(v)})){f=!1;break}}else if(!(h===m||o(h,m,n,r,s))){f=!1;break}}return s.delete(t),s.delete(e),f}var CQ=eqe,tqe=ya,nqe=tqe.Uint8Array,rqe=nqe;function oqe(t){var e=-1,n=Array(t.size);return t.forEach(function(r,o){n[++e]=[o,r]}),n}var sqe=oqe;function iqe(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var QD=iqe,Rj=z0,Dj=rqe,aqe=LD,lqe=CQ,uqe=sqe,cqe=QD,dqe=1,fqe=2,pqe="[object Boolean]",hqe="[object Date]",mqe="[object Error]",gqe="[object Map]",yqe="[object Number]",vqe="[object RegExp]",bqe="[object Set]",xqe="[object String]",wqe="[object Symbol]",Sqe="[object ArrayBuffer]",kqe="[object DataView]",Fj=Rj?Rj.prototype:void 0,vT=Fj?Fj.valueOf:void 0;function $qe(t,e,n,r,o,s,i){switch(n){case kqe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Sqe:return!(t.byteLength!=e.byteLength||!s(new Dj(t),new Dj(e)));case pqe:case hqe:case yqe:return aqe(+t,+e);case mqe:return t.name==e.name&&t.message==e.message;case vqe:case xqe:return t==e+"";case gqe:var a=uqe;case bqe:var l=r&dqe;if(a||(a=cqe),t.size!=e.size&&!l)return!1;var u=i.get(t);if(u)return u==e;r|=fqe,i.set(t,e);var c=lqe(a(t),a(e),r,o,s,i);return i.delete(t),c;case wqe:if(vT)return vT.call(t)==vT.call(e)}return!1}var Cqe=$qe;function Tqe(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}var TQ=Tqe,_qe=TQ,Iqe=Ho;function Nqe(t,e,n){var r=e(t);return Iqe(t)?r:_qe(r,n(t))}var Eqe=Nqe;function Aqe(t,e){for(var n=-1,r=t==null?0:t.length,o=0,s=[];++n<r;){var i=t[n];e(i,n,t)&&(s[o++]=i)}return s}var Oqe=Aqe;function Pqe(){return[]}var Rqe=Pqe,Dqe=Oqe,Fqe=Rqe,Mqe=Object.prototype,Lqe=Mqe.propertyIsEnumerable,Mj=Object.getOwnPropertySymbols,zqe=Mj?function(t){return t==null?[]:(t=Object(t),Dqe(Mj(t),function(e){return Lqe.call(t,e)}))}:Fqe,Bqe=zqe;function jqe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var Vqe=jqe,Wqe=gl,Uqe=yl,Gqe="[object Arguments]";function Hqe(t){return Uqe(t)&&Wqe(t)==Gqe}var qqe=Hqe,Lj=qqe,Kqe=yl,_Q=Object.prototype,Xqe=_Q.hasOwnProperty,Yqe=_Q.propertyIsEnumerable,Zqe=Lj(function(){return arguments}())?Lj:function(t){return Kqe(t)&&Xqe.call(t,"callee")&&!Yqe.call(t,"callee")},JD=Zqe,v1={exports:{}};function Qqe(){return!1}var Jqe=Qqe;v1.exports;(function(t,e){var n=ya,r=Jqe,o=e&&!e.nodeType&&e,s=o&&!0&&t&&!t.nodeType&&t,i=s&&s.exports===o,a=i?n.Buffer:void 0,l=a?a.isBuffer:void 0,u=l||r;t.exports=u})(v1,v1.exports);var IQ=v1.exports,eKe=9007199254740991,tKe=/^(?:0|[1-9]\d*)$/;function nKe(t,e){var n=typeof t;return e=e??eKe,!!e&&(n=="number"||n!="symbol"&&tKe.test(t))&&t>-1&&t%1==0&&t<e}var eF=nKe,rKe=9007199254740991;function oKe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=rKe}var tF=oKe,sKe=gl,iKe=tF,aKe=yl,lKe="[object Arguments]",uKe="[object Array]",cKe="[object Boolean]",dKe="[object Date]",fKe="[object Error]",pKe="[object Function]",hKe="[object Map]",mKe="[object Number]",gKe="[object Object]",yKe="[object RegExp]",vKe="[object Set]",bKe="[object String]",xKe="[object WeakMap]",wKe="[object ArrayBuffer]",SKe="[object DataView]",kKe="[object Float32Array]",$Ke="[object Float64Array]",CKe="[object Int8Array]",TKe="[object Int16Array]",_Ke="[object Int32Array]",IKe="[object Uint8Array]",NKe="[object Uint8ClampedArray]",EKe="[object Uint16Array]",AKe="[object Uint32Array]",on={};on[kKe]=on[$Ke]=on[CKe]=on[TKe]=on[_Ke]=on[IKe]=on[NKe]=on[EKe]=on[AKe]=!0;on[lKe]=on[uKe]=on[wKe]=on[cKe]=on[SKe]=on[dKe]=on[fKe]=on[pKe]=on[hKe]=on[mKe]=on[gKe]=on[yKe]=on[vKe]=on[bKe]=on[xKe]=!1;function OKe(t){return aKe(t)&&iKe(t.length)&&!!on[sKe(t)]}var PKe=OKe;function RKe(t){return function(e){return t(e)}}var NQ=RKe,b1={exports:{}};b1.exports;(function(t,e){var n=MZ,r=e&&!e.nodeType&&e,o=r&&!0&&t&&!t.nodeType&&t,s=o&&o.exports===r,i=s&&n.process,a=function(){try{var l=o&&o.require&&o.require("util").types;return l||i&&i.binding&&i.binding("util")}catch{}}();t.exports=a})(b1,b1.exports);var DKe=b1.exports,FKe=PKe,MKe=NQ,zj=DKe,Bj=zj&&zj.isTypedArray,LKe=Bj?MKe(Bj):FKe,EQ=LKe,zKe=Vqe,BKe=JD,jKe=Ho,VKe=IQ,WKe=eF,UKe=EQ,GKe=Object.prototype,HKe=GKe.hasOwnProperty;function qKe(t,e){var n=jKe(t),r=!n&&BKe(t),o=!n&&!r&&VKe(t),s=!n&&!r&&!o&&UKe(t),i=n||r||o||s,a=i?zKe(t.length,String):[],l=a.length;for(var u in t)(e||HKe.call(t,u))&&!(i&&(u=="length"||o&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||WKe(u,l)))&&a.push(u);return a}var KKe=qKe,XKe=Object.prototype;function YKe(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||XKe;return t===n}var ZKe=YKe;function QKe(t,e){return function(n){return t(e(n))}}var AQ=QKe,JKe=AQ,e7e=JKe(Object.keys,Object),t7e=e7e,n7e=ZKe,r7e=t7e,o7e=Object.prototype,s7e=o7e.hasOwnProperty;function i7e(t){if(!n7e(t))return r7e(t);var e=[];for(var n in Object(t))s7e.call(t,n)&&n!="constructor"&&e.push(n);return e}var a7e=i7e,l7e=MD,u7e=tF;function c7e(t){return t!=null&&u7e(t.length)&&!l7e(t)}var W0=c7e,d7e=KKe,f7e=a7e,p7e=W0;function h7e(t){return p7e(t)?d7e(t):f7e(t)}var w$=h7e,m7e=Eqe,g7e=Bqe,y7e=w$;function v7e(t){return m7e(t,y7e,g7e)}var b7e=v7e,jj=b7e,x7e=1,w7e=Object.prototype,S7e=w7e.hasOwnProperty;function k7e(t,e,n,r,o,s){var i=n&x7e,a=jj(t),l=a.length,u=jj(e),c=u.length;if(l!=c&&!i)return!1;for(var d=l;d--;){var f=a[d];if(!(i?f in e:S7e.call(e,f)))return!1}var p=s.get(t),h=s.get(e);if(p&&h)return p==e&&h==t;var m=!0;s.set(t,e),s.set(e,t);for(var g=i;++d<l;){f=a[d];var y=t[f],v=e[f];if(r)var b=i?r(v,y,f,e,t,s):r(y,v,f,t,e,s);if(!(b===void 0?y===v||o(y,v,n,r,s):b)){m=!1;break}g||(g=f=="constructor")}if(m&&!g){var x=t.constructor,w=e.constructor;x!=w&&"constructor"in t&&"constructor"in e&&!(typeof x=="function"&&x instanceof x&&typeof w=="function"&&w instanceof w)&&(m=!1)}return s.delete(t),s.delete(e),m}var $7e=k7e,C7e=cd,T7e=ya,_7e=C7e(T7e,"DataView"),I7e=_7e,N7e=cd,E7e=ya,A7e=N7e(E7e,"Promise"),O7e=A7e,P7e=cd,R7e=ya,D7e=P7e(R7e,"Set"),OQ=D7e,F7e=cd,M7e=ya,L7e=F7e(M7e,"WeakMap"),z7e=L7e,b2=I7e,x2=zD,w2=O7e,S2=OQ,k2=z7e,PQ=gl,Zp=zZ,Vj="[object Map]",B7e="[object Object]",Wj="[object Promise]",Uj="[object Set]",Gj="[object WeakMap]",Hj="[object DataView]",j7e=Zp(b2),V7e=Zp(x2),W7e=Zp(w2),U7e=Zp(S2),G7e=Zp(k2),Xu=PQ;(b2&&Xu(new b2(new ArrayBuffer(1)))!=Hj||x2&&Xu(new x2)!=Vj||w2&&Xu(w2.resolve())!=Wj||S2&&Xu(new S2)!=Uj||k2&&Xu(new k2)!=Gj)&&(Xu=function(t){var e=PQ(t),n=e==B7e?t.constructor:void 0,r=n?Zp(n):"";if(r)switch(r){case j7e:return Hj;case V7e:return Vj;case W7e:return Wj;case U7e:return Uj;case G7e:return Gj}return e});var H7e=Xu,bT=wQ,q7e=CQ,K7e=Cqe,X7e=$7e,qj=H7e,Kj=Ho,Xj=IQ,Y7e=EQ,Z7e=1,Yj="[object Arguments]",Zj="[object Array]",Xv="[object Object]",Q7e=Object.prototype,Qj=Q7e.hasOwnProperty;function J7e(t,e,n,r,o,s){var i=Kj(t),a=Kj(e),l=i?Zj:qj(t),u=a?Zj:qj(e);l=l==Yj?Xv:l,u=u==Yj?Xv:u;var c=l==Xv,d=u==Xv,f=l==u;if(f&&Xj(t)){if(!Xj(e))return!1;i=!0,c=!1}if(f&&!c)return s||(s=new bT),i||Y7e(t)?q7e(t,e,n,r,o,s):K7e(t,e,l,n,r,o,s);if(!(n&Z7e)){var p=c&&Qj.call(t,"__wrapped__"),h=d&&Qj.call(e,"__wrapped__");if(p||h){var m=p?t.value():t,g=h?e.value():e;return s||(s=new bT),o(m,g,n,r,s)}}return f?(s||(s=new bT),X7e(t,e,n,r,o,s)):!1}var eXe=J7e,tXe=eXe,Jj=yl;function RQ(t,e,n,r,o){return t===e?!0:t==null||e==null||!Jj(t)&&!Jj(e)?t!==t&&e!==e:tXe(t,e,n,r,RQ,o)}var nF=RQ,nXe=wQ,rXe=nF,oXe=1,sXe=2;function iXe(t,e,n,r){var o=n.length,s=o,i=!r;if(t==null)return!s;for(t=Object(t);o--;){var a=n[o];if(i&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++o<s;){a=n[o];var l=a[0],u=t[l],c=a[1];if(i&&a[2]){if(u===void 0&&!(l in t))return!1}else{var d=new nXe;if(r)var f=r(u,c,l,t,e,d);if(!(f===void 0?rXe(c,u,oXe|sXe,r,d):f))return!1}}return!0}var aXe=iXe,lXe=Ou;function uXe(t){return t===t&&!lXe(t)}var DQ=uXe,cXe=DQ,dXe=w$;function fXe(t){for(var e=dXe(t),n=e.length;n--;){var r=e[n],o=t[r];e[n]=[r,o,cXe(o)]}return e}var pXe=fXe;function hXe(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var FQ=hXe,mXe=aXe,gXe=pXe,yXe=FQ;function vXe(t){var e=gXe(t);return e.length==1&&e[0][2]?yXe(e[0][0],e[0][1]):function(n){return n===t||mXe(n,t,e)}}var bXe=vXe;function xXe(t,e){return t!=null&&e in Object(t)}var wXe=xXe,SXe=UZ,kXe=JD,$Xe=Ho,CXe=eF,TXe=tF,_Xe=s$;function IXe(t,e,n){e=SXe(e,t);for(var r=-1,o=e.length,s=!1;++r<o;){var i=_Xe(e[r]);if(!(s=t!=null&&n(t,i)))break;t=t[i]}return s||++r!=o?s:(o=t==null?0:t.length,!!o&&TXe(o)&&CXe(i,o)&&($Xe(t)||kXe(t)))}var NXe=IXe,EXe=wXe,AXe=NXe;function OXe(t,e){return t!=null&&AXe(t,e,EXe)}var PXe=OXe,RXe=nF,DXe=GZ,FXe=PXe,MXe=FD,LXe=DQ,zXe=FQ,BXe=s$,jXe=1,VXe=2;function WXe(t,e){return MXe(t)&&LXe(e)?zXe(BXe(t),e):function(n){var r=DXe(n,t);return r===void 0&&r===e?FXe(n,t):RXe(e,r,jXe|VXe)}}var UXe=WXe;function GXe(t){return t}var Qp=GXe;function HXe(t){return function(e){return e==null?void 0:e[t]}}var qXe=HXe,KXe=WD;function XXe(t){return function(e){return KXe(e,t)}}var YXe=XXe,ZXe=qXe,QXe=YXe,JXe=FD,eYe=s$;function tYe(t){return JXe(t)?ZXe(eYe(t)):QXe(t)}var nYe=tYe,rYe=bXe,oYe=UXe,sYe=Qp,iYe=Ho,aYe=nYe;function lYe(t){return typeof t=="function"?t:t==null?sYe:typeof t=="object"?iYe(t)?oYe(t[0],t[1]):rYe(t):aYe(t)}var Pu=lYe;function uYe(t,e,n,r){for(var o=t.length,s=n+(r?1:-1);r?s--:++s<o;)if(e(t[s],s,t))return s;return-1}var MQ=uYe;function cYe(t){return t!==t}var dYe=cYe;function fYe(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}var pYe=fYe,hYe=MQ,mYe=dYe,gYe=pYe;function yYe(t,e,n){return e===e?gYe(t,e,n):hYe(t,mYe,n)}var vYe=yYe,bYe=vYe;function xYe(t,e){var n=t==null?0:t.length;return!!n&&bYe(t,e,0)>-1}var wYe=xYe;function SYe(t,e,n){for(var r=-1,o=t==null?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1}var kYe=SYe;function $Ye(){}var CYe=$Ye,xT=OQ,TYe=CYe,_Ye=QD,IYe=1/0,NYe=xT&&1/_Ye(new xT([,-0]))[1]==IYe?function(t){return new xT(t)}:TYe,EYe=NYe,AYe=SQ,OYe=wYe,PYe=kYe,RYe=$Q,DYe=EYe,FYe=QD,MYe=200;function LYe(t,e,n){var r=-1,o=OYe,s=t.length,i=!0,a=[],l=a;if(n)i=!1,o=PYe;else if(s>=MYe){var u=e?null:DYe(t);if(u)return FYe(u);i=!1,o=RYe,l=new AYe}else l=e?[]:a;e:for(;++r<s;){var c=t[r],d=e?e(c):c;if(c=n||c!==0?c:0,i&&d===d){for(var f=l.length;f--;)if(l[f]===d)continue e;e&&l.push(d),a.push(c)}else o(l,d,n)||(l!==a&&l.push(d),a.push(c))}return a}var zYe=LYe,BYe=Pu,jYe=zYe;function VYe(t,e){return t&&t.length?jYe(t,BYe(e)):[]}var WYe=VYe;const e4=Dt(WYe);function LQ(t,e,n){return e===!0?e4(t,n):ut(e)?e4(t,e):t}function Jf(t){"@babel/helpers - typeof";return Jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jf(t)}var UYe=["ref"];function t4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function xa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?t4(Object(n),!0).forEach(function(r){S$(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):t4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function GYe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,BQ(r.key),r)}}function HYe(t,e,n){return e&&n4(t.prototype,e),n&&n4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function qYe(t,e,n){return e=x1(e),KYe(t,zQ()?Reflect.construct(e,n||[],x1(t).constructor):e.apply(t,n))}function KYe(t,e){if(e&&(Jf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XYe(t)}function XYe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zQ=function(){return!!t})()}function x1(t){return x1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},x1(t)}function YYe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$2(t,e)}function $2(t,e){return $2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},$2(t,e)}function S$(t,e,n){return e=BQ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BQ(t){var e=ZYe(t,"string");return Jf(e)=="symbol"?e:e+""}function ZYe(t,e){if(Jf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Jf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function QYe(t,e){if(t==null)return{};var n=JYe(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function JYe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function eZe(t){return t.value}function tZe(t,e){if(K.isValidElement(t))return K.cloneElement(t,e);if(typeof t=="function")return K.createElement(t,e);e.ref;var n=QYe(e,UYe);return K.createElement(ZD,n)}var r4=1,yf=function(t){function e(){var n;GYe(this,e);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return n=qYe(this,e,[].concat(o)),S$(n,"lastBoundingBox",{width:-1,height:-1}),n}return YYe(e,t),HYe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,o=this.getBBox();o?(Math.abs(o.width-this.lastBoundingBox.width)>r4||Math.abs(o.height-this.lastBoundingBox.height)>r4)&&(this.lastBoundingBox.width=o.width,this.lastBoundingBox.height=o.height,r&&r(o)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?xa({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var o=this.props,s=o.layout,i=o.align,a=o.verticalAlign,l=o.margin,u=o.chartWidth,c=o.chartHeight,d,f;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(i==="center"&&s==="vertical"){var p=this.getBBoxSnapshot();d={left:((u||0)-p.width)/2}}else d=i==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(a==="middle"){var h=this.getBBoxSnapshot();f={top:((c||0)-h.height)/2}}else f=a==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return xa(xa({},d),f)}},{key:"render",value:function(){var r=this,o=this.props,s=o.content,i=o.width,a=o.height,l=o.wrapperStyle,u=o.payloadUniqBy,c=o.payload,d=xa(xa({position:"absolute",width:i||"auto",height:a||"auto"},this.getDefaultPosition(l)),l);return K.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(p){r.wrapperNode=p}},tZe(s,xa(xa({},this.props),{},{payload:LQ(c,u,eZe)})))}}],[{key:"getWithHeight",value:function(r,o){var s=xa(xa({},this.defaultProps),r.props),i=s.layout;return i==="vertical"&&we(r.props.height)?{height:r.props.height}:i==="horizontal"?{width:r.props.width||o}:null}}])}(N.PureComponent);S$(yf,"displayName","Legend");S$(yf,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var o4=z0,nZe=JD,rZe=Ho,s4=o4?o4.isConcatSpreadable:void 0;function oZe(t){return rZe(t)||nZe(t)||!!(s4&&t&&t[s4])}var sZe=oZe,iZe=TQ,aZe=sZe;function jQ(t,e,n,r,o){var s=-1,i=t.length;for(n||(n=aZe),o||(o=[]);++s<i;){var a=t[s];e>0&&n(a)?e>1?jQ(a,e-1,n,r,o):iZe(o,a):r||(o[o.length]=a)}return o}var VQ=jQ;function lZe(t){return function(e,n,r){for(var o=-1,s=Object(e),i=r(e),a=i.length;a--;){var l=i[t?a:++o];if(n(s[l],l,s)===!1)break}return e}}var uZe=lZe,cZe=uZe,dZe=cZe(),fZe=dZe,pZe=fZe,hZe=w$;function mZe(t,e){return t&&pZe(t,e,hZe)}var WQ=mZe,gZe=W0;function yZe(t,e){return function(n,r){if(n==null)return n;if(!gZe(n))return t(n,r);for(var o=n.length,s=e?o:-1,i=Object(n);(e?s--:++s<o)&&r(i[s],s,i)!==!1;);return n}}var vZe=yZe,bZe=WQ,xZe=vZe,wZe=xZe(bZe),rF=wZe,SZe=rF,kZe=W0;function $Ze(t,e){var n=-1,r=kZe(t)?Array(t.length):[];return SZe(t,function(o,s,i){r[++n]=e(o,s,i)}),r}var UQ=$Ze;function CZe(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var TZe=CZe,i4=Gp;function _Ze(t,e){if(t!==e){var n=t!==void 0,r=t===null,o=t===t,s=i4(t),i=e!==void 0,a=e===null,l=e===e,u=i4(e);if(!a&&!u&&!s&&t>e||s&&i&&l&&!a&&!u||r&&i&&l||!n&&l||!o)return 1;if(!r&&!s&&!u&&t<e||u&&n&&o&&!r&&!s||a&&n&&o||!i&&o||!l)return-1}return 0}var IZe=_Ze,NZe=IZe;function EZe(t,e,n){for(var r=-1,o=t.criteria,s=e.criteria,i=o.length,a=n.length;++r<i;){var l=NZe(o[r],s[r]);if(l){if(r>=a)return l;var u=n[r];return l*(u=="desc"?-1:1)}}return t.index-e.index}var AZe=EZe,wT=VD,OZe=WD,PZe=Pu,RZe=UQ,DZe=TZe,FZe=NQ,MZe=AZe,LZe=Qp,zZe=Ho;function BZe(t,e,n){e.length?e=wT(e,function(s){return zZe(s)?function(i){return OZe(i,s.length===1?s[0]:s)}:s}):e=[LZe];var r=-1;e=wT(e,FZe(PZe));var o=RZe(t,function(s,i,a){var l=wT(e,function(u){return u(s)});return{criteria:l,index:++r,value:s}});return DZe(o,function(s,i){return MZe(s,i,n)})}var jZe=BZe;function VZe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var WZe=VZe,UZe=WZe,a4=Math.max;function GZe(t,e,n){return e=a4(e===void 0?t.length-1:e,0),function(){for(var r=arguments,o=-1,s=a4(r.length-e,0),i=Array(s);++o<s;)i[o]=r[e+o];o=-1;for(var a=Array(e+1);++o<e;)a[o]=r[o];return a[e]=n(i),UZe(t,this,a)}}var HZe=GZe;function qZe(t){return function(){return t}}var KZe=qZe,XZe=cd,YZe=function(){try{var t=XZe(Object,"defineProperty");return t({},"",{}),t}catch{}}(),GQ=YZe,ZZe=KZe,l4=GQ,QZe=Qp,JZe=l4?function(t,e){return l4(t,"toString",{configurable:!0,enumerable:!1,value:ZZe(e),writable:!0})}:QZe,eQe=JZe,tQe=800,nQe=16,rQe=Date.now;function oQe(t){var e=0,n=0;return function(){var r=rQe(),o=nQe-(r-n);if(n=r,o>0){if(++e>=tQe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var sQe=oQe,iQe=eQe,aQe=sQe,lQe=aQe(iQe),uQe=lQe,cQe=Qp,dQe=HZe,fQe=uQe;function pQe(t,e){return fQe(dQe(t,e,cQe),t+"")}var hQe=pQe,mQe=LD,gQe=W0,yQe=eF,vQe=Ou;function bQe(t,e,n){if(!vQe(n))return!1;var r=typeof e;return(r=="number"?gQe(n)&&yQe(e,n.length):r=="string"&&e in n)?mQe(n[e],t):!1}var k$=bQe,xQe=VQ,wQe=jZe,SQe=hQe,u4=k$,kQe=SQe(function(t,e){if(t==null)return[];var n=e.length;return n>1&&u4(t,e[0],e[1])?e=[]:n>2&&u4(e[0],e[1],e[2])&&(e=[e[0]]),wQe(t,xQe(e,1),[])}),$Qe=kQe;const oF=Dt($Qe);function vg(t){"@babel/helpers - typeof";return vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vg(t)}function C2(){return C2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},C2.apply(this,arguments)}function CQe(t,e){return NQe(t)||IQe(t,e)||_Qe(t,e)||TQe()}function TQe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _Qe(t,e){if(t){if(typeof t=="string")return c4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c4(t,e)}}function c4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function IQe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,s,i,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,o=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return a}}function NQe(t){if(Array.isArray(t))return t}function d4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function ST(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?d4(Object(n),!0).forEach(function(r){EQe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function EQe(t,e,n){return e=AQe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function AQe(t){var e=OQe(t,"string");return vg(e)=="symbol"?e:e+""}function OQe(t,e){if(vg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(vg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function PQe(t){return Array.isArray(t)&&sr(t[0])&&sr(t[1])?t.join(" ~ "):t}var RQe=function(e){var n=e.separator,r=n===void 0?" : ":n,o=e.contentStyle,s=o===void 0?{}:o,i=e.itemStyle,a=i===void 0?{}:i,l=e.labelStyle,u=l===void 0?{}:l,c=e.payload,d=e.formatter,f=e.itemSorter,p=e.wrapperClassName,h=e.labelClassName,m=e.label,g=e.labelFormatter,y=e.accessibilityLayer,v=y===void 0?!1:y,b=function(){if(c&&c.length){var O={padding:0,margin:0},R=(f?oF(c,f):c).map(function(z,L){if(z.type==="none")return null;var B=ST({display:"block",paddingTop:4,paddingBottom:4,color:z.color||"#000"},a),D=z.formatter||d||PQe,F=z.value,j=z.name,G=F,Y=j;if(D&&G!=null&&Y!=null){var X=D(F,j,z,L,c);if(Array.isArray(X)){var ee=CQe(X,2);G=ee[0],Y=ee[1]}else G=X}return K.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(L),style:B},sr(Y)?K.createElement("span",{className:"recharts-tooltip-item-name"},Y):null,sr(Y)?K.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,K.createElement("span",{className:"recharts-tooltip-item-value"},G),K.createElement("span",{className:"recharts-tooltip-item-unit"},z.unit||""))});return K.createElement("ul",{className:"recharts-tooltip-item-list",style:O},R)}return null},x=ST({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),w=ST({margin:0},u),S=!lt(m),k=S?m:"",$=_t("recharts-default-tooltip",p),C=_t("recharts-tooltip-label",h);S&&g&&c!==void 0&&c!==null&&(k=g(m,c));var I=v?{role:"status","aria-live":"assertive"}:{};return K.createElement("div",C2({className:$,style:x},I),K.createElement("p",{className:C,style:w},K.isValidElement(k)?k:"".concat(k)),b())};function bg(t){"@babel/helpers - typeof";return bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bg(t)}function Yv(t,e,n){return e=DQe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DQe(t){var e=FQe(t,"string");return bg(e)=="symbol"?e:e+""}function FQe(t,e){if(bg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(bg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ch="recharts-tooltip-wrapper",MQe={visibility:"hidden"};function LQe(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return _t(Ch,Yv(Yv(Yv(Yv({},"".concat(Ch,"-right"),we(n)&&e&&we(e.x)&&n>=e.x),"".concat(Ch,"-left"),we(n)&&e&&we(e.x)&&n<e.x),"".concat(Ch,"-bottom"),we(r)&&e&&we(e.y)&&r>=e.y),"".concat(Ch,"-top"),we(r)&&e&&we(e.y)&&r<e.y))}function f4(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,o=t.offsetTopLeft,s=t.position,i=t.reverseDirection,a=t.tooltipDimension,l=t.viewBox,u=t.viewBoxDimension;if(s&&we(s[r]))return s[r];var c=n[r]-a-o,d=n[r]+o;if(e[r])return i[r]?c:d;if(i[r]){var f=c,p=l[r];return f<p?Math.max(d,l[r]):Math.max(c,l[r])}var h=d+a,m=l[r]+u;return h>m?Math.max(c,l[r]):Math.max(d,l[r])}function zQe(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function BQe(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,o=t.position,s=t.reverseDirection,i=t.tooltipBox,a=t.useTranslate3d,l=t.viewBox,u,c,d;return i.height>0&&i.width>0&&n?(c=f4({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:o,reverseDirection:s,tooltipDimension:i.width,viewBox:l,viewBoxDimension:l.width}),d=f4({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:o,reverseDirection:s,tooltipDimension:i.height,viewBox:l,viewBoxDimension:l.height}),u=zQe({translateX:c,translateY:d,useTranslate3d:a})):u=MQe,{cssProperties:u,cssClasses:LQe({translateX:c,translateY:d,coordinate:n})}}function ep(t){"@babel/helpers - typeof";return ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ep(t)}function p4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function h4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?p4(Object(n),!0).forEach(function(r){_2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jQe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function VQe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qQ(r.key),r)}}function WQe(t,e,n){return e&&VQe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function UQe(t,e,n){return e=w1(e),GQe(t,HQ()?Reflect.construct(e,n||[],w1(t).constructor):e.apply(t,n))}function GQe(t,e){if(e&&(ep(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HQe(t)}function HQe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function HQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HQ=function(){return!!t})()}function w1(t){return w1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},w1(t)}function qQe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T2(t,e)}function T2(t,e){return T2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},T2(t,e)}function _2(t,e,n){return e=qQ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qQ(t){var e=KQe(t,"string");return ep(e)=="symbol"?e:e+""}function KQe(t,e){if(ep(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ep(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var m4=1,XQe=function(t){function e(){var n;jQe(this,e);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return n=UQe(this,e,[].concat(o)),_2(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),_2(n,"handleKeyDown",function(i){if(i.key==="Escape"){var a,l,u,c;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(a=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&a!==void 0?a:0,y:(u=(c=n.props.coordinate)===null||c===void 0?void 0:c.y)!==null&&u!==void 0?u:0}})}}),n}return qQe(e,t),WQe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>m4||Math.abs(r.height-this.state.lastBoundingBox.height)>m4)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,o;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,o=this.props,s=o.active,i=o.allowEscapeViewBox,a=o.animationDuration,l=o.animationEasing,u=o.children,c=o.coordinate,d=o.hasPayload,f=o.isAnimationActive,p=o.offset,h=o.position,m=o.reverseDirection,g=o.useTranslate3d,y=o.viewBox,v=o.wrapperStyle,b=BQe({allowEscapeViewBox:i,coordinate:c,offsetTopLeft:p,position:h,reverseDirection:m,tooltipBox:this.state.lastBoundingBox,useTranslate3d:g,viewBox:y}),x=b.cssClasses,w=b.cssProperties,S=h4(h4({transition:f&&s?"transform ".concat(a,"ms ").concat(l):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&d?"visible":"hidden",position:"absolute",top:0,left:0},v);return K.createElement("div",{tabIndex:-1,className:x,style:S,ref:function($){r.wrapperNode=$}},u)}}])}(N.PureComponent),YQe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Jp={isSsr:YQe()};function tp(t){"@babel/helpers - typeof";return tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tp(t)}function g4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function y4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?g4(Object(n),!0).forEach(function(r){sF(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ZQe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QQe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,XQ(r.key),r)}}function JQe(t,e,n){return e&&QQe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function eJe(t,e,n){return e=S1(e),tJe(t,KQ()?Reflect.construct(e,n||[],S1(t).constructor):e.apply(t,n))}function tJe(t,e){if(e&&(tp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nJe(t)}function nJe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function KQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KQ=function(){return!!t})()}function S1(t){return S1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},S1(t)}function rJe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&I2(t,e)}function I2(t,e){return I2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},I2(t,e)}function sF(t,e,n){return e=XQ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XQ(t){var e=oJe(t,"string");return tp(e)=="symbol"?e:e+""}function oJe(t,e){if(tp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(tp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function sJe(t){return t.dataKey}function iJe(t,e){return K.isValidElement(t)?K.cloneElement(t,e):typeof t=="function"?K.createElement(t,e):K.createElement(RQe,e)}var Fi=function(t){function e(){return ZQe(this,e),eJe(this,e,arguments)}return rJe(e,t),JQe(e,[{key:"render",value:function(){var r=this,o=this.props,s=o.active,i=o.allowEscapeViewBox,a=o.animationDuration,l=o.animationEasing,u=o.content,c=o.coordinate,d=o.filterNull,f=o.isAnimationActive,p=o.offset,h=o.payload,m=o.payloadUniqBy,g=o.position,y=o.reverseDirection,v=o.useTranslate3d,b=o.viewBox,x=o.wrapperStyle,w=h??[];d&&w.length&&(w=LQ(h.filter(function(k){return k.value!=null&&(k.hide!==!0||r.props.includeHidden)}),m,sJe));var S=w.length>0;return K.createElement(XQe,{allowEscapeViewBox:i,animationDuration:a,animationEasing:l,isAnimationActive:f,active:s,coordinate:c,hasPayload:S,offset:p,position:g,reverseDirection:y,useTranslate3d:v,viewBox:b,wrapperStyle:x},iJe(u,y4(y4({},this.props),{},{payload:w})))}}])}(N.PureComponent);sF(Fi,"displayName","Tooltip");sF(Fi,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Jp.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var aJe=ya,lJe=function(){return aJe.Date.now()},uJe=lJe,cJe=/\s/;function dJe(t){for(var e=t.length;e--&&cJe.test(t.charAt(e)););return e}var fJe=dJe,pJe=fJe,hJe=/^\s+/;function mJe(t){return t&&t.slice(0,pJe(t)+1).replace(hJe,"")}var gJe=mJe,yJe=gJe,v4=Ou,vJe=Gp,b4=NaN,bJe=/^[-+]0x[0-9a-f]+$/i,xJe=/^0b[01]+$/i,wJe=/^0o[0-7]+$/i,SJe=parseInt;function kJe(t){if(typeof t=="number")return t;if(vJe(t))return b4;if(v4(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=v4(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=yJe(t);var n=xJe.test(t);return n||wJe.test(t)?SJe(t.slice(2),n?2:8):bJe.test(t)?b4:+t}var YQ=kJe,$Je=Ou,kT=uJe,x4=YQ,CJe="Expected a function",TJe=Math.max,_Je=Math.min;function IJe(t,e,n){var r,o,s,i,a,l,u=0,c=!1,d=!1,f=!0;if(typeof t!="function")throw new TypeError(CJe);e=x4(e)||0,$Je(n)&&(c=!!n.leading,d="maxWait"in n,s=d?TJe(x4(n.maxWait)||0,e):s,f="trailing"in n?!!n.trailing:f);function p(S){var k=r,$=o;return r=o=void 0,u=S,i=t.apply($,k),i}function h(S){return u=S,a=setTimeout(y,e),c?p(S):i}function m(S){var k=S-l,$=S-u,C=e-k;return d?_Je(C,s-$):C}function g(S){var k=S-l,$=S-u;return l===void 0||k>=e||k<0||d&&$>=s}function y(){var S=kT();if(g(S))return v(S);a=setTimeout(y,m(S))}function v(S){return a=void 0,f&&r?p(S):(r=o=void 0,i)}function b(){a!==void 0&&clearTimeout(a),u=0,r=l=o=a=void 0}function x(){return a===void 0?i:v(kT())}function w(){var S=kT(),k=g(S);if(r=arguments,o=this,l=S,k){if(a===void 0)return h(l);if(d)return clearTimeout(a),a=setTimeout(y,e),p(l)}return a===void 0&&(a=setTimeout(y,e)),i}return w.cancel=b,w.flush=x,w}var NJe=IJe,EJe=NJe,AJe=Ou,OJe="Expected a function";function PJe(t,e,n){var r=!0,o=!0;if(typeof t!="function")throw new TypeError(OJe);return AJe(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),EJe(t,e,{leading:r,maxWait:e,trailing:o})}var RJe=PJe;const ZQ=Dt(RJe);function xg(t){"@babel/helpers - typeof";return xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xg(t)}function w4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Zv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w4(Object(n),!0).forEach(function(r){DJe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function DJe(t,e,n){return e=FJe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FJe(t){var e=MJe(t,"string");return xg(e)=="symbol"?e:e+""}function MJe(t,e){if(xg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(xg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function LJe(t,e){return VJe(t)||jJe(t,e)||BJe(t,e)||zJe()}function zJe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BJe(t,e){if(t){if(typeof t=="string")return S4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S4(t,e)}}function S4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function jJe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,s,i,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,o=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return a}}function VJe(t){if(Array.isArray(t))return t}var WJe=N.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,o=r===void 0?{width:-1,height:-1}:r,s=t.width,i=s===void 0?"100%":s,a=t.height,l=a===void 0?"100%":a,u=t.minWidth,c=u===void 0?0:u,d=t.minHeight,f=t.maxHeight,p=t.children,h=t.debounce,m=h===void 0?0:h,g=t.id,y=t.className,v=t.onResize,b=t.style,x=b===void 0?{}:b,w=N.useRef(null),S=N.useRef();S.current=v,N.useImperativeHandle(e,function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})});var k=N.useState({containerWidth:o.width,containerHeight:o.height}),$=LJe(k,2),C=$[0],I=$[1],E=N.useCallback(function(R,z){I(function(L){var B=Math.round(R),D=Math.round(z);return L.containerWidth===B&&L.containerHeight===D?L:{containerWidth:B,containerHeight:D}})},[]);N.useEffect(function(){var R=function(j){var G,Y=j[0].contentRect,X=Y.width,ee=Y.height;E(X,ee),(G=S.current)===null||G===void 0||G.call(S,X,ee)};m>0&&(R=ZQ(R,m,{trailing:!0,leading:!1}));var z=new ResizeObserver(R),L=w.current.getBoundingClientRect(),B=L.width,D=L.height;return E(B,D),z.observe(w.current),function(){z.disconnect()}},[E,m]);var O=N.useMemo(function(){var R=C.containerWidth,z=C.containerHeight;if(R<0||z<0)return null;Ua(uc(i)||uc(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,l),Ua(!n||n>0,"The aspect(%s) must be greater than zero.",n);var L=uc(i)?R:i,B=uc(l)?z:l;n&&n>0&&(L?B=L/n:B&&(L=B*n),f&&B>f&&(B=f)),Ua(L>0||B>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,L,B,i,l,c,d,n);var D=!Array.isArray(p)&&Wa(p.type).endsWith("Chart");return K.Children.map(p,function(F){return K.isValidElement(F)?N.cloneElement(F,Zv({width:L,height:B},D?{style:Zv({height:"100%",width:"100%",maxHeight:B,maxWidth:L},F.props.style)}:{})):F})},[n,p,l,f,d,c,C,i]);return K.createElement("div",{id:g?"".concat(g):void 0,className:_t("recharts-responsive-container",y),style:Zv(Zv({},x),{},{width:i,height:l,minWidth:c,minHeight:d,maxHeight:f}),ref:w},O)}),iF=function(e){return null};iF.displayName="Cell";function wg(t){"@babel/helpers - typeof";return wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wg(t)}function k4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function N2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?k4(Object(n),!0).forEach(function(r){UJe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function UJe(t,e,n){return e=GJe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GJe(t){var e=HJe(t,"string");return wg(e)=="symbol"?e:e+""}function HJe(t,e){if(wg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(wg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wd={widthCache:{},cacheCount:0},qJe=2e3,KJe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},$4="recharts_measurement_span";function XJe(t){var e=N2({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var ym=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Jp.isSsr)return{width:0,height:0};var r=XJe(n),o=JSON.stringify({text:e,copyStyle:r});if(wd.widthCache[o])return wd.widthCache[o];try{var s=document.getElementById($4);s||(s=document.createElement("span"),s.setAttribute("id",$4),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var i=N2(N2({},KJe),r);Object.assign(s.style,i),s.textContent="".concat(e);var a=s.getBoundingClientRect(),l={width:a.width,height:a.height};return wd.widthCache[o]=l,++wd.cacheCount>qJe&&(wd.cacheCount=0,wd.widthCache={}),l}catch{return{width:0,height:0}}},YJe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Sg(t){"@babel/helpers - typeof";return Sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sg(t)}function k1(t,e){return eet(t)||JJe(t,e)||QJe(t,e)||ZJe()}function ZJe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QJe(t,e){if(t){if(typeof t=="string")return C4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C4(t,e)}}function C4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function JJe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,s,i,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,o=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return a}}function eet(t){if(Array.isArray(t))return t}function tet(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ret(r.key),r)}}function net(t,e,n){return e&&T4(t.prototype,e),n&&T4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ret(t){var e=oet(t,"string");return Sg(e)=="symbol"?e:e+""}function oet(t,e){if(Sg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var _4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,I4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,set=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,iet=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,QQ={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},aet=Object.keys(QQ),Xd="NaN";function uet(t,e){return t*QQ[e]}var Qv=function(){function t(e,n){tet(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!set.test(n)&&(this.num=NaN,this.unit=""),aet.includes(n)&&(this.num=uet(e,n),this.unit="px")}return net(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,o=(r=iet.exec(n))!==null&&r!==void 0?r:[],s=k1(o,3),i=s[1],a=s[2];return new t(parseFloat(i),a??"")}}])}();function JQ(t){if(t.includes(Xd))return Xd;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=_4.exec(e))!==null&&n!==void 0?n:[],o=k1(r,4),s=o[1],i=o[2],a=o[3],l=Qv.parse(s??""),u=Qv.parse(a??""),c=i==="*"?l.multiply(u):l.divide(u);if(c.isNaN())return Xd;e=e.replace(_4,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,f=(d=I4.exec(e))!==null&&d!==void 0?d:[],p=k1(f,4),h=p[1],m=p[2],g=p[3],y=Qv.parse(h??""),v=Qv.parse(g??""),b=m==="+"?y.add(v):y.subtract(v);if(b.isNaN())return Xd;e=e.replace(I4,b.toString())}return e}var N4=/\(([^()]*)\)/;function cet(t){for(var e=t;e.includes("(");){var n=N4.exec(e),r=k1(n,2),o=r[1];e=e.replace(N4,JQ(o))}return e}function det(t){var e=t.replace(/\s+/g,"");return e=cet(e),e=JQ(e),e}function fet(t){try{return det(t)}catch{return Xd}}function $T(t){var e=fet(t.slice(5,-1));return e===Xd?"":e}var pet=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],het=["dx","dy","angle","className","breakAll"];function E2(){return E2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},E2.apply(this,arguments)}function E4(t,e){if(t==null)return{};var n=met(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function met(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function A4(t,e){return bet(t)||vet(t,e)||yet(t,e)||get()}function get(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yet(t,e){if(t){if(typeof t=="string")return O4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O4(t,e)}}function O4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vet(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,s,i,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,o=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return a}}function bet(t){if(Array.isArray(t))return t}var eJ=/[ \f\n\r\t\v\u2028\u2029]+/,tJ=function(e){var n=e.children,r=e.breakAll,o=e.style;try{var s=[];lt(n)||(r?s=n.toString().split(""):s=n.toString().split(eJ));var i=s.map(function(l){return{word:l,width:ym(l,o).width}}),a=r?0:ym("",o).width;return{wordsWithComputedWidth:i,spaceWidth:a}}catch{return null}},xet=function(e,n,r,o,s){var i=e.maxLines,a=e.children,l=e.style,u=e.breakAll,c=we(i),d=a,f=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return L.reduce(function(B,D){var F=D.word,j=D.width,G=B[B.length-1];if(G&&(o==null||s||G.width+j+r<Number(o)))G.words.push(F),G.width+=j+r;else{var Y={words:[F],width:j};B.push(Y)}return B},[])},p=f(n),h=function(L){return L.reduce(function(B,D){return B.width>D.width?B:D})};if(!c)return p;for(var m="",g=function(L){var B=d.slice(0,L),D=tJ({breakAll:u,style:l,children:B+m}).wordsWithComputedWidth,F=f(D),j=F.length>i||h(F).width>Number(o);return[j,F]},y=0,v=d.length-1,b=0,x;y<=v&&b<=d.length-1;){var w=Math.floor((y+v)/2),S=w-1,k=g(S),$=A4(k,2),C=$[0],I=$[1],E=g(w),O=A4(E,1),R=O[0];if(!C&&!R&&(y=w+1),C&&R&&(v=w-1),!C&&R){x=I;break}b++}return x||p},P4=function(e){var n=lt(e)?[]:e.toString().split(eJ);return[{words:n}]},wet=function(e){var n=e.width,r=e.scaleToFit,o=e.children,s=e.style,i=e.breakAll,a=e.maxLines;if((n||r)&&!Jp.isSsr){var l,u,c=tJ({breakAll:i,children:o,style:s});if(c){var d=c.wordsWithComputedWidth,f=c.spaceWidth;l=d,u=f}else return P4(o);return xet({breakAll:i,children:o,maxLines:a,style:s},l,u,n,r)}return P4(o)},R4="#808080",$1=function(e){var n=e.x,r=n===void 0?0:n,o=e.y,s=o===void 0?0:o,i=e.lineHeight,a=i===void 0?"1em":i,l=e.capHeight,u=l===void 0?"0.71em":l,c=e.scaleToFit,d=c===void 0?!1:c,f=e.textAnchor,p=f===void 0?"start":f,h=e.verticalAnchor,m=h===void 0?"end":h,g=e.fill,y=g===void 0?R4:g,v=E4(e,pet),b=N.useMemo(function(){return wet({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:d,style:v.style,width:v.width})},[v.breakAll,v.children,v.maxLines,d,v.style,v.width]),x=v.dx,w=v.dy,S=v.angle,k=v.className,$=v.breakAll,C=E4(v,het);if(!sr(r)||!sr(s))return null;var I=r+(we(x)?x:0),E=s+(we(w)?w:0),O;switch(m){case"start":O=$T("calc(".concat(u,")"));break;case"middle":O=$T("calc(".concat((b.length-1)/2," * -").concat(a," + (").concat(u," / 2))"));break;default:O=$T("calc(".concat(b.length-1," * -").concat(a,")"));break}var R=[];if(d){var z=b[0].width,L=v.width;R.push("scale(".concat((we(L)?L/z:1)/z,")"))}return S&&R.push("rotate(".concat(S,", ").concat(I,", ").concat(E,")")),R.length&&(C.transform=R.join(" ")),K.createElement("text",E2({},yt(C,!0),{x:I,y:E,className:_t("recharts-text",k),textAnchor:p,fill:y.includes("url")?R4:y}),b.map(function(B,D){var F=B.words.join($?"":" ");return K.createElement("tspan",{x:I,dy:D===0?O:a,key:"".concat(F,"-").concat(D)},F)}))};function Xl(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ket(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function aF(t){let e,n,r;t.length!==2?(e=Xl,n=(a,l)=>Xl(t(a),l),r=(a,l)=>t(a)-l):(e=t===Xl||t===ket?t:$et,n=t,r=t);function o(a,l,u=0,c=a.length){if(u<c){if(e(l,l)!==0)return c;do{const d=u+c>>>1;n(a[d],l)<0?u=d+1:c=d}while(u<c)}return u}function s(a,l,u=0,c=a.length){if(u<c){if(e(l,l)!==0)return c;do{const d=u+c>>>1;n(a[d],l)<=0?u=d+1:c=d}while(u<c)}return u}function i(a,l,u=0,c=a.length){const d=o(a,l,u,c-1);return d>u&&r(a[d-1],l)>-r(a[d],l)?d-1:d}return{left:o,center:i,right:s}}function $et(){return 0}function nJ(t){return t===null?NaN:+t}function*Cet(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const Tet=aF(Xl),U0=Tet.right;aF(nJ).center;class D4 extends Map{constructor(e,n=Net){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,o]of e)this.set(r,o)}get(e){return super.get(F4(this,e))}has(e){return super.has(F4(this,e))}set(e,n){return super.set(_et(this,e),n)}delete(e){return super.delete(Iet(this,e))}}function F4({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function _et({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Iet({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Net(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Eet(t=Xl){if(t===Xl)return rJ;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function rJ(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Aet=Math.sqrt(50),Oet=Math.sqrt(10),Pet=Math.sqrt(2);function C1(t,e,n){const r=(e-t)/Math.max(0,n),o=Math.floor(Math.log10(r)),s=r/Math.pow(10,o),i=s>=Aet?10:s>=Oet?5:s>=Pet?2:1;let a,l,u;return o<0?(u=Math.pow(10,-o)/i,a=Math.round(t*u),l=Math.round(e*u),a/u<t&&++a,l/u>e&&--l,u=-u):(u=Math.pow(10,o)*i,a=Math.round(t/u),l=Math.round(e/u),a*u<t&&++a,l*u>e&&--l),l<a&&.5<=n&&n<2?C1(t,e,n*2):[a,l,u]}function A2(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[o,s,i]=r?C1(e,t,n):C1(t,e,n);if(!(s>=o))return[];const a=s-o+1,l=new Array(a);if(r)if(i<0)for(let u=0;u<a;++u)l[u]=(s-u)/-i;else for(let u=0;u<a;++u)l[u]=(s-u)*i;else if(i<0)for(let u=0;u<a;++u)l[u]=(o+u)/-i;else for(let u=0;u<a;++u)l[u]=(o+u)*i;return l}function O2(t,e,n){return e=+e,t=+t,n=+n,C1(t,e,n)[2]}function P2(t,e,n){e=+e,t=+t,n=+n;const r=e<t,o=r?O2(e,t,n):O2(t,e,n);return(r?-1:1)*(o<0?1/-o:o)}function M4(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function L4(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function oJ(t,e,n=0,r=1/0,o){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(o=o===void 0?rJ:Eet(o);r>n;){if(r-n>600){const l=r-n+1,u=e-n+1,c=Math.log(l),d=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*d*(l-d)/l)*(u-l/2<0?-1:1),p=Math.max(n,Math.floor(e-u*d/l+f)),h=Math.min(r,Math.floor(e+(l-u)*d/l+f));oJ(t,e,p,h,o)}const s=t[e];let i=n,a=r;for(Th(t,n,e),o(t[r],s)>0&&Th(t,n,r);i<a;){for(Th(t,i,a),++i,--a;o(t[i],s)<0;)++i;for(;o(t[a],s)>0;)--a}o(t[n],s)===0?Th(t,n,a):(++a,Th(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}return t}function Th(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Ret(t,e,n){if(t=Float64Array.from(Cet(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return L4(t);if(e>=1)return M4(t);var r,o=(r-1)*e,s=Math.floor(o),i=M4(oJ(t,s).subarray(0,s+1)),a=L4(t.subarray(s+1));return i+(a-i)*(o-s)}}function Det(t,e,n=nJ){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,o=(r-1)*e,s=Math.floor(o),i=+n(t[s],s,t),a=+n(t[s+1],s+1,t);return i+(a-i)*(o-s)}}function Fet(t,e,n){t=+t,e=+e,n=(o=arguments.length)<2?(e=t,t=0,1):o<3?1:+n;for(var r=-1,o=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(o);++r<o;)s[r]=t+r*n;return s}function ei(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function vl(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const R2=Symbol("implicit");function lF(){var t=new D4,e=[],n=[],r=R2;function o(s){let i=t.get(s);if(i===void 0){if(r!==R2)return r;t.set(s,i=e.push(s)-1)}return n[i%n.length]}return o.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new D4;for(const i of s)t.has(i)||t.set(i,e.push(i)-1);return o},o.range=function(s){return arguments.length?(n=Array.from(s),o):n.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.copy=function(){return lF(e,n).unknown(r)},ei.apply(o,arguments),o}function kg(){var t=lF().unknown(void 0),e=t.domain,n=t.range,r=0,o=1,s,i,a=!1,l=0,u=0,c=.5;delete t.unknown;function d(){var f=e().length,p=o<r,h=p?o:r,m=p?r:o;s=(m-h)/Math.max(1,f-l+u*2),a&&(s=Math.floor(s)),h+=(m-h-s*(f-l))*c,i=s*(1-l),a&&(h=Math.round(h),i=Math.round(i));var g=Fet(f).map(function(y){return h+s*y});return n(p?g.reverse():g)}return t.domain=function(f){return arguments.length?(e(f),d()):e()},t.range=function(f){return arguments.length?([r,o]=f,r=+r,o=+o,d()):[r,o]},t.rangeRound=function(f){return[r,o]=f,r=+r,o=+o,a=!0,d()},t.bandwidth=function(){return i},t.step=function(){return s},t.round=function(f){return arguments.length?(a=!!f,d()):a},t.padding=function(f){return arguments.length?(l=Math.min(1,u=+f),d()):l},t.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),d()):l},t.paddingOuter=function(f){return arguments.length?(u=+f,d()):u},t.align=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),d()):c},t.copy=function(){return kg(e(),[r,o]).round(a).paddingInner(l).paddingOuter(u).align(c)},ei.apply(d(),arguments)}function sJ(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return sJ(e())},t}function vm(){return sJ(kg.apply(null,arguments).paddingInner(1))}function uF(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function iJ(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function G0(){}var $g=.7,T1=1/$g,vf="\\s*([+-]?\\d+)\\s*",Cg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",la="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Met=/^#([0-9a-f]{3,8})$/,Let=new RegExp(`^rgb\\(${vf},${vf},${vf}\\)$`),zet=new RegExp(`^rgb\\(${la},${la},${la}\\)$`),Bet=new RegExp(`^rgba\\(${vf},${vf},${vf},${Cg}\\)$`),jet=new RegExp(`^rgba\\(${la},${la},${la},${Cg}\\)$`),Vet=new RegExp(`^hsl\\(${Cg},${la},${la}\\)$`),Wet=new RegExp(`^hsla\\(${Cg},${la},${la},${Cg}\\)$`),z4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};uF(G0,Tg,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:B4,formatHex:B4,formatHex8:Uet,formatHsl:Get,formatRgb:j4,toString:j4});function B4(){return this.rgb().formatHex()}function Uet(){return this.rgb().formatHex8()}function Get(){return aJ(this).formatHsl()}function j4(){return this.rgb().formatRgb()}function Tg(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Met.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?V4(e):n===3?new Io(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Jv(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Jv(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Let.exec(t))?new Io(e[1],e[2],e[3],1):(e=zet.exec(t))?new Io(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Bet.exec(t))?Jv(e[1],e[2],e[3],e[4]):(e=jet.exec(t))?Jv(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Vet.exec(t))?G4(e[1],e[2]/100,e[3]/100,1):(e=Wet.exec(t))?G4(e[1],e[2]/100,e[3]/100,e[4]):z4.hasOwnProperty(t)?V4(z4[t]):t==="transparent"?new Io(NaN,NaN,NaN,0):null}function V4(t){return new Io(t>>16&255,t>>8&255,t&255,1)}function Jv(t,e,n,r){return r<=0&&(t=e=n=NaN),new Io(t,e,n,r)}function Het(t){return t instanceof G0||(t=Tg(t)),t?(t=t.rgb(),new Io(t.r,t.g,t.b,t.opacity)):new Io}function D2(t,e,n,r){return arguments.length===1?Het(t):new Io(t,e,n,r??1)}function Io(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}uF(Io,D2,iJ(G0,{brighter(t){return t=t==null?T1:Math.pow(T1,t),new Io(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?$g:Math.pow($g,t),new Io(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Io(xc(this.r),xc(this.g),xc(this.b),_1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:W4,formatHex:W4,formatHex8:qet,formatRgb:U4,toString:U4}));function W4(){return`#${cc(this.r)}${cc(this.g)}${cc(this.b)}`}function qet(){return`#${cc(this.r)}${cc(this.g)}${cc(this.b)}${cc((isNaN(this.opacity)?1:this.opacity)*255)}`}function U4(){const t=_1(this.opacity);return`${t===1?"rgb(":"rgba("}${xc(this.r)}, ${xc(this.g)}, ${xc(this.b)}${t===1?")":`, ${t})`}`}function _1(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function xc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function cc(t){return t=xc(t),(t<16?"0":"")+t.toString(16)}function G4(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new fi(t,e,n,r)}function aJ(t){if(t instanceof fi)return new fi(t.h,t.s,t.l,t.opacity);if(t instanceof G0||(t=Tg(t)),!t)return new fi;if(t instanceof fi)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,o=Math.min(e,n,r),s=Math.max(e,n,r),i=NaN,a=s-o,l=(s+o)/2;return a?(e===s?i=(n-r)/a+(n<r)*6:n===s?i=(r-e)/a+2:i=(e-n)/a+4,a/=l<.5?s+o:2-s-o,i*=60):a=l>0&&l<1?0:i,new fi(i,a,l,t.opacity)}function Ket(t,e,n,r){return arguments.length===1?aJ(t):new fi(t,e,n,r??1)}function fi(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}uF(fi,Ket,iJ(G0,{brighter(t){return t=t==null?T1:Math.pow(T1,t),new fi(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?$g:Math.pow($g,t),new fi(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,o=2*n-r;return new Io(CT(t>=240?t-240:t+120,o,r),CT(t,o,r),CT(t<120?t+240:t-120,o,r),this.opacity)},clamp(){return new fi(H4(this.h),eb(this.s),eb(this.l),_1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=_1(this.opacity);return`${t===1?"hsl(":"hsla("}${H4(this.h)}, ${eb(this.s)*100}%, ${eb(this.l)*100}%${t===1?")":`, ${t})`}`}}));function H4(t){return t=(t||0)%360,t<0?t+360:t}function eb(t){return Math.max(0,Math.min(1,t||0))}function CT(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const cF=t=>()=>t;function Xet(t,e){return function(n){return t+n*e}}function Yet(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Zet(t){return(t=+t)==1?lJ:function(e,n){return n-e?Yet(e,n,t):cF(isNaN(e)?n:e)}}function lJ(t,e){var n=e-t;return n?Xet(t,n):cF(isNaN(t)?e:t)}const q4=function t(e){var n=Zet(e);function r(o,s){var i=n((o=D2(o)).r,(s=D2(s)).r),a=n(o.g,s.g),l=n(o.b,s.b),u=lJ(o.opacity,s.opacity);return function(c){return o.r=i(c),o.g=a(c),o.b=l(c),o.opacity=u(c),o+""}}return r.gamma=t,r}(1);function Qet(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),o;return function(s){for(o=0;o<n;++o)r[o]=t[o]*(1-s)+e[o]*s;return r}}function Jet(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function ett(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,o=new Array(r),s=new Array(n),i;for(i=0;i<r;++i)o[i]=eh(t[i],e[i]);for(;i<n;++i)s[i]=e[i];return function(a){for(i=0;i<r;++i)s[i]=o[i](a);return s}}function ttt(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function I1(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function ntt(t,e){var n={},r={},o;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(o in e)o in t?n[o]=eh(t[o],e[o]):r[o]=e[o];return function(s){for(o in n)r[o]=n[o](s);return r}}var F2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,TT=new RegExp(F2.source,"g");function rtt(t){return function(){return t}}function ott(t){return function(e){return t(e)+""}}function stt(t,e){var n=F2.lastIndex=TT.lastIndex=0,r,o,s,i=-1,a=[],l=[];for(t=t+"",e=e+"";(r=F2.exec(t))&&(o=TT.exec(e));)(s=o.index)>n&&(s=e.slice(n,s),a[i]?a[i]+=s:a[++i]=s),(r=r[0])===(o=o[0])?a[i]?a[i]+=o:a[++i]=o:(a[++i]=null,l.push({i,x:I1(r,o)})),n=TT.lastIndex;return n<e.length&&(s=e.slice(n),a[i]?a[i]+=s:a[++i]=s),a.length<2?l[0]?ott(l[0].x):rtt(e):(e=l.length,function(u){for(var c=0,d;c<e;++c)a[(d=l[c]).i]=d.x(u);return a.join("")})}function eh(t,e){var n=typeof e,r;return e==null||n==="boolean"?cF(e):(n==="number"?I1:n==="string"?(r=Tg(e))?(e=r,q4):stt:e instanceof Tg?q4:e instanceof Date?ttt:Jet(e)?Qet:Array.isArray(e)?ett:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?ntt:I1)(t,e)}function dF(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function itt(t,e){e===void 0&&(e=t,t=eh);for(var n=0,r=e.length-1,o=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(o,o=e[++n]);return function(i){var a=Math.max(0,Math.min(r-1,Math.floor(i*=r)));return s[a](i-a)}}function att(t){return function(){return t}}function N1(t){return+t}var K4=[0,1];function ao(t){return t}function M2(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:att(isNaN(e)?NaN:.5)}function ltt(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function utt(t,e,n){var r=t[0],o=t[1],s=e[0],i=e[1];return o<r?(r=M2(o,r),s=n(i,s)):(r=M2(r,o),s=n(s,i)),function(a){return s(r(a))}}function ctt(t,e,n){var r=Math.min(t.length,e.length)-1,o=new Array(r),s=new Array(r),i=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++i<r;)o[i]=M2(t[i],t[i+1]),s[i]=n(e[i],e[i+1]);return function(a){var l=U0(t,a,1,r)-1;return s[l](o[l](a))}}function H0(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function $$(){var t=K4,e=K4,n=eh,r,o,s,i=ao,a,l,u;function c(){var f=Math.min(t.length,e.length);return i!==ao&&(i=ltt(t[0],t[f-1])),a=f>2?ctt:utt,l=u=null,d}function d(f){return f==null||isNaN(f=+f)?s:(l||(l=a(t.map(r),e,n)))(r(i(f)))}return d.invert=function(f){return i(o((u||(u=a(e,t.map(r),I1)))(f)))},d.domain=function(f){return arguments.length?(t=Array.from(f,N1),c()):t.slice()},d.range=function(f){return arguments.length?(e=Array.from(f),c()):e.slice()},d.rangeRound=function(f){return e=Array.from(f),n=dF,c()},d.clamp=function(f){return arguments.length?(i=f?!0:ao,c()):i!==ao},d.interpolate=function(f){return arguments.length?(n=f,c()):n},d.unknown=function(f){return arguments.length?(s=f,d):s},function(f,p){return r=f,o=p,c()}}function fF(){return $$()(ao,ao)}function dtt(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function E1(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function np(t){return t=E1(Math.abs(t)),t?t[1]:NaN}function ftt(t,e){return function(n,r){for(var o=n.length,s=[],i=0,a=t[0],l=0;o>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(o-=a,o+a)),!((l+=a+1)>r));)a=t[i=(i+1)%t.length];return s.reverse().join(e)}}function ptt(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var htt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function _g(t){if(!(e=htt.exec(t)))throw new Error("invalid format: "+t);var e;return new pF({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}_g.prototype=pF.prototype;function pF(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}pF.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function mtt(t){e:for(var e=t.length,n=1,r=-1,o;n<e;++n)switch(t[n]){case".":r=o=n;break;case"0":r===0&&(r=n),o=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(o+1):t}var uJ;function gtt(t,e){var n=E1(t,e);if(!n)return t+"";var r=n[0],o=n[1],s=o-(uJ=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,i=r.length;return s===i?r:s>i?r+new Array(s-i+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+E1(t,Math.max(0,e+s-1))[0]}function X4(t,e){var n=E1(t,e);if(!n)return t+"";var r=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+r:r.length>o+1?r.slice(0,o+1)+"."+r.slice(o+1):r+new Array(o-r.length+2).join("0")}const Y4={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:dtt,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>X4(t*100,e),r:X4,s:gtt,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Z4(t){return t}var Q4=Array.prototype.map,J4=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function ytt(t){var e=t.grouping===void 0||t.thousands===void 0?Z4:ftt(Q4.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",o=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?Z4:ptt(Q4.call(t.numerals,String)),i=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(d){d=_g(d);var f=d.fill,p=d.align,h=d.sign,m=d.symbol,g=d.zero,y=d.width,v=d.comma,b=d.precision,x=d.trim,w=d.type;w==="n"?(v=!0,w="g"):Y4[w]||(b===void 0&&(b=12),x=!0,w="g"),(g||f==="0"&&p==="=")&&(g=!0,f="0",p="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",k=m==="$"?r:/[%p]/.test(w)?i:"",$=Y4[w],C=/[defgprs%]/.test(w);b=b===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function I(E){var O=S,R=k,z,L,B;if(w==="c")R=$(E)+R,E="";else{E=+E;var D=E<0||1/E<0;if(E=isNaN(E)?l:$(Math.abs(E),b),x&&(E=mtt(E)),D&&+E==0&&h!=="+"&&(D=!1),O=(D?h==="("?h:a:h==="-"||h==="("?"":h)+O,R=(w==="s"?J4[8+uJ/3]:"")+R+(D&&h==="("?")":""),C){for(z=-1,L=E.length;++z<L;)if(B=E.charCodeAt(z),48>B||B>57){R=(B===46?o+E.slice(z+1):E.slice(z))+R,E=E.slice(0,z);break}}}v&&!g&&(E=e(E,1/0));var F=O.length+E.length+R.length,j=F<y?new Array(y-F+1).join(f):"";switch(v&&g&&(E=e(j+E,j.length?y-R.length:1/0),j=""),p){case"<":E=O+E+R+j;break;case"=":E=O+j+E+R;break;case"^":E=j.slice(0,F=j.length>>1)+O+E+R+j.slice(F);break;default:E=j+O+E+R;break}return s(E)}return I.toString=function(){return d+""},I}function c(d,f){var p=u((d=_g(d),d.type="f",d)),h=Math.max(-8,Math.min(8,Math.floor(np(f)/3)))*3,m=Math.pow(10,-h),g=J4[8+h/3];return function(y){return p(m*y)+g}}return{format:u,formatPrefix:c}}var tb,hF,cJ;vtt({thousands:",",grouping:[3],currency:["$",""]});function vtt(t){return tb=ytt(t),hF=tb.format,cJ=tb.formatPrefix,tb}function btt(t){return Math.max(0,-np(Math.abs(t)))}function xtt(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(np(e)/3)))*3-np(Math.abs(t)))}function wtt(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,np(e)-np(t))+1}function dJ(t,e,n,r){var o=P2(t,e,n),s;switch(r=_g(r??",f"),r.type){case"s":{var i=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=xtt(o,i))&&(r.precision=s),cJ(r,i)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=wtt(o,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=btt(o))&&(r.precision=s-(r.type==="%")*2);break}}return hF(r)}function Ru(t){var e=t.domain;return t.ticks=function(n){var r=e();return A2(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var o=e();return dJ(o[0],o[o.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),o=0,s=r.length-1,i=r[o],a=r[s],l,u,c=10;for(a<i&&(u=i,i=a,a=u,u=o,o=s,s=u);c-- >0;){if(u=O2(i,a,n),u===l)return r[o]=i,r[s]=a,e(r);if(u>0)i=Math.floor(i/u)*u,a=Math.ceil(a/u)*u;else if(u<0)i=Math.ceil(i*u)/u,a=Math.floor(a*u)/u;else break;l=u}return t},t}function A1(){var t=fF();return t.copy=function(){return H0(t,A1())},ei.apply(t,arguments),Ru(t)}function fJ(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,N1),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return fJ(t).unknown(e)},t=arguments.length?Array.from(t,N1):[0,1],Ru(n)}function pJ(t,e){t=t.slice();var n=0,r=t.length-1,o=t[n],s=t[r],i;return s<o&&(i=n,n=r,r=i,i=o,o=s,s=i),t[n]=e.floor(o),t[r]=e.ceil(s),t}function eV(t){return Math.log(t)}function tV(t){return Math.exp(t)}function Stt(t){return-Math.log(-t)}function ktt(t){return-Math.exp(-t)}function $tt(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Ctt(t){return t===10?$tt:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Ttt(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function nV(t){return(e,n)=>-t(-e,n)}function mF(t){const e=t(eV,tV),n=e.domain;let r=10,o,s;function i(){return o=Ttt(r),s=Ctt(r),n()[0]<0?(o=nV(o),s=nV(s),t(Stt,ktt)):t(eV,tV),e}return e.base=function(a){return arguments.length?(r=+a,i()):r},e.domain=function(a){return arguments.length?(n(a),i()):n()},e.ticks=a=>{const l=n();let u=l[0],c=l[l.length-1];const d=c<u;d&&([u,c]=[c,u]);let f=o(u),p=o(c),h,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&p-f<g){if(f=Math.floor(f),p=Math.ceil(p),u>0){for(;f<=p;++f)for(h=1;h<r;++h)if(m=f<0?h/s(-f):h*s(f),!(m<u)){if(m>c)break;y.push(m)}}else for(;f<=p;++f)for(h=r-1;h>=1;--h)if(m=f>0?h/s(-f):h*s(f),!(m<u)){if(m>c)break;y.push(m)}y.length*2<g&&(y=A2(u,c,g))}else y=A2(f,p,Math.min(p-f,g)).map(s);return d?y.reverse():y},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=_g(l)).precision==null&&(l.trim=!0),l=hF(l)),a===1/0)return l;const u=Math.max(1,r*a/e.ticks().length);return c=>{let d=c/s(Math.round(o(c)));return d*r<r-.5&&(d*=r),d<=u?l(c):""}},e.nice=()=>n(pJ(n(),{floor:a=>s(Math.floor(o(a))),ceil:a=>s(Math.ceil(o(a)))})),e}function hJ(){const t=mF($$()).domain([1,10]);return t.copy=()=>H0(t,hJ()).base(t.base()),ei.apply(t,arguments),t}function rV(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function oV(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function gF(t){var e=1,n=t(rV(e),oV(e));return n.constant=function(r){return arguments.length?t(rV(e=+r),oV(e)):e},Ru(n)}function mJ(){var t=gF($$());return t.copy=function(){return H0(t,mJ()).constant(t.constant())},ei.apply(t,arguments)}function sV(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function _tt(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Itt(t){return t<0?-t*t:t*t}function yF(t){var e=t(ao,ao),n=1;function r(){return n===1?t(ao,ao):n===.5?t(_tt,Itt):t(sV(n),sV(1/n))}return e.exponent=function(o){return arguments.length?(n=+o,r()):n},Ru(e)}function vF(){var t=yF($$());return t.copy=function(){return H0(t,vF()).exponent(t.exponent())},ei.apply(t,arguments),t}function Ntt(){return vF.apply(null,arguments).exponent(.5)}function iV(t){return Math.sign(t)*t*t}function Ett(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function gJ(){var t=fF(),e=[0,1],n=!1,r;function o(s){var i=Ett(t(s));return isNaN(i)?r:n?Math.round(i):i}return o.invert=function(s){return t.invert(iV(s))},o.domain=function(s){return arguments.length?(t.domain(s),o):t.domain()},o.range=function(s){return arguments.length?(t.range((e=Array.from(s,N1)).map(iV)),o):e.slice()},o.rangeRound=function(s){return o.range(s).round(!0)},o.round=function(s){return arguments.length?(n=!!s,o):n},o.clamp=function(s){return arguments.length?(t.clamp(s),o):t.clamp()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.copy=function(){return gJ(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},ei.apply(o,arguments),Ru(o)}function yJ(){var t=[],e=[],n=[],r;function o(){var i=0,a=Math.max(1,e.length);for(n=new Array(a-1);++i<a;)n[i-1]=Det(t,i/a);return s}function s(i){return i==null||isNaN(i=+i)?r:e[U0(n,i)]}return s.invertExtent=function(i){var a=e.indexOf(i);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},s.domain=function(i){if(!arguments.length)return t.slice();t=[];for(let a of i)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Xl),o()},s.range=function(i){return arguments.length?(e=Array.from(i),o()):e.slice()},s.unknown=function(i){return arguments.length?(r=i,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return yJ().domain(t).range(e).unknown(r)},ei.apply(s,arguments)}function vJ(){var t=0,e=1,n=1,r=[.5],o=[0,1],s;function i(l){return l!=null&&l<=l?o[U0(r,l,0,n)]:s}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return i}return i.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},i.range=function(l){return arguments.length?(n=(o=Array.from(l)).length-1,a()):o.slice()},i.invertExtent=function(l){var u=o.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},i.unknown=function(l){return arguments.length&&(s=l),i},i.thresholds=function(){return r.slice()},i.copy=function(){return vJ().domain([t,e]).range(o).unknown(s)},ei.apply(Ru(i),arguments)}function bJ(){var t=[.5],e=[0,1],n,r=1;function o(s){return s!=null&&s<=s?e[U0(t,s,0,r)]:n}return o.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),o):t.slice()},o.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),o):e.slice()},o.invertExtent=function(s){var i=e.indexOf(s);return[t[i-1],t[i]]},o.unknown=function(s){return arguments.length?(n=s,o):n},o.copy=function(){return bJ().domain(t).range(e).unknown(n)},ei.apply(o,arguments)}const _T=new Date,IT=new Date;function lr(t,e,n,r){function o(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return o.floor=s=>(t(s=new Date(+s)),s),o.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),o.round=s=>{const i=o(s),a=o.ceil(s);return s-i<a-s?i:a},o.offset=(s,i)=>(e(s=new Date(+s),i==null?1:Math.floor(i)),s),o.range=(s,i,a)=>{const l=[];if(s=o.ceil(s),a=a==null?1:Math.floor(a),!(s<i)||!(a>0))return l;let u;do l.push(u=new Date(+s)),e(s,a),t(s);while(u<s&&s<i);return l},o.filter=s=>lr(i=>{if(i>=i)for(;t(i),!s(i);)i.setTime(i-1)},(i,a)=>{if(i>=i)if(a<0)for(;++a<=0;)for(;e(i,-1),!s(i););else for(;--a>=0;)for(;e(i,1),!s(i););}),n&&(o.count=(s,i)=>(_T.setTime(+s),IT.setTime(+i),t(_T),t(IT),Math.floor(n(_T,IT))),o.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?o.filter(r?i=>r(i)%s===0:i=>o.count(0,i)%s===0):o)),o}const O1=lr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);O1.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?lr(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):O1);O1.range;const Oa=1e3,Ds=Oa*60,Pa=Ds*60,rl=Pa*24,bF=rl*7,aV=rl*30,NT=rl*365,dc=lr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Oa)},(t,e)=>(e-t)/Oa,t=>t.getUTCSeconds());dc.range;const xF=lr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Oa)},(t,e)=>{t.setTime(+t+e*Ds)},(t,e)=>(e-t)/Ds,t=>t.getMinutes());xF.range;const wF=lr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ds)},(t,e)=>(e-t)/Ds,t=>t.getUTCMinutes());wF.range;const SF=lr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Oa-t.getMinutes()*Ds)},(t,e)=>{t.setTime(+t+e*Pa)},(t,e)=>(e-t)/Pa,t=>t.getHours());SF.range;const kF=lr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Pa)},(t,e)=>(e-t)/Pa,t=>t.getUTCHours());kF.range;const q0=lr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ds)/rl,t=>t.getDate()-1);q0.range;const C$=lr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/rl,t=>t.getUTCDate()-1);C$.range;const xJ=lr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/rl,t=>Math.floor(t/rl));xJ.range;function dd(t){return lr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Ds)/bF)}const T$=dd(0),P1=dd(1),Att=dd(2),Ott=dd(3),rp=dd(4),Ptt=dd(5),Rtt=dd(6);T$.range;P1.range;Att.range;Ott.range;rp.range;Ptt.range;Rtt.range;function fd(t){return lr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/bF)}const _$=fd(0),R1=fd(1),Dtt=fd(2),Ftt=fd(3),op=fd(4),Mtt=fd(5),Ltt=fd(6);_$.range;R1.range;Dtt.range;Ftt.range;op.range;Mtt.range;Ltt.range;const $F=lr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());$F.range;const CF=lr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());CF.range;const ol=lr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());ol.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:lr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});ol.range;const sl=lr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());sl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:lr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});sl.range;function wJ(t,e,n,r,o,s){const i=[[dc,1,Oa],[dc,5,5*Oa],[dc,15,15*Oa],[dc,30,30*Oa],[s,1,Ds],[s,5,5*Ds],[s,15,15*Ds],[s,30,30*Ds],[o,1,Pa],[o,3,3*Pa],[o,6,6*Pa],[o,12,12*Pa],[r,1,rl],[r,2,2*rl],[n,1,bF],[e,1,aV],[e,3,3*aV],[t,1,NT]];function a(u,c,d){const f=c<u;f&&([u,c]=[c,u]);const p=d&&typeof d.range=="function"?d:l(u,c,d),h=p?p.range(u,+c+1):[];return f?h.reverse():h}function l(u,c,d){const f=Math.abs(c-u)/d,p=aF(([,,g])=>g).right(i,f);if(p===i.length)return t.every(P2(u/NT,c/NT,d));if(p===0)return O1.every(Math.max(P2(u,c,d),1));const[h,m]=i[f/i[p-1][2]<i[p][2]/f?p-1:p];return h.every(m)}return[a,l]}const[ztt,Btt]=wJ(sl,CF,_$,xJ,kF,wF),[jtt,Vtt]=wJ(ol,$F,T$,q0,SF,xF);function ET(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function AT(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function _h(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Wtt(t){var e=t.dateTime,n=t.date,r=t.time,o=t.periods,s=t.days,i=t.shortDays,a=t.months,l=t.shortMonths,u=Ih(o),c=Nh(o),d=Ih(s),f=Nh(s),p=Ih(i),h=Nh(i),m=Ih(a),g=Nh(a),y=Ih(l),v=Nh(l),b={a:D,A:F,b:j,B:G,c:null,d:pV,e:pV,f:fnt,g:Snt,G:$nt,H:unt,I:cnt,j:dnt,L:SJ,m:pnt,M:hnt,p:Y,q:X,Q:gV,s:yV,S:mnt,u:gnt,U:ynt,V:vnt,w:bnt,W:xnt,x:null,X:null,y:wnt,Y:knt,Z:Cnt,"%":mV},x={a:ee,A:ie,b:se,B:de,c:null,d:hV,e:hV,f:Nnt,g:znt,G:jnt,H:Tnt,I:_nt,j:Int,L:$J,m:Ent,M:Ant,p:me,q:le,Q:gV,s:yV,S:Ont,u:Pnt,U:Rnt,V:Dnt,w:Fnt,W:Mnt,x:null,X:null,y:Lnt,Y:Bnt,Z:Vnt,"%":mV},w={a:I,A:E,b:O,B:R,c:z,d:dV,e:dV,f:snt,g:cV,G:uV,H:fV,I:fV,j:tnt,L:ont,m:ent,M:nnt,p:C,q:Jtt,Q:ant,s:lnt,S:rnt,u:Ktt,U:Xtt,V:Ytt,w:qtt,W:Ztt,x:L,X:B,y:cV,Y:uV,Z:Qtt,"%":int};b.x=S(n,b),b.X=S(r,b),b.c=S(e,b),x.x=S(n,x),x.X=S(r,x),x.c=S(e,x);function S(oe,fe){return function(pe){var Q=[],_e=-1,Ee=0,De=oe.length,Pe,He,st;for(pe instanceof Date||(pe=new Date(+pe));++_e<De;)oe.charCodeAt(_e)===37&&(Q.push(oe.slice(Ee,_e)),(He=lV[Pe=oe.charAt(++_e)])!=null?Pe=oe.charAt(++_e):He=Pe==="e"?" ":"0",(st=fe[Pe])&&(Pe=st(pe,He)),Q.push(Pe),Ee=_e+1);return Q.push(oe.slice(Ee,_e)),Q.join("")}}function k(oe,fe){return function(pe){var Q=_h(1900,void 0,1),_e=$(Q,oe,pe+="",0),Ee,De;if(_e!=pe.length)return null;if("Q"in Q)return new Date(Q.Q);if("s"in Q)return new Date(Q.s*1e3+("L"in Q?Q.L:0));if(fe&&!("Z"in Q)&&(Q.Z=0),"p"in Q&&(Q.H=Q.H%12+Q.p*12),Q.m===void 0&&(Q.m="q"in Q?Q.q:0),"V"in Q){if(Q.V<1||Q.V>53)return null;"w"in Q||(Q.w=1),"Z"in Q?(Ee=AT(_h(Q.y,0,1)),De=Ee.getUTCDay(),Ee=De>4||De===0?R1.ceil(Ee):R1(Ee),Ee=C$.offset(Ee,(Q.V-1)*7),Q.y=Ee.getUTCFullYear(),Q.m=Ee.getUTCMonth(),Q.d=Ee.getUTCDate()+(Q.w+6)%7):(Ee=ET(_h(Q.y,0,1)),De=Ee.getDay(),Ee=De>4||De===0?P1.ceil(Ee):P1(Ee),Ee=q0.offset(Ee,(Q.V-1)*7),Q.y=Ee.getFullYear(),Q.m=Ee.getMonth(),Q.d=Ee.getDate()+(Q.w+6)%7)}else("W"in Q||"U"in Q)&&("w"in Q||(Q.w="u"in Q?Q.u%7:"W"in Q?1:0),De="Z"in Q?AT(_h(Q.y,0,1)).getUTCDay():ET(_h(Q.y,0,1)).getDay(),Q.m=0,Q.d="W"in Q?(Q.w+6)%7+Q.W*7-(De+5)%7:Q.w+Q.U*7-(De+6)%7);return"Z"in Q?(Q.H+=Q.Z/100|0,Q.M+=Q.Z%100,AT(Q)):ET(Q)}}function $(oe,fe,pe,Q){for(var _e=0,Ee=fe.length,De=pe.length,Pe,He;_e<Ee;){if(Q>=De)return-1;if(Pe=fe.charCodeAt(_e++),Pe===37){if(Pe=fe.charAt(_e++),He=w[Pe in lV?fe.charAt(_e++):Pe],!He||(Q=He(oe,pe,Q))<0)return-1}else if(Pe!=pe.charCodeAt(Q++))return-1}return Q}function C(oe,fe,pe){var Q=u.exec(fe.slice(pe));return Q?(oe.p=c.get(Q[0].toLowerCase()),pe+Q[0].length):-1}function I(oe,fe,pe){var Q=p.exec(fe.slice(pe));return Q?(oe.w=h.get(Q[0].toLowerCase()),pe+Q[0].length):-1}function E(oe,fe,pe){var Q=d.exec(fe.slice(pe));return Q?(oe.w=f.get(Q[0].toLowerCase()),pe+Q[0].length):-1}function O(oe,fe,pe){var Q=y.exec(fe.slice(pe));return Q?(oe.m=v.get(Q[0].toLowerCase()),pe+Q[0].length):-1}function R(oe,fe,pe){var Q=m.exec(fe.slice(pe));return Q?(oe.m=g.get(Q[0].toLowerCase()),pe+Q[0].length):-1}function z(oe,fe,pe){return $(oe,e,fe,pe)}function L(oe,fe,pe){return $(oe,n,fe,pe)}function B(oe,fe,pe){return $(oe,r,fe,pe)}function D(oe){return i[oe.getDay()]}function F(oe){return s[oe.getDay()]}function j(oe){return l[oe.getMonth()]}function G(oe){return a[oe.getMonth()]}function Y(oe){return o[+(oe.getHours()>=12)]}function X(oe){return 1+~~(oe.getMonth()/3)}function ee(oe){return i[oe.getUTCDay()]}function ie(oe){return s[oe.getUTCDay()]}function se(oe){return l[oe.getUTCMonth()]}function de(oe){return a[oe.getUTCMonth()]}function me(oe){return o[+(oe.getUTCHours()>=12)]}function le(oe){return 1+~~(oe.getUTCMonth()/3)}return{format:function(oe){var fe=S(oe+="",b);return fe.toString=function(){return oe},fe},parse:function(oe){var fe=k(oe+="",!1);return fe.toString=function(){return oe},fe},utcFormat:function(oe){var fe=S(oe+="",x);return fe.toString=function(){return oe},fe},utcParse:function(oe){var fe=k(oe+="",!0);return fe.toString=function(){return oe},fe}}}var lV={"-":"",_:" ",0:"0"},$r=/^\s*\d+/,Utt=/^%/,Gtt=/[\\^$*+?|[\]().{}]/g;function kt(t,e,n){var r=t<0?"-":"",o=(r?-t:t)+"",s=o.length;return r+(s<n?new Array(n-s+1).join(e)+o:o)}function Htt(t){return t.replace(Gtt,"\\$&")}function Ih(t){return new RegExp("^(?:"+t.map(Htt).join("|")+")","i")}function Nh(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function qtt(t,e,n){var r=$r.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Ktt(t,e,n){var r=$r.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Xtt(t,e,n){var r=$r.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Ytt(t,e,n){var r=$r.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Ztt(t,e,n){var r=$r.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function uV(t,e,n){var r=$r.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function cV(t,e,n){var r=$r.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Qtt(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Jtt(t,e,n){var r=$r.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function ent(t,e,n){var r=$r.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function dV(t,e,n){var r=$r.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function tnt(t,e,n){var r=$r.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function fV(t,e,n){var r=$r.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function nnt(t,e,n){var r=$r.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function rnt(t,e,n){var r=$r.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function ont(t,e,n){var r=$r.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function snt(t,e,n){var r=$r.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function int(t,e,n){var r=Utt.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function ant(t,e,n){var r=$r.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function lnt(t,e,n){var r=$r.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function pV(t,e){return kt(t.getDate(),e,2)}function unt(t,e){return kt(t.getHours(),e,2)}function cnt(t,e){return kt(t.getHours()%12||12,e,2)}function dnt(t,e){return kt(1+q0.count(ol(t),t),e,3)}function SJ(t,e){return kt(t.getMilliseconds(),e,3)}function fnt(t,e){return SJ(t,e)+"000"}function pnt(t,e){return kt(t.getMonth()+1,e,2)}function hnt(t,e){return kt(t.getMinutes(),e,2)}function mnt(t,e){return kt(t.getSeconds(),e,2)}function gnt(t){var e=t.getDay();return e===0?7:e}function ynt(t,e){return kt(T$.count(ol(t)-1,t),e,2)}function kJ(t){var e=t.getDay();return e>=4||e===0?rp(t):rp.ceil(t)}function vnt(t,e){return t=kJ(t),kt(rp.count(ol(t),t)+(ol(t).getDay()===4),e,2)}function bnt(t){return t.getDay()}function xnt(t,e){return kt(P1.count(ol(t)-1,t),e,2)}function wnt(t,e){return kt(t.getFullYear()%100,e,2)}function Snt(t,e){return t=kJ(t),kt(t.getFullYear()%100,e,2)}function knt(t,e){return kt(t.getFullYear()%1e4,e,4)}function $nt(t,e){var n=t.getDay();return t=n>=4||n===0?rp(t):rp.ceil(t),kt(t.getFullYear()%1e4,e,4)}function Cnt(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+kt(e/60|0,"0",2)+kt(e%60,"0",2)}function hV(t,e){return kt(t.getUTCDate(),e,2)}function Tnt(t,e){return kt(t.getUTCHours(),e,2)}function _nt(t,e){return kt(t.getUTCHours()%12||12,e,2)}function Int(t,e){return kt(1+C$.count(sl(t),t),e,3)}function $J(t,e){return kt(t.getUTCMilliseconds(),e,3)}function Nnt(t,e){return $J(t,e)+"000"}function Ent(t,e){return kt(t.getUTCMonth()+1,e,2)}function Ant(t,e){return kt(t.getUTCMinutes(),e,2)}function Ont(t,e){return kt(t.getUTCSeconds(),e,2)}function Pnt(t){var e=t.getUTCDay();return e===0?7:e}function Rnt(t,e){return kt(_$.count(sl(t)-1,t),e,2)}function CJ(t){var e=t.getUTCDay();return e>=4||e===0?op(t):op.ceil(t)}function Dnt(t,e){return t=CJ(t),kt(op.count(sl(t),t)+(sl(t).getUTCDay()===4),e,2)}function Fnt(t){return t.getUTCDay()}function Mnt(t,e){return kt(R1.count(sl(t)-1,t),e,2)}function Lnt(t,e){return kt(t.getUTCFullYear()%100,e,2)}function znt(t,e){return t=CJ(t),kt(t.getUTCFullYear()%100,e,2)}function Bnt(t,e){return kt(t.getUTCFullYear()%1e4,e,4)}function jnt(t,e){var n=t.getUTCDay();return t=n>=4||n===0?op(t):op.ceil(t),kt(t.getUTCFullYear()%1e4,e,4)}function Vnt(){return"+0000"}function mV(){return"%"}function gV(t){return+t}function yV(t){return Math.floor(+t/1e3)}var Sd,TJ,_J;Wnt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Wnt(t){return Sd=Wtt(t),TJ=Sd.format,Sd.parse,_J=Sd.utcFormat,Sd.utcParse,Sd}function Unt(t){return new Date(t)}function Gnt(t){return t instanceof Date?+t:+new Date(+t)}function TF(t,e,n,r,o,s,i,a,l,u){var c=fF(),d=c.invert,f=c.domain,p=u(".%L"),h=u(":%S"),m=u("%I:%M"),g=u("%I %p"),y=u("%a %d"),v=u("%b %d"),b=u("%B"),x=u("%Y");function w(S){return(l(S)<S?p:a(S)<S?h:i(S)<S?m:s(S)<S?g:r(S)<S?o(S)<S?y:v:n(S)<S?b:x)(S)}return c.invert=function(S){return new Date(d(S))},c.domain=function(S){return arguments.length?f(Array.from(S,Gnt)):f().map(Unt)},c.ticks=function(S){var k=f();return t(k[0],k[k.length-1],S??10)},c.tickFormat=function(S,k){return k==null?w:u(k)},c.nice=function(S){var k=f();return(!S||typeof S.range!="function")&&(S=e(k[0],k[k.length-1],S??10)),S?f(pJ(k,S)):c},c.copy=function(){return H0(c,TF(t,e,n,r,o,s,i,a,l,u))},c}function Hnt(){return ei.apply(TF(jtt,Vtt,ol,$F,T$,q0,SF,xF,dc,TJ).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function qnt(){return ei.apply(TF(ztt,Btt,sl,CF,_$,C$,kF,wF,dc,_J).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function I$(){var t=0,e=1,n,r,o,s,i=ao,a=!1,l;function u(d){return d==null||isNaN(d=+d)?l:i(o===0?.5:(d=(s(d)-n)*o,a?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([t,e]=d,n=s(t=+t),r=s(e=+e),o=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(d){return arguments.length?(a=!!d,u):a},u.interpolator=function(d){return arguments.length?(i=d,u):i};function c(d){return function(f){var p,h;return arguments.length?([p,h]=f,i=d(p,h),u):[i(0),i(1)]}}return u.range=c(eh),u.rangeRound=c(dF),u.unknown=function(d){return arguments.length?(l=d,u):l},function(d){return s=d,n=d(t),r=d(e),o=n===r?0:1/(r-n),u}}function Du(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function IJ(){var t=Ru(I$()(ao));return t.copy=function(){return Du(t,IJ())},vl.apply(t,arguments)}function NJ(){var t=mF(I$()).domain([1,10]);return t.copy=function(){return Du(t,NJ()).base(t.base())},vl.apply(t,arguments)}function EJ(){var t=gF(I$());return t.copy=function(){return Du(t,EJ()).constant(t.constant())},vl.apply(t,arguments)}function _F(){var t=yF(I$());return t.copy=function(){return Du(t,_F()).exponent(t.exponent())},vl.apply(t,arguments)}function Knt(){return _F.apply(null,arguments).exponent(.5)}function AJ(){var t=[],e=ao;function n(r){if(r!=null&&!isNaN(r=+r))return e((U0(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let o of r)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(Xl),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,o)=>e(o/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(o,s)=>Ret(t,s/r))},n.copy=function(){return AJ(e).domain(t)},vl.apply(n,arguments)}function N$(){var t=0,e=.5,n=1,r=1,o,s,i,a,l,u=ao,c,d=!1,f;function p(m){return isNaN(m=+m)?f:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:l),u(d?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([t,e,n]=m,o=c(t=+t),s=c(e=+e),i=c(n=+n),a=o===s?0:.5/(s-o),l=s===i?0:.5/(i-s),r=s<o?-1:1,p):[t,e,n]},p.clamp=function(m){return arguments.length?(d=!!m,p):d},p.interpolator=function(m){return arguments.length?(u=m,p):u};function h(m){return function(g){var y,v,b;return arguments.length?([y,v,b]=g,u=itt(m,[y,v,b]),p):[u(0),u(.5),u(1)]}}return p.range=h(eh),p.rangeRound=h(dF),p.unknown=function(m){return arguments.length?(f=m,p):f},function(m){return c=m,o=m(t),s=m(e),i=m(n),a=o===s?0:.5/(s-o),l=s===i?0:.5/(i-s),r=s<o?-1:1,p}}function OJ(){var t=Ru(N$()(ao));return t.copy=function(){return Du(t,OJ())},vl.apply(t,arguments)}function PJ(){var t=mF(N$()).domain([.1,1,10]);return t.copy=function(){return Du(t,PJ()).base(t.base())},vl.apply(t,arguments)}function RJ(){var t=gF(N$());return t.copy=function(){return Du(t,RJ()).constant(t.constant())},vl.apply(t,arguments)}function IF(){var t=yF(N$());return t.copy=function(){return Du(t,IF()).exponent(t.exponent())},vl.apply(t,arguments)}function Xnt(){return IF.apply(null,arguments).exponent(.5)}const vV=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:kg,scaleDiverging:OJ,scaleDivergingLog:PJ,scaleDivergingPow:IF,scaleDivergingSqrt:Xnt,scaleDivergingSymlog:RJ,scaleIdentity:fJ,scaleImplicit:R2,scaleLinear:A1,scaleLog:hJ,scaleOrdinal:lF,scalePoint:vm,scalePow:vF,scaleQuantile:yJ,scaleQuantize:vJ,scaleRadial:gJ,scaleSequential:IJ,scaleSequentialLog:NJ,scaleSequentialPow:_F,scaleSequentialQuantile:AJ,scaleSequentialSqrt:Knt,scaleSequentialSymlog:EJ,scaleSqrt:Ntt,scaleSymlog:mJ,scaleThreshold:bJ,scaleTime:Hnt,scaleUtc:qnt,tickFormat:dJ},Symbol.toStringTag,{value:"Module"}));var Ynt=Gp;function Znt(t,e,n){for(var r=-1,o=t.length;++r<o;){var s=t[r],i=e(s);if(i!=null&&(a===void 0?i===i&&!Ynt(i):n(i,a)))var a=i,l=s}return l}var DJ=Znt;function Qnt(t,e){return t>e}var Jnt=Qnt,ert=DJ,trt=Jnt,nrt=Qp;function rrt(t){return t&&t.length?ert(t,nrt,trt):void 0}var ort=rrt;const E$=Dt(ort);function srt(t,e){return t<e}var irt=srt,art=DJ,lrt=irt,urt=Qp;function crt(t){return t&&t.length?art(t,urt,lrt):void 0}var drt=crt;const A$=Dt(drt);var frt=VD,prt=Pu,hrt=UQ,mrt=Ho;function grt(t,e){var n=mrt(t)?frt:hrt;return n(t,prt(e))}var yrt=grt,vrt=VQ,brt=yrt;function xrt(t,e){return vrt(brt(t,e),1)}var wrt=xrt;const Srt=Dt(wrt);var krt=nF;function $rt(t,e){return krt(t,e)}var Crt=$rt;const O$=Dt(Crt);var th=1e9,Trt={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},EF,mn=!0,Xs="[DecimalError] ",wc=Xs+"Invalid argument: ",NF=Xs+"Exponent out of range: ",nh=Math.floor,Yu=Math.pow,_rt=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Qo,dr=1e7,sn=7,FJ=9007199254740991,D1=nh(FJ/sn),Te={};Te.absoluteValue=Te.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Te.comparedTo=Te.cmp=function(t){var e,n,r,o,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(r=s.d.length,o=t.d.length,e=0,n=r<o?r:o;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return r===o?0:r>o^s.s<0?1:-1};Te.decimalPlaces=Te.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*sn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Te.dividedBy=Te.div=function(t){return Ga(this,new this.constructor(t))};Te.dividedToIntegerBy=Te.idiv=function(t){var e=this,n=e.constructor;return Kt(Ga(e,new n(t),0,1),n.precision)};Te.equals=Te.eq=function(t){return!this.cmp(t)};Te.exponent=function(){return qn(this)};Te.greaterThan=Te.gt=function(t){return this.cmp(t)>0};Te.greaterThanOrEqualTo=Te.gte=function(t){return this.cmp(t)>=0};Te.isInteger=Te.isint=function(){return this.e>this.d.length-2};Te.isNegative=Te.isneg=function(){return this.s<0};Te.isPositive=Te.ispos=function(){return this.s>0};Te.isZero=function(){return this.s===0};Te.lessThan=Te.lt=function(t){return this.cmp(t)<0};Te.lessThanOrEqualTo=Te.lte=function(t){return this.cmp(t)<1};Te.logarithm=Te.log=function(t){var e,n=this,r=n.constructor,o=r.precision,s=o+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Qo))throw Error(Xs+"NaN");if(n.s<1)throw Error(Xs+(n.s?"NaN":"-Infinity"));return n.eq(Qo)?new r(0):(mn=!1,e=Ga(Ig(n,s),Ig(t,s),s),mn=!0,Kt(e,o))};Te.minus=Te.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?zJ(e,t):MJ(e,(t.s=-t.s,t))};Te.modulo=Te.mod=function(t){var e,n=this,r=n.constructor,o=r.precision;if(t=new r(t),!t.s)throw Error(Xs+"NaN");return n.s?(mn=!1,e=Ga(n,t,0,1).times(t),mn=!0,n.minus(e)):Kt(new r(n),o)};Te.naturalExponential=Te.exp=function(){return LJ(this)};Te.naturalLogarithm=Te.ln=function(){return Ig(this)};Te.negated=Te.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Te.plus=Te.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?MJ(e,t):zJ(e,(t.s=-t.s,t))};Te.precision=Te.sd=function(t){var e,n,r,o=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(wc+t);if(e=qn(o)+1,r=o.d.length-1,n=r*sn+1,r=o.d[r],r){for(;r%10==0;r/=10)n--;for(r=o.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Te.squareRoot=Te.sqrt=function(){var t,e,n,r,o,s,i,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(Xs+"NaN")}for(t=qn(a),mn=!1,o=Math.sqrt(+a),o==0||o==1/0?(e=Xi(a.d),(e.length+t)%2==0&&(e+="0"),o=Math.sqrt(e),t=nh((t+1)/2)-(t<0||t%2),o==1/0?e="5e"+t:(e=o.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(o.toString()),n=l.precision,o=i=n+3;;)if(s=r,r=s.plus(Ga(a,s,i+2)).times(.5),Xi(s.d).slice(0,i)===(e=Xi(r.d)).slice(0,i)){if(e=e.slice(i-3,i+1),o==i&&e=="4999"){if(Kt(s,n+1,0),s.times(s).eq(a)){r=s;break}}else if(e!="9999")break;i+=4}return mn=!0,Kt(r,n)};Te.times=Te.mul=function(t){var e,n,r,o,s,i,a,l,u,c=this,d=c.constructor,f=c.d,p=(t=new d(t)).d;if(!c.s||!t.s)return new d(0);for(t.s*=c.s,n=c.e+t.e,l=f.length,u=p.length,l<u&&(s=f,f=p,p=s,i=l,l=u,u=i),s=[],i=l+u,r=i;r--;)s.push(0);for(r=u;--r>=0;){for(e=0,o=l+r;o>r;)a=s[o]+p[r]*f[o-r-1]+e,s[o--]=a%dr|0,e=a/dr|0;s[o]=(s[o]+e)%dr|0}for(;!s[--i];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,mn?Kt(t,d.precision):t};Te.toDecimalPlaces=Te.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(ha(t,0,th),e===void 0?e=r.rounding:ha(e,0,8),Kt(n,t+qn(n)+1,e))};Te.toExponential=function(t,e){var n,r=this,o=r.constructor;return t===void 0?n=Gc(r,!0):(ha(t,0,th),e===void 0?e=o.rounding:ha(e,0,8),r=Kt(new o(r),t+1,e),n=Gc(r,!0,t+1)),n};Te.toFixed=function(t,e){var n,r,o=this,s=o.constructor;return t===void 0?Gc(o):(ha(t,0,th),e===void 0?e=s.rounding:ha(e,0,8),r=Kt(new s(o),t+qn(o)+1,e),n=Gc(r.abs(),!1,t+qn(r)+1),o.isneg()&&!o.isZero()?"-"+n:n)};Te.toInteger=Te.toint=function(){var t=this,e=t.constructor;return Kt(new e(t),qn(t)+1,e.rounding)};Te.toNumber=function(){return+this};Te.toPower=Te.pow=function(t){var e,n,r,o,s,i,a=this,l=a.constructor,u=12,c=+(t=new l(t));if(!t.s)return new l(Qo);if(a=new l(a),!a.s){if(t.s<1)throw Error(Xs+"Infinity");return a}if(a.eq(Qo))return a;if(r=l.precision,t.eq(Qo))return Kt(a,r);if(e=t.e,n=t.d.length-1,i=e>=n,s=a.s,i){if((n=c<0?-c:c)<=FJ){for(o=new l(Qo),e=Math.ceil(r/sn+4),mn=!1;n%2&&(o=o.times(a),xV(o.d,e)),n=nh(n/2),n!==0;)a=a.times(a),xV(a.d,e);return mn=!0,t.s<0?new l(Qo).div(o):Kt(o,r)}}else if(s<0)throw Error(Xs+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,a.s=1,mn=!1,o=t.times(Ig(a,r+u)),mn=!0,o=LJ(o),o.s=s,o};Te.toPrecision=function(t,e){var n,r,o=this,s=o.constructor;return t===void 0?(n=qn(o),r=Gc(o,n<=s.toExpNeg||n>=s.toExpPos)):(ha(t,1,th),e===void 0?e=s.rounding:ha(e,0,8),o=Kt(new s(o),t,e),n=qn(o),r=Gc(o,t<=n||n<=s.toExpNeg,t)),r};Te.toSignificantDigits=Te.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(ha(t,1,th),e===void 0?e=r.rounding:ha(e,0,8)),Kt(new r(n),t,e)};Te.toString=Te.valueOf=Te.val=Te.toJSON=Te[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=qn(t),n=t.constructor;return Gc(t,e<=n.toExpNeg||e>=n.toExpPos)};function MJ(t,e){var n,r,o,s,i,a,l,u,c=t.constructor,d=c.precision;if(!t.s||!e.s)return e.s||(e=new c(t)),mn?Kt(e,d):e;if(l=t.d,u=e.d,i=t.e,o=e.e,l=l.slice(),s=i-o,s){for(s<0?(r=l,s=-s,a=u.length):(r=u,o=i,a=l.length),i=Math.ceil(d/sn),a=i>a?i+1:a+1,s>a&&(s=a,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(a=l.length,s=u.length,a-s<0&&(s=a,r=u,u=l,l=r),n=0;s;)n=(l[--s]=l[s]+u[s]+n)/dr|0,l[s]%=dr;for(n&&(l.unshift(n),++o),a=l.length;l[--a]==0;)l.pop();return e.d=l,e.e=o,mn?Kt(e,d):e}function ha(t,e,n){if(t!==~~t||t<e||t>n)throw Error(wc+t)}function Xi(t){var e,n,r,o=t.length-1,s="",i=t[0];if(o>0){for(s+=i,e=1;e<o;e++)r=t[e]+"",n=sn-r.length,n&&(s+=Tl(n)),s+=r;i=t[e],r=i+"",n=sn-r.length,n&&(s+=Tl(n))}else if(i===0)return"0";for(;i%10===0;)i/=10;return s+i}var Ga=function(){function t(r,o){var s,i=0,a=r.length;for(r=r.slice();a--;)s=r[a]*o+i,r[a]=s%dr|0,i=s/dr|0;return i&&r.unshift(i),r}function e(r,o,s,i){var a,l;if(s!=i)l=s>i?1:-1;else for(a=l=0;a<s;a++)if(r[a]!=o[a]){l=r[a]>o[a]?1:-1;break}return l}function n(r,o,s){for(var i=0;s--;)r[s]-=i,i=r[s]<o[s]?1:0,r[s]=i*dr+r[s]-o[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,o,s,i){var a,l,u,c,d,f,p,h,m,g,y,v,b,x,w,S,k,$,C=r.constructor,I=r.s==o.s?1:-1,E=r.d,O=o.d;if(!r.s)return new C(r);if(!o.s)throw Error(Xs+"Division by zero");for(l=r.e-o.e,k=O.length,w=E.length,p=new C(I),h=p.d=[],u=0;O[u]==(E[u]||0);)++u;if(O[u]>(E[u]||0)&&--l,s==null?v=s=C.precision:i?v=s+(qn(r)-qn(o))+1:v=s,v<0)return new C(0);if(v=v/sn+2|0,u=0,k==1)for(c=0,O=O[0],v++;(u<w||c)&&v--;u++)b=c*dr+(E[u]||0),h[u]=b/O|0,c=b%O|0;else{for(c=dr/(O[0]+1)|0,c>1&&(O=t(O,c),E=t(E,c),k=O.length,w=E.length),x=k,m=E.slice(0,k),g=m.length;g<k;)m[g++]=0;$=O.slice(),$.unshift(0),S=O[0],O[1]>=dr/2&&++S;do c=0,a=e(O,m,k,g),a<0?(y=m[0],k!=g&&(y=y*dr+(m[1]||0)),c=y/S|0,c>1?(c>=dr&&(c=dr-1),d=t(O,c),f=d.length,g=m.length,a=e(d,m,f,g),a==1&&(c--,n(d,k<f?$:O,f))):(c==0&&(a=c=1),d=O.slice()),f=d.length,f<g&&d.unshift(0),n(m,d,g),a==-1&&(g=m.length,a=e(O,m,k,g),a<1&&(c++,n(m,k<g?$:O,g))),g=m.length):a===0&&(c++,m=[0]),h[u++]=c,a&&m[0]?m[g++]=E[x]||0:(m=[E[x]],g=1);while((x++<w||m[0]!==void 0)&&v--)}return h[0]||h.shift(),p.e=l,Kt(p,i?s+qn(p)+1:s)}}();function LJ(t,e){var n,r,o,s,i,a,l=0,u=0,c=t.constructor,d=c.precision;if(qn(t)>16)throw Error(NF+qn(t));if(!t.s)return new c(Qo);for(e==null?(mn=!1,a=d):a=e,i=new c(.03125);t.abs().gte(.1);)t=t.times(i),u+=5;for(r=Math.log(Yu(2,u))/Math.LN10*2+5|0,a+=r,n=o=s=new c(Qo),c.precision=a;;){if(o=Kt(o.times(t),a),n=n.times(++l),i=s.plus(Ga(o,n,a)),Xi(i.d).slice(0,a)===Xi(s.d).slice(0,a)){for(;u--;)s=Kt(s.times(s),a);return c.precision=d,e==null?(mn=!0,Kt(s,d)):s}s=i}}function qn(t){for(var e=t.e*sn,n=t.d[0];n>=10;n/=10)e++;return e}function OT(t,e,n){if(e>t.LN10.sd())throw mn=!0,n&&(t.precision=n),Error(Xs+"LN10 precision limit exceeded");return Kt(new t(t.LN10),e)}function Tl(t){for(var e="";t--;)e+="0";return e}function Ig(t,e){var n,r,o,s,i,a,l,u,c,d=1,f=10,p=t,h=p.d,m=p.constructor,g=m.precision;if(p.s<1)throw Error(Xs+(p.s?"NaN":"-Infinity"));if(p.eq(Qo))return new m(0);if(e==null?(mn=!1,u=g):u=e,p.eq(10))return e==null&&(mn=!0),OT(m,u);if(u+=f,m.precision=u,n=Xi(h),r=n.charAt(0),s=qn(p),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)p=p.times(t),n=Xi(p.d),r=n.charAt(0),d++;s=qn(p),r>1?(p=new m("0."+n),s++):p=new m(r+"."+n.slice(1))}else return l=OT(m,u+2,g).times(s+""),p=Ig(new m(r+"."+n.slice(1)),u-f).plus(l),m.precision=g,e==null?(mn=!0,Kt(p,g)):p;for(a=i=p=Ga(p.minus(Qo),p.plus(Qo),u),c=Kt(p.times(p),u),o=3;;){if(i=Kt(i.times(c),u),l=a.plus(Ga(i,new m(o),u)),Xi(l.d).slice(0,u)===Xi(a.d).slice(0,u))return a=a.times(2),s!==0&&(a=a.plus(OT(m,u+2,g).times(s+""))),a=Ga(a,new m(d),u),m.precision=g,e==null?(mn=!0,Kt(a,g)):a;a=l,o+=2}}function bV(t,e){var n,r,o;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(o=e.length;e.charCodeAt(o-1)===48;)--o;if(e=e.slice(r,o),e){if(o-=r,n=n-r-1,t.e=nh(n/sn),t.d=[],r=(n+1)%sn,n<0&&(r+=sn),r<o){for(r&&t.d.push(+e.slice(0,r)),o-=sn;r<o;)t.d.push(+e.slice(r,r+=sn));e=e.slice(r),r=sn-e.length}else r-=o;for(;r--;)e+="0";if(t.d.push(+e),mn&&(t.e>D1||t.e<-D1))throw Error(NF+n)}else t.s=0,t.e=0,t.d=[0];return t}function Kt(t,e,n){var r,o,s,i,a,l,u,c,d=t.d;for(i=1,s=d[0];s>=10;s/=10)i++;if(r=e-i,r<0)r+=sn,o=e,u=d[c=0];else{if(c=Math.ceil((r+1)/sn),s=d.length,c>=s)return t;for(u=s=d[c],i=1;s>=10;s/=10)i++;r%=sn,o=r-sn+i}if(n!==void 0&&(s=Yu(10,i-o-1),a=u/s%10|0,l=e<0||d[c+1]!==void 0||u%s,l=n<4?(a||l)&&(n==0||n==(t.s<0?3:2)):a>5||a==5&&(n==4||l||n==6&&(r>0?o>0?u/Yu(10,i-o):0:d[c-1])%10&1||n==(t.s<0?8:7))),e<1||!d[0])return l?(s=qn(t),d.length=1,e=e-s-1,d[0]=Yu(10,(sn-e%sn)%sn),t.e=nh(-e/sn)||0):(d.length=1,d[0]=t.e=t.s=0),t;if(r==0?(d.length=c,s=1,c--):(d.length=c+1,s=Yu(10,sn-r),d[c]=o>0?(u/Yu(10,i-o)%Yu(10,o)|0)*s:0),l)for(;;)if(c==0){(d[0]+=s)==dr&&(d[0]=1,++t.e);break}else{if(d[c]+=s,d[c]!=dr)break;d[c--]=0,s=1}for(r=d.length;d[--r]===0;)d.pop();if(mn&&(t.e>D1||t.e<-D1))throw Error(NF+qn(t));return t}function zJ(t,e){var n,r,o,s,i,a,l,u,c,d,f=t.constructor,p=f.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new f(t),mn?Kt(e,p):e;if(l=t.d,d=e.d,r=e.e,u=t.e,l=l.slice(),i=u-r,i){for(c=i<0,c?(n=l,i=-i,a=d.length):(n=d,r=u,a=l.length),o=Math.max(Math.ceil(p/sn),a)+2,i>o&&(i=o,n.length=1),n.reverse(),o=i;o--;)n.push(0);n.reverse()}else{for(o=l.length,a=d.length,c=o<a,c&&(a=o),o=0;o<a;o++)if(l[o]!=d[o]){c=l[o]<d[o];break}i=0}for(c&&(n=l,l=d,d=n,e.s=-e.s),a=l.length,o=d.length-a;o>0;--o)l[a++]=0;for(o=d.length;o>i;){if(l[--o]<d[o]){for(s=o;s&&l[--s]===0;)l[s]=dr-1;--l[s],l[o]+=dr}l[o]-=d[o]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,mn?Kt(e,p):e):new f(0)}function Gc(t,e,n){var r,o=qn(t),s=Xi(t.d),i=s.length;return e?(n&&(r=n-i)>0?s=s.charAt(0)+"."+s.slice(1)+Tl(r):i>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(o<0?"e":"e+")+o):o<0?(s="0."+Tl(-o-1)+s,n&&(r=n-i)>0&&(s+=Tl(r))):o>=i?(s+=Tl(o+1-i),n&&(r=n-o-1)>0&&(s=s+"."+Tl(r))):((r=o+1)<i&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-i)>0&&(o+1===i&&(s+="."),s+=Tl(r))),t.s<0?"-"+s:s}function xV(t,e){if(t.length>e)return t.length=e,!0}function BJ(t){var e,n,r;function o(s){var i=this;if(!(i instanceof o))return new o(s);if(i.constructor=o,s instanceof o){i.s=s.s,i.e=s.e,i.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(wc+s);if(s>0)i.s=1;else if(s<0)s=-s,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(s===~~s&&s<1e7){i.e=0,i.d=[s];return}return bV(i,s.toString())}else if(typeof s!="string")throw Error(wc+s);if(s.charCodeAt(0)===45?(s=s.slice(1),i.s=-1):i.s=1,_rt.test(s))bV(i,s);else throw Error(wc+s)}if(o.prototype=Te,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.clone=BJ,o.config=o.set=Irt,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return o.config(t),o}function Irt(t){if(!t||typeof t!="object")throw Error(Xs+"Object expected");var e,n,r,o=["precision",1,th,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<o.length;e+=3)if((r=t[n=o[e]])!==void 0)if(nh(r)===r&&r>=o[e+1]&&r<=o[e+2])this[n]=r;else throw Error(wc+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(wc+n+": "+r);return this}var EF=BJ(Trt);Qo=new EF(1);const jt=EF;function Nrt(t){return Prt(t)||Ort(t)||Art(t)||Ert()}function Ert(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Art(t,e){if(t){if(typeof t=="string")return L2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L2(t,e)}}function Ort(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Prt(t){if(Array.isArray(t))return L2(t)}function L2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Rrt=function(e){return e},jJ={"@@functional/placeholder":!0},VJ=function(e){return e===jJ},wV=function(e){return function n(){return arguments.length===0||arguments.length===1&&VJ(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},Drt=function t(e,n){return e===1?n:wV(function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];var i=o.filter(function(a){return a!==jJ}).length;return i>=e?n.apply(void 0,o):t(e-i,wV(function(){for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];var c=o.map(function(d){return VJ(d)?l.shift():d});return n.apply(void 0,Nrt(c).concat(l))}))})},P$=function(e){return Drt(e.length,e)},z2=function(e,n){for(var r=[],o=e;o<n;++o)r[o-e]=o;return r},Frt=P$(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),Mrt=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return Rrt;var o=n.reverse(),s=o[0],i=o.slice(1);return function(){return i.reduce(function(a,l){return l(a)},s.apply(void 0,arguments))}},B2=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},WJ=function(e){var n=null,r=null;return function(){for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];return n&&s.every(function(a,l){return a===n[l]})||(n=s,r=e.apply(void 0,s)),r}};function Lrt(t){var e;return t===0?e=1:e=Math.floor(new jt(t).abs().log(10).toNumber())+1,e}function zrt(t,e,n){for(var r=new jt(t),o=0,s=[];r.lt(e)&&o<1e5;)s.push(r.toNumber()),r=r.add(n),o++;return s}var Brt=P$(function(t,e,n){var r=+t,o=+e;return r+n*(o-r)}),jrt=P$(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),Vrt=P$(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const R$={rangeStep:zrt,getDigitCount:Lrt,interpolateNumber:Brt,uninterpolateNumber:jrt,uninterpolateTruncation:Vrt};function j2(t){return Grt(t)||Urt(t)||UJ(t)||Wrt()}function Wrt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Urt(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Grt(t){if(Array.isArray(t))return V2(t)}function Ng(t,e){return Krt(t)||qrt(t,e)||UJ(t,e)||Hrt()}function Hrt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UJ(t,e){if(t){if(typeof t=="string")return V2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V2(t,e)}}function V2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function qrt(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,o=!1,s=void 0;try{for(var i=t[Symbol.iterator](),a;!(r=(a=i.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(l){o=!0,s=l}finally{try{!r&&i.return!=null&&i.return()}finally{if(o)throw s}}return n}}function Krt(t){if(Array.isArray(t))return t}function GJ(t){var e=Ng(t,2),n=e[0],r=e[1],o=n,s=r;return n>r&&(o=r,s=n),[o,s]}function HJ(t,e,n){if(t.lte(0))return new jt(0);var r=R$.getDigitCount(t.toNumber()),o=new jt(10).pow(r),s=t.div(o),i=r!==1?.05:.1,a=new jt(Math.ceil(s.div(i).toNumber())).add(n).mul(i),l=a.mul(o);return e?l:new jt(Math.ceil(l))}function Xrt(t,e,n){var r=1,o=new jt(t);if(!o.isint()&&n){var s=Math.abs(t);s<1?(r=new jt(10).pow(R$.getDigitCount(t)-1),o=new jt(Math.floor(o.div(r).toNumber())).mul(r)):s>1&&(o=new jt(Math.floor(t)))}else t===0?o=new jt(Math.floor((e-1)/2)):n||(o=new jt(Math.floor(t)));var i=Math.floor((e-1)/2),a=Mrt(Frt(function(l){return o.add(new jt(l-i).mul(r)).toNumber()}),z2);return a(0,e)}function qJ(t,e,n,r){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new jt(0),tickMin:new jt(0),tickMax:new jt(0)};var s=HJ(new jt(e).sub(t).div(n-1),r,o),i;t<=0&&e>=0?i=new jt(0):(i=new jt(t).add(e).div(2),i=i.sub(new jt(i).mod(s)));var a=Math.ceil(i.sub(t).div(s).toNumber()),l=Math.ceil(new jt(e).sub(i).div(s).toNumber()),u=a+l+1;return u>n?qJ(t,e,n,r,o+1):(u<n&&(l=e>0?l+(n-u):l,a=e>0?a:a+(n-u)),{step:s,tickMin:i.sub(new jt(a).mul(s)),tickMax:i.add(new jt(l).mul(s))})}function Yrt(t){var e=Ng(t,2),n=e[0],r=e[1],o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(o,2),a=GJ([n,r]),l=Ng(a,2),u=l[0],c=l[1];if(u===-1/0||c===1/0){var d=c===1/0?[u].concat(j2(z2(0,o-1).map(function(){return 1/0}))):[].concat(j2(z2(0,o-1).map(function(){return-1/0})),[c]);return n>r?B2(d):d}if(u===c)return Xrt(u,o,s);var f=qJ(u,c,i,s),p=f.step,h=f.tickMin,m=f.tickMax,g=R$.rangeStep(h,m.add(new jt(.1).mul(p)),p);return n>r?B2(g):g}function Zrt(t,e){var n=Ng(t,2),r=n[0],o=n[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=GJ([r,o]),a=Ng(i,2),l=a[0],u=a[1];if(l===-1/0||u===1/0)return[r,o];if(l===u)return[l];var c=Math.max(e,2),d=HJ(new jt(u).sub(l).div(c-1),s,0),f=[].concat(j2(R$.rangeStep(new jt(l),new jt(u).sub(new jt(.99).mul(d)),d)),[u]);return r>o?B2(f):f}var Qrt=WJ(Yrt),Jrt=WJ(Zrt),eot="Invariant failed";function Hc(t,e){throw new Error(eot)}var tot=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function sp(t){"@babel/helpers - typeof";return sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sp(t)}function F1(){return F1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},F1.apply(this,arguments)}function not(t,e){return iot(t)||sot(t,e)||oot(t,e)||rot()}function rot(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oot(t,e){if(t){if(typeof t=="string")return SV(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SV(t,e)}}function SV(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function sot(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,s,i,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,o=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return a}}function iot(t){if(Array.isArray(t))return t}function aot(t,e){if(t==null)return{};var n=lot(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function lot(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function uot(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,YJ(r.key),r)}}function dot(t,e,n){return e&&cot(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function fot(t,e,n){return e=M1(e),pot(t,KJ()?Reflect.construct(e,n||[],M1(t).constructor):e.apply(t,n))}function pot(t,e){if(e&&(sp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hot(t)}function hot(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function KJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KJ=function(){return!!t})()}function M1(t){return M1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},M1(t)}function mot(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&W2(t,e)}function W2(t,e){return W2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},W2(t,e)}function XJ(t,e,n){return e=YJ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YJ(t){var e=got(t,"string");return sp(e)=="symbol"?e:e+""}function got(t,e){if(sp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(sp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var K0=function(t){function e(){return uot(this,e),fot(this,e,arguments)}return mot(e,t),dot(e,[{key:"render",value:function(){var r=this.props,o=r.offset,s=r.layout,i=r.width,a=r.dataKey,l=r.data,u=r.dataPointFormatter,c=r.xAxis,d=r.yAxis,f=aot(r,tot),p=yt(f,!1);this.props.direction==="x"&&c.type!=="number"&&Hc();var h=l.map(function(m){var g=u(m,a),y=g.x,v=g.y,b=g.value,x=g.errorVal;if(!x)return null;var w=[],S,k;if(Array.isArray(x)){var $=not(x,2);S=$[0],k=$[1]}else S=k=x;if(s==="vertical"){var C=c.scale,I=v+o,E=I+i,O=I-i,R=C(b-S),z=C(b+k);w.push({x1:z,y1:E,x2:z,y2:O}),w.push({x1:R,y1:I,x2:z,y2:I}),w.push({x1:R,y1:E,x2:R,y2:O})}else if(s==="horizontal"){var L=d.scale,B=y+o,D=B-i,F=B+i,j=L(b-S),G=L(b+k);w.push({x1:D,y1:G,x2:F,y2:G}),w.push({x1:B,y1:j,x2:B,y2:G}),w.push({x1:D,y1:j,x2:F,y2:j})}return K.createElement(xn,F1({className:"recharts-errorBar",key:"bar-".concat(w.map(function(Y){return"".concat(Y.x1,"-").concat(Y.x2,"-").concat(Y.y1,"-").concat(Y.y2)}))},p),w.map(function(Y){return K.createElement("line",F1({},Y,{key:"line-".concat(Y.x1,"-").concat(Y.x2,"-").concat(Y.y1,"-").concat(Y.y2)}))}))});return K.createElement(xn,{className:"recharts-errorBars"},h)}}])}(K.Component);XJ(K0,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});XJ(K0,"displayName","ErrorBar");function Eg(t){"@babel/helpers - typeof";return Eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eg(t)}function kV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function ju(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kV(Object(n),!0).forEach(function(r){yot(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yot(t,e,n){return e=vot(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vot(t){var e=bot(t,"string");return Eg(e)=="symbol"?e:e+""}function bot(t,e){if(Eg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Eg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ZJ=function(e){var n=e.children,r=e.formattedGraphicalItems,o=e.legendWidth,s=e.legendContent,i=Yo(n,yf);if(!i)return null;var a=yf.defaultProps,l=a!==void 0?ju(ju({},a),i.props):{},u;return i.props&&i.props.payload?u=i.props&&i.props.payload:s==="children"?u=(r||[]).reduce(function(c,d){var f=d.item,p=d.props,h=p.sectors||p.data||[];return c.concat(h.map(function(m){return{type:i.props.iconType||f.props.legendType,value:m.name,color:m.fill,payload:m}}))},[]):u=(r||[]).map(function(c){var d=c.item,f=d.type.defaultProps,p=f!==void 0?ju(ju({},f),d.props):{},h=p.dataKey,m=p.name,g=p.legendType,y=p.hide;return{inactive:y,dataKey:h,type:l.iconType||g||"square",color:AF(d),value:m||h,payload:p}}),ju(ju(ju({},l),yf.getWithHeight(i,o)),{},{payload:u,item:i})};function Ag(t){"@babel/helpers - typeof";return Ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ag(t)}function $V(t){return kot(t)||Sot(t)||wot(t)||xot()}function xot(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wot(t,e){if(t){if(typeof t=="string")return U2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U2(t,e)}}function Sot(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function kot(t){if(Array.isArray(t))return U2(t)}function U2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function CV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Tn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CV(Object(n),!0).forEach(function(r){bf(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bf(t,e,n){return e=$ot(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $ot(t){var e=Cot(t,"string");return Ag(e)=="symbol"?e:e+""}function Cot(t,e){if(Ag(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ag(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function co(t,e,n){return lt(t)||lt(e)?n:sr(e)?js(t,e,n):ut(e)?e(t):n}function bm(t,e,n,r){var o=Srt(t,function(a){return co(a,e)});if(n==="number"){var s=o.filter(function(a){return we(a)||parseFloat(a)});return s.length?[A$(s),E$(s)]:[1/0,-1/0]}var i=r?o.filter(function(a){return!lt(a)}):o;return i.map(function(a){return sr(a)||a instanceof Date?a:""})}var Tot=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,i=-1,a=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(a<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var l=s.range,u=0;u<a;u++){var c=u>0?o[u-1].coordinate:o[a-1].coordinate,d=o[u].coordinate,f=u>=a-1?o[0].coordinate:o[u+1].coordinate,p=void 0;if(hi(d-c)!==hi(f-d)){var h=[];if(hi(f-d)===hi(l[1]-l[0])){p=f;var m=d+l[1]-l[0];h[0]=Math.min(m,(m+c)/2),h[1]=Math.max(m,(m+c)/2)}else{p=c;var g=f+l[1]-l[0];h[0]=Math.min(d,(g+d)/2),h[1]=Math.max(d,(g+d)/2)}var y=[Math.min(d,(p+d)/2),Math.max(d,(p+d)/2)];if(e>y[0]&&e<=y[1]||e>=h[0]&&e<=h[1]){i=o[u].index;break}}else{var v=Math.min(c,f),b=Math.max(c,f);if(e>(v+d)/2&&e<=(b+d)/2){i=o[u].index;break}}}else for(var x=0;x<a;x++)if(x===0&&e<=(r[x].coordinate+r[x+1].coordinate)/2||x>0&&x<a-1&&e>(r[x].coordinate+r[x-1].coordinate)/2&&e<=(r[x].coordinate+r[x+1].coordinate)/2||x===a-1&&e>(r[x].coordinate+r[x-1].coordinate)/2){i=r[x].index;break}return i},AF=function(e){var n,r=e,o=r.type.displayName,s=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Tn(Tn({},e.type.defaultProps),e.props):e.props,i=s.stroke,a=s.fill,l;switch(o){case"Line":l=i;break;case"Area":case"Radar":l=i&&i!=="none"?i:a;break;default:l=a;break}return l},_ot=function(e){var n=e.barSize,r=e.totalSize,o=e.stackGroups,s=o===void 0?{}:o;if(!s)return{};for(var i={},a=Object.keys(s),l=0,u=a.length;l<u;l++)for(var c=s[a[l]].stackGroups,d=Object.keys(c),f=0,p=d.length;f<p;f++){var h=c[d[f]],m=h.items,g=h.cateAxisId,y=m.filter(function(k){return Wa(k.type).indexOf("Bar")>=0});if(y&&y.length){var v=y[0].type.defaultProps,b=v!==void 0?Tn(Tn({},v),y[0].props):y[0].props,x=b.barSize,w=b[g];i[w]||(i[w]=[]);var S=lt(x)?n:x;i[w].push({item:y[0],stackList:y.slice(1),barSize:lt(S)?void 0:Uc(S,r,0)})}}return i},Iot=function(e){var n=e.barGap,r=e.barCategoryGap,o=e.bandSize,s=e.sizeList,i=s===void 0?[]:s,a=e.maxBarSize,l=i.length;if(l<1)return null;var u=Uc(n,o,0,!0),c,d=[];if(i[0].barSize===+i[0].barSize){var f=!1,p=o/l,h=i.reduce(function(x,w){return x+w.barSize||0},0);h+=(l-1)*u,h>=o&&(h-=(l-1)*u,u=0),h>=o&&p>0&&(f=!0,p*=.9,h=l*p);var m=(o-h)/2>>0,g={offset:m-u,size:0};c=i.reduce(function(x,w){var S={item:w.item,position:{offset:g.offset+g.size+u,size:f?p:w.barSize}},k=[].concat($V(x),[S]);return g=k[k.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function($){k.push({item:$,position:g})}),k},d)}else{var y=Uc(r,o,0,!0);o-2*y-(l-1)*u<=0&&(u=0);var v=(o-2*y-(l-1)*u)/l;v>1&&(v>>=0);var b=a===+a?Math.min(v,a):v;c=i.reduce(function(x,w,S){var k=[].concat($V(x),[{item:w.item,position:{offset:y+(v+u)*S+(v-b)/2,size:b}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function($){k.push({item:$,position:k[k.length-1].position})}),k},d)}return c},Not=function(e,n,r,o){var s=r.children,i=r.width,a=r.margin,l=i-(a.left||0)-(a.right||0),u=ZJ({children:s,legendWidth:l});if(u){var c=o||{},d=c.width,f=c.height,p=u.align,h=u.verticalAlign,m=u.layout;if((m==="vertical"||m==="horizontal"&&h==="middle")&&p!=="center"&&we(e[p]))return Tn(Tn({},e),{},bf({},p,e[p]+(d||0)));if((m==="horizontal"||m==="vertical"&&p==="center")&&h!=="middle"&&we(e[h]))return Tn(Tn({},e),{},bf({},h,e[h]+(f||0)))}return e},Eot=function(e,n,r){return lt(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},QJ=function(e,n,r,o,s){var i=n.props.children,a=rs(i,K0).filter(function(u){return Eot(o,s,u.props.direction)});if(a&&a.length){var l=a.map(function(u){return u.props.dataKey});return e.reduce(function(u,c){var d=co(c,r);if(lt(d))return u;var f=Array.isArray(d)?[A$(d),E$(d)]:[d,d],p=l.reduce(function(h,m){var g=co(c,m,0),y=f[0]-Math.abs(Array.isArray(g)?g[0]:g),v=f[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(y,h[0]),Math.max(v,h[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},Aot=function(e,n,r,o,s){var i=n.map(function(a){return QJ(e,a,r,s,o)}).filter(function(a){return!lt(a)});return i&&i.length?i.reduce(function(a,l){return[Math.min(a[0],l[0]),Math.max(a[1],l[1])]},[1/0,-1/0]):null},JJ=function(e,n,r,o,s){var i=n.map(function(l){var u=l.props.dataKey;return r==="number"&&u&&QJ(e,l,u,o)||bm(e,u,r,s)});if(r==="number")return i.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var a={};return i.reduce(function(l,u){for(var c=0,d=u.length;c<d;c++)a[u[c]]||(a[u[c]]=!0,l.push(u[c]));return l},[])},eee=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},tee=function(e,n,r,o){if(o)return e.map(function(l){return l.coordinate});var s,i,a=e.map(function(l){return l.coordinate===n&&(s=!0),l.coordinate===r&&(i=!0),l.coordinate});return s||a.push(n),i||a.push(r),a},Ra=function(e,n,r){if(!e)return null;var o=e.scale,s=e.duplicateDomain,i=e.type,a=e.range,l=e.realScaleType==="scaleBand"?o.bandwidth()/2:2,u=(n||r)&&i==="category"&&o.bandwidth?o.bandwidth()/l:0;if(u=e.axisType==="angleAxis"&&(a==null?void 0:a.length)>=2?hi(a[0]-a[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var c=(e.ticks||e.niceTicks).map(function(d){var f=s?s.indexOf(d):d;return{coordinate:o(f)+u,value:d,offset:u}});return c.filter(function(d){return!j0(d.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(d,f){return{coordinate:o(d)+u,value:d,index:f,offset:u}}):o.ticks&&!r?o.ticks(e.tickCount).map(function(d){return{coordinate:o(d)+u,value:d,offset:u}}):o.domain().map(function(d,f){return{coordinate:o(d)+u,value:s?s[d]:d,index:f,offset:u}})},PT=new WeakMap,nb=function(e,n){if(typeof n!="function")return e;PT.has(e)||PT.set(e,new WeakMap);var r=PT.get(e);if(r.has(n))return r.get(n);var o=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,o),o},Oot=function(e,n,r){var o=e.scale,s=e.type,i=e.layout,a=e.axisType;if(o==="auto")return i==="radial"&&a==="radiusAxis"?{scale:kg(),realScaleType:"band"}:i==="radial"&&a==="angleAxis"?{scale:A1(),realScaleType:"linear"}:s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:vm(),realScaleType:"point"}:s==="category"?{scale:kg(),realScaleType:"band"}:{scale:A1(),realScaleType:"linear"};if(B0(o)){var l="scale".concat(g$(o));return{scale:(vV[l]||vm)(),realScaleType:vV[l]?l:"point"}}return ut(o)?{scale:o}:{scale:vm(),realScaleType:"point"}},TV=1e-4,Pot=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,o=e.range(),s=Math.min(o[0],o[1])-TV,i=Math.max(o[0],o[1])+TV,a=e(n[0]),l=e(n[r-1]);(a<s||a>i||l<s||l>i)&&e.domain([n[0],n[r-1]])}},Rot=function(e,n){if(!e)return null;for(var r=0,o=e.length;r<o;r++)if(e[r].item===n)return e[r].position;return null},Dot=function(e,n){if(!n||n.length!==2||!we(n[0])||!we(n[1]))return e;var r=Math.min(n[0],n[1]),o=Math.max(n[0],n[1]),s=[e[0],e[1]];return(!we(e[0])||e[0]<r)&&(s[0]=r),(!we(e[1])||e[1]>o)&&(s[1]=o),s[0]>o&&(s[0]=o),s[1]<r&&(s[1]=r),s},Fot=function(e){var n=e.length;if(!(n<=0))for(var r=0,o=e[0].length;r<o;++r)for(var s=0,i=0,a=0;a<n;++a){var l=j0(e[a][r][1])?e[a][r][0]:e[a][r][1];l>=0?(e[a][r][0]=s,e[a][r][1]=s+l,s=e[a][r][1]):(e[a][r][0]=i,e[a][r][1]=i+l,i=e[a][r][1])}},Mot=function(e){var n=e.length;if(!(n<=0))for(var r=0,o=e[0].length;r<o;++r)for(var s=0,i=0;i<n;++i){var a=j0(e[i][r][1])?e[i][r][0]:e[i][r][1];a>=0?(e[i][r][0]=s,e[i][r][1]=s+a,s=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},Lot={sign:Fot,expand:Y8e,none:Zf,silhouette:Z8e,wiggle:Q8e,positive:Mot},zot=function(e,n,r){var o=n.map(function(a){return a.props.dataKey}),s=Lot[r],i=X8e().keys(o).value(function(a,l){return+co(a,l,0)}).order(m2).offset(s);return i(e)},Bot=function(e,n,r,o,s,i){if(!e)return null;var a=i?n.reverse():n,l={},u=a.reduce(function(d,f){var p,h=(p=f.type)!==null&&p!==void 0&&p.defaultProps?Tn(Tn({},f.type.defaultProps),f.props):f.props,m=h.stackId,g=h.hide;if(g)return d;var y=h[r],v=d[y]||{hasStack:!1,stackGroups:{}};if(sr(m)){var b=v.stackGroups[m]||{numericAxisId:r,cateAxisId:o,items:[]};b.items.push(f),v.hasStack=!0,v.stackGroups[m]=b}else v.stackGroups[V0("_stackId_")]={numericAxisId:r,cateAxisId:o,items:[f]};return Tn(Tn({},d),{},bf({},y,v))},l),c={};return Object.keys(u).reduce(function(d,f){var p=u[f];if(p.hasStack){var h={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(m,g){var y=p.stackGroups[g];return Tn(Tn({},m),{},bf({},g,{numericAxisId:r,cateAxisId:o,items:y.items,stackedData:zot(e,y.items,s)}))},h)}return Tn(Tn({},d),{},bf({},f,p))},c)},jot=function(e,n){var r=n.realScaleType,o=n.type,s=n.tickCount,i=n.originalDomain,a=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(s&&o==="number"&&i&&(i[0]==="auto"||i[1]==="auto")){var u=e.domain();if(!u.length)return null;var c=Qrt(u,s,a);return e.domain([A$(c),E$(c)]),{niceTicks:c}}if(s&&o==="number"){var d=e.domain(),f=Jrt(d,s,a);return{niceTicks:f}}return null};function _V(t){var e=t.axis,n=t.ticks,r=t.bandSize,o=t.entry,s=t.index,i=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!lt(o[e.dataKey])){var a=u1(n,"value",o[e.dataKey]);if(a)return a.coordinate+r/2}return n[s]?n[s].coordinate+r/2:null}var l=co(o,lt(i)?e.dataKey:i);return lt(l)?null:e.scale(l)}var IV=function(e){var n=e.axis,r=e.ticks,o=e.offset,s=e.bandSize,i=e.entry,a=e.index;if(n.type==="category")return r[a]?r[a].coordinate+o:null;var l=co(i,n.dataKey,n.domain[a]);return lt(l)?null:n.scale(l)-s/2+o},Vot=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var o=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return o<=0&&s>=0?0:s<0?s:o}return r[0]},Wot=function(e,n){var r,o=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Tn(Tn({},e.type.defaultProps),e.props):e.props,s=o.stackId;if(sr(s)){var i=n[s];if(i){var a=i.items.indexOf(e);return a>=0?i.stackedData[a]:null}}return null},Uot=function(e){return e.reduce(function(n,r){return[A$(r.concat([n[0]]).filter(we)),E$(r.concat([n[1]]).filter(we))]},[1/0,-1/0])},nee=function(e,n,r){return Object.keys(e).reduce(function(o,s){var i=e[s],a=i.stackedData,l=a.reduce(function(u,c){var d=Uot(c.slice(n,r+1));return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],o[0]),Math.max(l[1],o[1])]},[1/0,-1/0]).map(function(o){return o===1/0||o===-1/0?0:o})},NV=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,EV=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,G2=function(e,n,r){if(ut(e))return e(n,r);if(!Array.isArray(e))return n;var o=[];if(we(e[0]))o[0]=r?e[0]:Math.min(e[0],n[0]);else if(NV.test(e[0])){var s=+NV.exec(e[0])[1];o[0]=n[0]-s}else ut(e[0])?o[0]=e[0](n[0]):o[0]=n[0];if(we(e[1]))o[1]=r?e[1]:Math.max(e[1],n[1]);else if(EV.test(e[1])){var i=+EV.exec(e[1])[1];o[1]=n[1]+i}else ut(e[1])?o[1]=e[1](n[1]):o[1]=n[1];return o},L1=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var o=e.scale.bandwidth();if(!r||o>0)return o}if(e&&n&&n.length>=2){for(var s=oF(n,function(d){return d.coordinate}),i=1/0,a=1,l=s.length;a<l;a++){var u=s[a],c=s[a-1];i=Math.min((u.coordinate||0)-(c.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0},AV=function(e,n,r){return!e||!e.length||O$(e,js(r,"type.defaultProps.domain"))?n:e},ree=function(e,n){var r=e.type.defaultProps?Tn(Tn({},e.type.defaultProps),e.props):e.props,o=r.dataKey,s=r.name,i=r.unit,a=r.formatter,l=r.tooltipType,u=r.chartType,c=r.hide;return Tn(Tn({},yt(e,!1)),{},{dataKey:o,unit:i,formatter:a,name:s||o,color:AF(e),value:co(n,o),type:l,payload:n,chartType:u,hide:c})};function Og(t){"@babel/helpers - typeof";return Og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Og(t)}function OV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function PV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OV(Object(n),!0).forEach(function(r){Got(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Got(t,e,n){return e=Hot(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hot(t){var e=qot(t,"string");return Og(e)=="symbol"?e:e+""}function qot(t,e){if(Og(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Og(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var z1=Math.PI/180,Kot=function(e){return e*180/Math.PI},Er=function(e,n,r,o){return{x:e+Math.cos(-z1*o)*r,y:n+Math.sin(-z1*o)*r}},Xot=function(e,n){var r=e.x,o=e.y,s=n.x,i=n.y;return Math.sqrt(Math.pow(r-s,2)+Math.pow(o-i,2))},Yot=function(e,n){var r=e.x,o=e.y,s=n.cx,i=n.cy,a=Xot({x:r,y:o},{x:s,y:i});if(a<=0)return{radius:a};var l=(r-s)/a,u=Math.acos(l);return o>i&&(u=2*Math.PI-u),{radius:a,angle:Kot(u),angleInRadian:u}},Zot=function(e){var n=e.startAngle,r=e.endAngle,o=Math.floor(n/360),s=Math.floor(r/360),i=Math.min(o,s);return{startAngle:n-i*360,endAngle:r-i*360}},Qot=function(e,n){var r=n.startAngle,o=n.endAngle,s=Math.floor(r/360),i=Math.floor(o/360),a=Math.min(s,i);return e+a*360},RV=function(e,n){var r=e.x,o=e.y,s=Yot({x:r,y:o},n),i=s.radius,a=s.angle,l=n.innerRadius,u=n.outerRadius;if(i<l||i>u)return!1;if(i===0)return!0;var c=Zot(n),d=c.startAngle,f=c.endAngle,p=a,h;if(d<=f){for(;p>f;)p-=360;for(;p<d;)p+=360;h=p>=d&&p<=f}else{for(;p>d;)p-=360;for(;p<f;)p+=360;h=p>=f&&p<=d}return h?PV(PV({},n),{},{radius:i,angle:Qot(p,n)}):null};function Pg(t){"@babel/helpers - typeof";return Pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pg(t)}var Jot=["offset"];function est(t){return ost(t)||rst(t)||nst(t)||tst()}function tst(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nst(t,e){if(t){if(typeof t=="string")return H2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H2(t,e)}}function rst(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ost(t){if(Array.isArray(t))return H2(t)}function H2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function sst(t,e){if(t==null)return{};var n=ist(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ist(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function DV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Zn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DV(Object(n),!0).forEach(function(r){ast(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ast(t,e,n){return e=lst(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lst(t){var e=ust(t,"string");return Pg(e)=="symbol"?e:e+""}function ust(t,e){if(Pg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Pg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Rg(){return Rg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rg.apply(this,arguments)}var cst=function(e){var n=e.value,r=e.formatter,o=lt(e.children)?n:e.children;return ut(r)?r(o):o},dst=function(e,n){var r=hi(n-e),o=Math.min(Math.abs(n-e),360);return r*o},fst=function(e,n,r){var o=e.position,s=e.viewBox,i=e.offset,a=e.className,l=s,u=l.cx,c=l.cy,d=l.innerRadius,f=l.outerRadius,p=l.startAngle,h=l.endAngle,m=l.clockWise,g=(d+f)/2,y=dst(p,h),v=y>=0?1:-1,b,x;o==="insideStart"?(b=p+v*i,x=m):o==="insideEnd"?(b=h-v*i,x=!m):o==="end"&&(b=h+v*i,x=m),x=y<=0?x:!x;var w=Er(u,c,g,b),S=Er(u,c,g,b+(x?1:-1)*359),k="M".concat(w.x,",").concat(w.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(x?0:1,`,
    `).concat(S.x,",").concat(S.y),$=lt(e.id)?V0("recharts-radial-line-"):e.id;return K.createElement("text",Rg({},r,{dominantBaseline:"central",className:_t("recharts-radial-bar-label",a)}),K.createElement("defs",null,K.createElement("path",{id:$,d:k})),K.createElement("textPath",{xlinkHref:"#".concat($)},n))},pst=function(e){var n=e.viewBox,r=e.offset,o=e.position,s=n,i=s.cx,a=s.cy,l=s.innerRadius,u=s.outerRadius,c=s.startAngle,d=s.endAngle,f=(c+d)/2;if(o==="outside"){var p=Er(i,a,u+r,f),h=p.x,m=p.y;return{x:h,y:m,textAnchor:h>=i?"start":"end",verticalAnchor:"middle"}}if(o==="center")return{x:i,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(o==="centerTop")return{x:i,y:a,textAnchor:"middle",verticalAnchor:"start"};if(o==="centerBottom")return{x:i,y:a,textAnchor:"middle",verticalAnchor:"end"};var g=(l+u)/2,y=Er(i,a,g,f),v=y.x,b=y.y;return{x:v,y:b,textAnchor:"middle",verticalAnchor:"middle"}},hst=function(e){var n=e.viewBox,r=e.parentViewBox,o=e.offset,s=e.position,i=n,a=i.x,l=i.y,u=i.width,c=i.height,d=c>=0?1:-1,f=d*o,p=d>0?"end":"start",h=d>0?"start":"end",m=u>=0?1:-1,g=m*o,y=m>0?"end":"start",v=m>0?"start":"end";if(s==="top"){var b={x:a+u/2,y:l-d*o,textAnchor:"middle",verticalAnchor:p};return Zn(Zn({},b),r?{height:Math.max(l-r.y,0),width:u}:{})}if(s==="bottom"){var x={x:a+u/2,y:l+c+f,textAnchor:"middle",verticalAnchor:h};return Zn(Zn({},x),r?{height:Math.max(r.y+r.height-(l+c),0),width:u}:{})}if(s==="left"){var w={x:a-g,y:l+c/2,textAnchor:y,verticalAnchor:"middle"};return Zn(Zn({},w),r?{width:Math.max(w.x-r.x,0),height:c}:{})}if(s==="right"){var S={x:a+u+g,y:l+c/2,textAnchor:v,verticalAnchor:"middle"};return Zn(Zn({},S),r?{width:Math.max(r.x+r.width-S.x,0),height:c}:{})}var k=r?{width:u,height:c}:{};return s==="insideLeft"?Zn({x:a+g,y:l+c/2,textAnchor:v,verticalAnchor:"middle"},k):s==="insideRight"?Zn({x:a+u-g,y:l+c/2,textAnchor:y,verticalAnchor:"middle"},k):s==="insideTop"?Zn({x:a+u/2,y:l+f,textAnchor:"middle",verticalAnchor:h},k):s==="insideBottom"?Zn({x:a+u/2,y:l+c-f,textAnchor:"middle",verticalAnchor:p},k):s==="insideTopLeft"?Zn({x:a+g,y:l+f,textAnchor:v,verticalAnchor:h},k):s==="insideTopRight"?Zn({x:a+u-g,y:l+f,textAnchor:y,verticalAnchor:h},k):s==="insideBottomLeft"?Zn({x:a+g,y:l+c-f,textAnchor:v,verticalAnchor:p},k):s==="insideBottomRight"?Zn({x:a+u-g,y:l+c-f,textAnchor:y,verticalAnchor:p},k):Hp(s)&&(we(s.x)||uc(s.x))&&(we(s.y)||uc(s.y))?Zn({x:a+Uc(s.x,u),y:l+Uc(s.y,c),textAnchor:"end",verticalAnchor:"end"},k):Zn({x:a+u/2,y:l+c/2,textAnchor:"middle",verticalAnchor:"middle"},k)},mst=function(e){return"cx"in e&&we(e.cx)};function qr(t){var e=t.offset,n=e===void 0?5:e,r=sst(t,Jot),o=Zn({offset:n},r),s=o.viewBox,i=o.position,a=o.value,l=o.children,u=o.content,c=o.className,d=c===void 0?"":c,f=o.textBreakAll;if(!s||lt(a)&&lt(l)&&!N.isValidElement(u)&&!ut(u))return null;if(N.isValidElement(u))return N.cloneElement(u,o);var p;if(ut(u)){if(p=N.createElement(u,o),N.isValidElement(p))return p}else p=cst(o);var h=mst(s),m=yt(o,!0);if(h&&(i==="insideStart"||i==="insideEnd"||i==="end"))return fst(o,p,m);var g=h?pst(o):hst(o);return K.createElement($1,Rg({className:_t("recharts-label",d)},m,g,{breakAll:f}),p)}qr.displayName="Label";var oee=function(e){var n=e.cx,r=e.cy,o=e.angle,s=e.startAngle,i=e.endAngle,a=e.r,l=e.radius,u=e.innerRadius,c=e.outerRadius,d=e.x,f=e.y,p=e.top,h=e.left,m=e.width,g=e.height,y=e.clockWise,v=e.labelViewBox;if(v)return v;if(we(m)&&we(g)){if(we(d)&&we(f))return{x:d,y:f,width:m,height:g};if(we(p)&&we(h))return{x:p,y:h,width:m,height:g}}return we(d)&&we(f)?{x:d,y:f,width:0,height:0}:we(n)&&we(r)?{cx:n,cy:r,startAngle:s||o||0,endAngle:i||o||0,innerRadius:u||0,outerRadius:c||l||a||0,clockWise:y}:e.viewBox?e.viewBox:{}},gst=function(e,n){return e?e===!0?K.createElement(qr,{key:"label-implicit",viewBox:n}):sr(e)?K.createElement(qr,{key:"label-implicit",viewBox:n,value:e}):N.isValidElement(e)?e.type===qr?N.cloneElement(e,{key:"label-implicit",viewBox:n}):K.createElement(qr,{key:"label-implicit",content:e,viewBox:n}):ut(e)?K.createElement(qr,{key:"label-implicit",content:e,viewBox:n}):Hp(e)?K.createElement(qr,Rg({viewBox:n},e,{key:"label-implicit"})):null:null},yst=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var o=e.children,s=oee(e),i=rs(o,qr).map(function(l,u){return N.cloneElement(l,{viewBox:n||s,key:"label-".concat(u)})});if(!r)return i;var a=gst(e.label,n||s);return[a].concat(est(i))};qr.parseViewBox=oee;qr.renderCallByParent=yst;function vst(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var bst=vst;const xst=Dt(bst);function Dg(t){"@babel/helpers - typeof";return Dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dg(t)}var wst=["valueAccessor"],Sst=["data","dataKey","clockWise","id","textBreakAll"];function kst(t){return _st(t)||Tst(t)||Cst(t)||$st()}function $st(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cst(t,e){if(t){if(typeof t=="string")return q2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q2(t,e)}}function Tst(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _st(t){if(Array.isArray(t))return q2(t)}function q2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function B1(){return B1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},B1.apply(this,arguments)}function FV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function MV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FV(Object(n),!0).forEach(function(r){Ist(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ist(t,e,n){return e=Nst(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nst(t){var e=Est(t,"string");return Dg(e)=="symbol"?e:e+""}function Est(t,e){if(Dg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Dg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function LV(t,e){if(t==null)return{};var n=Ast(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Ast(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Ost=function(e){return Array.isArray(e.value)?xst(e.value):e.value};function Yl(t){var e=t.valueAccessor,n=e===void 0?Ost:e,r=LV(t,wst),o=r.data,s=r.dataKey,i=r.clockWise,a=r.id,l=r.textBreakAll,u=LV(r,Sst);return!o||!o.length?null:K.createElement(xn,{className:"recharts-label-list"},o.map(function(c,d){var f=lt(s)?n(c,d):co(c&&c.payload,s),p=lt(a)?{}:{id:"".concat(a,"-").concat(d)};return K.createElement(qr,B1({},yt(c,!0),u,p,{parentViewBox:c.parentViewBox,value:f,textBreakAll:l,viewBox:qr.parseViewBox(lt(i)?c:MV(MV({},c),{},{clockWise:i})),key:"label-".concat(d),index:d}))}))}Yl.displayName="LabelList";function Pst(t,e){return t?t===!0?K.createElement(Yl,{key:"labelList-implicit",data:e}):K.isValidElement(t)||ut(t)?K.createElement(Yl,{key:"labelList-implicit",data:e,content:t}):Hp(t)?K.createElement(Yl,B1({data:e},t,{key:"labelList-implicit"})):null:null}function Rst(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,o=rs(r,Yl).map(function(i,a){return N.cloneElement(i,{data:e,key:"labelList-".concat(a)})});if(!n)return o;var s=Pst(t.label,e);return[s].concat(kst(o))}Yl.renderCallByParent=Rst;function Fg(t){"@babel/helpers - typeof";return Fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fg(t)}function K2(){return K2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},K2.apply(this,arguments)}function zV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function BV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zV(Object(n),!0).forEach(function(r){Dst(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Dst(t,e,n){return e=Fst(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fst(t){var e=Mst(t,"string");return Fg(e)=="symbol"?e:e+""}function Mst(t,e){if(Fg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Fg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Lst=function(e,n){var r=hi(n-e),o=Math.min(Math.abs(n-e),359.999);return r*o},rb=function(e){var n=e.cx,r=e.cy,o=e.radius,s=e.angle,i=e.sign,a=e.isExternal,l=e.cornerRadius,u=e.cornerIsExternal,c=l*(a?1:-1)+o,d=Math.asin(l/c)/z1,f=u?s:s+i*d,p=Er(n,r,c,f),h=Er(n,r,o,f),m=u?s-i*d:s,g=Er(n,r,c*Math.cos(d*z1),m);return{center:p,circleTangency:h,lineTangency:g,theta:d}},see=function(e){var n=e.cx,r=e.cy,o=e.innerRadius,s=e.outerRadius,i=e.startAngle,a=e.endAngle,l=Lst(i,a),u=i+l,c=Er(n,r,s,i),d=Er(n,r,s,u),f="M ".concat(c.x,",").concat(c.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(i>u),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(o>0){var p=Er(n,r,o,i),h=Er(n,r,o,u);f+="L ".concat(h.x,",").concat(h.y,`
            A `).concat(o,",").concat(o,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(i<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else f+="L ".concat(n,",").concat(r," Z");return f},zst=function(e){var n=e.cx,r=e.cy,o=e.innerRadius,s=e.outerRadius,i=e.cornerRadius,a=e.forceCornerRadius,l=e.cornerIsExternal,u=e.startAngle,c=e.endAngle,d=hi(c-u),f=rb({cx:n,cy:r,radius:s,angle:u,sign:d,cornerRadius:i,cornerIsExternal:l}),p=f.circleTangency,h=f.lineTangency,m=f.theta,g=rb({cx:n,cy:r,radius:s,angle:c,sign:-d,cornerRadius:i,cornerIsExternal:l}),y=g.circleTangency,v=g.lineTangency,b=g.theta,x=l?Math.abs(u-c):Math.abs(u-c)-m-b;if(x<0)return a?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):see({cx:n,cy:r,innerRadius:o,outerRadius:s,startAngle:u,endAngle:c});var w="M ".concat(h.x,",").concat(h.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(x>180),",").concat(+(d<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(v.x,",").concat(v.y,`
  `);if(o>0){var S=rb({cx:n,cy:r,radius:o,angle:u,sign:d,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),k=S.circleTangency,$=S.lineTangency,C=S.theta,I=rb({cx:n,cy:r,radius:o,angle:c,sign:-d,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),E=I.circleTangency,O=I.lineTangency,R=I.theta,z=l?Math.abs(u-c):Math.abs(u-c)-C-R;if(z<0&&i===0)return"".concat(w,"L").concat(n,",").concat(r,"Z");w+="L".concat(O.x,",").concat(O.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(E.x,",").concat(E.y,`
      A`).concat(o,",").concat(o,",0,").concat(+(z>180),",").concat(+(d>0),",").concat(k.x,",").concat(k.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat($.x,",").concat($.y,"Z")}else w+="L".concat(n,",").concat(r,"Z");return w},Bst={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},iee=function(e){var n=BV(BV({},Bst),e),r=n.cx,o=n.cy,s=n.innerRadius,i=n.outerRadius,a=n.cornerRadius,l=n.forceCornerRadius,u=n.cornerIsExternal,c=n.startAngle,d=n.endAngle,f=n.className;if(i<s||c===d)return null;var p=_t("recharts-sector",f),h=i-s,m=Uc(a,h,0,!0),g;return m>0&&Math.abs(c-d)<360?g=zst({cx:r,cy:o,innerRadius:s,outerRadius:i,cornerRadius:Math.min(m,h/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:c,endAngle:d}):g=see({cx:r,cy:o,innerRadius:s,outerRadius:i,startAngle:c,endAngle:d}),K.createElement("path",K2({},yt(n,!0),{className:p,d:g,role:"img"}))};function Mg(t){"@babel/helpers - typeof";return Mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mg(t)}function X2(){return X2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},X2.apply(this,arguments)}function jV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function VV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jV(Object(n),!0).forEach(function(r){jst(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jst(t,e,n){return e=Vst(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vst(t){var e=Wst(t,"string");return Mg(e)=="symbol"?e:e+""}function Wst(t,e){if(Mg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Mg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var WV={curveBasisClosed:L8e,curveBasisOpen:z8e,curveBasis:M8e,curveBumpX:k8e,curveBumpY:$8e,curveLinearClosed:B8e,curveLinear:v$,curveMonotoneX:j8e,curveMonotoneY:V8e,curveNatural:W8e,curveStep:U8e,curveStepAfter:H8e,curveStepBefore:G8e},ob=function(e){return e.x===+e.x&&e.y===+e.y},Eh=function(e){return e.x},Ah=function(e){return e.y},Ust=function(e,n){if(ut(e))return e;var r="curve".concat(g$(e));return(r==="curveMonotone"||r==="curveBump")&&n?WV["".concat(r).concat(n==="vertical"?"Y":"X")]:WV[r]||v$},Gst=function(e){var n=e.type,r=n===void 0?"linear":n,o=e.points,s=o===void 0?[]:o,i=e.baseLine,a=e.layout,l=e.connectNulls,u=l===void 0?!1:l,c=Ust(r,a),d=u?s.filter(function(m){return ob(m)}):s,f;if(Array.isArray(i)){var p=u?i.filter(function(m){return ob(m)}):i,h=d.map(function(m,g){return VV(VV({},m),{},{base:p[g]})});return a==="vertical"?f=Kv().y(Ah).x1(Eh).x0(function(m){return m.base.x}):f=Kv().x(Eh).y1(Ah).y0(function(m){return m.base.y}),f.defined(ob).curve(c),f(h)}return a==="vertical"&&we(i)?f=Kv().y(Ah).x1(Eh).x0(i):we(i)?f=Kv().x(Eh).y1(Ah).y0(i):f=aQ().x(Eh).y(Ah),f.defined(ob).curve(c),f(d)},Y2=function(e){var n=e.className,r=e.points,o=e.path,s=e.pathRef;if((!r||!r.length)&&!o)return null;var i=r&&r.length?Gst(e):o;return K.createElement("path",X2({},yt(e,!1),c1(e),{className:_t("recharts-curve",n),d:i,ref:s}))},Hst=Object.getOwnPropertyNames,qst=Object.getOwnPropertySymbols,Kst=Object.prototype.hasOwnProperty;function UV(t,e){return function(r,o,s){return t(r,o,s)&&e(r,o,s)}}function sb(t){return function(n,r,o){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,o);var s=o.cache,i=s.get(n),a=s.get(r);if(i&&a)return i===r&&a===n;s.set(n,r),s.set(r,n);var l=t(n,r,o);return s.delete(n),s.delete(r),l}}function GV(t){return Hst(t).concat(qst(t))}var aee=Object.hasOwn||function(t,e){return Kst.call(t,e)};function rh(t,e){return t||e?t===e:t===e||t!==t&&e!==e}var lee="_owner",HV=Object.getOwnPropertyDescriptor,qV=Object.keys;function Xst(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function Yst(t,e){return rh(t.getTime(),e.getTime())}function KV(t,e,n){if(t.size!==e.size)return!1;for(var r={},o=t.entries(),s=0,i,a;(i=o.next())&&!i.done;){for(var l=e.entries(),u=!1,c=0;(a=l.next())&&!a.done;){var d=i.value,f=d[0],p=d[1],h=a.value,m=h[0],g=h[1];!u&&!r[c]&&(u=n.equals(f,m,s,c,t,e,n)&&n.equals(p,g,f,m,t,e,n))&&(r[c]=!0),c++}if(!u)return!1;s++}return!0}function Zst(t,e,n){var r=qV(t),o=r.length;if(qV(e).length!==o)return!1;for(var s;o-- >0;)if(s=r[o],s===lee&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!aee(e,s)||!n.equals(t[s],e[s],s,s,t,e,n))return!1;return!0}function Oh(t,e,n){var r=GV(t),o=r.length;if(GV(e).length!==o)return!1;for(var s,i,a;o-- >0;)if(s=r[o],s===lee&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!aee(e,s)||!n.equals(t[s],e[s],s,s,t,e,n)||(i=HV(t,s),a=HV(e,s),(i||a)&&(!i||!a||i.configurable!==a.configurable||i.enumerable!==a.enumerable||i.writable!==a.writable)))return!1;return!0}function Qst(t,e){return rh(t.valueOf(),e.valueOf())}function Jst(t,e){return t.source===e.source&&t.flags===e.flags}function XV(t,e,n){if(t.size!==e.size)return!1;for(var r={},o=t.values(),s,i;(s=o.next())&&!s.done;){for(var a=e.values(),l=!1,u=0;(i=a.next())&&!i.done;)!l&&!r[u]&&(l=n.equals(s.value,i.value,s.value,i.value,t,e,n))&&(r[u]=!0),u++;if(!l)return!1}return!0}function eit(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}var tit="[object Arguments]",nit="[object Boolean]",rit="[object Date]",oit="[object Map]",sit="[object Number]",iit="[object Object]",ait="[object RegExp]",lit="[object Set]",uit="[object String]",cit=Array.isArray,YV=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,ZV=Object.assign,dit=Object.prototype.toString.call.bind(Object.prototype.toString);function fit(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areMapsEqual,o=t.areObjectsEqual,s=t.arePrimitiveWrappersEqual,i=t.areRegExpsEqual,a=t.areSetsEqual,l=t.areTypedArraysEqual;return function(c,d,f){if(c===d)return!0;if(c==null||d==null||typeof c!="object"||typeof d!="object")return c!==c&&d!==d;var p=c.constructor;if(p!==d.constructor)return!1;if(p===Object)return o(c,d,f);if(cit(c))return e(c,d,f);if(YV!=null&&YV(c))return l(c,d,f);if(p===Date)return n(c,d,f);if(p===RegExp)return i(c,d,f);if(p===Map)return r(c,d,f);if(p===Set)return a(c,d,f);var h=dit(c);return h===rit?n(c,d,f):h===ait?i(c,d,f):h===oit?r(c,d,f):h===lit?a(c,d,f):h===iit?typeof c.then!="function"&&typeof d.then!="function"&&o(c,d,f):h===tit?o(c,d,f):h===nit||h===sit||h===uit?s(c,d,f):!1}}function pit(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,o={areArraysEqual:r?Oh:Xst,areDatesEqual:Yst,areMapsEqual:r?UV(KV,Oh):KV,areObjectsEqual:r?Oh:Zst,arePrimitiveWrappersEqual:Qst,areRegExpsEqual:Jst,areSetsEqual:r?UV(XV,Oh):XV,areTypedArraysEqual:r?Oh:eit};if(n&&(o=ZV({},o,n(o))),e){var s=sb(o.areArraysEqual),i=sb(o.areMapsEqual),a=sb(o.areObjectsEqual),l=sb(o.areSetsEqual);o=ZV({},o,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:a,areSetsEqual:l})}return o}function hit(t){return function(e,n,r,o,s,i,a){return t(e,n,a)}}function mit(t){var e=t.circular,n=t.comparator,r=t.createState,o=t.equals,s=t.strict;if(r)return function(l,u){var c=r(),d=c.cache,f=d===void 0?e?new WeakMap:void 0:d,p=c.meta;return n(l,u,{cache:f,equals:o,meta:p,strict:s})};if(e)return function(l,u){return n(l,u,{cache:new WeakMap,equals:o,meta:void 0,strict:s})};var i={cache:void 0,equals:o,meta:void 0,strict:s};return function(l,u){return n(l,u,i)}}var git=Fu();Fu({strict:!0});Fu({circular:!0});Fu({circular:!0,strict:!0});Fu({createInternalComparator:function(){return rh}});Fu({strict:!0,createInternalComparator:function(){return rh}});Fu({circular:!0,createInternalComparator:function(){return rh}});Fu({circular:!0,createInternalComparator:function(){return rh},strict:!0});function Fu(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,o=t.createState,s=t.strict,i=s===void 0?!1:s,a=pit(t),l=fit(a),u=r?r(l):hit(l);return mit({circular:n,comparator:l,createState:o,equals:u,strict:i})}function yit(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function QV(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function o(s){n<0&&(n=s),s-n>e?(t(s),n=-1):yit(o)};requestAnimationFrame(r)}function Z2(t){"@babel/helpers - typeof";return Z2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z2(t)}function vit(t){return Sit(t)||wit(t)||xit(t)||bit()}function bit(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xit(t,e){if(t){if(typeof t=="string")return JV(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JV(t,e)}}function JV(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function wit(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Sit(t){if(Array.isArray(t))return t}function kit(){var t={},e=function(){return null},n=!1,r=function o(s){if(!n){if(Array.isArray(s)){if(!s.length)return;var i=s,a=vit(i),l=a[0],u=a.slice(1);if(typeof l=="number"){QV(o.bind(null,u),l);return}o(l),QV(o.bind(null,u));return}Z2(s)==="object"&&(t=s,e(t)),typeof s=="function"&&s()}};return{stop:function(){n=!0},start:function(s){n=!1,r(s)},subscribe:function(s){return e=s,function(){e=function(){return null}}}}}function Lg(t){"@babel/helpers - typeof";return Lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lg(t)}function eW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function tW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eW(Object(n),!0).forEach(function(r){uee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uee(t,e,n){return e=$it(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $it(t){var e=Cit(t,"string");return Lg(e)==="symbol"?e:String(e)}function Cit(t,e){if(Lg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Lg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Tit=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,o){return r.filter(function(s){return o.includes(s)})})},_it=function(e){return e},Iit=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},xm=function(e,n){return Object.keys(n).reduce(function(r,o){return tW(tW({},r),{},uee({},o,e(o,n[o])))},{})},nW=function(e,n,r){return e.map(function(o){return"".concat(Iit(o)," ").concat(n,"ms ").concat(r)}).join(",")};function Nit(t,e){return Oit(t)||Ait(t,e)||cee(t,e)||Eit()}function Eit(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ait(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,s,i,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,o=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return a}}function Oit(t){if(Array.isArray(t))return t}function Pit(t){return Fit(t)||Dit(t)||cee(t)||Rit()}function Rit(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cee(t,e){if(t){if(typeof t=="string")return Q2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q2(t,e)}}function Dit(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Fit(t){if(Array.isArray(t))return Q2(t)}function Q2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var j1=1e-4,dee=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},fee=function(e,n){return e.map(function(r,o){return r*Math.pow(n,o)}).reduce(function(r,o){return r+o})},rW=function(e,n){return function(r){var o=dee(e,n);return fee(o,r)}},Mit=function(e,n){return function(r){var o=dee(e,n),s=[].concat(Pit(o.map(function(i,a){return i*a}).slice(1)),[0]);return fee(s,r)}},oW=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=n[0],s=n[1],i=n[2],a=n[3];if(n.length===1)switch(n[0]){case"linear":o=0,s=0,i=1,a=1;break;case"ease":o=.25,s=.1,i=.25,a=1;break;case"ease-in":o=.42,s=0,i=1,a=1;break;case"ease-out":o=.42,s=0,i=.58,a=1;break;case"ease-in-out":o=0,s=0,i=.58,a=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),c=Nit(u,4);o=c[0],s=c[1],i=c[2],a=c[3]}}}var d=rW(o,i),f=rW(s,a),p=Mit(o,i),h=function(y){return y>1?1:y<0?0:y},m=function(y){for(var v=y>1?1:y,b=v,x=0;x<8;++x){var w=d(b)-v,S=p(b);if(Math.abs(w-v)<j1||S<j1)return f(b);b=h(b-w/S)}return f(b)};return m.isStepper=!1,m},Lit=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,o=e.damping,s=o===void 0?8:o,i=e.dt,a=i===void 0?17:i,l=function(c,d,f){var p=-(c-d)*r,h=f*s,m=f+(p-h)*a/1e3,g=f*a/1e3+c;return Math.abs(g-d)<j1&&Math.abs(m)<j1?[d,0]:[g,m]};return l.isStepper=!0,l.dt=a,l},zit=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=n[0];if(typeof o=="string")switch(o){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return oW(o);case"spring":return Lit();default:if(o.split("(")[0]==="cubic-bezier")return oW(o)}return typeof o=="function"?o:null};function zg(t){"@babel/helpers - typeof";return zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zg(t)}function sW(t){return Vit(t)||jit(t)||pee(t)||Bit()}function Bit(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jit(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Vit(t){if(Array.isArray(t))return eN(t)}function iW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Cr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iW(Object(n),!0).forEach(function(r){J2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function J2(t,e,n){return e=Wit(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wit(t){var e=Uit(t,"string");return zg(e)==="symbol"?e:String(e)}function Uit(t,e){if(zg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(zg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Git(t,e){return Kit(t)||qit(t,e)||pee(t,e)||Hit()}function Hit(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pee(t,e){if(t){if(typeof t=="string")return eN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eN(t,e)}}function eN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function qit(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,s,i,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,o=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return a}}function Kit(t){if(Array.isArray(t))return t}var V1=function(e,n,r){return e+(n-e)*r},tN=function(e){var n=e.from,r=e.to;return n!==r},Xit=function t(e,n,r){var o=xm(function(s,i){if(tN(i)){var a=e(i.from,i.to,i.velocity),l=Git(a,2),u=l[0],c=l[1];return Cr(Cr({},i),{},{from:u,velocity:c})}return i},n);return r<1?xm(function(s,i){return tN(i)?Cr(Cr({},i),{},{velocity:V1(i.velocity,o[s].velocity,r),from:V1(i.from,o[s].from,r)}):i},n):t(e,o,r-1)};const Yit=function(t,e,n,r,o){var s=Tit(t,e),i=s.reduce(function(g,y){return Cr(Cr({},g),{},J2({},y,[t[y],e[y]]))},{}),a=s.reduce(function(g,y){return Cr(Cr({},g),{},J2({},y,{from:t[y],velocity:0,to:e[y]}))},{}),l=-1,u,c,d=function(){return null},f=function(){return xm(function(y,v){return v.from},a)},p=function(){return!Object.values(a).filter(tN).length},h=function(y){u||(u=y);var v=y-u,b=v/n.dt;a=Xit(n,a,b),o(Cr(Cr(Cr({},t),e),f())),u=y,p()||(l=requestAnimationFrame(d))},m=function(y){c||(c=y);var v=(y-c)/r,b=xm(function(w,S){return V1.apply(void 0,sW(S).concat([n(v)]))},i);if(o(Cr(Cr(Cr({},t),e),b)),v<1)l=requestAnimationFrame(d);else{var x=xm(function(w,S){return V1.apply(void 0,sW(S).concat([n(1)]))},i);o(Cr(Cr(Cr({},t),e),x))}};return d=n.isStepper?h:m,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(l)}}};function ip(t){"@babel/helpers - typeof";return ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ip(t)}var Zit=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Qit(t,e){if(t==null)return{};var n=Jit(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Jit(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,s;for(s=0;s<r.length;s++)o=r[s],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function RT(t){return rat(t)||nat(t)||tat(t)||eat()}function eat(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tat(t,e){if(t){if(typeof t=="string")return nN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nN(t,e)}}function nat(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function rat(t){if(Array.isArray(t))return nN(t)}function nN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function aW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function ri(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aW(Object(n),!0).forEach(function(r){Yh(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yh(t,e,n){return e=hee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oat(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sat(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hee(r.key),r)}}function iat(t,e,n){return e&&sat(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function hee(t){var e=aat(t,"string");return ip(e)==="symbol"?e:String(e)}function aat(t,e){if(ip(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ip(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lat(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rN(t,e)}function rN(t,e){return rN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},rN(t,e)}function uat(t){var e=cat();return function(){var r=W1(t),o;if(e){var s=W1(this).constructor;o=Reflect.construct(r,arguments,s)}else o=r.apply(this,arguments);return oN(this,o)}}function oN(t,e){if(e&&(ip(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sN(t)}function sN(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cat(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function W1(t){return W1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},W1(t)}var il=function(t){lat(n,t);var e=uat(n);function n(r,o){var s;oat(this,n),s=e.call(this,r,o);var i=s.props,a=i.isActive,l=i.attributeName,u=i.from,c=i.to,d=i.steps,f=i.children,p=i.duration;if(s.handleStyleChange=s.handleStyleChange.bind(sN(s)),s.changeStyle=s.changeStyle.bind(sN(s)),!a||p<=0)return s.state={style:{}},typeof f=="function"&&(s.state={style:c}),oN(s);if(d&&d.length)s.state={style:d[0].style};else if(u){if(typeof f=="function")return s.state={style:u},oN(s);s.state={style:l?Yh({},l,u):u}}else s.state={style:{}};return s}return iat(n,[{key:"componentDidMount",value:function(){var o=this.props,s=o.isActive,i=o.canBegin;this.mounted=!0,!(!s||!i)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(o){var s=this.props,i=s.isActive,a=s.canBegin,l=s.attributeName,u=s.shouldReAnimate,c=s.to,d=s.from,f=this.state.style;if(a){if(!i){var p={style:l?Yh({},l,c):c};this.state&&f&&(l&&f[l]!==c||!l&&f!==c)&&this.setState(p);return}if(!(git(o.to,c)&&o.canBegin&&o.isActive)){var h=!o.canBegin||!o.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var m=h||u?d:o.to;if(this.state&&f){var g={style:l?Yh({},l,m):m};(l&&f[l]!==m||!l&&f!==m)&&this.setState(g)}this.runAnimation(ri(ri({},this.props),{},{from:m,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var o=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),o&&o()}},{key:"handleStyleChange",value:function(o){this.changeStyle(o)}},{key:"changeStyle",value:function(o){this.mounted&&this.setState({style:o})}},{key:"runJSAnimation",value:function(o){var s=this,i=o.from,a=o.to,l=o.duration,u=o.easing,c=o.begin,d=o.onAnimationEnd,f=o.onAnimationStart,p=Yit(i,a,zit(u),l,this.changeStyle),h=function(){s.stopJSAnimation=p()};this.manager.start([f,c,h,l,d])}},{key:"runStepAnimation",value:function(o){var s=this,i=o.steps,a=o.begin,l=o.onAnimationStart,u=i[0],c=u.style,d=u.duration,f=d===void 0?0:d,p=function(m,g,y){if(y===0)return m;var v=g.duration,b=g.easing,x=b===void 0?"ease":b,w=g.style,S=g.properties,k=g.onAnimationEnd,$=y>0?i[y-1]:g,C=S||Object.keys(w);if(typeof x=="function"||x==="spring")return[].concat(RT(m),[s.runJSAnimation.bind(s,{from:$.style,to:w,duration:v,easing:x}),v]);var I=nW(C,v,x),E=ri(ri(ri({},$.style),w),{},{transition:I});return[].concat(RT(m),[E,v,k]).filter(_it)};return this.manager.start([l].concat(RT(i.reduce(p,[c,Math.max(f,a)])),[o.onAnimationEnd]))}},{key:"runAnimation",value:function(o){this.manager||(this.manager=kit());var s=o.begin,i=o.duration,a=o.attributeName,l=o.to,u=o.easing,c=o.onAnimationStart,d=o.onAnimationEnd,f=o.steps,p=o.children,h=this.manager;if(this.unSubscribe=h.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(o);return}if(f.length>1){this.runStepAnimation(o);return}var m=a?Yh({},a,l):l,g=nW(Object.keys(m),i,u);h.start([c,s,ri(ri({},m),{},{transition:g}),i,d])}},{key:"render",value:function(){var o=this.props,s=o.children;o.begin;var i=o.duration;o.attributeName,o.easing;var a=o.isActive;o.steps,o.from,o.to,o.canBegin,o.onAnimationEnd,o.shouldReAnimate,o.onAnimationReStart;var l=Qit(o,Zit),u=N.Children.count(s),c=this.state.style;if(typeof s=="function")return s(c);if(!a||u===0||i<=0)return s;var d=function(p){var h=p.props,m=h.style,g=m===void 0?{}:m,y=h.className,v=N.cloneElement(p,ri(ri({},l),{},{style:ri(ri({},g),c),className:y}));return v};return u===1?d(N.Children.only(s)):K.createElement("div",null,N.Children.map(s,function(f){return d(f)}))}}]),n}(N.PureComponent);il.displayName="Animate";il.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};il.propTypes={from:Je.oneOfType([Je.object,Je.string]),to:Je.oneOfType([Je.object,Je.string]),attributeName:Je.string,duration:Je.number,begin:Je.number,easing:Je.oneOfType([Je.string,Je.func]),steps:Je.arrayOf(Je.shape({duration:Je.number.isRequired,style:Je.object.isRequired,easing:Je.oneOfType([Je.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Je.func]),properties:Je.arrayOf("string"),onAnimationEnd:Je.func})),children:Je.oneOfType([Je.node,Je.func]),isActive:Je.bool,canBegin:Je.bool,onAnimationEnd:Je.func,shouldReAnimate:Je.bool,onAnimationStart:Je.func,onAnimationReStart:Je.func};Je.object,Je.object,Je.object,Je.element;Je.object,Je.object,Je.object,Je.oneOfType([Je.array,Je.element]),Je.any;function Bg(t){"@babel/helpers - typeof";return Bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bg(t)}function U1(){return U1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},U1.apply(this,arguments)}function dat(t,e){return mat(t)||hat(t,e)||pat(t,e)||fat()}function fat(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pat(t,e){if(t){if(typeof t=="string")return lW(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lW(t,e)}}function lW(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function hat(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,s,i,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,o=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return a}}function mat(t){if(Array.isArray(t))return t}function uW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function cW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uW(Object(n),!0).forEach(function(r){gat(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gat(t,e,n){return e=yat(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yat(t){var e=vat(t,"string");return Bg(e)=="symbol"?e:e+""}function vat(t,e){if(Bg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Bg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dW=function(e,n,r,o,s){var i=Math.min(Math.abs(r)/2,Math.abs(o)/2),a=o>=0?1:-1,l=r>=0?1:-1,u=o>=0&&r>=0||o<0&&r<0?1:0,c;if(i>0&&s instanceof Array){for(var d=[0,0,0,0],f=0,p=4;f<p;f++)d[f]=s[f]>i?i:s[f];c="M".concat(e,",").concat(n+a*d[0]),d[0]>0&&(c+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(u,",").concat(e+l*d[0],",").concat(n)),c+="L ".concat(e+r-l*d[1],",").concat(n),d[1]>0&&(c+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(n+a*d[1])),c+="L ".concat(e+r,",").concat(n+o-a*d[2]),d[2]>0&&(c+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(u,`,
        `).concat(e+r-l*d[2],",").concat(n+o)),c+="L ".concat(e+l*d[3],",").concat(n+o),d[3]>0&&(c+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+o-a*d[3])),c+="Z"}else if(i>0&&s===+s&&s>0){var h=Math.min(i,s);c="M ".concat(e,",").concat(n+a*h,`
            A `).concat(h,",").concat(h,",0,0,").concat(u,",").concat(e+l*h,",").concat(n,`
            L `).concat(e+r-l*h,",").concat(n,`
            A `).concat(h,",").concat(h,",0,0,").concat(u,",").concat(e+r,",").concat(n+a*h,`
            L `).concat(e+r,",").concat(n+o-a*h,`
            A `).concat(h,",").concat(h,",0,0,").concat(u,",").concat(e+r-l*h,",").concat(n+o,`
            L `).concat(e+l*h,",").concat(n+o,`
            A `).concat(h,",").concat(h,",0,0,").concat(u,",").concat(e,",").concat(n+o-a*h," Z")}else c="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(o," h ").concat(-r," Z");return c},bat=function(e,n){if(!e||!n)return!1;var r=e.x,o=e.y,s=n.x,i=n.y,a=n.width,l=n.height;if(Math.abs(a)>0&&Math.abs(l)>0){var u=Math.min(s,s+a),c=Math.max(s,s+a),d=Math.min(i,i+l),f=Math.max(i,i+l);return r>=u&&r<=c&&o>=d&&o<=f}return!1},xat={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},OF=function(e){var n=cW(cW({},xat),e),r=N.useRef(),o=N.useState(-1),s=dat(o,2),i=s[0],a=s[1];N.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var x=r.current.getTotalLength();x&&a(x)}catch{}},[]);var l=n.x,u=n.y,c=n.width,d=n.height,f=n.radius,p=n.className,h=n.animationEasing,m=n.animationDuration,g=n.animationBegin,y=n.isAnimationActive,v=n.isUpdateAnimationActive;if(l!==+l||u!==+u||c!==+c||d!==+d||c===0||d===0)return null;var b=_t("recharts-rectangle",p);return v?K.createElement(il,{canBegin:i>0,from:{width:c,height:d,x:l,y:u},to:{width:c,height:d,x:l,y:u},duration:m,animationEasing:h,isActive:v},function(x){var w=x.width,S=x.height,k=x.x,$=x.y;return K.createElement(il,{canBegin:i>0,from:"0px ".concat(i===-1?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:m,isActive:y,easing:h},K.createElement("path",U1({},yt(n,!0),{className:b,d:dW(k,$,w,S,f),ref:r})))}):K.createElement("path",U1({},yt(n,!0),{className:b,d:dW(l,u,c,d,f)}))};function iN(){return iN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iN.apply(this,arguments)}var mee=function(e){var n=e.cx,r=e.cy,o=e.r,s=e.className,i=_t("recharts-dot",s);return n===+n&&r===+r&&o===+o?K.createElement("circle",iN({},yt(e,!1),c1(e),{className:i,cx:n,cy:r,r:o})):null};function jg(t){"@babel/helpers - typeof";return jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jg(t)}var wat=["x","y","top","left","width","height","className"];function aN(){return aN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aN.apply(this,arguments)}function fW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Sat(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fW(Object(n),!0).forEach(function(r){kat(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kat(t,e,n){return e=$at(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $at(t){var e=Cat(t,"string");return jg(e)=="symbol"?e:e+""}function Cat(t,e){if(jg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(jg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tat(t,e){if(t==null)return{};var n=_at(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function _at(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Iat=function(e,n,r,o,s,i){return"M".concat(e,",").concat(s,"v").concat(o,"M").concat(i,",").concat(n,"h").concat(r)},Nat=function(e){var n=e.x,r=n===void 0?0:n,o=e.y,s=o===void 0?0:o,i=e.top,a=i===void 0?0:i,l=e.left,u=l===void 0?0:l,c=e.width,d=c===void 0?0:c,f=e.height,p=f===void 0?0:f,h=e.className,m=Tat(e,wat),g=Sat({x:r,y:s,top:a,left:u,width:d,height:p},m);return!we(r)||!we(s)||!we(d)||!we(p)||!we(a)||!we(u)?null:K.createElement("path",aN({},yt(g,!0),{className:_t("recharts-cross",h),d:Iat(r,s,d,p,a,u)}))},Eat=AQ,Aat=Eat(Object.getPrototypeOf,Object),Oat=Aat,Pat=gl,Rat=Oat,Dat=yl,Fat="[object Object]",Mat=Function.prototype,Lat=Object.prototype,gee=Mat.toString,zat=Lat.hasOwnProperty,Bat=gee.call(Object);function jat(t){if(!Dat(t)||Pat(t)!=Fat)return!1;var e=Rat(t);if(e===null)return!0;var n=zat.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&gee.call(n)==Bat}var Vat=jat;const Wat=Dt(Vat);var Uat=gl,Gat=yl,Hat="[object Boolean]";function qat(t){return t===!0||t===!1||Gat(t)&&Uat(t)==Hat}var Kat=qat;const Xat=Dt(Kat);function Vg(t){"@babel/helpers - typeof";return Vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vg(t)}function G1(){return G1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},G1.apply(this,arguments)}function Yat(t,e){return elt(t)||Jat(t,e)||Qat(t,e)||Zat()}function Zat(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qat(t,e){if(t){if(typeof t=="string")return pW(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pW(t,e)}}function pW(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Jat(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,s,i,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,o=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return a}}function elt(t){if(Array.isArray(t))return t}function hW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function mW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hW(Object(n),!0).forEach(function(r){tlt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tlt(t,e,n){return e=nlt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nlt(t){var e=rlt(t,"string");return Vg(e)=="symbol"?e:e+""}function rlt(t,e){if(Vg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Vg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gW=function(e,n,r,o,s){var i=r-o,a;return a="M ".concat(e,",").concat(n),a+="L ".concat(e+r,",").concat(n),a+="L ".concat(e+r-i/2,",").concat(n+s),a+="L ".concat(e+r-i/2-o,",").concat(n+s),a+="L ".concat(e,",").concat(n," Z"),a},olt={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},slt=function(e){var n=mW(mW({},olt),e),r=N.useRef(),o=N.useState(-1),s=Yat(o,2),i=s[0],a=s[1];N.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&a(b)}catch{}},[]);var l=n.x,u=n.y,c=n.upperWidth,d=n.lowerWidth,f=n.height,p=n.className,h=n.animationEasing,m=n.animationDuration,g=n.animationBegin,y=n.isUpdateAnimationActive;if(l!==+l||u!==+u||c!==+c||d!==+d||f!==+f||c===0&&d===0||f===0)return null;var v=_t("recharts-trapezoid",p);return y?K.createElement(il,{canBegin:i>0,from:{upperWidth:0,lowerWidth:0,height:f,x:l,y:u},to:{upperWidth:c,lowerWidth:d,height:f,x:l,y:u},duration:m,animationEasing:h,isActive:y},function(b){var x=b.upperWidth,w=b.lowerWidth,S=b.height,k=b.x,$=b.y;return K.createElement(il,{canBegin:i>0,from:"0px ".concat(i===-1?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:m,easing:h},K.createElement("path",G1({},yt(n,!0),{className:v,d:gW(k,$,x,w,S),ref:r})))}):K.createElement("g",null,K.createElement("path",G1({},yt(n,!0),{className:v,d:gW(l,u,c,d,f)})))},ilt=["option","shapeType","propTransformer","activeClassName","isActive"];function Wg(t){"@babel/helpers - typeof";return Wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wg(t)}function alt(t,e){if(t==null)return{};var n=llt(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function llt(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function yW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function H1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yW(Object(n),!0).forEach(function(r){ult(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ult(t,e,n){return e=clt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function clt(t){var e=dlt(t,"string");return Wg(e)=="symbol"?e:e+""}function dlt(t,e){if(Wg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Wg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function flt(t,e){return H1(H1({},e),t)}function plt(t,e){return t==="symbols"}function vW(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return K.createElement(OF,n);case"trapezoid":return K.createElement(slt,n);case"sector":return K.createElement(iee,n);case"symbols":if(plt(e))return K.createElement(x$,n);break;default:return null}}function hlt(t){return N.isValidElement(t)?t.props:t}function lN(t){var e=t.option,n=t.shapeType,r=t.propTransformer,o=r===void 0?flt:r,s=t.activeClassName,i=s===void 0?"recharts-active-shape":s,a=t.isActive,l=alt(t,ilt),u;if(N.isValidElement(e))u=N.cloneElement(e,H1(H1({},l),hlt(e)));else if(ut(e))u=e(l);else if(Wat(e)&&!Xat(e)){var c=o(e,l);u=K.createElement(vW,{shapeType:n,elementProps:c})}else{var d=l;u=K.createElement(vW,{shapeType:n,elementProps:d})}return a?K.createElement(xn,{className:i},u):u}function D$(t,e){return e!=null&&"trapezoids"in t.props}function F$(t,e){return e!=null&&"sectors"in t.props}function Ug(t,e){return e!=null&&"points"in t.props}function mlt(t,e){var n,r,o=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,s=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return o&&s}function glt(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function ylt(t,e){var n=t.x===e.x,r=t.y===e.y,o=t.z===e.z;return n&&r&&o}function vlt(t,e){var n;return D$(t,e)?n=mlt:F$(t,e)?n=glt:Ug(t,e)&&(n=ylt),n}function blt(t,e){var n;return D$(t,e)?n="trapezoids":F$(t,e)?n="sectors":Ug(t,e)&&(n="points"),n}function xlt(t,e){if(D$(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(F$(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Ug(t,e)?e.payload:{}}function wlt(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,o=blt(n,e),s=xlt(n,e),i=r.filter(function(l,u){var c=O$(s,l),d=n.props[o].filter(function(h){var m=vlt(n,e);return m(h,e)}),f=n.props[o].indexOf(d[d.length-1]),p=u===f;return c&&p}),a=r.indexOf(i[i.length-1]);return a}var Slt=Math.ceil,klt=Math.max;function $lt(t,e,n,r){for(var o=-1,s=klt(Slt((e-t)/(n||1)),0),i=Array(s);s--;)i[r?s:++o]=t,t+=n;return i}var Clt=$lt,Tlt=YQ,bW=1/0,_lt=17976931348623157e292;function Ilt(t){if(!t)return t===0?t:0;if(t=Tlt(t),t===bW||t===-bW){var e=t<0?-1:1;return e*_lt}return t===t?t:0}var yee=Ilt,Nlt=Clt,Elt=k$,DT=yee;function Alt(t){return function(e,n,r){return r&&typeof r!="number"&&Elt(e,n,r)&&(n=r=void 0),e=DT(e),n===void 0?(n=e,e=0):n=DT(n),r=r===void 0?e<n?1:-1:DT(r),Nlt(e,n,r,t)}}var Olt=Alt,Plt=Olt,Rlt=Plt(),Dlt=Rlt;const q1=Dt(Dlt);function Gg(t){"@babel/helpers - typeof";return Gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gg(t)}function xW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function wW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xW(Object(n),!0).forEach(function(r){vee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vee(t,e,n){return e=Flt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Flt(t){var e=Mlt(t,"string");return Gg(e)=="symbol"?e:e+""}function Mlt(t,e){if(Gg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Gg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Llt=["Webkit","Moz","O","ms"],zlt=function(e,n){var r=e.replace(/(\w)/,function(s){return s.toUpperCase()}),o=Llt.reduce(function(s,i){return wW(wW({},s),{},vee({},i+r,n))},{});return o[e]=n,o};function ap(t){"@babel/helpers - typeof";return ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ap(t)}function K1(){return K1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},K1.apply(this,arguments)}function SW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function FT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SW(Object(n),!0).forEach(function(r){Ko(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Blt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kW(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xee(r.key),r)}}function jlt(t,e,n){return e&&kW(t.prototype,e),n&&kW(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Vlt(t,e,n){return e=X1(e),Wlt(t,bee()?Reflect.construct(e,n||[],X1(t).constructor):e.apply(t,n))}function Wlt(t,e){if(e&&(ap(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ult(t)}function Ult(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bee=function(){return!!t})()}function X1(t){return X1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},X1(t)}function Glt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uN(t,e)}function uN(t,e){return uN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},uN(t,e)}function Ko(t,e,n){return e=xee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xee(t){var e=Hlt(t,"string");return ap(e)=="symbol"?e:e+""}function Hlt(t,e){if(ap(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ap(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qlt=function(e){var n=e.data,r=e.startIndex,o=e.endIndex,s=e.x,i=e.width,a=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,u=vm().domain(q1(0,l)).range([s,s+i-a]),c=u.domain().map(function(d){return u(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(o),scale:u,scaleValues:c}},$W=function(e){return e.changedTouches&&!!e.changedTouches.length},lp=function(t){function e(n){var r;return Blt(this,e),r=Vlt(this,e,[n]),Ko(r,"handleDrag",function(o){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(o):r.state.isSlideMoving&&r.handleSlideDrag(o)}),Ko(r,"handleTouchMove",function(o){o.changedTouches!=null&&o.changedTouches.length>0&&r.handleDrag(o.changedTouches[0])}),Ko(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var o=r.props,s=o.endIndex,i=o.onDragEnd,a=o.startIndex;i==null||i({endIndex:s,startIndex:a})}),r.detachDragEndListener()}),Ko(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Ko(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Ko(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Ko(r,"handleSlideDragStart",function(o){var s=$W(o)?o.changedTouches[0]:o;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return Glt(e,t),jlt(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var o=r.startX,s=r.endX,i=this.state.scaleValues,a=this.props,l=a.gap,u=a.data,c=u.length-1,d=Math.min(o,s),f=Math.max(o,s),p=e.getIndexInRange(i,d),h=e.getIndexInRange(i,f);return{startIndex:p-p%l,endIndex:h===c?c:h-h%l}}},{key:"getTextOfTick",value:function(r){var o=this.props,s=o.data,i=o.tickFormatter,a=o.dataKey,l=co(s[r],a,r);return ut(i)?i(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var o=this.state,s=o.slideMoveStartX,i=o.startX,a=o.endX,l=this.props,u=l.x,c=l.width,d=l.travellerWidth,f=l.startIndex,p=l.endIndex,h=l.onChange,m=r.pageX-s;m>0?m=Math.min(m,u+c-d-a,u+c-d-i):m<0&&(m=Math.max(m,u-i,u-a));var g=this.getIndex({startX:i+m,endX:a+m});(g.startIndex!==f||g.endIndex!==p)&&h&&h(g),this.setState({startX:i+m,endX:a+m,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,o){var s=$W(o)?o.changedTouches[0]:o;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var o=this.state,s=o.brushMoveStartX,i=o.movingTravellerId,a=o.endX,l=o.startX,u=this.state[i],c=this.props,d=c.x,f=c.width,p=c.travellerWidth,h=c.onChange,m=c.gap,g=c.data,y={startX:this.state.startX,endX:this.state.endX},v=r.pageX-s;v>0?v=Math.min(v,d+f-p-u):v<0&&(v=Math.max(v,d-u)),y[i]=u+v;var b=this.getIndex(y),x=b.startIndex,w=b.endIndex,S=function(){var $=g.length-1;return i==="startX"&&(a>l?x%m===0:w%m===0)||a<l&&w===$||i==="endX"&&(a>l?w%m===0:x%m===0)||a>l&&w===$};this.setState(Ko(Ko({},i,u+v),"brushMoveStartX",r.pageX),function(){h&&S()&&h(b)})}},{key:"handleTravellerMoveKeyboard",value:function(r,o){var s=this,i=this.state,a=i.scaleValues,l=i.startX,u=i.endX,c=this.state[o],d=a.indexOf(c);if(d!==-1){var f=d+r;if(!(f===-1||f>=a.length)){var p=a[f];o==="startX"&&p>=u||o==="endX"&&p<=l||this.setState(Ko({},o,p),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,o=r.x,s=r.y,i=r.width,a=r.height,l=r.fill,u=r.stroke;return K.createElement("rect",{stroke:u,fill:l,x:o,y:s,width:i,height:a})}},{key:"renderPanorama",value:function(){var r=this.props,o=r.x,s=r.y,i=r.width,a=r.height,l=r.data,u=r.children,c=r.padding,d=N.Children.only(u);return d?K.cloneElement(d,{x:o,y:s,width:i,height:a,margin:c,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,o){var s,i,a=this,l=this.props,u=l.y,c=l.travellerWidth,d=l.height,f=l.traveller,p=l.ariaLabel,h=l.data,m=l.startIndex,g=l.endIndex,y=Math.max(r,this.props.x),v=FT(FT({},yt(this.props,!1)),{},{x:y,y:u,width:c,height:d}),b=p||"Min value: ".concat((s=h[m])===null||s===void 0?void 0:s.name,", Max value: ").concat((i=h[g])===null||i===void 0?void 0:i.name);return K.createElement(xn,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[o],onTouchStart:this.travellerDragStartHandlers[o],onKeyDown:function(w){["ArrowLeft","ArrowRight"].includes(w.key)&&(w.preventDefault(),w.stopPropagation(),a.handleTravellerMoveKeyboard(w.key==="ArrowRight"?1:-1,o))},onFocus:function(){a.setState({isTravellerFocused:!0})},onBlur:function(){a.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(f,v))}},{key:"renderSlide",value:function(r,o){var s=this.props,i=s.y,a=s.height,l=s.stroke,u=s.travellerWidth,c=Math.min(r,o)+u,d=Math.max(Math.abs(o-r)-u,0);return K.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:c,y:i,width:d,height:a})}},{key:"renderText",value:function(){var r=this.props,o=r.startIndex,s=r.endIndex,i=r.y,a=r.height,l=r.travellerWidth,u=r.stroke,c=this.state,d=c.startX,f=c.endX,p=5,h={pointerEvents:"none",fill:u};return K.createElement(xn,{className:"recharts-brush-texts"},K.createElement($1,K1({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,f)-p,y:i+a/2},h),this.getTextOfTick(o)),K.createElement($1,K1({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,f)+l+p,y:i+a/2},h),this.getTextOfTick(s)))}},{key:"render",value:function(){var r=this.props,o=r.data,s=r.className,i=r.children,a=r.x,l=r.y,u=r.width,c=r.height,d=r.alwaysShowText,f=this.state,p=f.startX,h=f.endX,m=f.isTextActive,g=f.isSlideMoving,y=f.isTravellerMoving,v=f.isTravellerFocused;if(!o||!o.length||!we(a)||!we(l)||!we(u)||!we(c)||u<=0||c<=0)return null;var b=_t("recharts-brush",s),x=K.Children.count(i)===1,w=zlt("userSelect","none");return K.createElement(xn,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),x&&this.renderPanorama(),this.renderSlide(p,h),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(h,"endX"),(m||g||y||v||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var o=r.x,s=r.y,i=r.width,a=r.height,l=r.stroke,u=Math.floor(s+a/2)-1;return K.createElement(K.Fragment,null,K.createElement("rect",{x:o,y:s,width:i,height:a,fill:l,stroke:"none"}),K.createElement("line",{x1:o+1,y1:u,x2:o+i-1,y2:u,fill:"none",stroke:"#fff"}),K.createElement("line",{x1:o+1,y1:u+2,x2:o+i-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,o){var s;return K.isValidElement(r)?s=K.cloneElement(r,o):ut(r)?s=r(o):s=e.renderDefaultTraveller(o),s}},{key:"getDerivedStateFromProps",value:function(r,o){var s=r.data,i=r.width,a=r.x,l=r.travellerWidth,u=r.updateId,c=r.startIndex,d=r.endIndex;if(s!==o.prevData||u!==o.prevUpdateId)return FT({prevData:s,prevTravellerWidth:l,prevUpdateId:u,prevX:a,prevWidth:i},s&&s.length?qlt({data:s,width:i,x:a,travellerWidth:l,startIndex:c,endIndex:d}):{scale:null,scaleValues:null});if(o.scale&&(i!==o.prevWidth||a!==o.prevX||l!==o.prevTravellerWidth)){o.scale.range([a,a+i-l]);var f=o.scale.domain().map(function(p){return o.scale(p)});return{prevData:s,prevTravellerWidth:l,prevUpdateId:u,prevX:a,prevWidth:i,startX:o.scale(r.startIndex),endX:o.scale(r.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(r,o){for(var s=r.length,i=0,a=s-1;a-i>1;){var l=Math.floor((i+a)/2);r[l]>o?a=l:i=l}return o>=r[a]?a:i}}])}(N.PureComponent);Ko(lp,"displayName","Brush");Ko(lp,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Klt=rF;function Xlt(t,e){var n;return Klt(t,function(r,o,s){return n=e(r,o,s),!n}),!!n}var Ylt=Xlt,Zlt=kQ,Qlt=Pu,Jlt=Ylt,eut=Ho,tut=k$;function nut(t,e,n){var r=eut(t)?Zlt:Jlt;return n&&tut(t,e,n)&&(e=void 0),r(t,Qlt(e))}var rut=nut;const out=Dt(rut);var ua=function(e,n){var r=e.alwaysShow,o=e.ifOverflow;return r&&(o="extendDomain"),o===n},CW=GQ;function sut(t,e,n){e=="__proto__"&&CW?CW(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var iut=sut,aut=iut,lut=WQ,uut=Pu;function cut(t,e){var n={};return e=uut(e),lut(t,function(r,o,s){aut(n,o,e(r,o,s))}),n}var dut=cut;const fut=Dt(dut);function put(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var hut=put,mut=rF;function gut(t,e){var n=!0;return mut(t,function(r,o,s){return n=!!e(r,o,s),n}),n}var yut=gut,vut=hut,but=yut,xut=Pu,wut=Ho,Sut=k$;function kut(t,e,n){var r=wut(t)?vut:but;return n&&Sut(t,e,n)&&(e=void 0),r(t,xut(e))}var $ut=kut;const wee=Dt($ut);var Cut=["x","y"];function Hg(t){"@babel/helpers - typeof";return Hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hg(t)}function cN(){return cN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cN.apply(this,arguments)}function TW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Ph(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TW(Object(n),!0).forEach(function(r){Tut(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tut(t,e,n){return e=_ut(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _ut(t){var e=Iut(t,"string");return Hg(e)=="symbol"?e:e+""}function Iut(t,e){if(Hg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Hg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Nut(t,e){if(t==null)return{};var n=Eut(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Eut(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Aut(t,e){var n=t.x,r=t.y,o=Nut(t,Cut),s="".concat(n),i=parseInt(s,10),a="".concat(r),l=parseInt(a,10),u="".concat(e.height||o.height),c=parseInt(u,10),d="".concat(e.width||o.width),f=parseInt(d,10);return Ph(Ph(Ph(Ph(Ph({},e),o),i?{x:i}:{}),l?{y:l}:{}),{},{height:c,width:f,name:e.name,radius:e.radius})}function _W(t){return K.createElement(lN,cN({shapeType:"rectangle",propTransformer:Aut,activeClassName:"recharts-active-bar"},t))}var Out=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,o){if(typeof e=="number")return e;var s=typeof r=="number";return s?e(r,o):(s||Hc(),n)}},Put=["value","background"],See;function up(t){"@babel/helpers - typeof";return up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},up(t)}function Rut(t,e){if(t==null)return{};var n=Dut(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Dut(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Y1(){return Y1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Y1.apply(this,arguments)}function IW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Fn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IW(Object(n),!0).forEach(function(r){Dl(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fut(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function NW(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$ee(r.key),r)}}function Mut(t,e,n){return e&&NW(t.prototype,e),n&&NW(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Lut(t,e,n){return e=Z1(e),zut(t,kee()?Reflect.construct(e,n||[],Z1(t).constructor):e.apply(t,n))}function zut(t,e){if(e&&(up(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return But(t)}function But(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kee=function(){return!!t})()}function Z1(t){return Z1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Z1(t)}function jut(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dN(t,e)}function dN(t,e){return dN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},dN(t,e)}function Dl(t,e,n){return e=$ee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $ee(t){var e=Vut(t,"string");return up(e)=="symbol"?e:e+""}function Vut(t,e){if(up(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(up(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var X0=function(t){function e(){var n;Fut(this,e);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return n=Lut(this,e,[].concat(o)),Dl(n,"state",{isAnimationFinished:!1}),Dl(n,"id",V0("recharts-bar-")),Dl(n,"handleAnimationEnd",function(){var i=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),i&&i()}),Dl(n,"handleAnimationStart",function(){var i=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),i&&i()}),n}return jut(e,t),Mut(e,[{key:"renderRectanglesStatically",value:function(r){var o=this,s=this.props,i=s.shape,a=s.dataKey,l=s.activeIndex,u=s.activeBar,c=yt(this.props,!1);return r&&r.map(function(d,f){var p=f===l,h=p?u:i,m=Fn(Fn(Fn({},c),d),{},{isActive:p,option:h,index:f,dataKey:a,onAnimationStart:o.handleAnimationStart,onAnimationEnd:o.handleAnimationEnd});return K.createElement(xn,Y1({className:"recharts-bar-rectangle"},mg(o.props,d,f),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value)}),K.createElement(_W,m))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,o=this.props,s=o.data,i=o.layout,a=o.isAnimationActive,l=o.animationBegin,u=o.animationDuration,c=o.animationEasing,d=o.animationId,f=this.state.prevData;return K.createElement(il,{begin:l,duration:u,isActive:a,easing:c,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var h=p.t,m=s.map(function(g,y){var v=f&&f[y];if(v){var b=Vi(v.x,g.x),x=Vi(v.y,g.y),w=Vi(v.width,g.width),S=Vi(v.height,g.height);return Fn(Fn({},g),{},{x:b(h),y:x(h),width:w(h),height:S(h)})}if(i==="horizontal"){var k=Vi(0,g.height),$=k(h);return Fn(Fn({},g),{},{y:g.y+g.height-$,height:$})}var C=Vi(0,g.width),I=C(h);return Fn(Fn({},g),{},{width:I})});return K.createElement(xn,null,r.renderRectanglesStatically(m))})}},{key:"renderRectangles",value:function(){var r=this.props,o=r.data,s=r.isAnimationActive,i=this.state.prevData;return s&&o&&o.length&&(!i||!O$(i,o))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(o)}},{key:"renderBackground",value:function(){var r=this,o=this.props,s=o.data,i=o.dataKey,a=o.activeIndex,l=yt(this.props.background,!1);return s.map(function(u,c){u.value;var d=u.background,f=Rut(u,Put);if(!d)return null;var p=Fn(Fn(Fn(Fn(Fn({},f),{},{fill:"#eee"},d),l),mg(r.props,u,c)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:i,index:c,className:"recharts-bar-background-rectangle"});return K.createElement(_W,Y1({key:"background-bar-".concat(c),option:r.props.background,isActive:c===a},p))})}},{key:"renderErrorBar",value:function(r,o){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,i=s.data,a=s.xAxis,l=s.yAxis,u=s.layout,c=s.children,d=rs(c,K0);if(!d)return null;var f=u==="vertical"?i[0].height/2:i[0].width/2,p=function(g,y){var v=Array.isArray(g.value)?g.value[1]:g.value;return{x:g.x,y:g.y,value:v,errorVal:co(g,y)}},h={clipPath:r?"url(#clipPath-".concat(o,")"):null};return K.createElement(xn,h,d.map(function(m){return K.cloneElement(m,{key:"error-bar-".concat(o,"-").concat(m.props.dataKey),data:i,xAxis:a,yAxis:l,layout:u,offset:f,dataPointFormatter:p})}))}},{key:"render",value:function(){var r=this.props,o=r.hide,s=r.data,i=r.className,a=r.xAxis,l=r.yAxis,u=r.left,c=r.top,d=r.width,f=r.height,p=r.isAnimationActive,h=r.background,m=r.id;if(o||!s||!s.length)return null;var g=this.state.isAnimationFinished,y=_t("recharts-bar",i),v=a&&a.allowDataOverflow,b=l&&l.allowDataOverflow,x=v||b,w=lt(m)?this.id:m;return K.createElement(xn,{className:y},v||b?K.createElement("defs",null,K.createElement("clipPath",{id:"clipPath-".concat(w)},K.createElement("rect",{x:v?u:u-d/2,y:b?c:c-f/2,width:v?d:d*2,height:b?f:f*2}))):null,K.createElement(xn,{className:"recharts-bar-rectangles",clipPath:x?"url(#clipPath-".concat(w,")"):null},h?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(x,w),(!p||g)&&Yl.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,o){return r.animationId!==o.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:o.curData}:r.data!==o.curData?{curData:r.data}:null}}])}(N.PureComponent);See=X0;Dl(X0,"displayName","Bar");Dl(X0,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Jp.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Dl(X0,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,o=t.bandSize,s=t.xAxis,i=t.yAxis,a=t.xAxisTicks,l=t.yAxisTicks,u=t.stackedData,c=t.dataStartIndex,d=t.displayedData,f=t.offset,p=Rot(r,n);if(!p)return null;var h=e.layout,m=n.type.defaultProps,g=m!==void 0?Fn(Fn({},m),n.props):n.props,y=g.dataKey,v=g.children,b=g.minPointSize,x=h==="horizontal"?i:s,w=u?x.scale.domain():null,S=Vot({numericAxis:x}),k=rs(v,iF),$=d.map(function(C,I){var E,O,R,z,L,B;u?E=Dot(u[c+I],w):(E=co(C,y),Array.isArray(E)||(E=[S,E]));var D=Out(b,See.defaultProps.minPointSize)(E[1],I);if(h==="horizontal"){var F,j=[i.scale(E[0]),i.scale(E[1])],G=j[0],Y=j[1];O=IV({axis:s,ticks:a,bandSize:o,offset:p.offset,entry:C,index:I}),R=(F=Y??G)!==null&&F!==void 0?F:void 0,z=p.size;var X=G-Y;if(L=Number.isNaN(X)?0:X,B={x:O,y:i.y,width:z,height:i.height},Math.abs(D)>0&&Math.abs(L)<Math.abs(D)){var ee=hi(L||D)*(Math.abs(D)-Math.abs(L));R-=ee,L+=ee}}else{var ie=[s.scale(E[0]),s.scale(E[1])],se=ie[0],de=ie[1];if(O=se,R=IV({axis:i,ticks:l,bandSize:o,offset:p.offset,entry:C,index:I}),z=de-se,L=p.size,B={x:s.x,y:R,width:s.width,height:L},Math.abs(D)>0&&Math.abs(z)<Math.abs(D)){var me=hi(z||D)*(Math.abs(D)-Math.abs(z));z+=me}}return Fn(Fn(Fn({},C),{},{x:O,y:R,width:z,height:L,value:u?E:E[1],payload:C,background:B},k&&k[I]&&k[I].props),{},{tooltipPayload:[ree(n,C)],tooltipPosition:{x:O+z/2,y:R+L/2}})});return Fn({data:$,layout:h},f)});function qg(t){"@babel/helpers - typeof";return qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qg(t)}function Wut(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function EW(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Cee(r.key),r)}}function Uut(t,e,n){return e&&EW(t.prototype,e),n&&EW(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function AW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function ai(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AW(Object(n),!0).forEach(function(r){M$(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function M$(t,e,n){return e=Cee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cee(t){var e=Gut(t,"string");return qg(e)=="symbol"?e:e+""}function Gut(t,e){if(qg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(qg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Hut=function(e,n,r,o,s){var i=e.width,a=e.height,l=e.layout,u=e.children,c=Object.keys(n),d={left:r.left,leftMirror:r.left,right:i-r.right,rightMirror:i-r.right,top:r.top,topMirror:r.top,bottom:a-r.bottom,bottomMirror:a-r.bottom},f=!!Yo(u,X0);return c.reduce(function(p,h){var m=n[h],g=m.orientation,y=m.domain,v=m.padding,b=v===void 0?{}:v,x=m.mirror,w=m.reversed,S="".concat(g).concat(x?"Mirror":""),k,$,C,I,E;if(m.type==="number"&&(m.padding==="gap"||m.padding==="no-gap")){var O=y[1]-y[0],R=1/0,z=m.categoricalDomain.sort();if(z.forEach(function(ie,se){se>0&&(R=Math.min((ie||0)-(z[se-1]||0),R))}),Number.isFinite(R)){var L=R/O,B=m.layout==="vertical"?r.height:r.width;if(m.padding==="gap"&&(k=L*B/2),m.padding==="no-gap"){var D=Uc(e.barCategoryGap,L*B),F=L*B/2;k=F-D-(F-D)/B*D}}}o==="xAxis"?$=[r.left+(b.left||0)+(k||0),r.left+r.width-(b.right||0)-(k||0)]:o==="yAxis"?$=l==="horizontal"?[r.top+r.height-(b.bottom||0),r.top+(b.top||0)]:[r.top+(b.top||0)+(k||0),r.top+r.height-(b.bottom||0)-(k||0)]:$=m.range,w&&($=[$[1],$[0]]);var j=Oot(m,s,f),G=j.scale,Y=j.realScaleType;G.domain(y).range($),Pot(G);var X=jot(G,ai(ai({},m),{},{realScaleType:Y}));o==="xAxis"?(E=g==="top"&&!x||g==="bottom"&&x,C=r.left,I=d[S]-E*m.height):o==="yAxis"&&(E=g==="left"&&!x||g==="right"&&x,C=d[S]-E*m.width,I=r.top);var ee=ai(ai(ai({},m),X),{},{realScaleType:Y,x:C,y:I,scale:G,width:o==="xAxis"?r.width:m.width,height:o==="yAxis"?r.height:m.height});return ee.bandSize=L1(ee,X),!m.hide&&o==="xAxis"?d[S]+=(E?-1:1)*ee.height:m.hide||(d[S]+=(E?-1:1)*ee.width),ai(ai({},p),{},M$({},h,ee))},{})},Tee=function(e,n){var r=e.x,o=e.y,s=n.x,i=n.y;return{x:Math.min(r,s),y:Math.min(o,i),width:Math.abs(s-r),height:Math.abs(i-o)}},qut=function(e){var n=e.x1,r=e.y1,o=e.x2,s=e.y2;return Tee({x:n,y:r},{x:o,y:s})},_ee=function(){function t(e){Wut(this,t),this.scale=e}return Uut(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=r.bandAware,s=r.position;if(n!==void 0){if(s)switch(s){case"start":return this.scale(n);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(n)+a}default:return this.scale(n)}if(o){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),o=r[0],s=r[r.length-1];return o<=s?n>=o&&n<=s:n>=s&&n<=o}}],[{key:"create",value:function(n){return new t(n)}}])}();M$(_ee,"EPS",1e-4);var PF=function(e){var n=Object.keys(e).reduce(function(r,o){return ai(ai({},r),{},M$({},o,_ee.create(e[o])))},{});return ai(ai({},n),{},{apply:function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=s.bandAware,a=s.position;return fut(o,function(l,u){return n[u].apply(l,{bandAware:i,position:a})})},isInRange:function(o){return wee(o,function(s,i){return n[i].isInRange(s)})}})};function Kut(t){return(t%180+180)%180}var Xut=function(e){var n=e.width,r=e.height,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=Kut(o),i=s*Math.PI/180,a=Math.atan(r/n),l=i>a&&i<Math.PI-a?r/Math.sin(i):n/Math.cos(i);return Math.abs(l)},Yut=Pu,Zut=W0,Qut=w$;function Jut(t){return function(e,n,r){var o=Object(e);if(!Zut(e)){var s=Yut(n);e=Qut(e),n=function(a){return s(o[a],a,o)}}var i=t(e,n,r);return i>-1?o[s?e[i]:i]:void 0}}var ect=Jut,tct=yee;function nct(t){var e=tct(t),n=e%1;return e===e?n?e-n:e:0}var rct=nct,oct=MQ,sct=Pu,ict=rct,act=Math.max;function lct(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var o=n==null?0:ict(n);return o<0&&(o=act(r+o,0)),oct(t,sct(e),o)}var uct=lct,cct=ect,dct=uct,fct=cct(dct),pct=fct;const hct=Dt(pct);var mct=hGe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),RF=N.createContext(void 0),DF=N.createContext(void 0),Iee=N.createContext(void 0),Nee=N.createContext({}),Eee=N.createContext(void 0),Aee=N.createContext(0),Oee=N.createContext(0),OW=function(e){var n=e.state,r=n.xAxisMap,o=n.yAxisMap,s=n.offset,i=e.clipPathId,a=e.children,l=e.width,u=e.height,c=mct(s);return K.createElement(RF.Provider,{value:r},K.createElement(DF.Provider,{value:o},K.createElement(Nee.Provider,{value:s},K.createElement(Iee.Provider,{value:c},K.createElement(Eee.Provider,{value:i},K.createElement(Aee.Provider,{value:u},K.createElement(Oee.Provider,{value:l},a)))))))},gct=function(){return N.useContext(Eee)},Pee=function(e){var n=N.useContext(RF);n==null&&Hc();var r=n[e];return r==null&&Hc(),r},yct=function(){var e=N.useContext(RF);return Nl(e)},vct=function(){var e=N.useContext(DF),n=hct(e,function(r){return wee(r.domain,Number.isFinite)});return n||Nl(e)},Ree=function(e){var n=N.useContext(DF);n==null&&Hc();var r=n[e];return r==null&&Hc(),r},bct=function(){var e=N.useContext(Iee);return e},xct=function(){return N.useContext(Nee)},FF=function(){return N.useContext(Oee)},MF=function(){return N.useContext(Aee)};function cp(t){"@babel/helpers - typeof";return cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cp(t)}function wct(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sct(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Fee(r.key),r)}}function kct(t,e,n){return e&&Sct(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $ct(t,e,n){return e=Q1(e),Cct(t,Dee()?Reflect.construct(e,n||[],Q1(t).constructor):e.apply(t,n))}function Cct(t,e){if(e&&(cp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tct(t)}function Tct(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Dee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Dee=function(){return!!t})()}function Q1(t){return Q1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Q1(t)}function _ct(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fN(t,e)}function fN(t,e){return fN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},fN(t,e)}function PW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function RW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PW(Object(n),!0).forEach(function(r){LF(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LF(t,e,n){return e=Fee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fee(t){var e=Ict(t,"string");return cp(e)=="symbol"?e:e+""}function Ict(t,e){if(cp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(cp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Nct(t,e){return Pct(t)||Oct(t,e)||Act(t,e)||Ect()}function Ect(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Act(t,e){if(t){if(typeof t=="string")return DW(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DW(t,e)}}function DW(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Oct(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,s,i,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,o=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return a}}function Pct(t){if(Array.isArray(t))return t}function pN(){return pN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pN.apply(this,arguments)}var Rct=function(e,n){var r;return K.isValidElement(e)?r=K.cloneElement(e,n):ut(e)?r=e(n):r=K.createElement("line",pN({},n,{className:"recharts-reference-line-line"})),r},Dct=function(e,n,r,o,s,i,a,l,u){var c=s.x,d=s.y,f=s.width,p=s.height;if(r){var h=u.y,m=e.y.apply(h,{position:i});if(ua(u,"discard")&&!e.y.isInRange(m))return null;var g=[{x:c+f,y:m},{x:c,y:m}];return l==="left"?g.reverse():g}if(n){var y=u.x,v=e.x.apply(y,{position:i});if(ua(u,"discard")&&!e.x.isInRange(v))return null;var b=[{x:v,y:d+p},{x:v,y:d}];return a==="top"?b.reverse():b}if(o){var x=u.segment,w=x.map(function(S){return e.apply(S,{position:i})});return ua(u,"discard")&&out(w,function(S){return!e.isInRange(S)})?null:w}return null};function Fct(t){var e=t.x,n=t.y,r=t.segment,o=t.xAxisId,s=t.yAxisId,i=t.shape,a=t.className,l=t.alwaysShow,u=gct(),c=Pee(o),d=Ree(s),f=bct();if(!u||!f)return null;Ua(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=PF({x:c.scale,y:d.scale}),h=sr(e),m=sr(n),g=r&&r.length===2,y=Dct(p,h,m,g,f,t.position,c.orientation,d.orientation,t);if(!y)return null;var v=Nct(y,2),b=v[0],x=b.x,w=b.y,S=v[1],k=S.x,$=S.y,C=ua(t,"hidden")?"url(#".concat(u,")"):void 0,I=RW(RW({clipPath:C},yt(t,!0)),{},{x1:x,y1:w,x2:k,y2:$});return K.createElement(xn,{className:_t("recharts-reference-line",a)},Rct(i,I),qr.renderCallByParent(t,qut({x1:x,y1:w,x2:k,y2:$})))}var zF=function(t){function e(){return wct(this,e),$ct(this,e,arguments)}return _ct(e,t),kct(e,[{key:"render",value:function(){return K.createElement(Fct,this.props)}}])}(K.Component);LF(zF,"displayName","ReferenceLine");LF(zF,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function hN(){return hN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hN.apply(this,arguments)}function dp(t){"@babel/helpers - typeof";return dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dp(t)}function FW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function MW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FW(Object(n),!0).forEach(function(r){L$(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mct(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Lct(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Lee(r.key),r)}}function zct(t,e,n){return e&&Lct(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Bct(t,e,n){return e=J1(e),jct(t,Mee()?Reflect.construct(e,n||[],J1(t).constructor):e.apply(t,n))}function jct(t,e){if(e&&(dp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vct(t)}function Vct(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Mee=function(){return!!t})()}function J1(t){return J1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},J1(t)}function Wct(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mN(t,e)}function mN(t,e){return mN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},mN(t,e)}function L$(t,e,n){return e=Lee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lee(t){var e=Uct(t,"string");return dp(e)=="symbol"?e:e+""}function Uct(t,e){if(dp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(dp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Gct=function(e){var n=e.x,r=e.y,o=e.xAxis,s=e.yAxis,i=PF({x:o.scale,y:s.scale}),a=i.apply({x:n,y:r},{bandAware:!0});return ua(e,"discard")&&!i.isInRange(a)?null:a},z$=function(t){function e(){return Mct(this,e),Bct(this,e,arguments)}return Wct(e,t),zct(e,[{key:"render",value:function(){var r=this.props,o=r.x,s=r.y,i=r.r,a=r.alwaysShow,l=r.clipPathId,u=sr(o),c=sr(s);if(Ua(a===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!c)return null;var d=Gct(this.props);if(!d)return null;var f=d.x,p=d.y,h=this.props,m=h.shape,g=h.className,y=ua(this.props,"hidden")?"url(#".concat(l,")"):void 0,v=MW(MW({clipPath:y},yt(this.props,!0)),{},{cx:f,cy:p});return K.createElement(xn,{className:_t("recharts-reference-dot",g)},e.renderDot(m,v),qr.renderCallByParent(this.props,{x:f-i,y:p-i,width:2*i,height:2*i}))}}])}(K.Component);L$(z$,"displayName","ReferenceDot");L$(z$,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});L$(z$,"renderDot",function(t,e){var n;return K.isValidElement(t)?n=K.cloneElement(t,e):ut(t)?n=t(e):n=K.createElement(mee,hN({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function gN(){return gN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gN.apply(this,arguments)}function fp(t){"@babel/helpers - typeof";return fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fp(t)}function LW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function zW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LW(Object(n),!0).forEach(function(r){B$(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hct(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qct(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Bee(r.key),r)}}function Kct(t,e,n){return e&&qct(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Xct(t,e,n){return e=ew(e),Yct(t,zee()?Reflect.construct(e,n||[],ew(t).constructor):e.apply(t,n))}function Yct(t,e){if(e&&(fp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zct(t)}function Zct(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zee=function(){return!!t})()}function ew(t){return ew=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ew(t)}function Qct(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yN(t,e)}function yN(t,e){return yN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},yN(t,e)}function B$(t,e,n){return e=Bee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bee(t){var e=Jct(t,"string");return fp(e)=="symbol"?e:e+""}function Jct(t,e){if(fp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(fp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var edt=function(e,n,r,o,s){var i=s.x1,a=s.x2,l=s.y1,u=s.y2,c=s.xAxis,d=s.yAxis;if(!c||!d)return null;var f=PF({x:c.scale,y:d.scale}),p={x:e?f.x.apply(i,{position:"start"}):f.x.rangeMin,y:r?f.y.apply(l,{position:"start"}):f.y.rangeMin},h={x:n?f.x.apply(a,{position:"end"}):f.x.rangeMax,y:o?f.y.apply(u,{position:"end"}):f.y.rangeMax};return ua(s,"discard")&&(!f.isInRange(p)||!f.isInRange(h))?null:Tee(p,h)},j$=function(t){function e(){return Hct(this,e),Xct(this,e,arguments)}return Qct(e,t),Kct(e,[{key:"render",value:function(){var r=this.props,o=r.x1,s=r.x2,i=r.y1,a=r.y2,l=r.className,u=r.alwaysShow,c=r.clipPathId;Ua(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=sr(o),f=sr(s),p=sr(i),h=sr(a),m=this.props.shape;if(!d&&!f&&!p&&!h&&!m)return null;var g=edt(d,f,p,h,this.props);if(!g&&!m)return null;var y=ua(this.props,"hidden")?"url(#".concat(c,")"):void 0;return K.createElement(xn,{className:_t("recharts-reference-area",l)},e.renderRect(m,zW(zW({clipPath:y},yt(this.props,!0)),g)),qr.renderCallByParent(this.props,g))}}])}(K.Component);B$(j$,"displayName","ReferenceArea");B$(j$,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});B$(j$,"renderRect",function(t,e){var n;return K.isValidElement(t)?n=K.cloneElement(t,e):ut(t)?n=t(e):n=K.createElement(OF,gN({},e,{className:"recharts-reference-area-rect"})),n});function jee(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],o=0;o<t.length;o+=e)r.push(t[o]);return r}function tdt(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Xut(r,n)}function ndt(t,e,n){var r=n==="width",o=t.x,s=t.y,i=t.width,a=t.height;return e===1?{start:r?o:s,end:r?o+i:s+a}:{start:r?o+i:s+a,end:r?o:s}}function tw(t,e,n,r,o){if(t*e<t*r||t*e>t*o)return!1;var s=n();return t*(e-t*s/2-r)>=0&&t*(e+t*s/2-o)<=0}function rdt(t,e){return jee(t,e+1)}function odt(t,e,n,r,o){for(var s=(r||[]).slice(),i=e.start,a=e.end,l=0,u=1,c=i,d=function(){var h=r==null?void 0:r[l];if(h===void 0)return{v:jee(r,u)};var m=l,g,y=function(){return g===void 0&&(g=n(h,m)),g},v=h.coordinate,b=l===0||tw(t,v,y,c,a);b||(l=0,c=i,u+=1),b&&(c=v+t*(y()/2+o),l+=u)},f;u<=s.length;)if(f=d(),f)return f.v;return[]}function Kg(t){"@babel/helpers - typeof";return Kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kg(t)}function BW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function jr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BW(Object(n),!0).forEach(function(r){sdt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sdt(t,e,n){return e=idt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function idt(t){var e=adt(t,"string");return Kg(e)=="symbol"?e:e+""}function adt(t,e){if(Kg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Kg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ldt(t,e,n,r,o){for(var s=(r||[]).slice(),i=s.length,a=e.start,l=e.end,u=function(f){var p=s[f],h,m=function(){return h===void 0&&(h=n(p,f)),h};if(f===i-1){var g=t*(p.coordinate+t*m()/2-l);s[f]=p=jr(jr({},p),{},{tickCoord:g>0?p.coordinate-g*t:p.coordinate})}else s[f]=p=jr(jr({},p),{},{tickCoord:p.coordinate});var y=tw(t,p.tickCoord,m,a,l);y&&(l=p.tickCoord-t*(m()/2+o),s[f]=jr(jr({},p),{},{isShow:!0}))},c=i-1;c>=0;c--)u(c);return s}function udt(t,e,n,r,o,s){var i=(r||[]).slice(),a=i.length,l=e.start,u=e.end;if(s){var c=r[a-1],d=n(c,a-1),f=t*(c.coordinate+t*d/2-u);i[a-1]=c=jr(jr({},c),{},{tickCoord:f>0?c.coordinate-f*t:c.coordinate});var p=tw(t,c.tickCoord,function(){return d},l,u);p&&(u=c.tickCoord-t*(d/2+o),i[a-1]=jr(jr({},c),{},{isShow:!0}))}for(var h=s?a-1:a,m=function(v){var b=i[v],x,w=function(){return x===void 0&&(x=n(b,v)),x};if(v===0){var S=t*(b.coordinate-t*w()/2-l);i[v]=b=jr(jr({},b),{},{tickCoord:S<0?b.coordinate-S*t:b.coordinate})}else i[v]=b=jr(jr({},b),{},{tickCoord:b.coordinate});var k=tw(t,b.tickCoord,w,l,u);k&&(l=b.tickCoord+t*(w()/2+o),i[v]=jr(jr({},b),{},{isShow:!0}))},g=0;g<h;g++)m(g);return i}function BF(t,e,n){var r=t.tick,o=t.ticks,s=t.viewBox,i=t.minTickGap,a=t.orientation,l=t.interval,u=t.tickFormatter,c=t.unit,d=t.angle;if(!o||!o.length||!r)return[];if(we(l)||Jp.isSsr)return rdt(o,typeof l=="number"&&we(l)?l:0);var f=[],p=a==="top"||a==="bottom"?"width":"height",h=c&&p==="width"?ym(c,{fontSize:e,letterSpacing:n}):{width:0,height:0},m=function(b,x){var w=ut(u)?u(b.value,x):b.value;return p==="width"?tdt(ym(w,{fontSize:e,letterSpacing:n}),h,d):ym(w,{fontSize:e,letterSpacing:n})[p]},g=o.length>=2?hi(o[1].coordinate-o[0].coordinate):1,y=ndt(s,g,p);return l==="equidistantPreserveStart"?odt(g,y,m,o,i):(l==="preserveStart"||l==="preserveStartEnd"?f=udt(g,y,m,o,i,l==="preserveStartEnd"):f=ldt(g,y,m,o,i),f.filter(function(v){return v.isShow}))}var cdt=["viewBox"],ddt=["viewBox"],fdt=["ticks"];function pp(t){"@babel/helpers - typeof";return pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pp(t)}function Yd(){return Yd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yd.apply(this,arguments)}function jW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function no(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jW(Object(n),!0).forEach(function(r){jF(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function MT(t,e){if(t==null)return{};var n=pdt(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function pdt(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function hdt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function VW(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Wee(r.key),r)}}function mdt(t,e,n){return e&&VW(t.prototype,e),n&&VW(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function gdt(t,e,n){return e=nw(e),ydt(t,Vee()?Reflect.construct(e,n||[],nw(t).constructor):e.apply(t,n))}function ydt(t,e){if(e&&(pp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vdt(t)}function vdt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Vee=function(){return!!t})()}function nw(t){return nw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},nw(t)}function bdt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vN(t,e)}function vN(t,e){return vN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},vN(t,e)}function jF(t,e,n){return e=Wee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wee(t){var e=xdt(t,"string");return pp(e)=="symbol"?e:e+""}function xdt(t,e){if(pp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(pp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var oh=function(t){function e(n){var r;return hdt(this,e),r=gdt(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return bdt(e,t),mdt(e,[{key:"shouldComponentUpdate",value:function(r,o){var s=r.viewBox,i=MT(r,cdt),a=this.props,l=a.viewBox,u=MT(a,ddt);return!gf(s,l)||!gf(i,u)||!gf(o,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var o=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];o&&this.setState({fontSize:window.getComputedStyle(o).fontSize,letterSpacing:window.getComputedStyle(o).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var o=this.props,s=o.x,i=o.y,a=o.width,l=o.height,u=o.orientation,c=o.tickSize,d=o.mirror,f=o.tickMargin,p,h,m,g,y,v,b=d?-1:1,x=r.tickSize||c,w=we(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":p=h=r.coordinate,g=i+ +!d*l,m=g-b*x,v=m-b*f,y=w;break;case"left":m=g=r.coordinate,h=s+ +!d*a,p=h-b*x,y=p-b*f,v=w;break;case"right":m=g=r.coordinate,h=s+ +d*a,p=h+b*x,y=p+b*f,v=w;break;default:p=h=r.coordinate,g=i+ +d*l,m=g+b*x,v=m+b*f,y=w;break}return{line:{x1:p,y1:m,x2:h,y2:g},tick:{x:y,y:v}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,o=r.orientation,s=r.mirror,i;switch(o){case"left":i=s?"start":"end";break;case"right":i=s?"end":"start";break;default:i="middle";break}return i}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,o=r.orientation,s=r.mirror,i="end";switch(o){case"left":case"right":i="middle";break;case"top":i=s?"start":"end";break;default:i=s?"end":"start";break}return i}},{key:"renderAxisLine",value:function(){var r=this.props,o=r.x,s=r.y,i=r.width,a=r.height,l=r.orientation,u=r.mirror,c=r.axisLine,d=no(no(no({},yt(this.props,!1)),yt(c,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var f=+(l==="top"&&!u||l==="bottom"&&u);d=no(no({},d),{},{x1:o,y1:s+f*a,x2:o+i,y2:s+f*a})}else{var p=+(l==="left"&&!u||l==="right"&&u);d=no(no({},d),{},{x1:o+p*i,y1:s,x2:o+p*i,y2:s+a})}return K.createElement("line",Yd({},d,{className:_t("recharts-cartesian-axis-line",js(c,"className"))}))}},{key:"renderTicks",value:function(r,o,s){var i=this,a=this.props,l=a.tickLine,u=a.stroke,c=a.tick,d=a.tickFormatter,f=a.unit,p=BF(no(no({},this.props),{},{ticks:r}),o,s),h=this.getTickTextAnchor(),m=this.getTickVerticalAnchor(),g=yt(this.props,!1),y=yt(c,!1),v=no(no({},g),{},{fill:"none"},yt(l,!1)),b=p.map(function(x,w){var S=i.getTickLineCoord(x),k=S.line,$=S.tick,C=no(no(no(no({textAnchor:h,verticalAnchor:m},g),{},{stroke:"none",fill:u},y),$),{},{index:w,payload:x,visibleTicksCount:p.length,tickFormatter:d});return K.createElement(xn,Yd({className:"recharts-cartesian-axis-tick",key:"tick-".concat(x.value,"-").concat(x.coordinate,"-").concat(x.tickCoord)},mg(i.props,x,w)),l&&K.createElement("line",Yd({},v,k,{className:_t("recharts-cartesian-axis-tick-line",js(l,"className"))})),c&&e.renderTickItem(c,C,"".concat(ut(d)?d(x.value,w):x.value).concat(f||"")))});return K.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var r=this,o=this.props,s=o.axisLine,i=o.width,a=o.height,l=o.ticksGenerator,u=o.className,c=o.hide;if(c)return null;var d=this.props,f=d.ticks,p=MT(d,fdt),h=f;return ut(l)&&(h=f&&f.length>0?l(this.props):l(p)),i<=0||a<=0||!h||!h.length?null:K.createElement(xn,{className:_t("recharts-cartesian-axis",u),ref:function(g){r.layerReference=g}},s&&this.renderAxisLine(),this.renderTicks(h,this.state.fontSize,this.state.letterSpacing),qr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,o,s){var i;return K.isValidElement(r)?i=K.cloneElement(r,o):ut(r)?i=r(o):i=K.createElement($1,Yd({},o,{className:"recharts-cartesian-axis-tick-value"}),s),i}}])}(N.Component);jF(oh,"displayName","CartesianAxis");jF(oh,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var wdt=["x1","y1","x2","y2","key"],Sdt=["offset"];function qc(t){"@babel/helpers - typeof";return qc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qc(t)}function WW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Kr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WW(Object(n),!0).forEach(function(r){kdt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kdt(t,e,n){return e=$dt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $dt(t){var e=Cdt(t,"string");return qc(e)=="symbol"?e:e+""}function Cdt(t,e){if(qc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(qc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fc(){return fc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fc.apply(this,arguments)}function UW(t,e){if(t==null)return{};var n=Tdt(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Tdt(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var _dt=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,o=e.x,s=e.y,i=e.width,a=e.height,l=e.ry;return K.createElement("rect",{x:o,y:s,ry:l,width:i,height:a,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Uee(t,e){var n;if(K.isValidElement(t))n=K.cloneElement(t,e);else if(ut(t))n=t(e);else{var r=e.x1,o=e.y1,s=e.x2,i=e.y2,a=e.key,l=UW(e,wdt),u=yt(l,!1);u.offset;var c=UW(u,Sdt);n=K.createElement("line",fc({},c,{x1:r,y1:o,x2:s,y2:i,fill:"none",key:a}))}return n}function Idt(t){var e=t.x,n=t.width,r=t.horizontal,o=r===void 0?!0:r,s=t.horizontalPoints;if(!o||!s||!s.length)return null;var i=s.map(function(a,l){var u=Kr(Kr({},t),{},{x1:e,y1:a,x2:e+n,y2:a,key:"line-".concat(l),index:l});return Uee(o,u)});return K.createElement("g",{className:"recharts-cartesian-grid-horizontal"},i)}function Ndt(t){var e=t.y,n=t.height,r=t.vertical,o=r===void 0?!0:r,s=t.verticalPoints;if(!o||!s||!s.length)return null;var i=s.map(function(a,l){var u=Kr(Kr({},t),{},{x1:a,y1:e,x2:a,y2:e+n,key:"line-".concat(l),index:l});return Uee(o,u)});return K.createElement("g",{className:"recharts-cartesian-grid-vertical"},i)}function Edt(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,o=t.y,s=t.width,i=t.height,a=t.horizontalPoints,l=t.horizontal,u=l===void 0?!0:l;if(!u||!e||!e.length)return null;var c=a.map(function(f){return Math.round(f+o-o)}).sort(function(f,p){return f-p});o!==c[0]&&c.unshift(0);var d=c.map(function(f,p){var h=!c[p+1],m=h?o+i-f:c[p+1]-f;if(m<=0)return null;var g=p%e.length;return K.createElement("rect",{key:"react-".concat(p),y:f,x:r,height:m,width:s,stroke:"none",fill:e[g],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return K.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function Adt(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,o=t.fillOpacity,s=t.x,i=t.y,a=t.width,l=t.height,u=t.verticalPoints;if(!n||!r||!r.length)return null;var c=u.map(function(f){return Math.round(f+s-s)}).sort(function(f,p){return f-p});s!==c[0]&&c.unshift(0);var d=c.map(function(f,p){var h=!c[p+1],m=h?s+a-f:c[p+1]-f;if(m<=0)return null;var g=p%r.length;return K.createElement("rect",{key:"react-".concat(p),x:f,y:i,width:m,height:l,stroke:"none",fill:r[g],fillOpacity:o,className:"recharts-cartesian-grid-bg"})});return K.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var Odt=function(e,n){var r=e.xAxis,o=e.width,s=e.height,i=e.offset;return tee(BF(Kr(Kr(Kr({},oh.defaultProps),r),{},{ticks:Ra(r,!0),viewBox:{x:0,y:0,width:o,height:s}})),i.left,i.left+i.width,n)},Pdt=function(e,n){var r=e.yAxis,o=e.width,s=e.height,i=e.offset;return tee(BF(Kr(Kr(Kr({},oh.defaultProps),r),{},{ticks:Ra(r,!0),viewBox:{x:0,y:0,width:o,height:s}})),i.top,i.top+i.height,n)},kd={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Gee(t){var e,n,r,o,s,i,a=FF(),l=MF(),u=xct(),c=Kr(Kr({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:kd.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:kd.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:kd.horizontal,horizontalFill:(o=t.horizontalFill)!==null&&o!==void 0?o:kd.horizontalFill,vertical:(s=t.vertical)!==null&&s!==void 0?s:kd.vertical,verticalFill:(i=t.verticalFill)!==null&&i!==void 0?i:kd.verticalFill,x:we(t.x)?t.x:u.left,y:we(t.y)?t.y:u.top,width:we(t.width)?t.width:u.width,height:we(t.height)?t.height:u.height}),d=c.x,f=c.y,p=c.width,h=c.height,m=c.syncWithTicks,g=c.horizontalValues,y=c.verticalValues,v=yct(),b=vct();if(!we(p)||p<=0||!we(h)||h<=0||!we(d)||d!==+d||!we(f)||f!==+f)return null;var x=c.verticalCoordinatesGenerator||Odt,w=c.horizontalCoordinatesGenerator||Pdt,S=c.horizontalPoints,k=c.verticalPoints;if((!S||!S.length)&&ut(w)){var $=g&&g.length,C=w({yAxis:b?Kr(Kr({},b),{},{ticks:$?g:b.ticks}):void 0,width:a,height:l,offset:u},$?!0:m);Ua(Array.isArray(C),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(qc(C),"]")),Array.isArray(C)&&(S=C)}if((!k||!k.length)&&ut(x)){var I=y&&y.length,E=x({xAxis:v?Kr(Kr({},v),{},{ticks:I?y:v.ticks}):void 0,width:a,height:l,offset:u},I?!0:m);Ua(Array.isArray(E),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(qc(E),"]")),Array.isArray(E)&&(k=E)}return K.createElement("g",{className:"recharts-cartesian-grid"},K.createElement(_dt,{fill:c.fill,fillOpacity:c.fillOpacity,x:c.x,y:c.y,width:c.width,height:c.height,ry:c.ry}),K.createElement(Idt,fc({},c,{offset:u,horizontalPoints:S,xAxis:v,yAxis:b})),K.createElement(Ndt,fc({},c,{offset:u,verticalPoints:k,xAxis:v,yAxis:b})),K.createElement(Edt,fc({},c,{horizontalPoints:S})),K.createElement(Adt,fc({},c,{verticalPoints:k})))}Gee.displayName="CartesianGrid";function hp(t){"@babel/helpers - typeof";return hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hp(t)}function Rdt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ddt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Kee(r.key),r)}}function Fdt(t,e,n){return e&&Ddt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mdt(t,e,n){return e=rw(e),Ldt(t,Hee()?Reflect.construct(e,n||[],rw(t).constructor):e.apply(t,n))}function Ldt(t,e){if(e&&(hp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zdt(t)}function zdt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Hee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Hee=function(){return!!t})()}function rw(t){return rw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},rw(t)}function Bdt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bN(t,e)}function bN(t,e){return bN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},bN(t,e)}function qee(t,e,n){return e=Kee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kee(t){var e=jdt(t,"string");return hp(e)=="symbol"?e:e+""}function jdt(t,e){if(hp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(hp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var V$=function(t){function e(){return Rdt(this,e),Mdt(this,e,arguments)}return Bdt(e,t),Fdt(e,[{key:"render",value:function(){return null}}])}(K.Component);qee(V$,"displayName","ZAxis");qee(V$,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var Vdt=["option","isActive"];function wm(){return wm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wm.apply(this,arguments)}function Wdt(t,e){if(t==null)return{};var n=Udt(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Udt(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Gdt(t){var e=t.option,n=t.isActive,r=Wdt(t,Vdt);return typeof e=="string"?K.createElement(lN,wm({option:K.createElement(x$,wm({type:e},r)),isActive:n,shapeType:"symbols"},r)):K.createElement(lN,wm({option:e,isActive:n,shapeType:"symbols"},r))}function mp(t){"@babel/helpers - typeof";return mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mp(t)}function Sm(){return Sm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sm.apply(this,arguments)}function GW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function ks(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GW(Object(n),!0).forEach(function(r){Fl(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hdt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function HW(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Yee(r.key),r)}}function qdt(t,e,n){return e&&HW(t.prototype,e),n&&HW(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Kdt(t,e,n){return e=ow(e),Xdt(t,Xee()?Reflect.construct(e,n||[],ow(t).constructor):e.apply(t,n))}function Xdt(t,e){if(e&&(mp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ydt(t)}function Ydt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Xee=function(){return!!t})()}function ow(t){return ow=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ow(t)}function Zdt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xN(t,e)}function xN(t,e){return xN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},xN(t,e)}function Fl(t,e,n){return e=Yee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yee(t){var e=Qdt(t,"string");return mp(e)=="symbol"?e:e+""}function Qdt(t,e){if(mp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(mp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Y0=function(t){function e(){var n;Hdt(this,e);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return n=Kdt(this,e,[].concat(o)),Fl(n,"state",{isAnimationFinished:!1}),Fl(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0})}),Fl(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1})}),Fl(n,"id",V0("recharts-scatter-")),n}return Zdt(e,t),qdt(e,[{key:"renderSymbolsStatically",value:function(r){var o=this,s=this.props,i=s.shape,a=s.activeShape,l=s.activeIndex,u=yt(this.props,!1);return r.map(function(c,d){var f=l===d,p=f?a:i,h=ks(ks({},u),c);return K.createElement(xn,Sm({className:"recharts-scatter-symbol",key:"symbol-".concat(c==null?void 0:c.cx,"-").concat(c==null?void 0:c.cy,"-").concat(c==null?void 0:c.size,"-").concat(d)},mg(o.props,c,d),{role:"img"}),K.createElement(Gdt,Sm({option:p,isActive:f,key:"symbol-".concat(d)},h)))})}},{key:"renderSymbolsWithAnimation",value:function(){var r=this,o=this.props,s=o.points,i=o.isAnimationActive,a=o.animationBegin,l=o.animationDuration,u=o.animationEasing,c=o.animationId,d=this.state.prevPoints;return K.createElement(il,{begin:a,duration:l,isActive:i,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(c),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(f){var p=f.t,h=s.map(function(m,g){var y=d&&d[g];if(y){var v=Vi(y.cx,m.cx),b=Vi(y.cy,m.cy),x=Vi(y.size,m.size);return ks(ks({},m),{},{cx:v(p),cy:b(p),size:x(p)})}var w=Vi(0,m.size);return ks(ks({},m),{},{size:w(p)})});return K.createElement(xn,null,r.renderSymbolsStatically(h))})}},{key:"renderSymbols",value:function(){var r=this.props,o=r.points,s=r.isAnimationActive,i=this.state.prevPoints;return s&&o&&o.length&&(!i||!O$(i,o))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(o)}},{key:"renderErrorBar",value:function(){var r=this.props.isAnimationActive;if(r&&!this.state.isAnimationFinished)return null;var o=this.props,s=o.points,i=o.xAxis,a=o.yAxis,l=o.children,u=rs(l,K0);return u?u.map(function(c,d){var f=c.props,p=f.direction,h=f.dataKey;return K.cloneElement(c,{key:"".concat(p,"-").concat(h,"-").concat(s[d]),data:s,xAxis:i,yAxis:a,layout:p==="x"?"vertical":"horizontal",dataPointFormatter:function(g,y){return{x:g.cx,y:g.cy,value:p==="x"?+g.node.x:+g.node.y,errorVal:co(g,y)}}})}):null}},{key:"renderLine",value:function(){var r=this.props,o=r.points,s=r.line,i=r.lineType,a=r.lineJointType,l=yt(this.props,!1),u=yt(s,!1),c,d;if(i==="joint")c=o.map(function(b){return{x:b.cx,y:b.cy}});else if(i==="fitting"){var f=fHe(o),p=f.xmin,h=f.xmax,m=f.a,g=f.b,y=function(x){return m*x+g};c=[{x:p,y:y(p)},{x:h,y:y(h)}]}var v=ks(ks(ks({},l),{},{fill:"none",stroke:l&&l.fill},u),{},{points:c});return K.isValidElement(s)?d=K.cloneElement(s,v):ut(s)?d=s(v):d=K.createElement(Y2,Sm({},v,{type:a})),K.createElement(xn,{className:"recharts-scatter-line",key:"recharts-scatter-line"},d)}},{key:"render",value:function(){var r=this.props,o=r.hide,s=r.points,i=r.line,a=r.className,l=r.xAxis,u=r.yAxis,c=r.left,d=r.top,f=r.width,p=r.height,h=r.id,m=r.isAnimationActive;if(o||!s||!s.length)return null;var g=this.state.isAnimationFinished,y=_t("recharts-scatter",a),v=l&&l.allowDataOverflow,b=u&&u.allowDataOverflow,x=v||b,w=lt(h)?this.id:h;return K.createElement(xn,{className:y,clipPath:x?"url(#clipPath-".concat(w,")"):null},v||b?K.createElement("defs",null,K.createElement("clipPath",{id:"clipPath-".concat(w)},K.createElement("rect",{x:v?c:c-f/2,y:b?d:d-p/2,width:v?f:f*2,height:b?p:p*2}))):null,i&&this.renderLine(),this.renderErrorBar(),K.createElement(xn,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!m||g)&&Yl.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,o){return r.animationId!==o.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:o.curPoints}:r.points!==o.curPoints?{curPoints:r.points}:null}}])}(N.PureComponent);Fl(Y0,"displayName","Scatter");Fl(Y0,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!Jp.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});Fl(Y0,"getComposedData",function(t){var e=t.xAxis,n=t.yAxis,r=t.zAxis,o=t.item,s=t.displayedData,i=t.xAxisTicks,a=t.yAxisTicks,l=t.offset,u=o.props.tooltipType,c=rs(o.props.children,iF),d=lt(e.dataKey)?o.props.dataKey:e.dataKey,f=lt(n.dataKey)?o.props.dataKey:n.dataKey,p=r&&r.dataKey,h=r?r.range:V$.defaultProps.range,m=h&&h[0],g=e.scale.bandwidth?e.scale.bandwidth():0,y=n.scale.bandwidth?n.scale.bandwidth():0,v=s.map(function(b,x){var w=co(b,d),S=co(b,f),k=!lt(p)&&co(b,p)||"-",$=[{name:lt(e.dataKey)?o.props.name:e.name||e.dataKey,unit:e.unit||"",value:w,payload:b,dataKey:d,type:u},{name:lt(n.dataKey)?o.props.name:n.name||n.dataKey,unit:n.unit||"",value:S,payload:b,dataKey:f,type:u}];k!=="-"&&$.push({name:r.name||r.dataKey,unit:r.unit||"",value:k,payload:b,dataKey:p,type:u});var C=_V({axis:e,ticks:i,bandSize:g,entry:b,index:x,dataKey:d}),I=_V({axis:n,ticks:a,bandSize:y,entry:b,index:x,dataKey:f}),E=k!=="-"?r.scale(k):m,O=Math.sqrt(Math.max(E,0)/Math.PI);return ks(ks({},b),{},{cx:C,cy:I,x:C-O,y:I-O,xAxis:e,yAxis:n,zAxis:r,width:2*O,height:2*O,size:E,node:{x:w,y:S,z:k},tooltipPayload:$,tooltipPosition:{x:C,y:I},payload:b},c&&c[x]&&c[x].props)});return ks({points:v},l)});function gp(t){"@babel/helpers - typeof";return gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gp(t)}function Jdt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Jee(r.key),r)}}function tft(t,e,n){return e&&eft(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function nft(t,e,n){return e=sw(e),rft(t,Zee()?Reflect.construct(e,n||[],sw(t).constructor):e.apply(t,n))}function rft(t,e){if(e&&(gp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oft(t)}function oft(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Zee=function(){return!!t})()}function sw(t){return sw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},sw(t)}function sft(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wN(t,e)}function wN(t,e){return wN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},wN(t,e)}function Qee(t,e,n){return e=Jee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jee(t){var e=ift(t,"string");return gp(e)=="symbol"?e:e+""}function ift(t,e){if(gp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(gp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function SN(){return SN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},SN.apply(this,arguments)}function aft(t){var e=t.xAxisId,n=FF(),r=MF(),o=Pee(e);return o==null?null:K.createElement(oh,SN({},o,{className:_t("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(i){return Ra(i,!0)}}))}var W$=function(t){function e(){return Jdt(this,e),nft(this,e,arguments)}return sft(e,t),tft(e,[{key:"render",value:function(){return K.createElement(aft,this.props)}}])}(K.Component);Qee(W$,"displayName","XAxis");Qee(W$,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function yp(t){"@babel/helpers - typeof";return yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yp(t)}function lft(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nte(r.key),r)}}function cft(t,e,n){return e&&uft(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function dft(t,e,n){return e=iw(e),fft(t,ete()?Reflect.construct(e,n||[],iw(t).constructor):e.apply(t,n))}function fft(t,e){if(e&&(yp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pft(t)}function pft(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ete(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ete=function(){return!!t})()}function iw(t){return iw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},iw(t)}function hft(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kN(t,e)}function kN(t,e){return kN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},kN(t,e)}function tte(t,e,n){return e=nte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nte(t){var e=mft(t,"string");return yp(e)=="symbol"?e:e+""}function mft(t,e){if(yp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(yp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function $N(){return $N=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$N.apply(this,arguments)}var gft=function(e){var n=e.yAxisId,r=FF(),o=MF(),s=Ree(n);return s==null?null:K.createElement(oh,$N({},s,{className:_t("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:o},ticksGenerator:function(a){return Ra(a,!0)}}))},U$=function(t){function e(){return lft(this,e),dft(this,e,arguments)}return hft(e,t),cft(e,[{key:"render",value:function(){return K.createElement(gft,this.props)}}])}(K.Component);tte(U$,"displayName","YAxis");tte(U$,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function qW(t){return xft(t)||bft(t)||vft(t)||yft()}function yft(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vft(t,e){if(t){if(typeof t=="string")return CN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CN(t,e)}}function bft(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function xft(t){if(Array.isArray(t))return CN(t)}function CN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var TN=function(e,n,r,o,s){var i=rs(e,zF),a=rs(e,z$),l=[].concat(qW(i),qW(a)),u=rs(e,j$),c="".concat(o,"Id"),d=o[0],f=n;if(l.length&&(f=l.reduce(function(m,g){if(g.props[c]===r&&ua(g.props,"extendDomain")&&we(g.props[d])){var y=g.props[d];return[Math.min(m[0],y),Math.max(m[1],y)]}return m},f)),u.length){var p="".concat(d,"1"),h="".concat(d,"2");f=u.reduce(function(m,g){if(g.props[c]===r&&ua(g.props,"extendDomain")&&we(g.props[p])&&we(g.props[h])){var y=g.props[p],v=g.props[h];return[Math.min(m[0],y,v),Math.max(m[1],y,v)]}return m},f)}return s&&s.length&&(f=s.reduce(function(m,g){return we(g)?[Math.min(m[0],g),Math.max(m[1],g)]:m},f)),f},rte={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function o(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function s(l,u,c,d,f){if(typeof c!="function")throw new TypeError("The listener must be a function");var p=new o(c,d||l,f),h=n?n+u:u;return l._events[h]?l._events[h].fn?l._events[h]=[l._events[h],p]:l._events[h].push(p):(l._events[h]=p,l._eventsCount++),l}function i(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],c,d;if(this._eventsCount===0)return u;for(d in c=this._events)e.call(c,d)&&u.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},a.prototype.listeners=function(u){var c=n?n+u:u,d=this._events[c];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,p=d.length,h=new Array(p);f<p;f++)h[f]=d[f].fn;return h},a.prototype.listenerCount=function(u){var c=n?n+u:u,d=this._events[c];return d?d.fn?1:d.length:0},a.prototype.emit=function(u,c,d,f,p,h){var m=n?n+u:u;if(!this._events[m])return!1;var g=this._events[m],y=arguments.length,v,b;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,c),!0;case 3:return g.fn.call(g.context,c,d),!0;case 4:return g.fn.call(g.context,c,d,f),!0;case 5:return g.fn.call(g.context,c,d,f,p),!0;case 6:return g.fn.call(g.context,c,d,f,p,h),!0}for(b=1,v=new Array(y-1);b<y;b++)v[b-1]=arguments[b];g.fn.apply(g.context,v)}else{var x=g.length,w;for(b=0;b<x;b++)switch(g[b].once&&this.removeListener(u,g[b].fn,void 0,!0),y){case 1:g[b].fn.call(g[b].context);break;case 2:g[b].fn.call(g[b].context,c);break;case 3:g[b].fn.call(g[b].context,c,d);break;case 4:g[b].fn.call(g[b].context,c,d,f);break;default:if(!v)for(w=1,v=new Array(y-1);w<y;w++)v[w-1]=arguments[w];g[b].fn.apply(g[b].context,v)}}return!0},a.prototype.on=function(u,c,d){return s(this,u,c,d,!1)},a.prototype.once=function(u,c,d){return s(this,u,c,d,!0)},a.prototype.removeListener=function(u,c,d,f){var p=n?n+u:u;if(!this._events[p])return this;if(!c)return i(this,p),this;var h=this._events[p];if(h.fn)h.fn===c&&(!f||h.once)&&(!d||h.context===d)&&i(this,p);else{for(var m=0,g=[],y=h.length;m<y;m++)(h[m].fn!==c||f&&!h[m].once||d&&h[m].context!==d)&&g.push(h[m]);g.length?this._events[p]=g.length===1?g[0]:g:i(this,p)}return this},a.prototype.removeAllListeners=function(u){var c;return u?(c=n?n+u:u,this._events[c]&&i(this,c)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(rte);var wft=rte.exports;const Sft=Dt(wft);var LT=new Sft,zT="recharts.syncMouseEvents";function Xg(t){"@babel/helpers - typeof";return Xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xg(t)}function kft(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $ft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ote(r.key),r)}}function Cft(t,e,n){return e&&$ft(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function BT(t,e,n){return e=ote(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ote(t){var e=Tft(t,"string");return Xg(e)=="symbol"?e:e+""}function Tft(t,e){if(Xg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Xg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var _ft=function(){function t(){kft(this,t),BT(this,"activeIndex",0),BT(this,"coordinateList",[]),BT(this,"layout","horizontal")}return Cft(t,[{key:"setDetails",value:function(n){var r,o=n.coordinateList,s=o===void 0?null:o,i=n.container,a=i===void 0?null:i,l=n.layout,u=l===void 0?null:l,c=n.offset,d=c===void 0?null:c,f=n.mouseHandlerCallback,p=f===void 0?null:f;this.coordinateList=(r=s??this.coordinateList)!==null&&r!==void 0?r:[],this.container=a??this.container,this.layout=u??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var o=this.container.getBoundingClientRect(),s=o.x,i=o.y,a=o.height,l=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,c=((r=window)===null||r===void 0?void 0:r.scrollY)||0,d=s+l+u,f=i+this.offset.top+a/2+c;this.mouseHandlerCallback({pageX:d,pageY:f})}}}])}();function Ift(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],o=t==null?void 0:t[1];if(r&&o&&we(r)&&we(o))return!0}return!1}function Nft(t,e,n,r){var o=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-o:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-o,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function ste(t){var e=t.cx,n=t.cy,r=t.radius,o=t.startAngle,s=t.endAngle,i=Er(e,n,r,o),a=Er(e,n,r,s);return{points:[i,a],cx:e,cy:n,radius:r,startAngle:o,endAngle:s}}function Eft(t,e,n){var r,o,s,i;if(t==="horizontal")r=e.x,s=r,o=n.top,i=n.top+n.height;else if(t==="vertical")o=e.y,i=o,r=n.left,s=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var a=e.cx,l=e.cy,u=e.innerRadius,c=e.outerRadius,d=e.angle,f=Er(a,l,u,d),p=Er(a,l,c,d);r=f.x,o=f.y,s=p.x,i=p.y}else return ste(e);return[{x:r,y:o},{x:s,y:i}]}function Yg(t){"@babel/helpers - typeof";return Yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yg(t)}function KW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function ib(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KW(Object(n),!0).forEach(function(r){Aft(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Aft(t,e,n){return e=Oft(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Oft(t){var e=Pft(t,"string");return Yg(e)=="symbol"?e:e+""}function Pft(t,e){if(Yg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Yg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Rft(t){var e,n,r=t.element,o=t.tooltipEventType,s=t.isActive,i=t.activeCoordinate,a=t.activePayload,l=t.offset,u=t.activeTooltipIndex,c=t.tooltipAxisBandSize,d=t.layout,f=t.chartName,p=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!p||!s||!i||f!=="ScatterChart"&&o!=="axis")return null;var h,m=Y2;if(f==="ScatterChart")h=i,m=Nat;else if(f==="BarChart")h=Nft(d,i,l,c),m=OF;else if(d==="radial"){var g=ste(i),y=g.cx,v=g.cy,b=g.radius,x=g.startAngle,w=g.endAngle;h={cx:y,cy:v,startAngle:x,endAngle:w,innerRadius:b,outerRadius:b},m=iee}else h={points:Eft(d,i,l)},m=Y2;var S=ib(ib(ib(ib({stroke:"#ccc",pointerEvents:"none"},l),h),yt(p,!1)),{},{payload:a,payloadIndex:u,className:_t("recharts-tooltip-cursor",p.className)});return N.isValidElement(p)?N.cloneElement(p,S):N.createElement(m,S)}var Dft=["item"],Fft=["children","className","width","height","style","compact","title","desc"];function vp(t){"@babel/helpers - typeof";return vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vp(t)}function Zd(){return Zd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zd.apply(this,arguments)}function XW(t,e){return zft(t)||Lft(t,e)||ate(t,e)||Mft()}function Mft(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lft(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,s,i,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,o=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return a}}function zft(t){if(Array.isArray(t))return t}function YW(t,e){if(t==null)return{};var n=Bft(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Bft(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function jft(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lte(r.key),r)}}function Wft(t,e,n){return e&&Vft(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Uft(t,e,n){return e=aw(e),Gft(t,ite()?Reflect.construct(e,n||[],aw(t).constructor):e.apply(t,n))}function Gft(t,e){if(e&&(vp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hft(t)}function Hft(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ite(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ite=function(){return!!t})()}function aw(t){return aw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},aw(t)}function qft(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_N(t,e)}function _N(t,e){return _N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},_N(t,e)}function bp(t){return Yft(t)||Xft(t)||ate(t)||Kft()}function Kft(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ate(t,e){if(t){if(typeof t=="string")return IN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IN(t,e)}}function Xft(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Yft(t){if(Array.isArray(t))return IN(t)}function IN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ZW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function ae(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZW(Object(n),!0).forEach(function(r){Ue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ue(t,e,n){return e=lte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lte(t){var e=Zft(t,"string");return vp(e)=="symbol"?e:e+""}function Zft(t,e){if(vp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(vp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Qft={xAxis:["bottom","top"],yAxis:["left","right"]},Jft={width:"100%",height:"100%"},ute={x:0,y:0};function ab(t){return t}var ept=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},tpt=function(e,n,r,o){var s=n.find(function(c){return c&&c.index===r});if(s){if(e==="horizontal")return{x:s.coordinate,y:o.y};if(e==="vertical")return{x:o.x,y:s.coordinate};if(e==="centric"){var i=s.coordinate,a=o.radius;return ae(ae(ae({},o),Er(o.cx,o.cy,a,i)),{},{angle:i,radius:a})}var l=s.coordinate,u=o.angle;return ae(ae(ae({},o),Er(o.cx,o.cy,l,u)),{},{angle:u,radius:l})}return ute},G$=function(e,n){var r=n.graphicalItems,o=n.dataStartIndex,s=n.dataEndIndex,i=(r??[]).reduce(function(a,l){var u=l.props.data;return u&&u.length?[].concat(bp(a),bp(u)):a},[]);return i.length>0?i:e&&e.length&&we(o)&&we(s)?e.slice(o,s+1):[]};function cte(t){return t==="number"?[0,"auto"]:void 0}var NN=function(e,n,r,o){var s=e.graphicalItems,i=e.tooltipAxis,a=G$(n,e);return r<0||!s||!s.length||r>=a.length?null:s.reduce(function(l,u){var c,d=(c=u.props.data)!==null&&c!==void 0?c:n;d&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(d=d.slice(e.dataStartIndex,e.dataEndIndex+1));var f;if(i.dataKey&&!i.allowDuplicatedCategory){var p=d===void 0?a:d;f=u1(p,i.dataKey,o)}else f=d&&d[r]||a[r];return f?[].concat(bp(l),[ree(u,f)]):l},[])},QW=function(e,n,r,o){var s=o||{x:e.chartX,y:e.chartY},i=ept(s,r),a=e.orderedTooltipTicks,l=e.tooltipAxis,u=e.tooltipTicks,c=Tot(i,a,u,l);if(c>=0&&u){var d=u[c]&&u[c].value,f=NN(e,n,c,d),p=tpt(r,a,c,s);return{activeTooltipIndex:c,activeLabel:d,activePayload:f,activeCoordinate:p}}return null},npt=function(e,n){var r=n.axes,o=n.graphicalItems,s=n.axisType,i=n.axisIdKey,a=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.layout,d=e.children,f=e.stackOffset,p=eee(c,s);return r.reduce(function(h,m){var g,y=m.type.defaultProps!==void 0?ae(ae({},m.type.defaultProps),m.props):m.props,v=y.type,b=y.dataKey,x=y.allowDataOverflow,w=y.allowDuplicatedCategory,S=y.scale,k=y.ticks,$=y.includeHidden,C=y[i];if(h[C])return h;var I=G$(e.data,{graphicalItems:o.filter(function(X){var ee,ie=i in X.props?X.props[i]:(ee=X.type.defaultProps)===null||ee===void 0?void 0:ee[i];return ie===C}),dataStartIndex:l,dataEndIndex:u}),E=I.length,O,R,z;Ift(y.domain,x,v)&&(O=G2(y.domain,null,x),p&&(v==="number"||S!=="auto")&&(z=bm(I,b,"category")));var L=cte(v);if(!O||O.length===0){var B,D=(B=y.domain)!==null&&B!==void 0?B:L;if(b){if(O=bm(I,b,v),v==="category"&&p){var F=dHe(O);w&&F?(R=O,O=q1(0,E)):w||(O=AV(D,O,m).reduce(function(X,ee){return X.indexOf(ee)>=0?X:[].concat(bp(X),[ee])},[]))}else if(v==="category")w?O=O.filter(function(X){return X!==""&&!lt(X)}):O=AV(D,O,m).reduce(function(X,ee){return X.indexOf(ee)>=0||ee===""||lt(ee)?X:[].concat(bp(X),[ee])},[]);else if(v==="number"){var j=Aot(I,o.filter(function(X){var ee,ie,se=i in X.props?X.props[i]:(ee=X.type.defaultProps)===null||ee===void 0?void 0:ee[i],de="hide"in X.props?X.props.hide:(ie=X.type.defaultProps)===null||ie===void 0?void 0:ie.hide;return se===C&&($||!de)}),b,s,c);j&&(O=j)}p&&(v==="number"||S!=="auto")&&(z=bm(I,b,"category"))}else p?O=q1(0,E):a&&a[C]&&a[C].hasStack&&v==="number"?O=f==="expand"?[0,1]:nee(a[C].stackGroups,l,u):O=JJ(I,o.filter(function(X){var ee=i in X.props?X.props[i]:X.type.defaultProps[i],ie="hide"in X.props?X.props.hide:X.type.defaultProps.hide;return ee===C&&($||!ie)}),v,c,!0);if(v==="number")O=TN(d,O,C,s,k),D&&(O=G2(D,O,x));else if(v==="category"&&D){var G=D,Y=O.every(function(X){return G.indexOf(X)>=0});Y&&(O=G)}}return ae(ae({},h),{},Ue({},C,ae(ae({},y),{},{axisType:s,domain:O,categoricalDomain:z,duplicateDomain:R,originalDomain:(g=y.domain)!==null&&g!==void 0?g:L,isCategorical:p,layout:c})))},{})},rpt=function(e,n){var r=n.graphicalItems,o=n.Axis,s=n.axisType,i=n.axisIdKey,a=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.layout,d=e.children,f=G$(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:u}),p=f.length,h=eee(c,s),m=-1;return r.reduce(function(g,y){var v=y.type.defaultProps!==void 0?ae(ae({},y.type.defaultProps),y.props):y.props,b=v[i],x=cte("number");if(!g[b]){m++;var w;return h?w=q1(0,p):a&&a[b]&&a[b].hasStack?(w=nee(a[b].stackGroups,l,u),w=TN(d,w,b,s)):(w=G2(x,JJ(f,r.filter(function(S){var k,$,C=i in S.props?S.props[i]:(k=S.type.defaultProps)===null||k===void 0?void 0:k[i],I="hide"in S.props?S.props.hide:($=S.type.defaultProps)===null||$===void 0?void 0:$.hide;return C===b&&!I}),"number",c),o.defaultProps.allowDataOverflow),w=TN(d,w,b,s)),ae(ae({},g),{},Ue({},b,ae(ae({axisType:s},o.defaultProps),{},{hide:!0,orientation:js(Qft,"".concat(s,".").concat(m%2),null),domain:w,originalDomain:x,isCategorical:h,layout:c})))}return g},{})},opt=function(e,n){var r=n.axisType,o=r===void 0?"xAxis":r,s=n.AxisComp,i=n.graphicalItems,a=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.children,d="".concat(o,"Id"),f=rs(c,s),p={};return f&&f.length?p=npt(e,{axes:f,graphicalItems:i,axisType:o,axisIdKey:d,stackGroups:a,dataStartIndex:l,dataEndIndex:u}):i&&i.length&&(p=rpt(e,{Axis:s,graphicalItems:i,axisType:o,axisIdKey:d,stackGroups:a,dataStartIndex:l,dataEndIndex:u})),p},spt=function(e){var n=Nl(e),r=Ra(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:oF(r,function(o){return o.coordinate}),tooltipAxis:n,tooltipAxisBandSize:L1(n,r)}},JW=function(e){var n=e.children,r=e.defaultShowTooltip,o=Yo(n,lp),s=0,i=0;return e.data&&e.data.length!==0&&(i=e.data.length-1),o&&o.props&&(o.props.startIndex>=0&&(s=o.props.startIndex),o.props.endIndex>=0&&(i=o.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:i,activeTooltipIndex:-1,isTooltipActive:!!r}},ipt=function(e){return!e||!e.length?!1:e.some(function(n){var r=Wa(n&&n.type);return r&&r.indexOf("Bar")>=0})},e5=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},apt=function(e,n){var r=e.props,o=e.graphicalItems,s=e.xAxisMap,i=s===void 0?{}:s,a=e.yAxisMap,l=a===void 0?{}:a,u=r.width,c=r.height,d=r.children,f=r.margin||{},p=Yo(d,lp),h=Yo(d,yf),m=Object.keys(l).reduce(function(w,S){var k=l[S],$=k.orientation;return!k.mirror&&!k.hide?ae(ae({},w),{},Ue({},$,w[$]+k.width)):w},{left:f.left||0,right:f.right||0}),g=Object.keys(i).reduce(function(w,S){var k=i[S],$=k.orientation;return!k.mirror&&!k.hide?ae(ae({},w),{},Ue({},$,js(w,"".concat($))+k.height)):w},{top:f.top||0,bottom:f.bottom||0}),y=ae(ae({},g),m),v=y.bottom;p&&(y.bottom+=p.props.height||lp.defaultProps.height),h&&n&&(y=Not(y,o,r,n));var b=u-y.left-y.right,x=c-y.top-y.bottom;return ae(ae({brushBottom:v},y),{},{width:Math.max(b,0),height:Math.max(x,0)})},lpt=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},upt=function(e){var n=e.chartName,r=e.GraphicalChild,o=e.defaultTooltipEventType,s=o===void 0?"axis":o,i=e.validateTooltipEventTypes,a=i===void 0?["axis"]:i,l=e.axisComponents,u=e.legendContent,c=e.formatAxisMap,d=e.defaultProps,f=function(y,v){var b=v.graphicalItems,x=v.stackGroups,w=v.offset,S=v.updateId,k=v.dataStartIndex,$=v.dataEndIndex,C=y.barSize,I=y.layout,E=y.barGap,O=y.barCategoryGap,R=y.maxBarSize,z=e5(I),L=z.numericAxisName,B=z.cateAxisName,D=ipt(b),F=[];return b.forEach(function(j,G){var Y=G$(y.data,{graphicalItems:[j],dataStartIndex:k,dataEndIndex:$}),X=j.type.defaultProps!==void 0?ae(ae({},j.type.defaultProps),j.props):j.props,ee=X.dataKey,ie=X.maxBarSize,se=X["".concat(L,"Id")],de=X["".concat(B,"Id")],me={},le=l.reduce(function(it,At){var ur=v["".concat(At.axisType,"Map")],$n=X["".concat(At.axisType,"Id")];ur&&ur[$n]||At.axisType==="zAxis"||Hc();var It=ur[$n];return ae(ae({},it),{},Ue(Ue({},At.axisType,It),"".concat(At.axisType,"Ticks"),Ra(It)))},me),oe=le[B],fe=le["".concat(B,"Ticks")],pe=x&&x[se]&&x[se].hasStack&&Wot(j,x[se].stackGroups),Q=Wa(j.type).indexOf("Bar")>=0,_e=L1(oe,fe),Ee=[],De=D&&_ot({barSize:C,stackGroups:x,totalSize:lpt(le,B)});if(Q){var Pe,He,st=lt(ie)?R:ie,nn=(Pe=(He=L1(oe,fe,!0))!==null&&He!==void 0?He:st)!==null&&Pe!==void 0?Pe:0;Ee=Iot({barGap:E,barCategoryGap:O,bandSize:nn!==_e?nn:_e,sizeList:De[de],maxBarSize:st}),nn!==_e&&(Ee=Ee.map(function(it){return ae(ae({},it),{},{position:ae(ae({},it.position),{},{offset:it.position.offset-nn/2})})}))}var gt=j&&j.type&&j.type.getComposedData;gt&&F.push({props:ae(ae({},gt(ae(ae({},le),{},{displayedData:Y,props:y,dataKey:ee,item:j,bandSize:_e,barPosition:Ee,offset:w,stackedData:pe,layout:I,dataStartIndex:k,dataEndIndex:$}))),{},Ue(Ue(Ue({key:j.key||"item-".concat(G)},L,le[L]),B,le[B]),"animationId",S)),childIndex:kHe(j,y.children),item:j})}),F},p=function(y,v){var b=y.props,x=y.dataStartIndex,w=y.dataEndIndex,S=y.updateId;if(!$j({props:b}))return null;var k=b.children,$=b.layout,C=b.stackOffset,I=b.data,E=b.reverseStackOrder,O=e5($),R=O.numericAxisName,z=O.cateAxisName,L=rs(k,r),B=Bot(I,L,"".concat(R,"Id"),"".concat(z,"Id"),C,E),D=l.reduce(function(X,ee){var ie="".concat(ee.axisType,"Map");return ae(ae({},X),{},Ue({},ie,opt(b,ae(ae({},ee),{},{graphicalItems:L,stackGroups:ee.axisType===R&&B,dataStartIndex:x,dataEndIndex:w}))))},{}),F=apt(ae(ae({},D),{},{props:b,graphicalItems:L}),v==null?void 0:v.legendBBox);Object.keys(D).forEach(function(X){D[X]=c(b,D[X],F,X.replace("Map",""),n)});var j=D["".concat(z,"Map")],G=spt(j),Y=f(b,ae(ae({},D),{},{dataStartIndex:x,dataEndIndex:w,updateId:S,graphicalItems:L,stackGroups:B,offset:F}));return ae(ae({formattedGraphicalItems:Y,graphicalItems:L,offset:F,stackGroups:B},G),D)},h=function(g){function y(v){var b,x,w;return jft(this,y),w=Uft(this,y,[v]),Ue(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Ue(w,"accessibilityManager",new _ft),Ue(w,"handleLegendBBoxUpdate",function(S){if(S){var k=w.state,$=k.dataStartIndex,C=k.dataEndIndex,I=k.updateId;w.setState(ae({legendBBox:S},p({props:w.props,dataStartIndex:$,dataEndIndex:C,updateId:I},ae(ae({},w.state),{},{legendBBox:S}))))}}),Ue(w,"handleReceiveSyncEvent",function(S,k,$){if(w.props.syncId===S){if($===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(k)}}),Ue(w,"handleBrushChange",function(S){var k=S.startIndex,$=S.endIndex;if(k!==w.state.dataStartIndex||$!==w.state.dataEndIndex){var C=w.state.updateId;w.setState(function(){return ae({dataStartIndex:k,dataEndIndex:$},p({props:w.props,dataStartIndex:k,dataEndIndex:$,updateId:C},w.state))}),w.triggerSyncEvent({dataStartIndex:k,dataEndIndex:$})}}),Ue(w,"handleMouseEnter",function(S){var k=w.getMouseInfo(S);if(k){var $=ae(ae({},k),{},{isTooltipActive:!0});w.setState($),w.triggerSyncEvent($);var C=w.props.onMouseEnter;ut(C)&&C($,S)}}),Ue(w,"triggeredAfterMouseMove",function(S){var k=w.getMouseInfo(S),$=k?ae(ae({},k),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState($),w.triggerSyncEvent($);var C=w.props.onMouseMove;ut(C)&&C($,S)}),Ue(w,"handleItemMouseEnter",function(S){w.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),Ue(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),Ue(w,"handleMouseMove",function(S){S.persist(),w.throttleTriggeredAfterMouseMove(S)}),Ue(w,"handleMouseLeave",function(S){w.throttleTriggeredAfterMouseMove.cancel();var k={isTooltipActive:!1};w.setState(k),w.triggerSyncEvent(k);var $=w.props.onMouseLeave;ut($)&&$(k,S)}),Ue(w,"handleOuterEvent",function(S){var k=SHe(S),$=js(w.props,"".concat(k));if(k&&ut($)){var C,I;/.*touch.*/i.test(k)?I=w.getMouseInfo(S.changedTouches[0]):I=w.getMouseInfo(S),$((C=I)!==null&&C!==void 0?C:{},S)}}),Ue(w,"handleClick",function(S){var k=w.getMouseInfo(S);if(k){var $=ae(ae({},k),{},{isTooltipActive:!0});w.setState($),w.triggerSyncEvent($);var C=w.props.onClick;ut(C)&&C($,S)}}),Ue(w,"handleMouseDown",function(S){var k=w.props.onMouseDown;if(ut(k)){var $=w.getMouseInfo(S);k($,S)}}),Ue(w,"handleMouseUp",function(S){var k=w.props.onMouseUp;if(ut(k)){var $=w.getMouseInfo(S);k($,S)}}),Ue(w,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),Ue(w,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&w.handleMouseDown(S.changedTouches[0])}),Ue(w,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&w.handleMouseUp(S.changedTouches[0])}),Ue(w,"triggerSyncEvent",function(S){w.props.syncId!==void 0&&LT.emit(zT,w.props.syncId,S,w.eventEmitterSymbol)}),Ue(w,"applySyncEvent",function(S){var k=w.props,$=k.layout,C=k.syncMethod,I=w.state.updateId,E=S.dataStartIndex,O=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)w.setState(ae({dataStartIndex:E,dataEndIndex:O},p({props:w.props,dataStartIndex:E,dataEndIndex:O,updateId:I},w.state)));else if(S.activeTooltipIndex!==void 0){var R=S.chartX,z=S.chartY,L=S.activeTooltipIndex,B=w.state,D=B.offset,F=B.tooltipTicks;if(!D)return;if(typeof C=="function")L=C(F,S);else if(C==="value"){L=-1;for(var j=0;j<F.length;j++)if(F[j].value===S.activeLabel){L=j;break}}var G=ae(ae({},D),{},{x:D.left,y:D.top}),Y=Math.min(R,G.x+G.width),X=Math.min(z,G.y+G.height),ee=F[L]&&F[L].value,ie=NN(w.state,w.props.data,L),se=F[L]?{x:$==="horizontal"?F[L].coordinate:Y,y:$==="horizontal"?X:F[L].coordinate}:ute;w.setState(ae(ae({},S),{},{activeLabel:ee,activeCoordinate:se,activePayload:ie,activeTooltipIndex:L}))}else w.setState(S)}),Ue(w,"renderCursor",function(S){var k,$=w.state,C=$.isTooltipActive,I=$.activeCoordinate,E=$.activePayload,O=$.offset,R=$.activeTooltipIndex,z=$.tooltipAxisBandSize,L=w.getTooltipEventType(),B=(k=S.props.active)!==null&&k!==void 0?k:C,D=w.props.layout,F=S.key||"_recharts-cursor";return K.createElement(Rft,{key:F,activeCoordinate:I,activePayload:E,activeTooltipIndex:R,chartName:n,element:S,isActive:B,layout:D,offset:O,tooltipAxisBandSize:z,tooltipEventType:L})}),Ue(w,"renderPolarAxis",function(S,k,$){var C=js(S,"type.axisType"),I=js(w.state,"".concat(C,"Map")),E=S.type.defaultProps,O=E!==void 0?ae(ae({},E),S.props):S.props,R=I&&I[O["".concat(C,"Id")]];return N.cloneElement(S,ae(ae({},R),{},{className:_t(C,R.className),key:S.key||"".concat(k,"-").concat($),ticks:Ra(R,!0)}))}),Ue(w,"renderPolarGrid",function(S){var k=S.props,$=k.radialLines,C=k.polarAngles,I=k.polarRadius,E=w.state,O=E.radiusAxisMap,R=E.angleAxisMap,z=Nl(O),L=Nl(R),B=L.cx,D=L.cy,F=L.innerRadius,j=L.outerRadius;return N.cloneElement(S,{polarAngles:Array.isArray(C)?C:Ra(L,!0).map(function(G){return G.coordinate}),polarRadius:Array.isArray(I)?I:Ra(z,!0).map(function(G){return G.coordinate}),cx:B,cy:D,innerRadius:F,outerRadius:j,key:S.key||"polar-grid",radialLines:$})}),Ue(w,"renderLegend",function(){var S=w.state.formattedGraphicalItems,k=w.props,$=k.children,C=k.width,I=k.height,E=w.props.margin||{},O=C-(E.left||0)-(E.right||0),R=ZJ({children:$,formattedGraphicalItems:S,legendWidth:O,legendContent:u});if(!R)return null;var z=R.item,L=YW(R,Dft);return N.cloneElement(z,ae(ae({},L),{},{chartWidth:C,chartHeight:I,margin:E,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),Ue(w,"renderTooltip",function(){var S,k=w.props,$=k.children,C=k.accessibilityLayer,I=Yo($,Fi);if(!I)return null;var E=w.state,O=E.isTooltipActive,R=E.activeCoordinate,z=E.activePayload,L=E.activeLabel,B=E.offset,D=(S=I.props.active)!==null&&S!==void 0?S:O;return N.cloneElement(I,{viewBox:ae(ae({},B),{},{x:B.left,y:B.top}),active:D,label:L,payload:D?z:[],coordinate:R,accessibilityLayer:C})}),Ue(w,"renderBrush",function(S){var k=w.props,$=k.margin,C=k.data,I=w.state,E=I.offset,O=I.dataStartIndex,R=I.dataEndIndex,z=I.updateId;return N.cloneElement(S,{key:S.key||"_recharts-brush",onChange:nb(w.handleBrushChange,S.props.onChange),data:C,x:we(S.props.x)?S.props.x:E.left,y:we(S.props.y)?S.props.y:E.top+E.height+E.brushBottom-($.bottom||0),width:we(S.props.width)?S.props.width:E.width,startIndex:O,endIndex:R,updateId:"brush-".concat(z)})}),Ue(w,"renderReferenceElement",function(S,k,$){if(!S)return null;var C=w,I=C.clipPathId,E=w.state,O=E.xAxisMap,R=E.yAxisMap,z=E.offset,L=S.type.defaultProps||{},B=S.props,D=B.xAxisId,F=D===void 0?L.xAxisId:D,j=B.yAxisId,G=j===void 0?L.yAxisId:j;return N.cloneElement(S,{key:S.key||"".concat(k,"-").concat($),xAxis:O[F],yAxis:R[G],viewBox:{x:z.left,y:z.top,width:z.width,height:z.height},clipPathId:I})}),Ue(w,"renderActivePoints",function(S){var k=S.item,$=S.activePoint,C=S.basePoint,I=S.childIndex,E=S.isRange,O=[],R=k.props.key,z=k.item.type.defaultProps!==void 0?ae(ae({},k.item.type.defaultProps),k.item.props):k.item.props,L=z.activeDot,B=z.dataKey,D=ae(ae({index:I,dataKey:B,cx:$.x,cy:$.y,r:4,fill:AF(k.item),strokeWidth:2,stroke:"#fff",payload:$.payload,value:$.value},yt(L,!1)),c1(L));return O.push(y.renderActiveDot(L,D,"".concat(R,"-activePoint-").concat(I))),C?O.push(y.renderActiveDot(L,ae(ae({},D),{},{cx:C.x,cy:C.y}),"".concat(R,"-basePoint-").concat(I))):E&&O.push(null),O}),Ue(w,"renderGraphicChild",function(S,k,$){var C=w.filterFormatItem(S,k,$);if(!C)return null;var I=w.getTooltipEventType(),E=w.state,O=E.isTooltipActive,R=E.tooltipAxis,z=E.activeTooltipIndex,L=E.activeLabel,B=w.props.children,D=Yo(B,Fi),F=C.props,j=F.points,G=F.isRange,Y=F.baseLine,X=C.item.type.defaultProps!==void 0?ae(ae({},C.item.type.defaultProps),C.item.props):C.item.props,ee=X.activeDot,ie=X.hide,se=X.activeBar,de=X.activeShape,me=!!(!ie&&O&&D&&(ee||se||de)),le={};I!=="axis"&&D&&D.props.trigger==="click"?le={onClick:nb(w.handleItemMouseEnter,S.props.onClick)}:I!=="axis"&&(le={onMouseLeave:nb(w.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:nb(w.handleItemMouseEnter,S.props.onMouseEnter)});var oe=N.cloneElement(S,ae(ae({},C.props),le));function fe(At){return typeof R.dataKey=="function"?R.dataKey(At.payload):null}if(me)if(z>=0){var pe,Q;if(R.dataKey&&!R.allowDuplicatedCategory){var _e=typeof R.dataKey=="function"?fe:"payload.".concat(R.dataKey.toString());pe=u1(j,_e,L),Q=G&&Y&&u1(Y,_e,L)}else pe=j==null?void 0:j[z],Q=G&&Y&&Y[z];if(de||se){var Ee=S.props.activeIndex!==void 0?S.props.activeIndex:z;return[N.cloneElement(S,ae(ae(ae({},C.props),le),{},{activeIndex:Ee})),null,null]}if(!lt(pe))return[oe].concat(bp(w.renderActivePoints({item:C,activePoint:pe,basePoint:Q,childIndex:z,isRange:G})))}else{var De,Pe=(De=w.getItemByXY(w.state.activeCoordinate))!==null&&De!==void 0?De:{graphicalItem:oe},He=Pe.graphicalItem,st=He.item,nn=st===void 0?S:st,gt=He.childIndex,it=ae(ae(ae({},C.props),le),{},{activeIndex:gt});return[N.cloneElement(nn,it),null,null]}return G?[oe,null,null]:[oe,null]}),Ue(w,"renderCustomized",function(S,k,$){return N.cloneElement(S,ae(ae({key:"recharts-customized-".concat($)},w.props),w.state))}),Ue(w,"renderMap",{CartesianGrid:{handler:ab,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:ab},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:ab},YAxis:{handler:ab},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((b=v.id)!==null&&b!==void 0?b:V0("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=ZQ(w.triggeredAfterMouseMove,(x=v.throttleDelay)!==null&&x!==void 0?x:1e3/60),w.state={},w}return qft(y,g),Wft(y,[{key:"componentDidMount",value:function(){var b,x;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(x=this.props.margin.top)!==null&&x!==void 0?x:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,x=b.children,w=b.data,S=b.height,k=b.layout,$=Yo(x,Fi);if($){var C=$.props.defaultIndex;if(!(typeof C!="number"||C<0||C>this.state.tooltipTicks.length-1)){var I=this.state.tooltipTicks[C]&&this.state.tooltipTicks[C].value,E=NN(this.state,w,C,I),O=this.state.tooltipTicks[C].coordinate,R=(this.state.offset.top+S)/2,z=k==="horizontal",L=z?{x:O,y:R}:{y:O,x:R},B=this.state.formattedGraphicalItems.find(function(F){var j=F.item;return j.type.name==="Scatter"});B&&(L=ae(ae({},L),B.props.points[C].tooltipPosition),E=B.props.points[C].tooltipPayload);var D={activeTooltipIndex:C,isTooltipActive:!0,activeLabel:I,activePayload:E,activeCoordinate:L};this.setState(D),this.renderCursor($),this.accessibilityManager.setIndex(C)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,x){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==x.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var w,S;this.accessibilityManager.setDetails({offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(b){i2([Yo(b.children,Fi)],[Yo(this.props.children,Fi)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=Yo(this.props.children,Fi);if(b&&typeof b.props.shared=="boolean"){var x=b.props.shared?"axis":"item";return a.indexOf(x)>=0?x:s}return s}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var x=this.container,w=x.getBoundingClientRect(),S=YJe(w),k={chartX:Math.round(b.pageX-S.left),chartY:Math.round(b.pageY-S.top)},$=w.width/x.offsetWidth||1,C=this.inRange(k.chartX,k.chartY,$);if(!C)return null;var I=this.state,E=I.xAxisMap,O=I.yAxisMap,R=this.getTooltipEventType();if(R!=="axis"&&E&&O){var z=Nl(E).scale,L=Nl(O).scale,B=z&&z.invert?z.invert(k.chartX):null,D=L&&L.invert?L.invert(k.chartY):null;return ae(ae({},k),{},{xValue:B,yValue:D})}var F=QW(this.state,this.props.data,this.props.layout,C);return F?ae(ae({},k),F):null}},{key:"inRange",value:function(b,x){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,k=b/w,$=x/w;if(S==="horizontal"||S==="vertical"){var C=this.state.offset,I=k>=C.left&&k<=C.left+C.width&&$>=C.top&&$<=C.top+C.height;return I?{x:k,y:$}:null}var E=this.state,O=E.angleAxisMap,R=E.radiusAxisMap;if(O&&R){var z=Nl(O);return RV({x:k,y:$},z)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,x=this.getTooltipEventType(),w=Yo(b,Fi),S={};w&&x==="axis"&&(w.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var k=c1(this.props,this.handleOuterEvent);return ae(ae({},k),S)}},{key:"addListener",value:function(){LT.on(zT,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){LT.removeListener(zT,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,x,w){for(var S=this.state.formattedGraphicalItems,k=0,$=S.length;k<$;k++){var C=S[k];if(C.item===b||C.props.key===b.key||x===Wa(C.item.type)&&w===C.childIndex)return C}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,x=this.state.offset,w=x.left,S=x.top,k=x.height,$=x.width;return K.createElement("defs",null,K.createElement("clipPath",{id:b},K.createElement("rect",{x:w,y:S,height:k,width:$})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(x,w){var S=XW(w,2),k=S[0],$=S[1];return ae(ae({},x),{},Ue({},k,$.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(x,w){var S=XW(w,2),k=S[0],$=S[1];return ae(ae({},x),{},Ue({},k,$.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var x;return(x=this.state.xAxisMap)===null||x===void 0||(x=x[b])===null||x===void 0?void 0:x.scale}},{key:"getYScaleByAxisId",value:function(b){var x;return(x=this.state.yAxisMap)===null||x===void 0||(x=x[b])===null||x===void 0?void 0:x.scale}},{key:"getItemByXY",value:function(b){var x=this.state,w=x.formattedGraphicalItems,S=x.activeItem;if(w&&w.length)for(var k=0,$=w.length;k<$;k++){var C=w[k],I=C.props,E=C.item,O=E.type.defaultProps!==void 0?ae(ae({},E.type.defaultProps),E.props):E.props,R=Wa(E.type);if(R==="Bar"){var z=(I.data||[]).find(function(F){return bat(b,F)});if(z)return{graphicalItem:C,payload:z}}else if(R==="RadialBar"){var L=(I.data||[]).find(function(F){return RV(b,F)});if(L)return{graphicalItem:C,payload:L}}else if(D$(C,S)||F$(C,S)||Ug(C,S)){var B=wlt({graphicalItem:C,activeTooltipItem:S,itemData:O.data}),D=O.activeIndex===void 0?B:O.activeIndex;return{graphicalItem:ae(ae({},C),{},{childIndex:D}),payload:Ug(C,S)?O.data[B]:C.props.data[B]}}}return null}},{key:"render",value:function(){var b=this;if(!$j(this))return null;var x=this.props,w=x.children,S=x.className,k=x.width,$=x.height,C=x.style,I=x.compact,E=x.title,O=x.desc,R=YW(x,Fft),z=yt(R,!1);if(I)return K.createElement(OW,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},K.createElement(l2,Zd({},z,{width:k,height:$,title:E,desc:O}),this.renderClipPath(),Tj(w,this.renderMap)));if(this.props.accessibilityLayer){var L,B;z.tabIndex=(L=this.props.tabIndex)!==null&&L!==void 0?L:0,z.role=(B=this.props.role)!==null&&B!==void 0?B:"application",z.onKeyDown=function(F){b.accessibilityManager.keyboardEvent(F)},z.onFocus=function(){b.accessibilityManager.focus()}}var D=this.parseEventsOfWrapper();return K.createElement(OW,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},K.createElement("div",Zd({className:_t("recharts-wrapper",S),style:ae({position:"relative",cursor:"default",width:k,height:$},C)},D,{ref:function(j){b.container=j}}),K.createElement(l2,Zd({},z,{width:k,height:$,title:E,desc:O,style:Jft}),this.renderClipPath(),Tj(w,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(N.Component);Ue(h,"displayName",n),Ue(h,"defaultProps",ae({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),Ue(h,"getDerivedStateFromProps",function(g,y){var v=g.dataKey,b=g.data,x=g.children,w=g.width,S=g.height,k=g.layout,$=g.stackOffset,C=g.margin,I=y.dataStartIndex,E=y.dataEndIndex;if(y.updateId===void 0){var O=JW(g);return ae(ae(ae({},O),{},{updateId:0},p(ae(ae({props:g},O),{},{updateId:0}),y)),{},{prevDataKey:v,prevData:b,prevWidth:w,prevHeight:S,prevLayout:k,prevStackOffset:$,prevMargin:C,prevChildren:x})}if(v!==y.prevDataKey||b!==y.prevData||w!==y.prevWidth||S!==y.prevHeight||k!==y.prevLayout||$!==y.prevStackOffset||!gf(C,y.prevMargin)){var R=JW(g),z={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},L=ae(ae({},QW(y,b,k)),{},{updateId:y.updateId+1}),B=ae(ae(ae({},R),z),L);return ae(ae(ae({},B),p(ae({props:g},B),y)),{},{prevDataKey:v,prevData:b,prevWidth:w,prevHeight:S,prevLayout:k,prevStackOffset:$,prevMargin:C,prevChildren:x})}if(!i2(x,y.prevChildren)){var D,F,j,G,Y=Yo(x,lp),X=Y&&(D=(F=Y.props)===null||F===void 0?void 0:F.startIndex)!==null&&D!==void 0?D:I,ee=Y&&(j=(G=Y.props)===null||G===void 0?void 0:G.endIndex)!==null&&j!==void 0?j:E,ie=X!==I||ee!==E,se=!lt(b),de=se&&!ie?y.updateId:y.updateId+1;return ae(ae({updateId:de},p(ae(ae({props:g},y),{},{updateId:de,dataStartIndex:X,dataEndIndex:ee}),y)),{},{prevChildren:x,dataStartIndex:X,dataEndIndex:ee})}return null}),Ue(h,"renderActiveDot",function(g,y,v){var b;return N.isValidElement(g)?b=N.cloneElement(g,y):ut(g)?b=g(y):b=K.createElement(mee,y),K.createElement(xn,{className:"recharts-active-dot",key:v},b)});var m=N.forwardRef(function(y,v){return K.createElement(h,Zd({},y,{ref:v}))});return m.displayName=h.displayName,m},cpt=upt({chartName:"ScatterChart",GraphicalChild:Y0,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:W$},{axisType:"yAxis",AxisComp:U$},{axisType:"zAxis",AxisComp:V$}],formatAxisMap:Hut});function dpt(){const[t,e]=N.useState([]),[n,r]=N.useState(null),[o,s]=N.useState([]),{page:i}=jfe(),a=async()=>{if(n&&t.length>0){i.start();const u=await(await n.embed(t)).array(),c=A5e(u,t);s(c),i.finish()}};return vi(()=>{N5e().then(l=>{r(l)})},[]),M.jsxs(dO,{w:"full",as:cO,children:[M.jsx(fO,{children:""}),M.jsxs(uO,{w:"full",maxW:"lg",children:[M.jsx(rO,{value:t,onChange:e,allowCreate:!0}),M.jsx(sO,{onClick:a,leftIcon:M.jsx(Xfe,{}),children:""})]}),M.jsx(WJe,{width:"100%",height:400,children:M.jsxs(cpt,{margin:{top:20,right:20,bottom:20,left:20},children:[M.jsx(Gee,{}),M.jsx(W$,{type:"number",dataKey:"x",name:"x"}),M.jsx(U$,{type:"number",dataKey:"y",name:"y"}),M.jsx(Fi,{content:({active:l,payload:u})=>l&&u&&u.length?M.jsx(aO,{bg:"white",children:M.jsxs(lO,{children:[M.jsx(fm,{children:u[0].payload.label}),M.jsxs(fm,{children:["X: ",u[0].payload.x.toFixed(4)]}),M.jsxs(fm,{children:["Y: ",u[0].payload.y.toFixed(4)]})]})}):void 0}),M.jsx(Y0,{name:"Words",data:o,fill:"#8884d8"})]})})]})}h6(document.getElementById("root")).render(M.jsx(N.StrictMode,{children:M.jsx(tye,{children:M.jsx(dpt,{})})}));
